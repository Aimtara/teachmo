{"version":3,"file":"AIExplainability-CyXh7S-r.js","sources":["../../src/pages/AIExplainability.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { fetchAiJson } from '@/api/ai/client';\n\nexport default function AIExplainability() {\n  const { id } = useParams();\n  const [summary, setSummary] = useState(null);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    if (!id) return;\n    let isMounted = true;\n    const load = async () => {\n      try {\n        const response = await fetchAiJson(`/ai/explainability/${id}`);\n        if (isMounted) {\n          setSummary(response.summary);\n          setError('');\n        }\n      } catch (err) {\n        if (isMounted) {\n          setError('Failed to load AI interaction summary.');\n        }\n      }\n    };\n    load();\n    return () => {\n      isMounted = false;\n    };\n  }, [id]);\n\n  if (error) {\n    return <p className=\"text-sm text-red-600\">{error}</p>;\n  }\n\n  if (!summary) {\n    return <p className=\"text-sm text-gray-500\">Loading AI interaction...</p>;\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div>\n        <h1 className=\"text-2xl font-semibold text-gray-900\">AI Interaction Summary</h1>\n        <p className=\"text-sm text-gray-600\">Review how this response was generated.</p>\n      </div>\n\n      <div className=\"rounded-lg border bg-white p-4 shadow-sm space-y-3\">\n        <p>\n          <strong>Model:</strong> {summary.model ?? '—'}\n        </p>\n        <p>\n          <strong>Total tokens:</strong> {summary.totalTokens ?? '—'}\n        </p>\n        <p>\n          <strong>Cost (USD):</strong>{' '}\n          {summary.costUsd != null ? `$${Number(summary.costUsd).toFixed(4)}` : '—'}\n        </p>\n        <p>\n          <strong>Risk score:</strong> {summary.riskScore ?? '—'}\n        </p>\n        {summary.flags?.length ? (\n          <p>\n            <strong>Flags:</strong> {summary.flags.join(', ')}\n          </p>\n        ) : null}\n        <p>\n          <strong>Created:</strong>{' '}\n          {summary.createdAt ? new Date(summary.createdAt).toLocaleString() : '—'}\n        </p>\n      </div>\n\n      <div className=\"rounded-lg border bg-white p-4 shadow-sm space-y-2\">\n        <h2 className=\"text-lg font-semibold text-gray-900\">Review status</h2>\n        {summary.review ? (\n          <>\n            <p>\n              <strong>Status:</strong> {summary.review.status ?? '—'}\n            </p>\n            <p>\n              <strong>Reason:</strong> {summary.review.reason ?? '—'}\n            </p>\n            {summary.review.notes ? (\n              <p>\n                <strong>Notes:</strong> {summary.review.notes}\n              </p>\n            ) : null}\n          </>\n        ) : (\n          <p className=\"text-sm text-gray-600\">Not yet reviewed.</p>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["AIExplainability","id","useParams","summary","setSummary","useState","error","setError","useEffect","isMounted","response","fetchAiJson","jsx","jsxs","_a","Fragment"],"mappings":"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"}