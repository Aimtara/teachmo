{"version":3,"file":"TeacherClasses-zINahfb9.js","sources":["../../src/pages/TeacherClasses.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useTranslation } from '@/components/shared/InternationalizationProvider';\nimport ProtectedRoute from '@/components/shared/ProtectedRoute';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Link } from 'react-router-dom';\nimport { createPageUrl } from '@/utils';\nimport { ultraMinimalToast } from '@/components/shared/UltraMinimalToast';\nimport { BookOpen, MessageCircle, Users } from 'lucide-react';\nimport { useAuth } from '@/components/hooks/useAuth';\nimport { Course, Enrollment } from '@/api/entities';\n\n/**\n * TeacherClasses page\n *\n * This page lists the classes assigned to the logged-in teacher. It will fetch\n * courses from the Base44 backend by filtering courses where the teacher_id matches\n * the current user's id. It then displays a card for each class with its name,\n * number of enrolled students, and a link to view assignments for that class.\n *\n * If no classes are found, an empty state encourages teachers to connect Google\n * Classroom or reach out for help.\n */\nexport default function TeacherClasses() {\n  const { user } = useAuth();\n  const [loading, setLoading] = useState(true);\n  const [classes, setClasses] = useState([]);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const fetchClasses = async () => {\n      if (!user) return;\n      setLoading(true);\n      try {\n        // Fetch courses taught by this teacher\n        const courses = await Course.filter({ teacher_id: user.id });\n        // For each course, determine student count via Enrollment entity\n        const classData = await Promise.all(\n          (courses || []).map(async (course) => {\n            try {\n              const enrollments = await Enrollment.filter({ course_id: course.id });\n              return {\n                ...course,\n                studentCount: Array.isArray(enrollments) ? enrollments.length : 0\n              };\n            } catch (err) {\n              console.error('Failed to load enrollments for course', course.name, err);\n              return {\n                ...course,\n                studentCount: 0\n              };\n            }\n          })\n        );\n        setClasses(classData);\n      } catch (error) {\n        console.error('Failed to fetch teacher classes:', error);\n        ultraMinimalToast('Unable to load classes. Please try again later.', 'error');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchClasses();\n  }, [user]);\n\n  const handleContactSupport = () => {\n    ultraMinimalToast('Support chat coming soon! For now, email support@teachmo.com', 'info');\n  };\n\n  return (\n    <ProtectedRoute allowedRoles={['teacher', 'school_admin', 'district_admin', 'system_admin', 'admin']} requireAuth={true}>\n      <div className=\"min-h-screen bg-warm-cream p-6\">\n        <div className=\"max-w-7xl mx-auto space-y-8\">\n          <header>\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">{t('teacher_classes.title')}</h1>\n            <p className=\"text-gray-600\">{t('teacher_classes.description')}</p>\n          </header>\n\n          {/* Show loading state */}\n          {loading && (\n            <p className=\"text-gray-500\">Loading your classesâ€¦</p>\n          )}\n\n          {/* Empty state or help section */}\n          {!loading && (!classes || classes.length === 0) && (\n            <Card className=\"bg-blue-50 border-blue-200\">\n              <CardHeader>\n                <CardTitle className=\"text-xl font-bold text-gray-900\">{t('teacher_classes.empty_title')}</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <p className=\"text-gray-700\">\n                  {t('teacher_classes.empty_description')}\n                </p>\n                <div className=\"flex gap-4 flex-wrap\">\n                  <Link to={createPageUrl('HelpCenter')}>\n                    <Button variant=\"outline\" className=\"gap-2\" aria-label={t('teacher_classes.setup_guide')}>\n                      <BookOpen className=\"w-4 h-4\" />\n                      {t('teacher_classes.setup_guide')}\n                    </Button>\n                  </Link>\n                  <Button\n                    variant=\"outline\"\n                    className=\"gap-2\"\n                    onClick={handleContactSupport}\n                    aria-label={t('teacher_classes.contact_support')}\n                  >\n                    <MessageCircle className=\"w-4 h-4\" />\n                    {t('teacher_classes.contact_support')}\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Display classes if available */}\n          {(!loading) && classes && classes.length > 0 && (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {classes.map((cls) => (\n                <Card key={cls.id} className=\"bg-white border border-gray-200 shadow-sm\">\n                  <CardContent className=\"p-4 space-y-4\">\n                    <div className=\"flex items-center gap-2\">\n                      <Users className=\"w-5 h-5 text-blue-600\" />\n                      <h3 className=\"font-semibold text-lg text-gray-900 line-clamp-1\">{cls.name}</h3>\n                    </div>\n                    <p className=\"text-sm text-gray-600\">\n                      {t('teacher_classes.students')}: {cls.studentCount}\n                    </p>\n                    <div className=\"flex gap-2\">\n                      <Link to={createPageUrl(`TeacherAssignments?course_id=${cls.id}`)}>\n                        <Button size=\"sm\" variant=\"outline\">View Assignments</Button>\n                      </Link>\n                      <Link to={createPageUrl(`TeacherMessages?course_id=${cls.id}`)}>\n                        <Button size=\"sm\" variant=\"outline\">Message Parents</Button>\n                      </Link>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </ProtectedRoute>\n  );\n}\n"],"names":["TeacherClasses","user","useAuth","loading","setLoading","useState","classes","setClasses","t","useTranslation","useEffect","courses","Course","classData","course","enrollments","Enrollment","err","error","ultraMinimalToast","handleContactSupport","ProtectedRoute","jsxs","jsx","Card","CardHeader","CardTitle","CardContent","Link","createPageUrl","Button","BookOpen","MessageCircle","cls","Users"],"mappings":"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"}