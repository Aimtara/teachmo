import{c as bt,Y as Z,ax as Lt,aT as zt,aU as Ht,r as x,aJ as Me,E as O,aV as Ut,aW as K,aa as qe,j as g,O as H,a9 as ue,h as qt,B as oe,ai as Vt,ae as Gt,Q as Yt,w as Xt}from"./index-CXW08ga6.js";import{i as Kt}from"./tiny-invariant-BaFNuDhB.js";import{a as Jt,e as Ve}from"./endOfMonth-7NpcYNlk.js";import{a as xe,i as J,p as Ge}from"./parseISO-BL2JKQ2d.js";import{L as Qt}from"./loader-circle-fFoU9KsL.js";import{c as ve,A as Zt}from"./entities-CLCXHT4z.js";import"./messaging-cshogndc.js";import{I as se}from"./input-DQ0nv64R.js";import{T as er}from"./textarea-MrBTA2MH.js";import{L as ie}from"./label-C454ix-G.js";import{S as tr,a as rr,b as nr,c as or,d as Ye}from"./select-CevpuT8Q.js";import{c as sr}from"./cn-2dOUpm6k.js";import{A as ir}from"./index-CwPyMFvH.js";import{C as ar}from"./calendar-DD8JTmH3.js";import{C as lr}from"./clock-Bt1pb8u7.js";import{T as cr,a as ur}from"./trash-2-B9NohyIN.js";import{L as dr}from"./link-DySdmdlQ.js";import{l as fr}from"./events-kvSPBKui.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],mr=bt("Save",pr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],hr=bt("User",gr);function br(e){const t=Z(e);return t.setDate(1),t.setHours(0,0,0,0),t}function yr(e,t){var c,a;const r=Lt(),o=r.weekStartsOn??((a=(c=r.locale)==null?void 0:c.options)==null?void 0:a.weekStartsOn)??0,s=Z(e),n=s.getDay(),i=(n<o?-7:0)+6-(n-o);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}function Xe(e){return Z(e).getDay()}function xr(e,t){const r=Z(e),o=Z(t);return r.getFullYear()===o.getFullYear()&&r.getMonth()===o.getMonth()}var Se={exports:{}},D={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ke;function vr(){if(Ke)return D;Ke=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,o=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,n=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,c=e?Symbol.for("react.context"):60110,a=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,m=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,y=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,S=e?Symbol.for("react.block"):60121,d=e?Symbol.for("react.fundamental"):60117,w=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function N(l){if(typeof l=="object"&&l!==null){var b=l.$$typeof;switch(b){case t:switch(l=l.type,l){case a:case u:case o:case n:case s:case f:return l;default:switch(l=l&&l.$$typeof,l){case c:case m:case v:case y:case i:return l;default:return b}}case r:return b}}}function p(l){return N(l)===u}return D.AsyncMode=a,D.ConcurrentMode=u,D.ContextConsumer=c,D.ContextProvider=i,D.Element=t,D.ForwardRef=m,D.Fragment=o,D.Lazy=v,D.Memo=y,D.Portal=r,D.Profiler=n,D.StrictMode=s,D.Suspense=f,D.isAsyncMode=function(l){return p(l)||N(l)===a},D.isConcurrentMode=p,D.isContextConsumer=function(l){return N(l)===c},D.isContextProvider=function(l){return N(l)===i},D.isElement=function(l){return typeof l=="object"&&l!==null&&l.$$typeof===t},D.isForwardRef=function(l){return N(l)===m},D.isFragment=function(l){return N(l)===o},D.isLazy=function(l){return N(l)===v},D.isMemo=function(l){return N(l)===y},D.isPortal=function(l){return N(l)===r},D.isProfiler=function(l){return N(l)===n},D.isStrictMode=function(l){return N(l)===s},D.isSuspense=function(l){return N(l)===f},D.isValidElementType=function(l){return typeof l=="string"||typeof l=="function"||l===o||l===u||l===n||l===s||l===f||l===h||typeof l=="object"&&l!==null&&(l.$$typeof===v||l.$$typeof===y||l.$$typeof===i||l.$$typeof===c||l.$$typeof===m||l.$$typeof===d||l.$$typeof===w||l.$$typeof===C||l.$$typeof===S)},D.typeOf=N,D}var Je;function Sr(){return Je||(Je=1,Se.exports=vr()),Se.exports}var we,Qe;function wr(){if(Qe)return we;Qe=1;var e=Sr(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},n={};n[e.ForwardRef]=o,n[e.Memo]=s;function i(v){return e.isMemo(v)?s:n[v.$$typeof]||t}var c=Object.defineProperty,a=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;function y(v,S,d){if(typeof S!="string"){if(h){var w=f(S);w&&w!==h&&y(v,w,d)}var C=a(S);u&&(C=C.concat(u(S)));for(var N=i(v),p=i(S),l=0;l<C.length;++l){var b=C[l];if(!r[b]&&!(d&&d[b])&&!(p&&p[b])&&!(N&&N[b])){var I=m(S,b);try{c(v,b,I)}catch{}}}}return v}return we=y,we}var Cr=wr();const Ze=zt(Cr);var Nr=Ht();function Dr(e){e()}let yt=Dr;const Er=e=>yt=e,Ir=()=>yt,et=Symbol.for("react-redux-context"),tt=typeof globalThis<"u"?globalThis:{};function Or(){var e;if(!x.createContext)return{};const t=(e=tt[et])!=null?e:tt[et]=new Map;let r=t.get(x.createContext);return r||(r=x.createContext(null),t.set(x.createContext,r)),r}const Pr=Or(),Rr=()=>{throw new Error("uSES not initialized!")};function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},V.apply(null,arguments)}function xt(e,t){if(e==null)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;r[o]=e[o]}return r}var Ce={exports:{}},E={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rt;function $r(){if(rt)return E;rt=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),n=Symbol.for("react.provider"),i=Symbol.for("react.context"),c=Symbol.for("react.server_context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function S(d){if(typeof d=="object"&&d!==null){var w=d.$$typeof;switch(w){case e:switch(d=d.type,d){case r:case s:case o:case u:case m:return d;default:switch(d=d&&d.$$typeof,d){case c:case i:case a:case h:case f:case n:return d;default:return w}}case t:return w}}}return E.ContextConsumer=i,E.ContextProvider=n,E.Element=e,E.ForwardRef=a,E.Fragment=r,E.Lazy=h,E.Memo=f,E.Portal=t,E.Profiler=s,E.StrictMode=o,E.Suspense=u,E.SuspenseList=m,E.isAsyncMode=function(){return!1},E.isConcurrentMode=function(){return!1},E.isContextConsumer=function(d){return S(d)===i},E.isContextProvider=function(d){return S(d)===n},E.isElement=function(d){return typeof d=="object"&&d!==null&&d.$$typeof===e},E.isForwardRef=function(d){return S(d)===a},E.isFragment=function(d){return S(d)===r},E.isLazy=function(d){return S(d)===h},E.isMemo=function(d){return S(d)===f},E.isPortal=function(d){return S(d)===t},E.isProfiler=function(d){return S(d)===s},E.isStrictMode=function(d){return S(d)===o},E.isSuspense=function(d){return S(d)===u},E.isSuspenseList=function(d){return S(d)===m},E.isValidElementType=function(d){return typeof d=="string"||typeof d=="function"||d===r||d===s||d===o||d===u||d===m||d===y||typeof d=="object"&&d!==null&&(d.$$typeof===h||d.$$typeof===f||d.$$typeof===n||d.$$typeof===i||d.$$typeof===a||d.$$typeof===v||d.getModuleId!==void 0)},E.typeOf=S,E}var nt;function Ar(){return nt||(nt=1,Ce.exports=$r()),Ce.exports}var jr=Ar();const Mr=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Tr(e,t,r,o,{areStatesEqual:s,areOwnPropsEqual:n,areStatePropsEqual:i}){let c=!1,a,u,m,f,h;function y(C,N){return a=C,u=N,m=e(a,u),f=t(o,u),h=r(m,f,u),c=!0,h}function v(){return m=e(a,u),t.dependsOnOwnProps&&(f=t(o,u)),h=r(m,f,u),h}function S(){return e.dependsOnOwnProps&&(m=e(a,u)),t.dependsOnOwnProps&&(f=t(o,u)),h=r(m,f,u),h}function d(){const C=e(a,u),N=!i(C,m);return m=C,N&&(h=r(m,f,u)),h}function w(C,N){const p=!n(N,u),l=!s(C,a,N,u);return a=C,u=N,p&&l?v():p?S():l?d():h}return function(N,p){return c?w(N,p):y(N,p)}}function _r(e,t){let{initMapStateToProps:r,initMapDispatchToProps:o,initMergeProps:s}=t,n=xt(t,Mr);const i=r(e,n),c=o(e,n),a=s(e,n);return Tr(i,c,a,e,n)}function Fr(e,t){const r={};for(const o in e){const s=e[o];typeof s=="function"&&(r[o]=(...n)=>t(s(...n)))}return r}function Pe(e){return function(r){const o=e(r);function s(){return o}return s.dependsOnOwnProps=!1,s}}function ot(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function vt(e,t){return function(o,{displayName:s}){const n=function(c,a){return n.dependsOnOwnProps?n.mapToProps(c,a):n.mapToProps(c,void 0)};return n.dependsOnOwnProps=!0,n.mapToProps=function(c,a){n.mapToProps=e,n.dependsOnOwnProps=ot(e);let u=n(c,a);return typeof u=="function"&&(n.mapToProps=u,n.dependsOnOwnProps=ot(u),u=n(c,a)),u},n}}function Te(e,t){return(r,o)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${o.wrappedComponentName}.`)}}function kr(e){return e&&typeof e=="object"?Pe(t=>Fr(e,t)):e?typeof e=="function"?vt(e):Te(e,"mapDispatchToProps"):Pe(t=>({dispatch:t}))}function Br(e){return e?typeof e=="function"?vt(e):Te(e,"mapStateToProps"):Pe(()=>({}))}function Wr(e,t,r){return V({},r,e,t)}function Lr(e){return function(r,{displayName:o,areMergedPropsEqual:s}){let n=!1,i;return function(a,u,m){const f=e(a,u,m);return n?s(f,i)||(i=f):(n=!0,i=f),i}}}function zr(e){return e?typeof e=="function"?Lr(e):Te(e,"mergeProps"):()=>Wr}function Hr(){const e=Ir();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let o=t;for(;o;)o.callback(),o=o.next})},get(){let o=[],s=t;for(;s;)o.push(s),s=s.next;return o},subscribe(o){let s=!0,n=r={callback:o,next:null,prev:r};return n.prev?n.prev.next=n:t=n,function(){!s||t===null||(s=!1,n.next?n.next.prev=n.prev:r=n.prev,n.prev?n.prev.next=n.next:t=n.next)}}}}const st={notify(){},get:()=>[]};function Ur(e,t){let r,o=st,s=0,n=!1;function i(S){m();const d=o.subscribe(S);let w=!1;return()=>{w||(w=!0,d(),f())}}function c(){o.notify()}function a(){v.onStateChange&&v.onStateChange()}function u(){return n}function m(){s++,r||(r=t?t.addNestedSub(a):e.subscribe(a),o=Hr())}function f(){s--,r&&s===0&&(r(),r=void 0,o.clear(),o=st)}function h(){n||(n=!0,m())}function y(){n&&(n=!1,f())}const v={addNestedSub:i,notifyNestedSubs:c,handleChangeWrapper:a,isSubscribed:u,trySubscribe:h,tryUnsubscribe:y,getListeners:()=>o};return v}const qr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Re=qr?x.useLayoutEffect:x.useEffect;function it(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Ne(e,t){if(it(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!it(e[r[s]],t[r[s]]))return!1;return!0}const Vr=["reactReduxForwardedRef"];let St=Rr;const Gr=e=>{St=e},Yr=[null,null];function Xr(e,t,r){Re(()=>e(...t),r)}function Kr(e,t,r,o,s,n){e.current=o,r.current=!1,s.current&&(s.current=null,n())}function Jr(e,t,r,o,s,n,i,c,a,u,m){if(!e)return()=>{};let f=!1,h=null;const y=()=>{if(f||!c.current)return;const S=t.getState();let d,w;try{d=o(S,s.current)}catch(C){w=C,h=C}w||(h=null),d===n.current?i.current||u():(n.current=d,a.current=d,i.current=!0,m())};return r.onStateChange=y,r.trySubscribe(),y(),()=>{if(f=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h}}function Qr(e,t){return e===t}function wt(e,t,r,{pure:o,areStatesEqual:s=Qr,areOwnPropsEqual:n=Ne,areStatePropsEqual:i=Ne,areMergedPropsEqual:c=Ne,forwardRef:a=!1,context:u=Pr}={}){const m=u,f=Br(e),h=kr(t),y=zr(r),v=!!e;return d=>{const w=d.displayName||d.name||"Component",C=`Connect(${w})`,N={shouldHandleStateChanges:v,displayName:C,wrappedComponentName:w,WrappedComponent:d,initMapStateToProps:f,initMapDispatchToProps:h,initMergeProps:y,areStatesEqual:s,areStatePropsEqual:i,areOwnPropsEqual:n,areMergedPropsEqual:c};function p(I){const[R,B,T]=x.useMemo(()=>{const{reactReduxForwardedRef:L}=I,X=xt(I,Vr);return[I.context,L,X]},[I]),P=x.useMemo(()=>R&&R.Consumer&&jr.isContextConsumer(x.createElement(R.Consumer,null))?R:m,[R,m]),A=x.useContext(P),W=!!I.store&&!!I.store.getState&&!!I.store.dispatch,te=!!A&&!!A.store,F=W?I.store:A.store,re=te?A.getServerState:F.getState,pe=x.useMemo(()=>_r(F.dispatch,N),[F]),[G,Le]=x.useMemo(()=>{if(!v)return Yr;const L=Ur(F,W?void 0:A.subscription),X=L.notifyNestedSubs.bind(L);return[L,X]},[F,W,A]),ze=x.useMemo(()=>W?A:V({},A,{subscription:G}),[W,A,G]),me=x.useRef(),ge=x.useRef(T),Y=x.useRef(),He=x.useRef(!1);x.useRef(!1);const he=x.useRef(!1),be=x.useRef();Re(()=>(he.current=!0,()=>{he.current=!1}),[]);const Ue=x.useMemo(()=>()=>Y.current&&T===ge.current?Y.current:pe(F.getState(),T),[F,T]),Wt=x.useMemo(()=>X=>G?Jr(v,F,G,pe,ge,me,He,he,Y,Le,X):()=>{},[G]);Xr(Kr,[ge,me,He,T,Y,Le]);let ne;try{ne=St(Wt,Ue,re?()=>pe(re(),T):Ue)}catch(L){throw be.current&&(L.message+=`
The error may be correlated with this previous error:
${be.current.stack}

`),L}Re(()=>{be.current=void 0,Y.current=void 0,me.current=ne});const ye=x.useMemo(()=>x.createElement(d,V({},ne,{ref:B})),[B,d,ne]);return x.useMemo(()=>v?x.createElement(P.Provider,{value:ze},ye):ye,[P,ye,ze])}const b=x.memo(p);if(b.WrappedComponent=d,b.displayName=p.displayName=C,a){const R=x.forwardRef(function(T,P){return x.createElement(b,V({},T,{reactReduxForwardedRef:P}))});return R.displayName=C,R.WrappedComponent=d,Ze(R,d)}return Ze(b,d)}}Gr(Nr.useSyncExternalStore);Er(Me.unstable_batchedUpdates);function Zr(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Ct(e,t){var r=x.useState(function(){return{inputs:t,result:e()}})[0],o=x.useRef(!0),s=x.useRef(r),n=o.current||!!(t&&s.current.inputs&&Zr(t,s.current.inputs)),i=n?s.current:{inputs:t,result:e()};return x.useEffect(function(){o.current=!1,s.current=i},[i]),i.result}function en(e,t){return Ct(function(){return e},t)}var j=Ct,$=en,q=function(t){var r=t.top,o=t.right,s=t.bottom,n=t.left,i=o-n,c=s-r,a={top:r,right:o,bottom:s,left:n,width:i,height:c,x:n,y:r,center:{x:(o+n)/2,y:(s+r)/2}};return a},Nt=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},at=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},tn=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},De={top:0,right:0,bottom:0,left:0},_e=function(t){var r=t.borderBox,o=t.margin,s=o===void 0?De:o,n=t.border,i=n===void 0?De:n,c=t.padding,a=c===void 0?De:c,u=q(Nt(r,s)),m=q(at(r,i)),f=q(at(m,a));return{marginBox:u,borderBox:q(r),paddingBox:m,contentBox:f,margin:s,border:i,padding:a}},k=function(t){var r=t.slice(0,-2),o=t.slice(-2);if(o!=="px")return 0;var s=Number(r);return isNaN(s)&&Kt(),s},rn=function(){return{x:window.pageXOffset,y:window.pageYOffset}},nn=function(t,r){var o=t.borderBox,s=t.border,n=t.margin,i=t.padding,c=tn(o,r);return _e({borderBox:c,border:s,margin:n,padding:i})},$e=function(t,r){return r===void 0&&(r=rn()),nn(t,r)},Dt=function(t,r){var o={top:k(r.marginTop),right:k(r.marginRight),bottom:k(r.marginBottom),left:k(r.marginLeft)},s={top:k(r.paddingTop),right:k(r.paddingRight),bottom:k(r.paddingBottom),left:k(r.paddingLeft)},n={top:k(r.borderTopWidth),right:k(r.borderRightWidth),bottom:k(r.borderBottomWidth),left:k(r.borderLeftWidth)};return _e({borderBox:t,margin:o,padding:s,border:n})},Et=function(t){var r=t.getBoundingClientRect(),o=window.getComputedStyle(t);return Dt(r,o)},lt=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function on(e,t){return!!(e===t||lt(e)&&lt(t))}function sn(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!on(e[r],t[r]))return!1;return!0}function M(e,t){t===void 0&&(t=sn);var r=null;function o(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var i=e.apply(this,s);return r={lastResult:i,lastArgs:s,lastThis:this},i}return o.clear=function(){r=null},o}var an=function(t){var r=[],o=null,s=function(){for(var i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];r=c,!o&&(o=requestAnimationFrame(function(){o=null,t.apply(void 0,r)}))};return s.cancel=function(){o&&(cancelAnimationFrame(o),o=null)},s};function It(e,t){}It.bind(null,"warn");It.bind(null,"error");function ln(){}function cn(e,t){return{...e,...t}}function un(e,t,r){const o=t.map(s=>{const n=cn(r,s.options);return e.addEventListener(s.eventName,s.fn,n),function(){e.removeEventListener(s.eventName,s.fn,n)}});return function(){o.forEach(n=>{n()})}}const dn="Invariant failed";class de extends Error{}de.prototype.toString=function(){return this.message};function _(e,t){throw new de(dn)}class es extends O.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=ln,this.onWindowError=r=>{const o=this.getCallbacks();o.isDragging()&&o.tryAbort(),r.error instanceof de&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=un(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof de){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const U={x:0,y:0},fn=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),pn=(e,t)=>e.x===t.x&&e.y===t.y,mn=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),gn=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t};var hn=((e,t)=>{const r=q({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r});const bn=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),yn={top:0,right:0,bottom:0,left:0},xn=(e,t)=>t?bn(e,t.scroll.diff.displacement):e,vn=(e,t,r)=>e,Sn=(e,t)=>t&&t.shouldClipSubject?hn(t.pageMarginBox,e):q(e);var wn=(({page:e,withPlaceholder:t,axis:r,frame:o})=>{const s=xn(e.marginBox,o),n=vn(s),i=Sn(n,o);return{page:e,withPlaceholder:t,active:i}});M(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{}));M(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{}));const Cn=M(e=>Object.values(e)),Nn=M(e=>Object.values(e));M((e,t)=>Nn(t).filter(o=>e===o.descriptor.droppableId).sort((o,s)=>o.descriptor.index-s.descriptor.index));function Dn(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}M((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id));const En={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},In={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};M(function(t,r){const o=r[t.line];return{value:o,point:gn(t.line,o)}});var le=(e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null});const On=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Pn=()=>({type:"DROP_ANIMATION_FINISHED",payload:null}),Fe={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ee={opacity:{drop:0,combining:.7},scale:{drop:.75}},Rn={outOfTheWay:.2},z=`${Rn.outOfTheWay}s ${Fe.outOfTheWay}`,ce={fluid:`opacity ${z}`,snap:`transform ${z}, opacity ${z}`,drop:e=>{const t=`${e}s ${Fe.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${z}`,placeholder:`height ${z}, width ${z}, margin ${z}`},ct=e=>pn(e,U)?void 0:`translate(${e.x}px, ${e.y}px)`,Ae={moveTo:ct,drop:(e,t)=>{const r=ct(e);if(r)return t?`${r} scale(${ee.scale.drop})`:r}};var Ot=(({scrollHeight:e,scrollWidth:t,height:r,width:o})=>{const s=fn({x:t,y:e},{x:o,y:r});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}}),$n=(()=>{const e=document.documentElement;return e||_(),e}),An=(()=>{const e=$n();return Ot({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})});M(e=>Cn(e).filter(t=>!(!t.isEnabled||!t.frame)));const jn="data-rfd",ut={contextId:`${jn}-scroll-container-context-id`},Mn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?x.useLayoutEffect:x.useEffect;var Q=Mn,Pt=O.createContext(null);let Tn=0;const Rt={separator:"::"};function _n(e,t=Rt){return j(()=>`${e}${t.separator}${Tn++}`,[t.separator,e])}function Fn(e,t=Rt){const r=O.useId();return j(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}var $t="useId"in O?Fn:_n,ke=O.createContext(null);function kn(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),t}function Be(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const dt={dragging:5e3,dropAnimating:4500},Bn=(e,t)=>t?ce.drop(t.duration):e?ce.snap:ce.fluid,Wn=(e,t)=>{if(e)return t?ee.opacity.drop:ee.opacity.combining},Ln=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function zn(e){const r=e.dimension.client,{offset:o,combineWith:s,dropping:n}=e,i=!!s,c=Ln(e),a=!!n,u=a?Ae.drop(o,i):Ae.moveTo(o);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Bn(c,n),transform:u,opacity:Wn(i,a),zIndex:a?dt.dropAnimating:dt.dragging,pointerEvents:"none"}}function Hn(e){return{transform:Ae.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function Un(e){return e.type==="DRAGGING"?zn(e):Hn(e)}function qn(e,t,r=U){const o=window.getComputedStyle(t),s=t.getBoundingClientRect(),n=Dt(s,o),i=$e(n,r),c={client:n,tagName:t.tagName.toLowerCase(),display:o.display},a={x:n.marginBox.width,y:n.marginBox.height};return{descriptor:e,placeholder:c,displaceBy:a,client:n,page:i}}function Vn(e){const t=$t("draggable"),{descriptor:r,registry:o,getDraggableRef:s,canDragInteractiveElements:n,shouldRespectForcePress:i,isEnabled:c}=e,a=j(()=>({canDragInteractiveElements:n,shouldRespectForcePress:i,isEnabled:c}),[n,c,i]),u=$(y=>{const v=s();return v||_(),qn(r,v,y)},[r,s]),m=j(()=>({uniqueId:t,descriptor:r,options:a,getDimension:u}),[r,u,a,t]),f=x.useRef(m),h=x.useRef(!0);Q(()=>(o.draggable.register(f.current),()=>o.draggable.unregister(f.current)),[o.draggable]),Q(()=>{if(h.current){h.current=!1;return}const y=f.current;f.current=m,o.draggable.update(m,y)},[m,o.draggable])}var We=O.createContext(null);function fe(e){const t=x.useContext(e);return t||_(),t}function Gn(e){e.preventDefault()}const Yn=e=>{const t=x.useRef(null),r=$((b=null)=>{t.current=b},[]),o=$(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:n,registry:i}=fe(ke),{type:c,droppableId:a}=fe(We),u=j(()=>({id:e.draggableId,index:e.index,type:c,droppableId:a}),[e.draggableId,e.index,c,a]),{children:m,draggableId:f,isEnabled:h,shouldRespectForcePress:y,canDragInteractiveElements:v,isClone:S,mapped:d,dropAnimationFinished:w}=e;if(!S){const b=j(()=>({descriptor:u,registry:i,getDraggableRef:o,canDragInteractiveElements:v,shouldRespectForcePress:y,isEnabled:h}),[u,i,o,v,y,h]);Vn(b)}const C=j(()=>h?{tabIndex:0,role:"button","aria-describedby":n,"data-rfd-drag-handle-draggable-id":f,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:Gn}:null,[s,n,f,h]),N=$(b=>{d.type==="DRAGGING"&&d.dropping&&b.propertyName==="transform"&&(O.version.startsWith("16")||O.version.startsWith("17")?w():Me.flushSync(w))},[w,d]),p=j(()=>{const b=Un(d),I=d.type==="DRAGGING"&&d.dropping?N:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":f,style:b,onTransitionEnd:I},dragHandleProps:C}},[s,C,f,d,N,r]),l=j(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return O.createElement(O.Fragment,null,m(p,d.snapshot,l))};var Xn=Yn,At=((e,t)=>e===t),jt=(e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null});const Kn=e=>e.combine?e.combine.draggableId:null,Jn=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function Qn(){const e=M((s,n)=>({x:s,y:n})),t=M((s,n,i=null,c=null,a=null)=>({isDragging:!0,isClone:n,isDropAnimating:!!a,dropAnimation:a,mode:s,draggingOver:i,combineWith:c,combineTargetFor:null})),r=M((s,n,i,c,a=null,u=null,m=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:a,combineWith:u,mode:n,offset:s,dimension:i,forceShouldAnimate:m,snapshot:t(n,c,a,u,null)}}));return(s,n)=>{if(Be(s)){if(s.critical.draggable.id!==n.draggableId)return null;const i=s.current.client.offset,c=s.dimensions.draggables[n.draggableId],a=le(s.impact),u=Jn(s.impact),m=s.forceShouldAnimate;return r(e(i.x,i.y),s.movementMode,c,n.isClone,a,u,m)}if(s.phase==="DROP_ANIMATING"){const i=s.completed;if(i.result.draggableId!==n.draggableId)return null;const c=n.isClone,a=s.dimensions.draggables[n.draggableId],u=i.result,m=u.mode,f=jt(u),h=Kn(u),v={duration:s.dropDuration,curve:Fe.drop,moveTo:s.newHomeClientOffset,opacity:h?ee.opacity.drop:null,scale:h?ee.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:a,dropping:v,draggingOver:f,combineWith:h,mode:m,forceShouldAnimate:null,snapshot:t(m,c,f,h,v)}}}return null}}function Mt(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const Zn={mapped:{type:"SECONDARY",offset:U,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Mt(null)}};function eo(){const e=M((i,c)=>({x:i,y:c})),t=M(Mt),r=M((i,c=null,a)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:c,shouldAnimateDisplacement:a,snapshot:t(c)}})),o=i=>i?r(U,i,!0):null,s=(i,c,a,u)=>{const m=a.displaced.visible[i],f=!!(u.inVirtualList&&u.effected[i]),h=Dn(a),y=h&&h.draggableId===i?c:null;if(!m){if(!f)return o(y);if(a.displaced.invisible[i])return null;const d=mn(u.displacedBy.point),w=e(d.x,d.y);return r(w,y,!0)}if(f)return o(y);const v=a.displacedBy.point,S=e(v.x,v.y);return r(S,y,m.shouldAnimate)};return(i,c)=>{if(Be(i))return i.critical.draggable.id===c.draggableId?null:s(c.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const a=i.completed;return a.result.draggableId===c.draggableId?null:s(c.draggableId,a.result.draggableId,a.impact,a.afterCritical)}return null}}const to=()=>{const e=Qn(),t=eo();return(o,s)=>e(o,s)||t(o,s)||Zn},ro={dropAnimationFinished:Pn},no=wt(to,ro,null,{context:Pt,areStatePropsEqual:At})(Xn);var oo=no;function so(e){return fe(We).isUsingCloneFor===e.draggableId&&!e.isClone?null:O.createElement(oo,e)}const Tt=e=>t=>e===t,io=Tt("scroll"),ao=Tt("auto"),ft=(e,t)=>t(e.overflowX)||t(e.overflowY),lo=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return ft(r,io)||ft(r,ao)},co=()=>!1,_t=e=>e==null?null:e===document.body?co()?e:null:e===document.documentElement?null:lo(e)?e:_t(e.parentElement);var je=(e=>({x:e.scrollLeft,y:e.scrollTop}));const Ft=e=>e?window.getComputedStyle(e).position==="fixed"?!0:Ft(e.parentElement):!1;var uo=(e=>{const t=_t(e),r=Ft(e);return{closestScrollable:t,isFixedOnPage:r}}),fo=(({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:o,direction:s,client:n,page:i,closest:c})=>{const a=(()=>{if(!c)return null;const{scrollSize:h,client:y}=c,v=Ot({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:y.paddingBox.height,width:y.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:y,scrollSize:h,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:v,diff:{value:U,displacement:U}}}})(),u=s==="vertical"?En:In,m=wn({page:i,withPlaceholder:null,axis:u,frame:a});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:o,axis:u,isEnabled:t,client:n,page:i,frame:a,subject:m}});const po=(e,t)=>{const r=Et(e);if(!t||e!==t)return r;const o=r.paddingBox.top-t.scrollTop,s=r.paddingBox.left-t.scrollLeft,n=o+t.scrollHeight,i=s+t.scrollWidth,a=Nt({top:o,right:i,bottom:n,left:s},r.border);return _e({borderBox:a,margin:r.margin,border:r.border,padding:r.padding})};var mo=(({ref:e,descriptor:t,env:r,windowScroll:o,direction:s,isDropDisabled:n,isCombineEnabled:i,shouldClipSubject:c})=>{const a=r.closestScrollable,u=po(e,a),m=$e(u,o),f=(()=>{if(!a)return null;const y=Et(a),v={scrollHeight:a.scrollHeight,scrollWidth:a.scrollWidth};return{client:y,page:$e(y,o),scroll:je(a),scrollSize:v,shouldClipSubject:c}})();return fo({descriptor:t,isEnabled:!n,isCombineEnabled:i,isFixedOnPage:r.isFixedOnPage,direction:s,client:u,page:m,closest:f})});const go={passive:!1},ho={passive:!0};var pt=(e=>e.shouldPublishImmediately?go:ho);const ae=e=>e&&e.env.closestScrollable||null;function bo(e){const t=x.useRef(null),r=fe(ke),o=$t("droppable"),{registry:s,marshal:n}=r,i=kn(e),c=j(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),a=x.useRef(c),u=j(()=>M((p,l)=>{t.current||_();const b={x:p,y:l};n.updateDroppableScroll(c.id,b)}),[c.id,n]),m=$(()=>{const p=t.current;return!p||!p.env.closestScrollable?U:je(p.env.closestScrollable)},[]),f=$(()=>{const p=m();u(p.x,p.y)},[m,u]),h=j(()=>an(f),[f]),y=$(()=>{const p=t.current,l=ae(p);if(p&&l||_(),p.scrollOptions.shouldPublishImmediately){f();return}h()},[h,f]),v=$((p,l)=>{t.current&&_();const b=i.current,I=b.getDroppableRef();I||_();const R=uo(I),B={ref:I,descriptor:c,env:R,scrollOptions:l};t.current=B;const T=mo({ref:I,descriptor:c,env:R,windowScroll:p,direction:b.direction,isDropDisabled:b.isDropDisabled,isCombineEnabled:b.isCombineEnabled,shouldClipSubject:!b.ignoreContainerClipping}),P=R.closestScrollable;return P&&(P.setAttribute(ut.contextId,r.contextId),P.addEventListener("scroll",y,pt(B.scrollOptions))),T},[r.contextId,c,y,i]),S=$(()=>{const p=t.current,l=ae(p);return p&&l||_(),je(l)},[]),d=$(()=>{const p=t.current;p||_();const l=ae(p);t.current=null,l&&(h.cancel(),l.removeAttribute(ut.contextId),l.removeEventListener("scroll",y,pt(p.scrollOptions)))},[y,h]),w=$(p=>{const l=t.current;l||_();const b=ae(l);b||_(),b.scrollTop+=p.y,b.scrollLeft+=p.x},[]),C=j(()=>({getDimensionAndWatchScroll:v,getScrollWhileDragging:S,dragStopped:d,scroll:w}),[d,v,S,w]),N=j(()=>({uniqueId:o,descriptor:c,callbacks:C}),[C,c,o]);Q(()=>(a.current=N.descriptor,s.droppable.register(N),()=>{t.current&&d(),s.droppable.unregister(N)}),[C,c,d,N,n,s.droppable]),Q(()=>{t.current&&n.updateDroppableIsEnabled(a.current.id,!e.isDropDisabled)},[e.isDropDisabled,n]),Q(()=>{t.current&&n.updateDroppableIsCombineEnabled(a.current.id,e.isCombineEnabled)},[e.isCombineEnabled,n])}function Ee(){}const mt={width:0,height:0,margin:yn},yo=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?mt:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},xo=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const o=yo({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:o.width,height:o.height,marginTop:o.margin.top,marginRight:o.margin.right,marginBottom:o.margin.bottom,marginLeft:o.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?ce.placeholder:null}},vo=e=>{const t=x.useRef(null),r=$(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:o,onTransitionEnd:s,onClose:n,contextId:i}=e,[c,a]=x.useState(e.animate==="open");x.useEffect(()=>c?o!=="open"?(r(),a(!1),Ee):t.current?Ee:(t.current=setTimeout(()=>{t.current=null,a(!1)}),r):Ee,[o,c,r]);const u=$(f=>{f.propertyName==="height"&&(s(),o==="close"&&n())},[o,n,s]),m=xo({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return O.createElement(e.placeholder.tagName,{style:m,"data-rfd-placeholder-context-id":i,onTransitionEnd:u,ref:e.innerRef})};var So=O.memo(vo);class wo extends O.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const Co=e=>{const t=x.useContext(ke);t||_();const{contextId:r,isMovementAllowed:o}=t,s=x.useRef(null),n=x.useRef(null),{children:i,droppableId:c,type:a,mode:u,direction:m,ignoreContainerClipping:f,isDropDisabled:h,isCombineEnabled:y,snapshot:v,useClone:S,updateViewportMaxScroll:d,getContainerForClone:w}=e,C=$(()=>s.current,[]),N=$((P=null)=>{s.current=P},[]);$(()=>n.current,[]);const p=$((P=null)=>{n.current=P},[]),l=$(()=>{o()&&d({maxScroll:An()})},[o,d]);bo({droppableId:c,type:a,mode:u,direction:m,isDropDisabled:h,isCombineEnabled:y,ignoreContainerClipping:f,getDroppableRef:C});const b=j(()=>O.createElement(wo,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:P,data:A,animate:W})=>O.createElement(So,{placeholder:A,onClose:P,innerRef:p,animate:W,contextId:r,onTransitionEnd:l})),[r,l,e.placeholder,e.shouldAnimatePlaceholder,p]),I=j(()=>({innerRef:N,placeholder:b,droppableProps:{"data-rfd-droppable-id":c,"data-rfd-droppable-context-id":r}}),[r,c,b,N]),R=S?S.dragging.draggableId:null,B=j(()=>({droppableId:c,type:a,isUsingCloneFor:R}),[c,R,a]);function T(){if(!S)return null;const{dragging:P,render:A}=S,W=O.createElement(so,{draggableId:P.draggableId,index:P.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(te,F)=>A(te,F,P));return Ut.createPortal(W,w())}return O.createElement(We.Provider,{value:B},i(I,v),T())};var No=Co;function Do(){return document.body||_(),document.body}const gt={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Do},kt=e=>{let t={...e},r;for(r in gt)e[r]===void 0&&(t={...t,[r]:gt[r]});return t},Ie=(e,t)=>e===t.droppable.type,ht=(e,t)=>t.draggables[e.draggable.id],Eo=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=M(n=>({draggableId:n.id,type:n.type,source:{index:n.index,droppableId:n.droppableId}})),o=M((n,i,c,a,u,m)=>{const f=u.descriptor.id;if(u.descriptor.droppableId===n){const v=m?{render:m,dragging:r(u.descriptor)}:null,S={isDraggingOver:c,draggingOverWith:c?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:S,useClone:v}}if(!i)return t;if(!a)return e;const y={isDraggingOver:c,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:y,useClone:null}});return(n,i)=>{const c=kt(i),a=c.droppableId,u=c.type,m=!c.isDropDisabled,f=c.renderClone;if(Be(n)){const h=n.critical;if(!Ie(u,h))return t;const y=ht(h,n.dimensions),v=le(n.impact)===a;return o(a,m,v,v,y,f)}if(n.phase==="DROP_ANIMATING"){const h=n.completed;if(!Ie(u,h.critical))return t;const y=ht(h.critical,n.dimensions);return o(a,m,jt(h.result)===a,le(h.impact)===a,y,f)}if(n.phase==="IDLE"&&n.completed&&!n.shouldFlush){const h=n.completed;if(!Ie(u,h.critical))return t;const y=le(h.impact)===a,v=!!(h.impact.at&&h.impact.at.type==="COMBINE"),S=h.critical.droppable.id===a;return y?v?e:t:S?e:t}return t}},Io={updateViewportMaxScroll:On},Oo=wt(Eo,Io,(e,t,r)=>({...kt(r),...e,...t}),{context:Pt,areStatePropsEqual:At})(No);var Po=Oo;const Ro=({day:e,monthStart:t,onDayClick:r,children:o})=>{const s=e.toISOString().split("T")[0];return g.jsx(Po,{droppableId:`calendar-${s}`,type:"ITEM",children:(n,i)=>g.jsxs(ue.div,{ref:n.innerRef,...n.droppableProps,variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},className:`border-r border-b p-2 min-h-[120px] relative ${xr(e,t)?"bg-white":"bg-gray-50 text-gray-400"} ${J(e,new Date)?"bg-blue-50":""} ${i.isDraggedOver?"bg-green-100 border-green-300":""}`,children:[g.jsx("div",{className:`font-semibold ${J(e,new Date)?"text-blue-600":""} ${r?"cursor-pointer hover:text-blue-700":""}`,onClick:r?()=>r(e):void 0,children:H(e,"d")}),g.jsx("div",{className:"mt-1 space-y-1",children:o}),n.placeholder]})})},$o=({currentDate:e,events:t,onEventClick:r,isLoading:o,view:s,onDayClick:n,childrenData:i})=>{const[c,a]=x.useState(new Date),u=x.useRef({});x.useEffect(()=>{u.current={}},[t,s]),x.useEffect(()=>{if(s==="week"){const w=setInterval(()=>a(new Date),6e4);return()=>clearInterval(w)}},[s]);const m=br(e),f=Jt(m),h=K(m),y=yr(f),v=[];let S=h;for(;S<=y;)v.push(S),S=xe(S,1);const d=x.useCallback(w=>{const C=w.toISOString().split("T")[0];if(u.current[C])return u.current[C];const N=t.filter(p=>{if(!p||!p.start_time)return!1;const l=new Date(p.start_time);if(isNaN(l.getTime()))return!1;if(p.all_day)return J(l,w);if(!p.end_time)return!1;const b=new Date(p.end_time);return isNaN(b.getTime())?!1:l<=Ve(w)&&b>=qe(w)}).sort((p,l)=>{const b=new Date(p.start_time),I=new Date(l.start_time);return isNaN(b.getTime())&&isNaN(I.getTime())?0:isNaN(b.getTime())?1:isNaN(I.getTime())?-1:b.getTime()-I.getTime()});return u.current[C]=N,N},[t]);if(o)return g.jsx("div",{className:"flex items-center justify-center h-96",children:g.jsx(Qt,{className:"w-8 h-8 animate-spin text-gray-500"})});if(s==="week"){const w=Array.from({length:7},(l,b)=>xe(K(e),b)),C=Array.from({length:24},(l,b)=>`${b.toString().padStart(2,"0")}:00`),p=K(new Date,{weekStartsOn:0}).getTime()===K(e,{weekStartsOn:0}).getTime();return g.jsxs("div",{className:"bg-white/80 backdrop-blur-sm shadow-lg rounded-xl overflow-hidden relative",children:[g.jsxs("div",{className:"grid grid-cols-8 text-center sticky top-0 bg-white z-10",children:[g.jsx("div",{className:"w-14"}),w.map(l=>g.jsxs("div",{className:"py-2 border-l",children:[g.jsx("div",{className:`text-sm ${J(l,new Date)?"text-blue-600":""}`,children:H(l,"ccc")}),g.jsx("div",{className:`text-lg font-bold ${J(l,new Date)?"text-blue-600":""}`,children:H(l,"d")})]},l.toString()))]}),g.jsxs("div",{className:"flex h-[1200px] overflow-y-auto",children:[g.jsx("div",{className:"w-14 text-xs text-gray-500",children:C.map(l=>g.jsx("div",{className:"h-12 text-right pr-2 border-t -mt-px",children:l},l))}),g.jsxs("div",{className:"grid grid-cols-7 flex-1 relative",children:[C.map((l,b)=>g.jsx("div",{className:"col-span-7 h-12 border-t"},b)),Array.from({length:6}).map((l,b)=>g.jsx("div",{className:`row-start-1 row-span-24 h-full border-l col-start-${b+2}`},b)),p&&g.jsx("div",{className:"absolute w-full h-0.5 bg-red-500 z-20 flex items-center",style:{top:`${(c.getHours()+c.getMinutes()/60)*48}px`},children:g.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 -ml-1"})}),t.map(l=>{if(!l||!l.start_time||!l.end_time)return null;const b=new Date(l.start_time),I=new Date(l.end_time);if(isNaN(b.getTime())||isNaN(I.getTime()))return null;const R=Xe(b),B=b.getHours()+b.getMinutes()/60,P=I.getHours()+I.getMinutes()/60-B,A=K(e),W=xe(A,6);if(!(b<=Ve(W)&&I>=qe(A))||l.all_day)return null;const F=Xe(A),re=(R-F+7)%7;return g.jsxs("div",{onClick:()=>r(l),className:"absolute p-1 rounded text-xs cursor-pointer text-white truncate",style:{backgroundColor:l.color||"var(--teachmo-blue)",top:`${B*48}px`,height:`${P*48}px`,left:`${re/7*100}%`,width:`${1/7*100}%`},children:[H(b,"p")," ",l.title]},l.id)})]})]})]})}return g.jsxs("div",{className:"bg-white/80 backdrop-blur-sm shadow-lg rounded-xl overflow-hidden flex-1",children:[g.jsx("div",{className:"grid grid-cols-7 text-center font-medium text-gray-600 border-b",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(w=>g.jsx("div",{className:"py-3",children:w},w))}),g.jsx(ue.div,{className:"grid grid-cols-7 grid-rows-6",variants:{visible:{transition:{staggerChildren:.02}}},initial:"hidden",animate:"visible",children:v.map(w=>g.jsxs(Ro,{day:w,monthStart:m,onDayClick:n,children:[d(w).slice(0,3).map(C=>{const N=Array.isArray(i)?i.find(p=>p.id===C.child_id):void 0;return g.jsxs("div",{onClick:()=>r(C),className:"p-1 rounded text-xs cursor-pointer text-white truncate flex items-center gap-1",style:{backgroundColor:C.color||"var(--teachmo-blue)"},children:[N&&g.jsx("div",{className:"w-3 h-3 rounded-full bg-white/50 flex-shrink-0"}),g.jsxs("span",{className:"truncate",children:[C.all_day?"":C.start_time&&H(new Date(C.start_time),"p")," ",C.title]})]},C.id)}),d(w).length>3&&g.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["+ ",d(w).length-3," more"]})]},w.toString()))})]})},Bt=O.createContext({}),Ao=O.forwardRef(({className:e,children:t,asChild:r=!1,...o},s)=>{const{setIsOpen:n,setPosition:i,triggerRef:c,isOpen:a}=O.useContext(Bt),u=f=>{var h;if(f.preventDefault(),f.stopPropagation(),!a){const y=(h=c.current)==null?void 0:h.getBoundingClientRect();y&&i({top:y.bottom+window.scrollY+4,left:y.left+window.scrollX})}n(!a)},m=f=>{c.current=f,typeof s=="function"?s(f):s&&(s.current=f)};return r?O.cloneElement(O.Children.only(t),{ref:m,onClick:u,...o}):g.jsx("button",{type:"button",ref:m,className:e,onClick:u,...o,children:t})}),jo=O.forwardRef(({className:e,align:t="center",children:r,...o},s)=>{const{isOpen:n,setIsOpen:i,position:c,contentRef:a}=O.useContext(Bt),u=f=>{a.current=f,typeof s=="function"?s(f):s&&(s.current=f)},m=f=>{f.target.closest('button, [role="option"], [role="menuitem"]')&&i(!1)};return n?Me.createPortal(g.jsx("div",{ref:u,style:{top:`${c.top}px`,left:`${c.left}px`},className:sr("absolute z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none","animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),onClickCapture:m,...o,children:r}),document.body):null});jo.displayName="PopoverContent";Ao.displayName="PopoverTrigger";const Oe=Yt("event-modal");function Mo({event:e,user:t,onClose:r,childrenData:o,defaultChildId:s}){var N;const n=!e||!e.id,[i,c]=x.useState(n?{title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",start_time:(e==null?void 0:e.start_time)||new Date().toISOString(),end_time:(e==null?void 0:e.end_time)||new Date(new Date().getTime()+3600*1e3).toISOString(),child_id:s||((N=o==null?void 0:o[0])==null?void 0:N.id)||null,all_day:!1,resource_id:(e==null?void 0:e.resource_id)||null,resource_type:(e==null?void 0:e.resource_type)||"custom",color:(e==null?void 0:e.color)||"#6B9DC8"}:{...e}),[a,u]=x.useState(!1),[m,f]=x.useState(!1),[h,y]=x.useState(null),{toast:v}=qt();x.useEffect(()=>{e&&JSON.stringify(e)!==JSON.stringify(i)&&c(e)},[e]);const S=(p,l)=>{c(b=>({...b,[p]:l}))},d=async()=>{if(!i.title){y("Title is required.");return}u(!0),y(null);const p={...i,user_id:t.id};try{if(n){if(await ve.create(p)&&p.resource_type==="activity"&&p.resource_id)try{await Zt.update(p.resource_id,{status:"planned"})}catch(b){Oe.error("Failed to update source activity status",b)}}else await ve.update(e.id,p);r(),v({title:n?"Event Created":"Event Updated",description:`"${i.title}" has been saved.`})}catch(l){Oe.error("Failed to save event",l),y("An error occurred while saving. Please try again.")}finally{u(!1)}},w=async()=>{if(!n){f(!0);try{await ve.delete(e.id),r(),v({title:"Event Deleted",description:`"${e.title}" has been removed from your calendar.`})}catch(p){Oe.error("Failed to delete event",p),y("An error occurred while deleting. Please try again."),f(!1)}}},C=()=>{if(!i.resource_id||!i.resource_type)return null;switch(i.resource_type){case"activity":return`/activities/${i.resource_id}`;case"local_event":return`/events/${i.resource_id}`;default:return null}};return g.jsx(ir,{children:g.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 flex items-center justify-center p-4",onClick:r,children:g.jsxs(ue.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-20},className:"bg-white rounded-xl shadow-2xl w-full max-w-lg relative",onClick:p=>p.stopPropagation(),children:[g.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:n?"Create Event":"Edit Event"}),g.jsx(oe,{variant:"ghost",size:"sm",onClick:r,className:"h-8 w-8 p-0",children:g.jsx(Vt,{className:"w-5 h-5 text-gray-500"})})]}),g.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsx(se,{placeholder:"Event Title",value:i.title,onChange:p=>S("title",p.target.value),className:"text-lg font-medium"}),g.jsx(er,{placeholder:"Description",value:i.description,onChange:p=>S("description",p.target.value)}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsxs(ie,{className:"flex items-center gap-2 mb-2",children:[g.jsx(ar,{className:"w-4 h-4"})," Start Time"]}),g.jsx(se,{type:"datetime-local",value:H(Ge(i.start_time),"yyyy-MM-dd'T'HH:mm"),onChange:p=>S("start_time",new Date(p.target.value).toISOString())})]}),g.jsxs("div",{children:[g.jsxs(ie,{className:"flex items-center gap-2 mb-2",children:[g.jsx(lr,{className:"w-4 h-4"})," End Time"]}),g.jsx(se,{type:"datetime-local",value:H(Ge(i.end_time),"yyyy-MM-dd'T'HH:mm"),onChange:p=>S("end_time",new Date(p.target.value).toISOString())})]})]}),g.jsxs("div",{children:[g.jsxs(ie,{className:"flex items-center gap-2 mb-2",children:[g.jsx(hr,{className:"w-4 h-4"})," For Child"]}),g.jsxs(tr,{value:i.child_id||"",onValueChange:p=>S("child_id",p),children:[g.jsx(rr,{children:g.jsx(nr,{placeholder:"Select a child..."})}),g.jsxs(or,{children:[g.jsx(Ye,{value:null,children:"General / Family"}),o.map(p=>g.jsx(Ye,{value:p.id,children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:p.color}}),p.name]})},p.id))]})]})]}),g.jsxs("div",{children:[g.jsxs(ie,{className:"flex items-center gap-2 mb-2",children:[g.jsx(cr,{className:"w-4 h-4"})," Color"]}),g.jsx(se,{type:"color",value:i.color||"#6B9DC8",onChange:p=>S("color",p.target.value),className:"w-full h-10 p-1"})]}),C()&&g.jsx("a",{href:C(),target:"_blank",rel:"noopener noreferrer",children:g.jsxs(oe,{variant:"outline",className:"w-full gap-2",children:[g.jsx(dr,{className:"w-4 h-4"}),"View Linked ",i.resource_type]})})]}),h&&g.jsxs("div",{className:"mt-4 text-red-600 text-sm flex items-center gap-2",children:[g.jsx(Gt,{className:"w-4 h-4"}),h]})]}),g.jsxs("div",{className:"p-4 bg-gray-50 border-t flex justify-between",children:[g.jsx("div",{children:!n&&g.jsxs(oe,{variant:"destructive",onClick:w,disabled:m,children:[g.jsx(ur,{className:"w-4 h-4 mr-2"}),m?"Deleting...":"Delete"]})}),g.jsxs(oe,{onClick:d,disabled:a,style:{backgroundColor:"var(--teachmo-sage)"},children:[g.jsx(mr,{className:"w-4 h-4 mr-2"}),a?"Saving...":"Save Changes"]})]})]})})})}function ts(){const[e,t]=x.useState(new Date),[r,o]=x.useState(null),[s,n]=x.useState(!1),{data:i=[],isLoading:c}=Xt(["events",e],async()=>await fr({limit:100})||[]),a=(i||[]).map(f=>({id:f.id,title:f.title,description:f.description,start_time:f.starts_at||f.start_time,end_time:f.ends_at||f.end_time,all_day:!1,child_id:f.child_id,color:f.color||void 0})),u=f=>{t(f)},m=f=>{o(f),n(!0)};return g.jsxs("div",{className:"p-6 space-y-4",children:[g.jsx($o,{currentDate:e,events:a,view:"month",onEventClick:m,onDayClick:u,childrenData:[],isLoading:c}),s&&r&&g.jsx(Mo,{event:r,onClose:()=>{n(!1),o(null)},childrenData:[]})]})}export{ts as default};
//# sourceMappingURL=Calendar-CcrDSnfj.js.map
