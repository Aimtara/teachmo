import{c as y,Y as j,G as i,j as e,C as l,i as o,k as m,_ as f,o as h,n as p,e as g}from"./index-BPP-_OMN.js";import{S as N}from"./server-CnecnCWM.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],C=y("CircleCheck",k);function I(){var r,d;const a=j(),n=i({queryKey:["system-health-headers",a.organizationId,a.schoolId],queryFn:async()=>{const s=await p.auth.getAccessToken(),t={"Content-Type":"application/json"};return s&&(t.Authorization=`Bearer ${s}`),a.organizationId&&(t["x-teachmo-org-id"]=a.organizationId),a.schoolId&&(t["x-teachmo-school-id"]=a.schoolId),t},enabled:!a.loading}),c=i({queryKey:["system-health",n.data],enabled:!!n.data,queryFn:async()=>{const s=await fetch(`${g}/admin/system/health`,{headers:n.data});if(!s.ok)throw new Error("Failed to load system health");return s.json()}}),x=((r=c.data)==null?void 0:r.services)||[],u=((d=c.data)==null?void 0:d.dependencies)||[];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"System health"}),e.jsx("p",{className:"text-gray-600",children:"Live service status and dependency checks."})]}),e.jsx("section",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:x.map(s=>e.jsxs(l,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between",children:[e.jsx(m,{className:"text-base font-medium",children:s.name}),s.status==="ok"?e.jsx(C,{className:"h-4 w-4 text-emerald-500"}):e.jsx(f,{className:"h-4 w-4 text-amber-500"})]}),e.jsxs(h,{className:"text-sm text-gray-600",children:["Status: ",e.jsx("span",{className:"font-medium text-gray-900",children:s.status})]})]},s.name))}),e.jsx("section",{children:e.jsxs(l,{children:[e.jsx(o,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-slate-500"}),"Dependencies"]})}),e.jsx(h,{className:"space-y-3",children:u.map(s=>e.jsxs("div",{className:"flex items-center justify-between border rounded-md p-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Pending: ",s.pending??0," Â· Dead: ",s.dead??0]})]}),e.jsx("span",{className:`text-sm font-medium ${s.status==="ok"?"text-emerald-600":"text-amber-600"}`,children:s.status})]},s.name))})]})})]})}export{I as default};
//# sourceMappingURL=AdminSystemHealth-ByhLJTJ1.js.map
