import{c as y,r as p,h as S,j as e,a9 as k,C as w,i as A,o as v,af as B,B as u,H as T,ai as F}from"./index-CXW08ga6.js";import{a as $,A as z}from"./entities-CLCXHT4z.js";import"./messaging-cshogndc.js";import{S as E,u as H,a as L}from"./useDebounce-ABn6640d.js";import{I as P}from"./input-DQ0nv64R.js";import{L as D,E as M,a as R}from"./LoadingStates-vF0mXKmr.js";import{B as h}from"./badge-Dl3t65au.js";import{T as f,C as I}from"./target-kZPmE_ex.js";import{B as q,S as V}from"./sliders-horizontal-CWkCENw3.js";import{S as N}from"./Discover-D4rWGRi3.js";import"./skeleton-Tb_I7mPl.js";import"./alert-KdgI_V-I.js";import"./circle-alert-CzGZOM4y.js";import"./loader-circle-fFoU9KsL.js";import"./chevron-right-CPiZDxOX.js";import"./tabs-D--5WbS4.js";import"./cn-2dOUpm6k.js";import"./sparkles-BjNBUl13.js";import"./calendar-DD8JTmH3.js";import"./book-open-Bot6lLRm.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],O=y("Heart",G);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],U=y("Package",Q),W={creative:"bg-purple-100 text-purple-800",educational:"bg-blue-100 text-blue-800",physical:"bg-green-100 text-green-800",social:"bg-pink-100 text-pink-800",emotional:"bg-indigo-100 text-indigo-800",problem_solving:"bg-orange-100 text-orange-800",science:"bg-cyan-100 text-cyan-800",art:"bg-red-100 text-red-800",music:"bg-yellow-100 text-yellow-800",outdoor:"bg-emerald-100 text-emerald-800"},X={suggested:"bg-blue-50 text-blue-700 border-blue-200",planned:"bg-yellow-50 text-yellow-700 border-yellow-200",completed:"bg-green-50 text-green-700 border-green-200",skipped:"bg-gray-50 text-gray-700 border-gray-200"};function Z({activity:s,onDetailsClick:d,onPlanClick:m,user:t}){var a;const[x,r]=p.useState(!1),{toast:n}=S(),g=async i=>{i.stopPropagation();const o=x;r(!o);try{o?n({title:"Bookmark removed."}):(await $.create({resource_id:s.id,resource_type:"activity"}),n({title:"Bookmarked!",description:`"${s.title}" saved to your library.`}))}catch(b){r(o),console.error("Bookmark operation failed:",b),n({variant:"destructive",title:"Oops!",description:"Could not save bookmark. Please try again."})}};return e.jsx(e.Fragment,{children:e.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},whileHover:{y:-4,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},transition:{duration:.2},className:"h-full",children:e.jsxs(w,{className:"border-0 shadow-lg bg-white/90 backdrop-blur-sm h-full flex flex-col group",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsxs(A,{className:"pb-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-2 gap-2",children:e.jsxs("div",{className:"flex flex-wrap gap-1.5 min-w-0 flex-1",children:[e.jsx(h,{className:W[s.category]||"bg-gray-100 text-gray-900",children:(a=s.category)==null?void 0:a.replace(/_/g," ")}),e.jsx(h,{variant:"outline",className:X[s.status],children:s.status}),s.duration&&e.jsx(h,{variant:"outline",className:"bg-blue-50 text-blue-800 border-blue-200 text-xs",children:s.duration}),s.materials_needed&&s.materials_needed.length===0&&e.jsx(h,{variant:"outline",className:"bg-green-50 text-green-800 border-green-200 text-xs",children:"No materials"}),s.is_sponsored&&e.jsxs(h,{className:"bg-yellow-100 text-yellow-900 border border-yellow-200 text-xs",children:[e.jsx(E,{className:"w-3 h-3 mr-1","aria-hidden":"true"}),"Sponsored"]})]})}),e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-base sm:text-lg text-gray-900 leading-tight group-hover:text-blue-600 transition-colors line-clamp-2",children:s.title})})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed line-clamp-3",children:s.description}),s.materials_needed&&s.materials_needed.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-800 mb-2 flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3 flex-shrink-0","aria-hidden":"true"}),"Materials (",s.materials_needed.length,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.materials_needed.slice(0,3).map((i,o)=>e.jsx(h,{variant:"outline",className:"text-xs bg-gray-50 truncate max-w-20",children:i},o)),s.materials_needed.length>3&&e.jsxs(h,{variant:"outline",className:"text-xs bg-gray-50",children:["+",s.materials_needed.length-3]})]})]}),s.why_it_matters&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-900 mb-1 flex items-center gap-1",children:[e.jsx(f,{className:"w-3 h-3 flex-shrink-0","aria-hidden":"true"}),"Why This Matters"]}),e.jsx("p",{className:"text-xs text-blue-800 line-clamp-2",children:s.why_it_matters})]}),s.teachmo_tip&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-3 rounded-lg border border-purple-100",children:[e.jsxs("p",{className:"text-sm font-medium text-purple-900 mb-1 flex items-center gap-1",children:[e.jsx(O,{className:"w-3 h-3 text-purple-600 flex-shrink-0"}),"Teachmo Tip"]}),e.jsx("p",{className:"text-xs text-purple-800 line-clamp-2",children:s.teachmo_tip})]}),s.learning_objectives&&s.learning_objectives.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1",children:[e.jsx(f,{className:"w-3 h-3 flex-shrink-0"}),"Learning Goals"]}),e.jsxs("div",{className:"space-y-1",children:[s.learning_objectives.slice(0,2).map((i,o)=>e.jsx("p",{className:"text-xs text-gray-600 bg-green-50 px-2 py-1 rounded line-clamp-1",children:i},o)),s.learning_objectives.length>2&&e.jsxs("p",{className:"text-xs text-gray-500",children:["+",s.learning_objectives.length-2," more goals"]})]})]})]})]}),e.jsxs(B,{className:"mt-auto flex justify-between items-center p-4 pt-0",children:[e.jsx(u,{onClick:()=>d(s),className:"flex-1 text-sm min-h-[44px]",children:"View Details"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>m(s),"aria-label":"Plan this activity",className:"min-h-[44px] min-w-[44px]",children:e.jsx(I,{className:"w-5 h-5"})}),e.jsx(u,{variant:"ghost",size:"icon",onClick:g,"aria-label":"Bookmark this activity",className:"min-h-[44px] min-w-[44px]",children:e.jsx(q,{className:T("w-5 h-5",x?"text-yellow-500 fill-current":"")})})]})]})]})})})}const J=["creative","educational","physical","social","emotional","problem_solving","science","art","music","outdoor"],K=["<15 min","15-30 min","30-60 min",">60 min"],Y=["0-2","3-5","6-8","9-12","13+"],j=({title:s,options:d,selected:m,onSelect:t,multiSelect:x=!1})=>e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-700 mb-2",children:s}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(r=>{const n=x?(m||[]).includes(r):m===r;return e.jsx(k.div,{whileTap:{scale:.95},children:e.jsx(u,{variant:n?"default":"outline",size:"sm",onClick:()=>t(r),className:`capitalize transition-all duration-200 rounded-full h-8 text-xs ${n?"bg-blue-600 text-white shadow-md":"bg-white hover:bg-gray-100"}`,children:r.replace(/_/g," ")})},r)})})]});function ee({currentFilters:s={},onFilterChange:d,onReset:m}){const t={categories:[],duration:null,age:null,...s},x=a=>{const i=(t.categories||[]).includes(a)?t.categories.filter(o=>o!==a):[...t.categories||[],a];d("categories",i)},r=a=>{const i=t.duration===a?null:a;d("duration",i)},n=a=>{const i=t.age===a?null:a;d("age",i)},g=(t.categories||[]).length>0||t.duration||t.age;return e.jsx(w,{className:"mb-6 bg-white/70 backdrop-blur-sm border-0 shadow-md",children:e.jsxs(v,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-gray-700"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Filter Activities"})]}),g&&e.jsxs(u,{variant:"ghost",size:"sm",onClick:m,className:"text-sm text-blue-600 hover:text-blue-700",children:[e.jsx(F,{className:"w-4 h-4 mr-1"}),"Reset All"]})]}),e.jsx(j,{title:"Categories",options:J,selected:t.categories,onSelect:x,multiSelect:!0}),e.jsx(j,{title:"Duration",options:K,selected:t.duration,onSelect:r}),e.jsx(j,{title:"Age Group",options:Y,selected:t.age,onSelect:n})]})})}function ye({initialQuery:s}){const[d,m]=p.useState([]),[t,x]=p.useState(s||""),[r,n]=p.useState({categories:[],duration:null,age:null}),g=H(t,300),a=L({context:"activities"});p.useEffect(()=>{i()},[g,r]);const i=async()=>{const l={...g&&{title:{$ilike:`%${g}%`}},...o(r)},c=await a.execute(()=>z.filter(l,"-created_date",50),{key:"activities",errorContext:"loading activities"});c&&m(c)},o=l=>{const c={};if(l.categories&&l.categories.length>0&&(c.category={$in:l.categories}),l.duration)switch(l.duration){case"<15 min":c.duration={$ilike:"%15%"};break;case"15-30 min":c.duration={$ilike:"%30%"};break;case"30-60 min":c.duration={$ilike:"%60%"};break;case">60 min":c.duration={$not:{$ilike:"%15%"}};break}return c},b=(l,c)=>{n(C=>({...C,[l]:c}))},_=()=>{n({categories:[],duration:null,age:null})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-inherit py-4",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx(P,{placeholder:"Search activities...",className:"pl-9",value:t,onChange:l=>x(l.target.value)})]}),e.jsx(ee,{currentFilters:r,onFilterChange:b,onReset:_})]}),a.isLoading("activities")?e.jsx(D,{items:9,cardType:"activity"}):a.hasError("activities")?e.jsx(M,{error:a.getError("activities"),onRetry:i}):d.length===0?e.jsx(R,{icon:N,title:"No Activities Found",description:"Try adjusting your search or filters to find the perfect activity."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(l=>e.jsx(Z,{activity:l},l.id))})]})}export{ye as default};
//# sourceMappingURL=ActivitiesTab-DGY3Ui8v.js.map
