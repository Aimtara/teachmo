const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Calendar-B25mHK3h.js","assets/tiny-invariant-BFFAKc3v.js","assets/MessagingRequests-B_p45ZOt.js","assets/messaging-DTvM5Cq9.js","assets/AIAssistant-3xuyhxMl.js","assets/client-DAO-ed9P.js","assets/book-open-CIuCiuhl.js","assets/AIExplainability-Bwhvcw5v.js","assets/TeacherClasses-zINahfb9.js","assets/useAuth-QI_GFEww.js","assets/TeacherAssignments-D3bSHUEg.js","assets/AdminObservability-DvwBdvOo.js","assets/AdminModerationQueue-Dc180m6-.js","assets/messagingModeration-Dlj4-0Jj.js","assets/AdminMessagingBlocklist-CEYdGGJH.js","assets/SchoolDirectory-BdpI2Dlq.js"])))=>i.map(i=>d[i]);
var RF=Object.defineProperty;var Jj=e=>{throw TypeError(e)};var IF=(e,t,n)=>t in e?RF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Wy=(e,t,n)=>IF(e,typeof t!="symbol"?t+"":t,n),Hy=(e,t,n)=>t.has(e)||Jj("Cannot "+n);var G=(e,t,n)=>(Hy(e,t,"read from private field"),n?n.call(e):t.get(e)),Ze=(e,t,n)=>t.has(e)?Jj("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Re=(e,t,n,r)=>(Hy(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),bt=(e,t,n)=>(Hy(e,t,"access private method"),n);var Rh=(e,t,n,r)=>({set _(s){Re(e,t,s,n)},get _(){return G(e,t,r)}});function OF(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Zj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ho(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function DF(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Gy={exports:{}},Bu={},Ky={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE;function MF(){if(eE)return jt;eE=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function g(V){return V===null||typeof V!="object"?null:(V=m&&V[m]||V["@@iterator"],typeof V=="function"?V:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function S(V,Z,O){this.props=V,this.context=Z,this.refs=b,this.updater=O||y}S.prototype.isReactComponent={},S.prototype.setState=function(V,Z){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Z,"setState")},S.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function _(){}_.prototype=S.prototype;function k(V,Z,O){this.props=V,this.context=Z,this.refs=b,this.updater=O||y}var N=k.prototype=new _;N.constructor=k,w(N,S.prototype),N.isPureReactComponent=!0;var T=Array.isArray,P=Object.prototype.hasOwnProperty,R={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function A(V,Z,O){var ce,he={},me=null,Ce=null;if(Z!=null)for(ce in Z.ref!==void 0&&(Ce=Z.ref),Z.key!==void 0&&(me=""+Z.key),Z)P.call(Z,ce)&&!M.hasOwnProperty(ce)&&(he[ce]=Z[ce]);var ge=arguments.length-2;if(ge===1)he.children=O;else if(1<ge){for(var $e=Array(ge),ne=0;ne<ge;ne++)$e[ne]=arguments[ne+2];he.children=$e}if(V&&V.defaultProps)for(ce in ge=V.defaultProps,ge)he[ce]===void 0&&(he[ce]=ge[ce]);return{$$typeof:e,type:V,key:me,ref:Ce,props:he,_owner:R.current}}function W(V,Z){return{$$typeof:e,type:V.type,key:Z,ref:V.ref,props:V.props,_owner:V._owner}}function K(V){return typeof V=="object"&&V!==null&&V.$$typeof===e}function H(V){var Z={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(O){return Z[O]})}var z=/\/+/g;function L(V,Z){return typeof V=="object"&&V!==null&&V.key!=null?H(""+V.key):Z.toString(36)}function B(V,Z,O,ce,he){var me=typeof V;(me==="undefined"||me==="boolean")&&(V=null);var Ce=!1;if(V===null)Ce=!0;else switch(me){case"string":case"number":Ce=!0;break;case"object":switch(V.$$typeof){case e:case t:Ce=!0}}if(Ce)return Ce=V,he=he(Ce),V=ce===""?"."+L(Ce,0):ce,T(he)?(O="",V!=null&&(O=V.replace(z,"$&/")+"/"),B(he,Z,O,"",function(ne){return ne})):he!=null&&(K(he)&&(he=W(he,O+(!he.key||Ce&&Ce.key===he.key?"":(""+he.key).replace(z,"$&/")+"/")+V)),Z.push(he)),1;if(Ce=0,ce=ce===""?".":ce+":",T(V))for(var ge=0;ge<V.length;ge++){me=V[ge];var $e=ce+L(me,ge);Ce+=B(me,Z,O,$e,he)}else if($e=g(V),typeof $e=="function")for(V=$e.call(V),ge=0;!(me=V.next()).done;)me=me.value,$e=ce+L(me,ge++),Ce+=B(me,Z,O,$e,he);else if(me==="object")throw Z=String(V),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return Ce}function Q(V,Z,O){if(V==null)return V;var ce=[],he=0;return B(V,ce,"","",function(me){return Z.call(O,me,he++)}),ce}function q(V){if(V._status===-1){var Z=V._result;Z=Z(),Z.then(function(O){(V._status===0||V._status===-1)&&(V._status=1,V._result=O)},function(O){(V._status===0||V._status===-1)&&(V._status=2,V._result=O)}),V._status===-1&&(V._status=0,V._result=Z)}if(V._status===1)return V._result.default;throw V._result}var F={current:null},D={transition:null},X={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:D,ReactCurrentOwner:R};function I(){throw Error("act(...) is not supported in production builds of React.")}return jt.Children={map:Q,forEach:function(V,Z,O){Q(V,function(){Z.apply(this,arguments)},O)},count:function(V){var Z=0;return Q(V,function(){Z++}),Z},toArray:function(V){return Q(V,function(Z){return Z})||[]},only:function(V){if(!K(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},jt.Component=S,jt.Fragment=n,jt.Profiler=s,jt.PureComponent=k,jt.StrictMode=r,jt.Suspense=d,jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,jt.act=I,jt.cloneElement=function(V,Z,O){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var ce=w({},V.props),he=V.key,me=V.ref,Ce=V._owner;if(Z!=null){if(Z.ref!==void 0&&(me=Z.ref,Ce=R.current),Z.key!==void 0&&(he=""+Z.key),V.type&&V.type.defaultProps)var ge=V.type.defaultProps;for($e in Z)P.call(Z,$e)&&!M.hasOwnProperty($e)&&(ce[$e]=Z[$e]===void 0&&ge!==void 0?ge[$e]:Z[$e])}var $e=arguments.length-2;if($e===1)ce.children=O;else if(1<$e){ge=Array($e);for(var ne=0;ne<$e;ne++)ge[ne]=arguments[ne+2];ce.children=ge}return{$$typeof:e,type:V.type,key:he,ref:me,props:ce,_owner:Ce}},jt.createContext=function(V){return V={$$typeof:l,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:i,_context:V},V.Consumer=V},jt.createElement=A,jt.createFactory=function(V){var Z=A.bind(null,V);return Z.type=V,Z},jt.createRef=function(){return{current:null}},jt.forwardRef=function(V){return{$$typeof:u,render:V}},jt.isValidElement=K,jt.lazy=function(V){return{$$typeof:h,_payload:{_status:-1,_result:V},_init:q}},jt.memo=function(V,Z){return{$$typeof:f,type:V,compare:Z===void 0?null:Z}},jt.startTransition=function(V){var Z=D.transition;D.transition={};try{V()}finally{D.transition=Z}},jt.unstable_act=I,jt.useCallback=function(V,Z){return F.current.useCallback(V,Z)},jt.useContext=function(V){return F.current.useContext(V)},jt.useDebugValue=function(){},jt.useDeferredValue=function(V){return F.current.useDeferredValue(V)},jt.useEffect=function(V,Z){return F.current.useEffect(V,Z)},jt.useId=function(){return F.current.useId()},jt.useImperativeHandle=function(V,Z,O){return F.current.useImperativeHandle(V,Z,O)},jt.useInsertionEffect=function(V,Z){return F.current.useInsertionEffect(V,Z)},jt.useLayoutEffect=function(V,Z){return F.current.useLayoutEffect(V,Z)},jt.useMemo=function(V,Z){return F.current.useMemo(V,Z)},jt.useReducer=function(V,Z,O){return F.current.useReducer(V,Z,O)},jt.useRef=function(V){return F.current.useRef(V)},jt.useState=function(V){return F.current.useState(V)},jt.useSyncExternalStore=function(V,Z,O){return F.current.useSyncExternalStore(V,Z,O)},jt.useTransition=function(){return F.current.useTransition()},jt.version="18.3.1",jt}var tE;function of(){return tE||(tE=1,Ky.exports=MF()),Ky.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nE;function LF(){if(nE)return Bu;nE=1;var e=of(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,f){var h,m={},g=null,y=null;f!==void 0&&(g=""+f),d.key!==void 0&&(g=""+d.key),d.ref!==void 0&&(y=d.ref);for(h in d)r.call(d,h)&&!i.hasOwnProperty(h)&&(m[h]=d[h]);if(u&&u.defaultProps)for(h in d=u.defaultProps,d)m[h]===void 0&&(m[h]=d[h]);return{$$typeof:t,type:u,key:g,ref:y,props:m,_owner:s.current}}return Bu.Fragment=n,Bu.jsx=l,Bu.jsxs=l,Bu}var rE;function FF(){return rE||(rE=1,Gy.exports=LF()),Gy.exports}var a=FF();const sE={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var $F={};const gx=["error","warn","info","debug"],VF=()=>typeof import.meta<"u"&&sE?sE:typeof process<"u"?{MODE:"production",VITE_LOG_LEVEL:$F.VITE_LOG_LEVEL}:{},aC=e=>{const t=typeof e=="string"?e.toLowerCase():"";return gx.includes(t)?t:"info"},yx=VF(),oC=yx.MODE==="production"||yx.PROD===!0;let vx=aC(yx.VITE_LOG_LEVEL||(oC?"warn":"debug"));const zF=e=>{if(oC&&e==="debug")return!1;const t=gx.indexOf(e),n=gx.indexOf(vx);return t<=n},Ii=(e="app")=>{const t=`[${e}]`,n=(r,s)=>(...i)=>{zF(r)&&console[s](t,...i)};return{error:n("error","error"),warn:n("warn","warn"),info:n("info","info"),debug:n("debug","debug"),setLevel:r=>{vx=aC(r)},getLevel:()=>vx}},Ad=Ii("app");function UF(){const e=console.error.bind(console),t=console.warn.bind(console);console.error=(...n)=>{e(...n);const r=console.error;console.error=e;try{Ad.error(...n)}finally{console.error=r}},console.warn=(...n)=>{t(...n);const r=console.warn;console.warn=t;try{Ad.warn(...n)}finally{console.warn=r}}}var x=of();const oe=ho(x),lC=OF({__proto__:null,default:oe},[x]);var Ih={},Yy={exports:{}},Vr={},Qy={exports:{}},Xy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE;function BF(){return iE||(iE=1,(function(e){function t(D,X){var I=D.length;D.push(X);e:for(;0<I;){var V=I-1>>>1,Z=D[V];if(0<s(Z,X))D[V]=X,D[I]=Z,I=V;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var X=D[0],I=D.pop();if(I!==X){D[0]=I;e:for(var V=0,Z=D.length,O=Z>>>1;V<O;){var ce=2*(V+1)-1,he=D[ce],me=ce+1,Ce=D[me];if(0>s(he,I))me<Z&&0>s(Ce,he)?(D[V]=Ce,D[me]=I,V=me):(D[V]=he,D[ce]=I,V=ce);else if(me<Z&&0>s(Ce,I))D[V]=Ce,D[me]=I,V=me;else break e}}return X}function s(D,X){var I=D.sortIndex-X.sortIndex;return I!==0?I:D.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],f=[],h=1,m=null,g=3,y=!1,w=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(D){for(var X=n(f);X!==null;){if(X.callback===null)r(f);else if(X.startTime<=D)r(f),X.sortIndex=X.expirationTime,t(d,X);else break;X=n(f)}}function T(D){if(b=!1,N(D),!w)if(n(d)!==null)w=!0,q(P);else{var X=n(f);X!==null&&F(T,X.startTime-D)}}function P(D,X){w=!1,b&&(b=!1,_(A),A=-1),y=!0;var I=g;try{for(N(X),m=n(d);m!==null&&(!(m.expirationTime>X)||D&&!H());){var V=m.callback;if(typeof V=="function"){m.callback=null,g=m.priorityLevel;var Z=V(m.expirationTime<=X);X=e.unstable_now(),typeof Z=="function"?m.callback=Z:m===n(d)&&r(d),N(X)}else r(d);m=n(d)}if(m!==null)var O=!0;else{var ce=n(f);ce!==null&&F(T,ce.startTime-X),O=!1}return O}finally{m=null,g=I,y=!1}}var R=!1,M=null,A=-1,W=5,K=-1;function H(){return!(e.unstable_now()-K<W)}function z(){if(M!==null){var D=e.unstable_now();K=D;var X=!0;try{X=M(!0,D)}finally{X?L():(R=!1,M=null)}}else R=!1}var L;if(typeof k=="function")L=function(){k(z)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,Q=B.port2;B.port1.onmessage=z,L=function(){Q.postMessage(null)}}else L=function(){S(z,0)};function q(D){M=D,R||(R=!0,L())}function F(D,X){A=S(function(){D(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){w||y||(w=!0,q(P))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(D){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var I=g;g=X;try{return D()}finally{g=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,X){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var I=g;g=D;try{return X()}finally{g=I}},e.unstable_scheduleCallback=function(D,X,I){var V=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?V+I:V):I=V,D){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=I+Z,D={id:h++,callback:X,priorityLevel:D,startTime:I,expirationTime:Z,sortIndex:-1},I>V?(D.sortIndex=I,t(f,D),n(d)===null&&D===n(f)&&(b?(_(A),A=-1):b=!0,F(T,I-V))):(D.sortIndex=Z,t(d,D),w||y||(w=!0,q(P))),D},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(D){var X=g;return function(){var I=g;g=X;try{return D.apply(this,arguments)}finally{g=I}}}})(Xy)),Xy}var aE;function qF(){return aE||(aE=1,Qy.exports=BF()),Qy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE;function WF(){if(oE)return Vr;oE=1;var e=of(),t=qF();function n(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,p=1;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(s[o]=c,o=0;o<c.length;o++)r.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},m={};function g(o){return d.call(m,o)?!0:d.call(h,o)?!1:f.test(o)?m[o]=!0:(h[o]=!0,!1)}function y(o,c,p,v){if(p!==null&&p.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return v?!1:p!==null?!p.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function w(o,c,p,v){if(c===null||typeof c>"u"||y(o,c,p,v))return!0;if(v)return!1;if(p!==null)switch(p.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function b(o,c,p,v,j,E,C){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=v,this.attributeNamespace=j,this.mustUseProperty=p,this.propertyName=o,this.type=c,this.sanitizeURL=E,this.removeEmptyString=C}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){S[o]=new b(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];S[c]=new b(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){S[o]=new b(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){S[o]=new b(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){S[o]=new b(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){S[o]=new b(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){S[o]=new b(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){S[o]=new b(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){S[o]=new b(o,5,!1,o.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function k(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(_,k);S[c]=new b(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(_,k);S[c]=new b(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(_,k);S[c]=new b(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){S[o]=new b(o,1,!1,o.toLowerCase(),null,!1,!1)}),S.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){S[o]=new b(o,1,!1,o.toLowerCase(),null,!0,!0)});function N(o,c,p,v){var j=S.hasOwnProperty(c)?S[c]:null;(j!==null?j.type!==0:v||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(w(c,p,j,v)&&(p=null),v||j===null?g(c)&&(p===null?o.removeAttribute(c):o.setAttribute(c,""+p)):j.mustUseProperty?o[j.propertyName]=p===null?j.type===3?!1:"":p:(c=j.attributeName,v=j.attributeNamespace,p===null?o.removeAttribute(c):(j=j.type,p=j===3||j===4&&p===!0?"":""+p,v?o.setAttributeNS(v,c,p):o.setAttribute(c,p))))}var T=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),R=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),H=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),D=Symbol.iterator;function X(o){return o===null||typeof o!="object"?null:(o=D&&o[D]||o["@@iterator"],typeof o=="function"?o:null)}var I=Object.assign,V;function Z(o){if(V===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);V=c&&c[1]||""}return`
`+V+o}var O=!1;function ce(o,c){if(!o||O)return"";O=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ae){var v=ae}Reflect.construct(o,[],c)}else{try{c.call()}catch(ae){v=ae}o.call(c.prototype)}else{try{throw Error()}catch(ae){v=ae}o()}}catch(ae){if(ae&&v&&typeof ae.stack=="string"){for(var j=ae.stack.split(`
`),E=v.stack.split(`
`),C=j.length-1,U=E.length-1;1<=C&&0<=U&&j[C]!==E[U];)U--;for(;1<=C&&0<=U;C--,U--)if(j[C]!==E[U]){if(C!==1||U!==1)do if(C--,U--,0>U||j[C]!==E[U]){var Y=`
`+j[C].replace(" at new "," at ");return o.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",o.displayName)),Y}while(1<=C&&0<=U);break}}}finally{O=!1,Error.prepareStackTrace=p}return(o=o?o.displayName||o.name:"")?Z(o):""}function he(o){switch(o.tag){case 5:return Z(o.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return o=ce(o.type,!1),o;case 11:return o=ce(o.type.render,!1),o;case 1:return o=ce(o.type,!0),o;default:return""}}function me(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case M:return"Fragment";case R:return"Portal";case W:return"Profiler";case A:return"StrictMode";case L:return"Suspense";case B:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case H:return(o.displayName||"Context")+".Consumer";case K:return(o._context.displayName||"Context")+".Provider";case z:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Q:return c=o.displayName||null,c!==null?c:me(o.type)||"Memo";case q:c=o._payload,o=o._init;try{return me(o(c))}catch{}}return null}function Ce(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(c);case 8:return c===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function ge(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function $e(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ne(o){var c=$e(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),v=""+o[c];if(!o.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var j=p.get,E=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return j.call(this)},set:function(C){v=""+C,E.call(this,C)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return v},setValue:function(C){v=""+C},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function We(o){o._valueTracker||(o._valueTracker=ne(o))}function Ve(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var p=c.getValue(),v="";return o&&(v=$e(o)?o.checked?"true":"false":o.value),o=v,o!==p?(c.setValue(o),!0):!1}function Ft(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Dt(o,c){var p=c.checked;return I({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??o._wrapperState.initialChecked})}function Pn(o,c){var p=c.defaultValue==null?"":c.defaultValue,v=c.checked!=null?c.checked:c.defaultChecked;p=ge(c.value!=null?c.value:p),o._wrapperState={initialChecked:v,initialValue:p,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function wn(o,c){c=c.checked,c!=null&&N(o,"checked",c,!1)}function bn(o,c){wn(o,c);var p=ge(c.value),v=c.type;if(p!=null)v==="number"?(p===0&&o.value===""||o.value!=p)&&(o.value=""+p):o.value!==""+p&&(o.value=""+p);else if(v==="submit"||v==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?Bt(o,c.type,p):c.hasOwnProperty("defaultValue")&&Bt(o,c.type,ge(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function Rr(o,c,p){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var v=c.type;if(!(v!=="submit"&&v!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,p||c===o.value||(o.value=c),o.defaultValue=c}p=o.name,p!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,p!==""&&(o.name=p)}function Bt(o,c,p){(c!=="number"||Ft(o.ownerDocument)!==o)&&(p==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+p&&(o.defaultValue=""+p))}var $=Array.isArray;function te(o,c,p,v){if(o=o.options,c){c={};for(var j=0;j<p.length;j++)c["$"+p[j]]=!0;for(p=0;p<o.length;p++)j=c.hasOwnProperty("$"+o[p].value),o[p].selected!==j&&(o[p].selected=j),j&&v&&(o[p].defaultSelected=!0)}else{for(p=""+ge(p),c=null,j=0;j<o.length;j++){if(o[j].value===p){o[j].selected=!0,v&&(o[j].defaultSelected=!0);return}c!==null||o[j].disabled||(c=o[j])}c!==null&&(c.selected=!0)}}function se(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return I({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function ke(o,c){var p=c.value;if(p==null){if(p=c.children,c=c.defaultValue,p!=null){if(c!=null)throw Error(n(92));if($(p)){if(1<p.length)throw Error(n(93));p=p[0]}c=p}c==null&&(c=""),p=c}o._wrapperState={initialValue:ge(p)}}function _e(o,c){var p=ge(c.value),v=ge(c.defaultValue);p!=null&&(p=""+p,p!==o.value&&(o.value=p),c.defaultValue==null&&o.defaultValue!==p&&(o.defaultValue=p)),v!=null&&(o.defaultValue=""+v)}function xe(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function ee(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?ee(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Pe,et=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,p,v,j){MSApp.execUnsafeLocalFunction(function(){return o(c,p,v,j)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(Pe=Pe||document.createElement("div"),Pe.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Pe.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function dt(o,c){if(c){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=c;return}}o.textContent=c}var qt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yn=["Webkit","ms","Moz","O"];Object.keys(qt).forEach(function(o){Yn.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),qt[c]=qt[o]})});function Qn(o,c,p){return c==null||typeof c=="boolean"||c===""?"":p||typeof c!="number"||c===0||qt.hasOwnProperty(o)&&qt[o]?(""+c).trim():c+"px"}function Ir(o,c){o=o.style;for(var p in c)if(c.hasOwnProperty(p)){var v=p.indexOf("--")===0,j=Qn(p,c[p],v);p==="float"&&(p="cssFloat"),v?o.setProperty(p,j):o[p]=j}}var fs=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dn(o,c){if(c){if(fs[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function Or(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var An=null;function hs(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ou=null,pa=null,Mi=null;function lu(o){if(o=Tu(o)){if(typeof ou!="function")throw Error(n(280));var c=o.stateNode;c&&(c=Gf(c),ou(o.stateNode,o.type,c))}}function ft(o){pa?Mi?Mi.push(o):Mi=[o]:pa=o}function _n(){if(pa){var o=pa,c=Mi;if(Mi=pa=null,lu(o),c)for(o=0;o<c.length;o++)lu(c[o])}}function zn(o,c){return o(c)}function ur(){}var ga=!1;function Rn(o,c,p){if(ga)return o(c,p);ga=!0;try{return zn(o,c,p)}finally{ga=!1,(pa!==null||Mi!==null)&&(ur(),_n())}}function Xn(o,c){var p=o.stateNode;if(p===null)return null;var v=Gf(p);if(v===null)return null;p=v[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(o=o.type,v=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!v;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(n(231,c,typeof p));return p}var ya=!1;if(u)try{var ir={};Object.defineProperty(ir,"passive",{get:function(){ya=!0}}),window.addEventListener("test",ir,ir),window.removeEventListener("test",ir,ir)}catch{ya=!1}function Xr(o,c,p,v,j,E,C,U,Y){var ae=Array.prototype.slice.call(arguments,3);try{c.apply(p,ae)}catch(pe){this.onError(pe)}}var va=!1,ms=null,cu=!1,ug=null,$M={onError:function(o){va=!0,ms=o}};function VM(o,c,p,v,j,E,C,U,Y){va=!1,ms=null,Xr.apply($M,arguments)}function zM(o,c,p,v,j,E,C,U,Y){if(VM.apply(this,arguments),va){if(va){var ae=ms;va=!1,ms=null}else throw Error(n(198));cu||(cu=!0,ug=ae)}}function bo(o){var c=o,p=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(p=c.return),o=c.return;while(o)}return c.tag===3?p:null}function b_(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function __(o){if(bo(o)!==o)throw Error(n(188))}function UM(o){var c=o.alternate;if(!c){if(c=bo(o),c===null)throw Error(n(188));return c!==o?null:o}for(var p=o,v=c;;){var j=p.return;if(j===null)break;var E=j.alternate;if(E===null){if(v=j.return,v!==null){p=v;continue}break}if(j.child===E.child){for(E=j.child;E;){if(E===p)return __(j),o;if(E===v)return __(j),c;E=E.sibling}throw Error(n(188))}if(p.return!==v.return)p=j,v=E;else{for(var C=!1,U=j.child;U;){if(U===p){C=!0,p=j,v=E;break}if(U===v){C=!0,v=j,p=E;break}U=U.sibling}if(!C){for(U=E.child;U;){if(U===p){C=!0,p=E,v=j;break}if(U===v){C=!0,v=E,p=j;break}U=U.sibling}if(!C)throw Error(n(189))}}if(p.alternate!==v)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?o:c}function S_(o){return o=UM(o),o!==null?j_(o):null}function j_(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=j_(o);if(c!==null)return c;o=o.sibling}return null}var E_=t.unstable_scheduleCallback,k_=t.unstable_cancelCallback,BM=t.unstable_shouldYield,qM=t.unstable_requestPaint,Sn=t.unstable_now,WM=t.unstable_getCurrentPriorityLevel,dg=t.unstable_ImmediatePriority,N_=t.unstable_UserBlockingPriority,Nf=t.unstable_NormalPriority,HM=t.unstable_LowPriority,T_=t.unstable_IdlePriority,Tf=null,ii=null;function GM(o){if(ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(Tf,o,void 0,(o.current.flags&128)===128)}catch{}}var Rs=Math.clz32?Math.clz32:QM,KM=Math.log,YM=Math.LN2;function QM(o){return o>>>=0,o===0?32:31-(KM(o)/YM|0)|0}var Cf=64,Pf=4194304;function uu(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Af(o,c){var p=o.pendingLanes;if(p===0)return 0;var v=0,j=o.suspendedLanes,E=o.pingedLanes,C=p&268435455;if(C!==0){var U=C&~j;U!==0?v=uu(U):(E&=C,E!==0&&(v=uu(E)))}else C=p&~j,C!==0?v=uu(C):E!==0&&(v=uu(E));if(v===0)return 0;if(c!==0&&c!==v&&(c&j)===0&&(j=v&-v,E=c&-c,j>=E||j===16&&(E&4194240)!==0))return c;if((v&4)!==0&&(v|=p&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=v;0<c;)p=31-Rs(c),j=1<<p,v|=o[p],c&=~j;return v}function XM(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JM(o,c){for(var p=o.suspendedLanes,v=o.pingedLanes,j=o.expirationTimes,E=o.pendingLanes;0<E;){var C=31-Rs(E),U=1<<C,Y=j[C];Y===-1?((U&p)===0||(U&v)!==0)&&(j[C]=XM(U,c)):Y<=c&&(o.expiredLanes|=U),E&=~U}}function fg(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function C_(){var o=Cf;return Cf<<=1,(Cf&4194240)===0&&(Cf=64),o}function hg(o){for(var c=[],p=0;31>p;p++)c.push(o);return c}function du(o,c,p){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-Rs(c),o[c]=p}function ZM(o,c){var p=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var v=o.eventTimes;for(o=o.expirationTimes;0<p;){var j=31-Rs(p),E=1<<j;c[j]=0,v[j]=-1,o[j]=-1,p&=~E}}function mg(o,c){var p=o.entangledLanes|=c;for(o=o.entanglements;p;){var v=31-Rs(p),j=1<<v;j&c|o[v]&c&&(o[v]|=c),p&=~j}}var Wt=0;function P_(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var A_,pg,R_,I_,O_,gg=!1,Rf=[],xa=null,wa=null,ba=null,fu=new Map,hu=new Map,_a=[],eL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function D_(o,c){switch(o){case"focusin":case"focusout":xa=null;break;case"dragenter":case"dragleave":wa=null;break;case"mouseover":case"mouseout":ba=null;break;case"pointerover":case"pointerout":fu.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(c.pointerId)}}function mu(o,c,p,v,j,E){return o===null||o.nativeEvent!==E?(o={blockedOn:c,domEventName:p,eventSystemFlags:v,nativeEvent:E,targetContainers:[j]},c!==null&&(c=Tu(c),c!==null&&pg(c)),o):(o.eventSystemFlags|=v,c=o.targetContainers,j!==null&&c.indexOf(j)===-1&&c.push(j),o)}function tL(o,c,p,v,j){switch(c){case"focusin":return xa=mu(xa,o,c,p,v,j),!0;case"dragenter":return wa=mu(wa,o,c,p,v,j),!0;case"mouseover":return ba=mu(ba,o,c,p,v,j),!0;case"pointerover":var E=j.pointerId;return fu.set(E,mu(fu.get(E)||null,o,c,p,v,j)),!0;case"gotpointercapture":return E=j.pointerId,hu.set(E,mu(hu.get(E)||null,o,c,p,v,j)),!0}return!1}function M_(o){var c=_o(o.target);if(c!==null){var p=bo(c);if(p!==null){if(c=p.tag,c===13){if(c=b_(p),c!==null){o.blockedOn=c,O_(o.priority,function(){R_(p)});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function If(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var p=vg(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(p===null){p=o.nativeEvent;var v=new p.constructor(p.type,p);An=v,p.target.dispatchEvent(v),An=null}else return c=Tu(p),c!==null&&pg(c),o.blockedOn=p,!1;c.shift()}return!0}function L_(o,c,p){If(o)&&p.delete(c)}function nL(){gg=!1,xa!==null&&If(xa)&&(xa=null),wa!==null&&If(wa)&&(wa=null),ba!==null&&If(ba)&&(ba=null),fu.forEach(L_),hu.forEach(L_)}function pu(o,c){o.blockedOn===c&&(o.blockedOn=null,gg||(gg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,nL)))}function gu(o){function c(j){return pu(j,o)}if(0<Rf.length){pu(Rf[0],o);for(var p=1;p<Rf.length;p++){var v=Rf[p];v.blockedOn===o&&(v.blockedOn=null)}}for(xa!==null&&pu(xa,o),wa!==null&&pu(wa,o),ba!==null&&pu(ba,o),fu.forEach(c),hu.forEach(c),p=0;p<_a.length;p++)v=_a[p],v.blockedOn===o&&(v.blockedOn=null);for(;0<_a.length&&(p=_a[0],p.blockedOn===null);)M_(p),p.blockedOn===null&&_a.shift()}var wl=T.ReactCurrentBatchConfig,Of=!0;function rL(o,c,p,v){var j=Wt,E=wl.transition;wl.transition=null;try{Wt=1,yg(o,c,p,v)}finally{Wt=j,wl.transition=E}}function sL(o,c,p,v){var j=Wt,E=wl.transition;wl.transition=null;try{Wt=4,yg(o,c,p,v)}finally{Wt=j,wl.transition=E}}function yg(o,c,p,v){if(Of){var j=vg(o,c,p,v);if(j===null)Dg(o,c,v,Df,p),D_(o,v);else if(tL(j,o,c,p,v))v.stopPropagation();else if(D_(o,v),c&4&&-1<eL.indexOf(o)){for(;j!==null;){var E=Tu(j);if(E!==null&&A_(E),E=vg(o,c,p,v),E===null&&Dg(o,c,v,Df,p),E===j)break;j=E}j!==null&&v.stopPropagation()}else Dg(o,c,v,null,p)}}var Df=null;function vg(o,c,p,v){if(Df=null,o=hs(v),o=_o(o),o!==null)if(c=bo(o),c===null)o=null;else if(p=c.tag,p===13){if(o=b_(c),o!==null)return o;o=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return Df=o,null}function F_(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WM()){case dg:return 1;case N_:return 4;case Nf:case HM:return 16;case T_:return 536870912;default:return 16}default:return 16}}var Sa=null,xg=null,Mf=null;function $_(){if(Mf)return Mf;var o,c=xg,p=c.length,v,j="value"in Sa?Sa.value:Sa.textContent,E=j.length;for(o=0;o<p&&c[o]===j[o];o++);var C=p-o;for(v=1;v<=C&&c[p-v]===j[E-v];v++);return Mf=j.slice(o,1<v?1-v:void 0)}function Lf(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Ff(){return!0}function V_(){return!1}function Jr(o){function c(p,v,j,E,C){this._reactName=p,this._targetInst=j,this.type=v,this.nativeEvent=E,this.target=C,this.currentTarget=null;for(var U in o)o.hasOwnProperty(U)&&(p=o[U],this[U]=p?p(E):E[U]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Ff:V_,this.isPropagationStopped=V_,this}return I(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Ff)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Ff)},persist:function(){},isPersistent:Ff}),c}var bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wg=Jr(bl),yu=I({},bl,{view:0,detail:0}),iL=Jr(yu),bg,_g,vu,$f=I({},yu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jg,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==vu&&(vu&&o.type==="mousemove"?(bg=o.screenX-vu.screenX,_g=o.screenY-vu.screenY):_g=bg=0,vu=o),bg)},movementY:function(o){return"movementY"in o?o.movementY:_g}}),z_=Jr($f),aL=I({},$f,{dataTransfer:0}),oL=Jr(aL),lL=I({},yu,{relatedTarget:0}),Sg=Jr(lL),cL=I({},bl,{animationName:0,elapsedTime:0,pseudoElement:0}),uL=Jr(cL),dL=I({},bl,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),fL=Jr(dL),hL=I({},bl,{data:0}),U_=Jr(hL),mL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yL(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=gL[o])?!!c[o]:!1}function jg(){return yL}var vL=I({},yu,{key:function(o){if(o.key){var c=mL[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Lf(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?pL[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jg,charCode:function(o){return o.type==="keypress"?Lf(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Lf(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),xL=Jr(vL),wL=I({},$f,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B_=Jr(wL),bL=I({},yu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jg}),_L=Jr(bL),SL=I({},bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),jL=Jr(SL),EL=I({},$f,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),kL=Jr(EL),NL=[9,13,27,32],Eg=u&&"CompositionEvent"in window,xu=null;u&&"documentMode"in document&&(xu=document.documentMode);var TL=u&&"TextEvent"in window&&!xu,q_=u&&(!Eg||xu&&8<xu&&11>=xu),W_=" ",H_=!1;function G_(o,c){switch(o){case"keyup":return NL.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function K_(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var _l=!1;function CL(o,c){switch(o){case"compositionend":return K_(c);case"keypress":return c.which!==32?null:(H_=!0,W_);case"textInput":return o=c.data,o===W_&&H_?null:o;default:return null}}function PL(o,c){if(_l)return o==="compositionend"||!Eg&&G_(o,c)?(o=$_(),Mf=xg=Sa=null,_l=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return q_&&c.locale!=="ko"?null:c.data;default:return null}}var AL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y_(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!AL[o.type]:c==="textarea"}function Q_(o,c,p,v){ft(v),c=qf(c,"onChange"),0<c.length&&(p=new wg("onChange","change",null,p,v),o.push({event:p,listeners:c}))}var wu=null,bu=null;function RL(o){mS(o,0)}function Vf(o){var c=Nl(o);if(Ve(c))return o}function IL(o,c){if(o==="change")return c}var X_=!1;if(u){var kg;if(u){var Ng="oninput"in document;if(!Ng){var J_=document.createElement("div");J_.setAttribute("oninput","return;"),Ng=typeof J_.oninput=="function"}kg=Ng}else kg=!1;X_=kg&&(!document.documentMode||9<document.documentMode)}function Z_(){wu&&(wu.detachEvent("onpropertychange",eS),bu=wu=null)}function eS(o){if(o.propertyName==="value"&&Vf(bu)){var c=[];Q_(c,bu,o,hs(o)),Rn(RL,c)}}function OL(o,c,p){o==="focusin"?(Z_(),wu=c,bu=p,wu.attachEvent("onpropertychange",eS)):o==="focusout"&&Z_()}function DL(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Vf(bu)}function ML(o,c){if(o==="click")return Vf(c)}function LL(o,c){if(o==="input"||o==="change")return Vf(c)}function FL(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Is=typeof Object.is=="function"?Object.is:FL;function _u(o,c){if(Is(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var p=Object.keys(o),v=Object.keys(c);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var j=p[v];if(!d.call(c,j)||!Is(o[j],c[j]))return!1}return!0}function tS(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function nS(o,c){var p=tS(o);o=0;for(var v;p;){if(p.nodeType===3){if(v=o+p.textContent.length,o<=c&&v>=c)return{node:p,offset:c-o};o=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=tS(p)}}function rS(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?rS(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function sS(){for(var o=window,c=Ft();c instanceof o.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)o=c.contentWindow;else break;c=Ft(o.document)}return c}function Tg(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function $L(o){var c=sS(),p=o.focusedElem,v=o.selectionRange;if(c!==p&&p&&p.ownerDocument&&rS(p.ownerDocument.documentElement,p)){if(v!==null&&Tg(p)){if(c=v.start,o=v.end,o===void 0&&(o=c),"selectionStart"in p)p.selectionStart=c,p.selectionEnd=Math.min(o,p.value.length);else if(o=(c=p.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var j=p.textContent.length,E=Math.min(v.start,j);v=v.end===void 0?E:Math.min(v.end,j),!o.extend&&E>v&&(j=v,v=E,E=j),j=nS(p,E);var C=nS(p,v);j&&C&&(o.rangeCount!==1||o.anchorNode!==j.node||o.anchorOffset!==j.offset||o.focusNode!==C.node||o.focusOffset!==C.offset)&&(c=c.createRange(),c.setStart(j.node,j.offset),o.removeAllRanges(),E>v?(o.addRange(c),o.extend(C.node,C.offset)):(c.setEnd(C.node,C.offset),o.addRange(c)))}}for(c=[],o=p;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<c.length;p++)o=c[p],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var VL=u&&"documentMode"in document&&11>=document.documentMode,Sl=null,Cg=null,Su=null,Pg=!1;function iS(o,c,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Pg||Sl==null||Sl!==Ft(v)||(v=Sl,"selectionStart"in v&&Tg(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Su&&_u(Su,v)||(Su=v,v=qf(Cg,"onSelect"),0<v.length&&(c=new wg("onSelect","select",null,c,p),o.push({event:c,listeners:v}),c.target=Sl)))}function zf(o,c){var p={};return p[o.toLowerCase()]=c.toLowerCase(),p["Webkit"+o]="webkit"+c,p["Moz"+o]="moz"+c,p}var jl={animationend:zf("Animation","AnimationEnd"),animationiteration:zf("Animation","AnimationIteration"),animationstart:zf("Animation","AnimationStart"),transitionend:zf("Transition","TransitionEnd")},Ag={},aS={};u&&(aS=document.createElement("div").style,"AnimationEvent"in window||(delete jl.animationend.animation,delete jl.animationiteration.animation,delete jl.animationstart.animation),"TransitionEvent"in window||delete jl.transitionend.transition);function Uf(o){if(Ag[o])return Ag[o];if(!jl[o])return o;var c=jl[o],p;for(p in c)if(c.hasOwnProperty(p)&&p in aS)return Ag[o]=c[p];return o}var oS=Uf("animationend"),lS=Uf("animationiteration"),cS=Uf("animationstart"),uS=Uf("transitionend"),dS=new Map,fS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ja(o,c){dS.set(o,c),i(c,[o])}for(var Rg=0;Rg<fS.length;Rg++){var Ig=fS[Rg],zL=Ig.toLowerCase(),UL=Ig[0].toUpperCase()+Ig.slice(1);ja(zL,"on"+UL)}ja(oS,"onAnimationEnd"),ja(lS,"onAnimationIteration"),ja(cS,"onAnimationStart"),ja("dblclick","onDoubleClick"),ja("focusin","onFocus"),ja("focusout","onBlur"),ja(uS,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BL=new Set("cancel close invalid load scroll toggle".split(" ").concat(ju));function hS(o,c,p){var v=o.type||"unknown-event";o.currentTarget=p,zM(v,c,void 0,o),o.currentTarget=null}function mS(o,c){c=(c&4)!==0;for(var p=0;p<o.length;p++){var v=o[p],j=v.event;v=v.listeners;e:{var E=void 0;if(c)for(var C=v.length-1;0<=C;C--){var U=v[C],Y=U.instance,ae=U.currentTarget;if(U=U.listener,Y!==E&&j.isPropagationStopped())break e;hS(j,U,ae),E=Y}else for(C=0;C<v.length;C++){if(U=v[C],Y=U.instance,ae=U.currentTarget,U=U.listener,Y!==E&&j.isPropagationStopped())break e;hS(j,U,ae),E=Y}}}if(cu)throw o=ug,cu=!1,ug=null,o}function Zt(o,c){var p=c[zg];p===void 0&&(p=c[zg]=new Set);var v=o+"__bubble";p.has(v)||(pS(c,o,2,!1),p.add(v))}function Og(o,c,p){var v=0;c&&(v|=4),pS(p,o,v,c)}var Bf="_reactListening"+Math.random().toString(36).slice(2);function Eu(o){if(!o[Bf]){o[Bf]=!0,r.forEach(function(p){p!=="selectionchange"&&(BL.has(p)||Og(p,!1,o),Og(p,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Bf]||(c[Bf]=!0,Og("selectionchange",!1,c))}}function pS(o,c,p,v){switch(F_(c)){case 1:var j=rL;break;case 4:j=sL;break;default:j=yg}p=j.bind(null,c,p,o),j=void 0,!ya||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(j=!0),v?j!==void 0?o.addEventListener(c,p,{capture:!0,passive:j}):o.addEventListener(c,p,!0):j!==void 0?o.addEventListener(c,p,{passive:j}):o.addEventListener(c,p,!1)}function Dg(o,c,p,v,j){var E=v;if((c&1)===0&&(c&2)===0&&v!==null)e:for(;;){if(v===null)return;var C=v.tag;if(C===3||C===4){var U=v.stateNode.containerInfo;if(U===j||U.nodeType===8&&U.parentNode===j)break;if(C===4)for(C=v.return;C!==null;){var Y=C.tag;if((Y===3||Y===4)&&(Y=C.stateNode.containerInfo,Y===j||Y.nodeType===8&&Y.parentNode===j))return;C=C.return}for(;U!==null;){if(C=_o(U),C===null)return;if(Y=C.tag,Y===5||Y===6){v=E=C;continue e}U=U.parentNode}}v=v.return}Rn(function(){var ae=E,pe=hs(p),ve=[];e:{var fe=dS.get(o);if(fe!==void 0){var Me=wg,He=o;switch(o){case"keypress":if(Lf(p)===0)break e;case"keydown":case"keyup":Me=xL;break;case"focusin":He="focus",Me=Sg;break;case"focusout":He="blur",Me=Sg;break;case"beforeblur":case"afterblur":Me=Sg;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=z_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=oL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=_L;break;case oS:case lS:case cS:Me=uL;break;case uS:Me=jL;break;case"scroll":Me=iL;break;case"wheel":Me=kL;break;case"copy":case"cut":case"paste":Me=fL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=B_}var Qe=(c&4)!==0,jn=!Qe&&o==="scroll",re=Qe?fe!==null?fe+"Capture":null:fe;Qe=[];for(var J=ae,ie;J!==null;){ie=J;var Ee=ie.stateNode;if(ie.tag===5&&Ee!==null&&(ie=Ee,re!==null&&(Ee=Xn(J,re),Ee!=null&&Qe.push(ku(J,Ee,ie)))),jn)break;J=J.return}0<Qe.length&&(fe=new Me(fe,He,null,p,pe),ve.push({event:fe,listeners:Qe}))}}if((c&7)===0){e:{if(fe=o==="mouseover"||o==="pointerover",Me=o==="mouseout"||o==="pointerout",fe&&p!==An&&(He=p.relatedTarget||p.fromElement)&&(_o(He)||He[Li]))break e;if((Me||fe)&&(fe=pe.window===pe?pe:(fe=pe.ownerDocument)?fe.defaultView||fe.parentWindow:window,Me?(He=p.relatedTarget||p.toElement,Me=ae,He=He?_o(He):null,He!==null&&(jn=bo(He),He!==jn||He.tag!==5&&He.tag!==6)&&(He=null)):(Me=null,He=ae),Me!==He)){if(Qe=z_,Ee="onMouseLeave",re="onMouseEnter",J="mouse",(o==="pointerout"||o==="pointerover")&&(Qe=B_,Ee="onPointerLeave",re="onPointerEnter",J="pointer"),jn=Me==null?fe:Nl(Me),ie=He==null?fe:Nl(He),fe=new Qe(Ee,J+"leave",Me,p,pe),fe.target=jn,fe.relatedTarget=ie,Ee=null,_o(pe)===ae&&(Qe=new Qe(re,J+"enter",He,p,pe),Qe.target=ie,Qe.relatedTarget=jn,Ee=Qe),jn=Ee,Me&&He)t:{for(Qe=Me,re=He,J=0,ie=Qe;ie;ie=El(ie))J++;for(ie=0,Ee=re;Ee;Ee=El(Ee))ie++;for(;0<J-ie;)Qe=El(Qe),J--;for(;0<ie-J;)re=El(re),ie--;for(;J--;){if(Qe===re||re!==null&&Qe===re.alternate)break t;Qe=El(Qe),re=El(re)}Qe=null}else Qe=null;Me!==null&&gS(ve,fe,Me,Qe,!1),He!==null&&jn!==null&&gS(ve,jn,He,Qe,!0)}}e:{if(fe=ae?Nl(ae):window,Me=fe.nodeName&&fe.nodeName.toLowerCase(),Me==="select"||Me==="input"&&fe.type==="file")var Xe=IL;else if(Y_(fe))if(X_)Xe=LL;else{Xe=DL;var nt=OL}else(Me=fe.nodeName)&&Me.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Xe=ML);if(Xe&&(Xe=Xe(o,ae))){Q_(ve,Xe,p,pe);break e}nt&&nt(o,fe,ae),o==="focusout"&&(nt=fe._wrapperState)&&nt.controlled&&fe.type==="number"&&Bt(fe,"number",fe.value)}switch(nt=ae?Nl(ae):window,o){case"focusin":(Y_(nt)||nt.contentEditable==="true")&&(Sl=nt,Cg=ae,Su=null);break;case"focusout":Su=Cg=Sl=null;break;case"mousedown":Pg=!0;break;case"contextmenu":case"mouseup":case"dragend":Pg=!1,iS(ve,p,pe);break;case"selectionchange":if(VL)break;case"keydown":case"keyup":iS(ve,p,pe)}var rt;if(Eg)e:{switch(o){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else _l?G_(o,p)&&(at="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(at="onCompositionStart");at&&(q_&&p.locale!=="ko"&&(_l||at!=="onCompositionStart"?at==="onCompositionEnd"&&_l&&(rt=$_()):(Sa=pe,xg="value"in Sa?Sa.value:Sa.textContent,_l=!0)),nt=qf(ae,at),0<nt.length&&(at=new U_(at,o,null,p,pe),ve.push({event:at,listeners:nt}),rt?at.data=rt:(rt=K_(p),rt!==null&&(at.data=rt)))),(rt=TL?CL(o,p):PL(o,p))&&(ae=qf(ae,"onBeforeInput"),0<ae.length&&(pe=new U_("onBeforeInput","beforeinput",null,p,pe),ve.push({event:pe,listeners:ae}),pe.data=rt))}mS(ve,c)})}function ku(o,c,p){return{instance:o,listener:c,currentTarget:p}}function qf(o,c){for(var p=c+"Capture",v=[];o!==null;){var j=o,E=j.stateNode;j.tag===5&&E!==null&&(j=E,E=Xn(o,p),E!=null&&v.unshift(ku(o,E,j)),E=Xn(o,c),E!=null&&v.push(ku(o,E,j))),o=o.return}return v}function El(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function gS(o,c,p,v,j){for(var E=c._reactName,C=[];p!==null&&p!==v;){var U=p,Y=U.alternate,ae=U.stateNode;if(Y!==null&&Y===v)break;U.tag===5&&ae!==null&&(U=ae,j?(Y=Xn(p,E),Y!=null&&C.unshift(ku(p,Y,U))):j||(Y=Xn(p,E),Y!=null&&C.push(ku(p,Y,U)))),p=p.return}C.length!==0&&o.push({event:c,listeners:C})}var qL=/\r\n?/g,WL=/\u0000|\uFFFD/g;function yS(o){return(typeof o=="string"?o:""+o).replace(qL,`
`).replace(WL,"")}function Wf(o,c,p){if(c=yS(c),yS(o)!==c&&p)throw Error(n(425))}function Hf(){}var Mg=null,Lg=null;function Fg(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var $g=typeof setTimeout=="function"?setTimeout:void 0,HL=typeof clearTimeout=="function"?clearTimeout:void 0,vS=typeof Promise=="function"?Promise:void 0,GL=typeof queueMicrotask=="function"?queueMicrotask:typeof vS<"u"?function(o){return vS.resolve(null).then(o).catch(KL)}:$g;function KL(o){setTimeout(function(){throw o})}function Vg(o,c){var p=c,v=0;do{var j=p.nextSibling;if(o.removeChild(p),j&&j.nodeType===8)if(p=j.data,p==="/$"){if(v===0){o.removeChild(j),gu(c);return}v--}else p!=="$"&&p!=="$?"&&p!=="$!"||v++;p=j}while(p);gu(c)}function Ea(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function xS(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return o;c--}else p==="/$"&&c++}o=o.previousSibling}return null}var kl=Math.random().toString(36).slice(2),ai="__reactFiber$"+kl,Nu="__reactProps$"+kl,Li="__reactContainer$"+kl,zg="__reactEvents$"+kl,YL="__reactListeners$"+kl,QL="__reactHandles$"+kl;function _o(o){var c=o[ai];if(c)return c;for(var p=o.parentNode;p;){if(c=p[Li]||p[ai]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(o=xS(o);o!==null;){if(p=o[ai])return p;o=xS(o)}return c}o=p,p=o.parentNode}return null}function Tu(o){return o=o[ai]||o[Li],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Nl(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function Gf(o){return o[Nu]||null}var Ug=[],Tl=-1;function ka(o){return{current:o}}function en(o){0>Tl||(o.current=Ug[Tl],Ug[Tl]=null,Tl--)}function Qt(o,c){Tl++,Ug[Tl]=o.current,o.current=c}var Na={},dr=ka(Na),Dr=ka(!1),So=Na;function Cl(o,c){var p=o.type.contextTypes;if(!p)return Na;var v=o.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===c)return v.__reactInternalMemoizedMaskedChildContext;var j={},E;for(E in p)j[E]=c[E];return v&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=j),j}function Mr(o){return o=o.childContextTypes,o!=null}function Kf(){en(Dr),en(dr)}function wS(o,c,p){if(dr.current!==Na)throw Error(n(168));Qt(dr,c),Qt(Dr,p)}function bS(o,c,p){var v=o.stateNode;if(c=c.childContextTypes,typeof v.getChildContext!="function")return p;v=v.getChildContext();for(var j in v)if(!(j in c))throw Error(n(108,Ce(o)||"Unknown",j));return I({},p,v)}function Yf(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Na,So=dr.current,Qt(dr,o),Qt(Dr,Dr.current),!0}function _S(o,c,p){var v=o.stateNode;if(!v)throw Error(n(169));p?(o=bS(o,c,So),v.__reactInternalMemoizedMergedChildContext=o,en(Dr),en(dr),Qt(dr,o)):en(Dr),Qt(Dr,p)}var Fi=null,Qf=!1,Bg=!1;function SS(o){Fi===null?Fi=[o]:Fi.push(o)}function XL(o){Qf=!0,SS(o)}function Ta(){if(!Bg&&Fi!==null){Bg=!0;var o=0,c=Wt;try{var p=Fi;for(Wt=1;o<p.length;o++){var v=p[o];do v=v(!0);while(v!==null)}Fi=null,Qf=!1}catch(j){throw Fi!==null&&(Fi=Fi.slice(o+1)),E_(dg,Ta),j}finally{Wt=c,Bg=!1}}return null}var Pl=[],Al=0,Xf=null,Jf=0,ps=[],gs=0,jo=null,$i=1,Vi="";function Eo(o,c){Pl[Al++]=Jf,Pl[Al++]=Xf,Xf=o,Jf=c}function jS(o,c,p){ps[gs++]=$i,ps[gs++]=Vi,ps[gs++]=jo,jo=o;var v=$i;o=Vi;var j=32-Rs(v)-1;v&=~(1<<j),p+=1;var E=32-Rs(c)+j;if(30<E){var C=j-j%5;E=(v&(1<<C)-1).toString(32),v>>=C,j-=C,$i=1<<32-Rs(c)+j|p<<j|v,Vi=E+o}else $i=1<<E|p<<j|v,Vi=o}function qg(o){o.return!==null&&(Eo(o,1),jS(o,1,0))}function Wg(o){for(;o===Xf;)Xf=Pl[--Al],Pl[Al]=null,Jf=Pl[--Al],Pl[Al]=null;for(;o===jo;)jo=ps[--gs],ps[gs]=null,Vi=ps[--gs],ps[gs]=null,$i=ps[--gs],ps[gs]=null}var Zr=null,es=null,on=!1,Os=null;function ES(o,c){var p=ws(5,null,null,0);p.elementType="DELETED",p.stateNode=c,p.return=o,c=o.deletions,c===null?(o.deletions=[p],o.flags|=16):c.push(p)}function kS(o,c){switch(o.tag){case 5:var p=o.type;return c=c.nodeType!==1||p.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,Zr=o,es=Ea(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,Zr=o,es=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(p=jo!==null?{id:$i,overflow:Vi}:null,o.memoizedState={dehydrated:c,treeContext:p,retryLane:1073741824},p=ws(18,null,null,0),p.stateNode=c,p.return=o,o.child=p,Zr=o,es=null,!0):!1;default:return!1}}function Hg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Gg(o){if(on){var c=es;if(c){var p=c;if(!kS(o,c)){if(Hg(o))throw Error(n(418));c=Ea(p.nextSibling);var v=Zr;c&&kS(o,c)?ES(v,p):(o.flags=o.flags&-4097|2,on=!1,Zr=o)}}else{if(Hg(o))throw Error(n(418));o.flags=o.flags&-4097|2,on=!1,Zr=o}}}function NS(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Zr=o}function Zf(o){if(o!==Zr)return!1;if(!on)return NS(o),on=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Fg(o.type,o.memoizedProps)),c&&(c=es)){if(Hg(o))throw TS(),Error(n(418));for(;c;)ES(o,c),c=Ea(c.nextSibling)}if(NS(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"){if(c===0){es=Ea(o.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++}o=o.nextSibling}es=null}}else es=Zr?Ea(o.stateNode.nextSibling):null;return!0}function TS(){for(var o=es;o;)o=Ea(o.nextSibling)}function Rl(){es=Zr=null,on=!1}function Kg(o){Os===null?Os=[o]:Os.push(o)}var JL=T.ReactCurrentBatchConfig;function Cu(o,c,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(n(309));var v=p.stateNode}if(!v)throw Error(n(147,o));var j=v,E=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===E?c.ref:(c=function(C){var U=j.refs;C===null?delete U[E]:U[E]=C},c._stringRef=E,c)}if(typeof o!="string")throw Error(n(284));if(!p._owner)throw Error(n(290,o))}return o}function eh(o,c){throw o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function CS(o){var c=o._init;return c(o._payload)}function PS(o){function c(re,J){if(o){var ie=re.deletions;ie===null?(re.deletions=[J],re.flags|=16):ie.push(J)}}function p(re,J){if(!o)return null;for(;J!==null;)c(re,J),J=J.sibling;return null}function v(re,J){for(re=new Map;J!==null;)J.key!==null?re.set(J.key,J):re.set(J.index,J),J=J.sibling;return re}function j(re,J){return re=Ma(re,J),re.index=0,re.sibling=null,re}function E(re,J,ie){return re.index=ie,o?(ie=re.alternate,ie!==null?(ie=ie.index,ie<J?(re.flags|=2,J):ie):(re.flags|=2,J)):(re.flags|=1048576,J)}function C(re){return o&&re.alternate===null&&(re.flags|=2),re}function U(re,J,ie,Ee){return J===null||J.tag!==6?(J=$y(ie,re.mode,Ee),J.return=re,J):(J=j(J,ie),J.return=re,J)}function Y(re,J,ie,Ee){var Xe=ie.type;return Xe===M?pe(re,J,ie.props.children,Ee,ie.key):J!==null&&(J.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===q&&CS(Xe)===J.type)?(Ee=j(J,ie.props),Ee.ref=Cu(re,J,ie),Ee.return=re,Ee):(Ee=jh(ie.type,ie.key,ie.props,null,re.mode,Ee),Ee.ref=Cu(re,J,ie),Ee.return=re,Ee)}function ae(re,J,ie,Ee){return J===null||J.tag!==4||J.stateNode.containerInfo!==ie.containerInfo||J.stateNode.implementation!==ie.implementation?(J=Vy(ie,re.mode,Ee),J.return=re,J):(J=j(J,ie.children||[]),J.return=re,J)}function pe(re,J,ie,Ee,Xe){return J===null||J.tag!==7?(J=Io(ie,re.mode,Ee,Xe),J.return=re,J):(J=j(J,ie),J.return=re,J)}function ve(re,J,ie){if(typeof J=="string"&&J!==""||typeof J=="number")return J=$y(""+J,re.mode,ie),J.return=re,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case P:return ie=jh(J.type,J.key,J.props,null,re.mode,ie),ie.ref=Cu(re,null,J),ie.return=re,ie;case R:return J=Vy(J,re.mode,ie),J.return=re,J;case q:var Ee=J._init;return ve(re,Ee(J._payload),ie)}if($(J)||X(J))return J=Io(J,re.mode,ie,null),J.return=re,J;eh(re,J)}return null}function fe(re,J,ie,Ee){var Xe=J!==null?J.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number")return Xe!==null?null:U(re,J,""+ie,Ee);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case P:return ie.key===Xe?Y(re,J,ie,Ee):null;case R:return ie.key===Xe?ae(re,J,ie,Ee):null;case q:return Xe=ie._init,fe(re,J,Xe(ie._payload),Ee)}if($(ie)||X(ie))return Xe!==null?null:pe(re,J,ie,Ee,null);eh(re,ie)}return null}function Me(re,J,ie,Ee,Xe){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return re=re.get(ie)||null,U(J,re,""+Ee,Xe);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case P:return re=re.get(Ee.key===null?ie:Ee.key)||null,Y(J,re,Ee,Xe);case R:return re=re.get(Ee.key===null?ie:Ee.key)||null,ae(J,re,Ee,Xe);case q:var nt=Ee._init;return Me(re,J,ie,nt(Ee._payload),Xe)}if($(Ee)||X(Ee))return re=re.get(ie)||null,pe(J,re,Ee,Xe,null);eh(J,Ee)}return null}function He(re,J,ie,Ee){for(var Xe=null,nt=null,rt=J,at=J=0,er=null;rt!==null&&at<ie.length;at++){rt.index>at?(er=rt,rt=null):er=rt.sibling;var Mt=fe(re,rt,ie[at],Ee);if(Mt===null){rt===null&&(rt=er);break}o&&rt&&Mt.alternate===null&&c(re,rt),J=E(Mt,J,at),nt===null?Xe=Mt:nt.sibling=Mt,nt=Mt,rt=er}if(at===ie.length)return p(re,rt),on&&Eo(re,at),Xe;if(rt===null){for(;at<ie.length;at++)rt=ve(re,ie[at],Ee),rt!==null&&(J=E(rt,J,at),nt===null?Xe=rt:nt.sibling=rt,nt=rt);return on&&Eo(re,at),Xe}for(rt=v(re,rt);at<ie.length;at++)er=Me(rt,re,at,ie[at],Ee),er!==null&&(o&&er.alternate!==null&&rt.delete(er.key===null?at:er.key),J=E(er,J,at),nt===null?Xe=er:nt.sibling=er,nt=er);return o&&rt.forEach(function(La){return c(re,La)}),on&&Eo(re,at),Xe}function Qe(re,J,ie,Ee){var Xe=X(ie);if(typeof Xe!="function")throw Error(n(150));if(ie=Xe.call(ie),ie==null)throw Error(n(151));for(var nt=Xe=null,rt=J,at=J=0,er=null,Mt=ie.next();rt!==null&&!Mt.done;at++,Mt=ie.next()){rt.index>at?(er=rt,rt=null):er=rt.sibling;var La=fe(re,rt,Mt.value,Ee);if(La===null){rt===null&&(rt=er);break}o&&rt&&La.alternate===null&&c(re,rt),J=E(La,J,at),nt===null?Xe=La:nt.sibling=La,nt=La,rt=er}if(Mt.done)return p(re,rt),on&&Eo(re,at),Xe;if(rt===null){for(;!Mt.done;at++,Mt=ie.next())Mt=ve(re,Mt.value,Ee),Mt!==null&&(J=E(Mt,J,at),nt===null?Xe=Mt:nt.sibling=Mt,nt=Mt);return on&&Eo(re,at),Xe}for(rt=v(re,rt);!Mt.done;at++,Mt=ie.next())Mt=Me(rt,re,at,Mt.value,Ee),Mt!==null&&(o&&Mt.alternate!==null&&rt.delete(Mt.key===null?at:Mt.key),J=E(Mt,J,at),nt===null?Xe=Mt:nt.sibling=Mt,nt=Mt);return o&&rt.forEach(function(AF){return c(re,AF)}),on&&Eo(re,at),Xe}function jn(re,J,ie,Ee){if(typeof ie=="object"&&ie!==null&&ie.type===M&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case P:e:{for(var Xe=ie.key,nt=J;nt!==null;){if(nt.key===Xe){if(Xe=ie.type,Xe===M){if(nt.tag===7){p(re,nt.sibling),J=j(nt,ie.props.children),J.return=re,re=J;break e}}else if(nt.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===q&&CS(Xe)===nt.type){p(re,nt.sibling),J=j(nt,ie.props),J.ref=Cu(re,nt,ie),J.return=re,re=J;break e}p(re,nt);break}else c(re,nt);nt=nt.sibling}ie.type===M?(J=Io(ie.props.children,re.mode,Ee,ie.key),J.return=re,re=J):(Ee=jh(ie.type,ie.key,ie.props,null,re.mode,Ee),Ee.ref=Cu(re,J,ie),Ee.return=re,re=Ee)}return C(re);case R:e:{for(nt=ie.key;J!==null;){if(J.key===nt)if(J.tag===4&&J.stateNode.containerInfo===ie.containerInfo&&J.stateNode.implementation===ie.implementation){p(re,J.sibling),J=j(J,ie.children||[]),J.return=re,re=J;break e}else{p(re,J);break}else c(re,J);J=J.sibling}J=Vy(ie,re.mode,Ee),J.return=re,re=J}return C(re);case q:return nt=ie._init,jn(re,J,nt(ie._payload),Ee)}if($(ie))return He(re,J,ie,Ee);if(X(ie))return Qe(re,J,ie,Ee);eh(re,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"?(ie=""+ie,J!==null&&J.tag===6?(p(re,J.sibling),J=j(J,ie),J.return=re,re=J):(p(re,J),J=$y(ie,re.mode,Ee),J.return=re,re=J),C(re)):p(re,J)}return jn}var Il=PS(!0),AS=PS(!1),th=ka(null),nh=null,Ol=null,Yg=null;function Qg(){Yg=Ol=nh=null}function Xg(o){var c=th.current;en(th),o._currentValue=c}function Jg(o,c,p){for(;o!==null;){var v=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,v!==null&&(v.childLanes|=c)):v!==null&&(v.childLanes&c)!==c&&(v.childLanes|=c),o===p)break;o=o.return}}function Dl(o,c){nh=o,Yg=Ol=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(Lr=!0),o.firstContext=null)}function ys(o){var c=o._currentValue;if(Yg!==o)if(o={context:o,memoizedValue:c,next:null},Ol===null){if(nh===null)throw Error(n(308));Ol=o,nh.dependencies={lanes:0,firstContext:o}}else Ol=Ol.next=o;return c}var ko=null;function Zg(o){ko===null?ko=[o]:ko.push(o)}function RS(o,c,p,v){var j=c.interleaved;return j===null?(p.next=p,Zg(c)):(p.next=j.next,j.next=p),c.interleaved=p,zi(o,v)}function zi(o,c){o.lanes|=c;var p=o.alternate;for(p!==null&&(p.lanes|=c),p=o,o=o.return;o!==null;)o.childLanes|=c,p=o.alternate,p!==null&&(p.childLanes|=c),p=o,o=o.return;return p.tag===3?p.stateNode:null}var Ca=!1;function ey(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IS(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Ui(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Pa(o,c,p){var v=o.updateQueue;if(v===null)return null;if(v=v.shared,(At&2)!==0){var j=v.pending;return j===null?c.next=c:(c.next=j.next,j.next=c),v.pending=c,zi(o,p)}return j=v.interleaved,j===null?(c.next=c,Zg(v)):(c.next=j.next,j.next=c),v.interleaved=c,zi(o,p)}function rh(o,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194240)!==0)){var v=c.lanes;v&=o.pendingLanes,p|=v,c.lanes=p,mg(o,p)}}function OS(o,c){var p=o.updateQueue,v=o.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var j=null,E=null;if(p=p.firstBaseUpdate,p!==null){do{var C={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};E===null?j=E=C:E=E.next=C,p=p.next}while(p!==null);E===null?j=E=c:E=E.next=c}else j=E=c;p={baseState:v.baseState,firstBaseUpdate:j,lastBaseUpdate:E,shared:v.shared,effects:v.effects},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=c:o.next=c,p.lastBaseUpdate=c}function sh(o,c,p,v){var j=o.updateQueue;Ca=!1;var E=j.firstBaseUpdate,C=j.lastBaseUpdate,U=j.shared.pending;if(U!==null){j.shared.pending=null;var Y=U,ae=Y.next;Y.next=null,C===null?E=ae:C.next=ae,C=Y;var pe=o.alternate;pe!==null&&(pe=pe.updateQueue,U=pe.lastBaseUpdate,U!==C&&(U===null?pe.firstBaseUpdate=ae:U.next=ae,pe.lastBaseUpdate=Y))}if(E!==null){var ve=j.baseState;C=0,pe=ae=Y=null,U=E;do{var fe=U.lane,Me=U.eventTime;if((v&fe)===fe){pe!==null&&(pe=pe.next={eventTime:Me,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var He=o,Qe=U;switch(fe=c,Me=p,Qe.tag){case 1:if(He=Qe.payload,typeof He=="function"){ve=He.call(Me,ve,fe);break e}ve=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Qe.payload,fe=typeof He=="function"?He.call(Me,ve,fe):He,fe==null)break e;ve=I({},ve,fe);break e;case 2:Ca=!0}}U.callback!==null&&U.lane!==0&&(o.flags|=64,fe=j.effects,fe===null?j.effects=[U]:fe.push(U))}else Me={eventTime:Me,lane:fe,tag:U.tag,payload:U.payload,callback:U.callback,next:null},pe===null?(ae=pe=Me,Y=ve):pe=pe.next=Me,C|=fe;if(U=U.next,U===null){if(U=j.shared.pending,U===null)break;fe=U,U=fe.next,fe.next=null,j.lastBaseUpdate=fe,j.shared.pending=null}}while(!0);if(pe===null&&(Y=ve),j.baseState=Y,j.firstBaseUpdate=ae,j.lastBaseUpdate=pe,c=j.shared.interleaved,c!==null){j=c;do C|=j.lane,j=j.next;while(j!==c)}else E===null&&(j.shared.lanes=0);Co|=C,o.lanes=C,o.memoizedState=ve}}function DS(o,c,p){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var v=o[c],j=v.callback;if(j!==null){if(v.callback=null,v=p,typeof j!="function")throw Error(n(191,j));j.call(v)}}}var Pu={},oi=ka(Pu),Au=ka(Pu),Ru=ka(Pu);function No(o){if(o===Pu)throw Error(n(174));return o}function ty(o,c){switch(Qt(Ru,c),Qt(Au,o),Qt(oi,Pu),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:de(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=de(c,o)}en(oi),Qt(oi,c)}function Ml(){en(oi),en(Au),en(Ru)}function MS(o){No(Ru.current);var c=No(oi.current),p=de(c,o.type);c!==p&&(Qt(Au,o),Qt(oi,p))}function ny(o){Au.current===o&&(en(oi),en(Au))}var fn=ka(0);function ih(o){for(var c=o;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var ry=[];function sy(){for(var o=0;o<ry.length;o++)ry[o]._workInProgressVersionPrimary=null;ry.length=0}var ah=T.ReactCurrentDispatcher,iy=T.ReactCurrentBatchConfig,To=0,hn=null,Un=null,Jn=null,oh=!1,Iu=!1,Ou=0,ZL=0;function fr(){throw Error(n(321))}function ay(o,c){if(c===null)return!1;for(var p=0;p<c.length&&p<o.length;p++)if(!Is(o[p],c[p]))return!1;return!0}function oy(o,c,p,v,j,E){if(To=E,hn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,ah.current=o===null||o.memoizedState===null?rF:sF,o=p(v,j),Iu){E=0;do{if(Iu=!1,Ou=0,25<=E)throw Error(n(301));E+=1,Jn=Un=null,c.updateQueue=null,ah.current=iF,o=p(v,j)}while(Iu)}if(ah.current=uh,c=Un!==null&&Un.next!==null,To=0,Jn=Un=hn=null,oh=!1,c)throw Error(n(300));return o}function ly(){var o=Ou!==0;return Ou=0,o}function li(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?hn.memoizedState=Jn=o:Jn=Jn.next=o,Jn}function vs(){if(Un===null){var o=hn.alternate;o=o!==null?o.memoizedState:null}else o=Un.next;var c=Jn===null?hn.memoizedState:Jn.next;if(c!==null)Jn=c,Un=o;else{if(o===null)throw Error(n(310));Un=o,o={memoizedState:Un.memoizedState,baseState:Un.baseState,baseQueue:Un.baseQueue,queue:Un.queue,next:null},Jn===null?hn.memoizedState=Jn=o:Jn=Jn.next=o}return Jn}function Du(o,c){return typeof c=="function"?c(o):c}function cy(o){var c=vs(),p=c.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=o;var v=Un,j=v.baseQueue,E=p.pending;if(E!==null){if(j!==null){var C=j.next;j.next=E.next,E.next=C}v.baseQueue=j=E,p.pending=null}if(j!==null){E=j.next,v=v.baseState;var U=C=null,Y=null,ae=E;do{var pe=ae.lane;if((To&pe)===pe)Y!==null&&(Y=Y.next={lane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),v=ae.hasEagerState?ae.eagerState:o(v,ae.action);else{var ve={lane:pe,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null};Y===null?(U=Y=ve,C=v):Y=Y.next=ve,hn.lanes|=pe,Co|=pe}ae=ae.next}while(ae!==null&&ae!==E);Y===null?C=v:Y.next=U,Is(v,c.memoizedState)||(Lr=!0),c.memoizedState=v,c.baseState=C,c.baseQueue=Y,p.lastRenderedState=v}if(o=p.interleaved,o!==null){j=o;do E=j.lane,hn.lanes|=E,Co|=E,j=j.next;while(j!==o)}else j===null&&(p.lanes=0);return[c.memoizedState,p.dispatch]}function uy(o){var c=vs(),p=c.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=o;var v=p.dispatch,j=p.pending,E=c.memoizedState;if(j!==null){p.pending=null;var C=j=j.next;do E=o(E,C.action),C=C.next;while(C!==j);Is(E,c.memoizedState)||(Lr=!0),c.memoizedState=E,c.baseQueue===null&&(c.baseState=E),p.lastRenderedState=E}return[E,v]}function LS(){}function FS(o,c){var p=hn,v=vs(),j=c(),E=!Is(v.memoizedState,j);if(E&&(v.memoizedState=j,Lr=!0),v=v.queue,dy(zS.bind(null,p,v,o),[o]),v.getSnapshot!==c||E||Jn!==null&&Jn.memoizedState.tag&1){if(p.flags|=2048,Mu(9,VS.bind(null,p,v,j,c),void 0,null),Zn===null)throw Error(n(349));(To&30)!==0||$S(p,c,j)}return j}function $S(o,c,p){o.flags|=16384,o={getSnapshot:c,value:p},c=hn.updateQueue,c===null?(c={lastEffect:null,stores:null},hn.updateQueue=c,c.stores=[o]):(p=c.stores,p===null?c.stores=[o]:p.push(o))}function VS(o,c,p,v){c.value=p,c.getSnapshot=v,US(c)&&BS(o)}function zS(o,c,p){return p(function(){US(c)&&BS(o)})}function US(o){var c=o.getSnapshot;o=o.value;try{var p=c();return!Is(o,p)}catch{return!0}}function BS(o){var c=zi(o,1);c!==null&&Fs(c,o,1,-1)}function qS(o){var c=li();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Du,lastRenderedState:o},c.queue=o,o=o.dispatch=nF.bind(null,hn,o),[c.memoizedState,o]}function Mu(o,c,p,v){return o={tag:o,create:c,destroy:p,deps:v,next:null},c=hn.updateQueue,c===null?(c={lastEffect:null,stores:null},hn.updateQueue=c,c.lastEffect=o.next=o):(p=c.lastEffect,p===null?c.lastEffect=o.next=o:(v=p.next,p.next=o,o.next=v,c.lastEffect=o)),o}function WS(){return vs().memoizedState}function lh(o,c,p,v){var j=li();hn.flags|=o,j.memoizedState=Mu(1|c,p,void 0,v===void 0?null:v)}function ch(o,c,p,v){var j=vs();v=v===void 0?null:v;var E=void 0;if(Un!==null){var C=Un.memoizedState;if(E=C.destroy,v!==null&&ay(v,C.deps)){j.memoizedState=Mu(c,p,E,v);return}}hn.flags|=o,j.memoizedState=Mu(1|c,p,E,v)}function HS(o,c){return lh(8390656,8,o,c)}function dy(o,c){return ch(2048,8,o,c)}function GS(o,c){return ch(4,2,o,c)}function KS(o,c){return ch(4,4,o,c)}function YS(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function QS(o,c,p){return p=p!=null?p.concat([o]):null,ch(4,4,YS.bind(null,c,o),p)}function fy(){}function XS(o,c){var p=vs();c=c===void 0?null:c;var v=p.memoizedState;return v!==null&&c!==null&&ay(c,v[1])?v[0]:(p.memoizedState=[o,c],o)}function JS(o,c){var p=vs();c=c===void 0?null:c;var v=p.memoizedState;return v!==null&&c!==null&&ay(c,v[1])?v[0]:(o=o(),p.memoizedState=[o,c],o)}function ZS(o,c,p){return(To&21)===0?(o.baseState&&(o.baseState=!1,Lr=!0),o.memoizedState=p):(Is(p,c)||(p=C_(),hn.lanes|=p,Co|=p,o.baseState=!0),c)}function eF(o,c){var p=Wt;Wt=p!==0&&4>p?p:4,o(!0);var v=iy.transition;iy.transition={};try{o(!1),c()}finally{Wt=p,iy.transition=v}}function ej(){return vs().memoizedState}function tF(o,c,p){var v=Oa(o);if(p={lane:v,action:p,hasEagerState:!1,eagerState:null,next:null},tj(o))nj(c,p);else if(p=RS(o,c,p,v),p!==null){var j=br();Fs(p,o,v,j),rj(p,c,v)}}function nF(o,c,p){var v=Oa(o),j={lane:v,action:p,hasEagerState:!1,eagerState:null,next:null};if(tj(o))nj(c,j);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=c.lastRenderedReducer,E!==null))try{var C=c.lastRenderedState,U=E(C,p);if(j.hasEagerState=!0,j.eagerState=U,Is(U,C)){var Y=c.interleaved;Y===null?(j.next=j,Zg(c)):(j.next=Y.next,Y.next=j),c.interleaved=j;return}}catch{}finally{}p=RS(o,c,j,v),p!==null&&(j=br(),Fs(p,o,v,j),rj(p,c,v))}}function tj(o){var c=o.alternate;return o===hn||c!==null&&c===hn}function nj(o,c){Iu=oh=!0;var p=o.pending;p===null?c.next=c:(c.next=p.next,p.next=c),o.pending=c}function rj(o,c,p){if((p&4194240)!==0){var v=c.lanes;v&=o.pendingLanes,p|=v,c.lanes=p,mg(o,p)}}var uh={readContext:ys,useCallback:fr,useContext:fr,useEffect:fr,useImperativeHandle:fr,useInsertionEffect:fr,useLayoutEffect:fr,useMemo:fr,useReducer:fr,useRef:fr,useState:fr,useDebugValue:fr,useDeferredValue:fr,useTransition:fr,useMutableSource:fr,useSyncExternalStore:fr,useId:fr,unstable_isNewReconciler:!1},rF={readContext:ys,useCallback:function(o,c){return li().memoizedState=[o,c===void 0?null:c],o},useContext:ys,useEffect:HS,useImperativeHandle:function(o,c,p){return p=p!=null?p.concat([o]):null,lh(4194308,4,YS.bind(null,c,o),p)},useLayoutEffect:function(o,c){return lh(4194308,4,o,c)},useInsertionEffect:function(o,c){return lh(4,2,o,c)},useMemo:function(o,c){var p=li();return c=c===void 0?null:c,o=o(),p.memoizedState=[o,c],o},useReducer:function(o,c,p){var v=li();return c=p!==void 0?p(c):c,v.memoizedState=v.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},v.queue=o,o=o.dispatch=tF.bind(null,hn,o),[v.memoizedState,o]},useRef:function(o){var c=li();return o={current:o},c.memoizedState=o},useState:qS,useDebugValue:fy,useDeferredValue:function(o){return li().memoizedState=o},useTransition:function(){var o=qS(!1),c=o[0];return o=eF.bind(null,o[1]),li().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,p){var v=hn,j=li();if(on){if(p===void 0)throw Error(n(407));p=p()}else{if(p=c(),Zn===null)throw Error(n(349));(To&30)!==0||$S(v,c,p)}j.memoizedState=p;var E={value:p,getSnapshot:c};return j.queue=E,HS(zS.bind(null,v,E,o),[o]),v.flags|=2048,Mu(9,VS.bind(null,v,E,p,c),void 0,null),p},useId:function(){var o=li(),c=Zn.identifierPrefix;if(on){var p=Vi,v=$i;p=(v&~(1<<32-Rs(v)-1)).toString(32)+p,c=":"+c+"R"+p,p=Ou++,0<p&&(c+="H"+p.toString(32)),c+=":"}else p=ZL++,c=":"+c+"r"+p.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},sF={readContext:ys,useCallback:XS,useContext:ys,useEffect:dy,useImperativeHandle:QS,useInsertionEffect:GS,useLayoutEffect:KS,useMemo:JS,useReducer:cy,useRef:WS,useState:function(){return cy(Du)},useDebugValue:fy,useDeferredValue:function(o){var c=vs();return ZS(c,Un.memoizedState,o)},useTransition:function(){var o=cy(Du)[0],c=vs().memoizedState;return[o,c]},useMutableSource:LS,useSyncExternalStore:FS,useId:ej,unstable_isNewReconciler:!1},iF={readContext:ys,useCallback:XS,useContext:ys,useEffect:dy,useImperativeHandle:QS,useInsertionEffect:GS,useLayoutEffect:KS,useMemo:JS,useReducer:uy,useRef:WS,useState:function(){return uy(Du)},useDebugValue:fy,useDeferredValue:function(o){var c=vs();return Un===null?c.memoizedState=o:ZS(c,Un.memoizedState,o)},useTransition:function(){var o=uy(Du)[0],c=vs().memoizedState;return[o,c]},useMutableSource:LS,useSyncExternalStore:FS,useId:ej,unstable_isNewReconciler:!1};function Ds(o,c){if(o&&o.defaultProps){c=I({},c),o=o.defaultProps;for(var p in o)c[p]===void 0&&(c[p]=o[p]);return c}return c}function hy(o,c,p,v){c=o.memoizedState,p=p(v,c),p=p==null?c:I({},c,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var dh={isMounted:function(o){return(o=o._reactInternals)?bo(o)===o:!1},enqueueSetState:function(o,c,p){o=o._reactInternals;var v=br(),j=Oa(o),E=Ui(v,j);E.payload=c,p!=null&&(E.callback=p),c=Pa(o,E,j),c!==null&&(Fs(c,o,j,v),rh(c,o,j))},enqueueReplaceState:function(o,c,p){o=o._reactInternals;var v=br(),j=Oa(o),E=Ui(v,j);E.tag=1,E.payload=c,p!=null&&(E.callback=p),c=Pa(o,E,j),c!==null&&(Fs(c,o,j,v),rh(c,o,j))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var p=br(),v=Oa(o),j=Ui(p,v);j.tag=2,c!=null&&(j.callback=c),c=Pa(o,j,v),c!==null&&(Fs(c,o,v,p),rh(c,o,v))}};function sj(o,c,p,v,j,E,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(v,E,C):c.prototype&&c.prototype.isPureReactComponent?!_u(p,v)||!_u(j,E):!0}function ij(o,c,p){var v=!1,j=Na,E=c.contextType;return typeof E=="object"&&E!==null?E=ys(E):(j=Mr(c)?So:dr.current,v=c.contextTypes,E=(v=v!=null)?Cl(o,j):Na),c=new c(p,E),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=dh,o.stateNode=c,c._reactInternals=o,v&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=j,o.__reactInternalMemoizedMaskedChildContext=E),c}function aj(o,c,p,v){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,v),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,v),c.state!==o&&dh.enqueueReplaceState(c,c.state,null)}function my(o,c,p,v){var j=o.stateNode;j.props=p,j.state=o.memoizedState,j.refs={},ey(o);var E=c.contextType;typeof E=="object"&&E!==null?j.context=ys(E):(E=Mr(c)?So:dr.current,j.context=Cl(o,E)),j.state=o.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(hy(o,c,E,p),j.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(c=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),c!==j.state&&dh.enqueueReplaceState(j,j.state,null),sh(o,p,j,v),j.state=o.memoizedState),typeof j.componentDidMount=="function"&&(o.flags|=4194308)}function Ll(o,c){try{var p="",v=c;do p+=he(v),v=v.return;while(v);var j=p}catch(E){j=`
Error generating stack: `+E.message+`
`+E.stack}return{value:o,source:c,stack:j,digest:null}}function py(o,c,p){return{value:o,source:null,stack:p??null,digest:c??null}}function gy(o,c){try{console.error(c.value)}catch(p){setTimeout(function(){throw p})}}var aF=typeof WeakMap=="function"?WeakMap:Map;function oj(o,c,p){p=Ui(-1,p),p.tag=3,p.payload={element:null};var v=c.value;return p.callback=function(){vh||(vh=!0,Ay=v),gy(o,c)},p}function lj(o,c,p){p=Ui(-1,p),p.tag=3;var v=o.type.getDerivedStateFromError;if(typeof v=="function"){var j=c.value;p.payload=function(){return v(j)},p.callback=function(){gy(o,c)}}var E=o.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(p.callback=function(){gy(o,c),typeof v!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})}),p}function cj(o,c,p){var v=o.pingCache;if(v===null){v=o.pingCache=new aF;var j=new Set;v.set(c,j)}else j=v.get(c),j===void 0&&(j=new Set,v.set(c,j));j.has(p)||(j.add(p),o=wF.bind(null,o,c,p),c.then(o,o))}function uj(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function dj(o,c,p,v,j){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(c=Ui(-1,1),c.tag=2,Pa(p,c,1))),p.lanes|=1),o):(o.flags|=65536,o.lanes=j,o)}var oF=T.ReactCurrentOwner,Lr=!1;function wr(o,c,p,v){c.child=o===null?AS(c,null,p,v):Il(c,o.child,p,v)}function fj(o,c,p,v,j){p=p.render;var E=c.ref;return Dl(c,j),v=oy(o,c,p,v,E,j),p=ly(),o!==null&&!Lr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~j,Bi(o,c,j)):(on&&p&&qg(c),c.flags|=1,wr(o,c,v,j),c.child)}function hj(o,c,p,v,j){if(o===null){var E=p.type;return typeof E=="function"&&!Fy(E)&&E.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(c.tag=15,c.type=E,mj(o,c,E,v,j)):(o=jh(p.type,null,v,c,c.mode,j),o.ref=c.ref,o.return=c,c.child=o)}if(E=o.child,(o.lanes&j)===0){var C=E.memoizedProps;if(p=p.compare,p=p!==null?p:_u,p(C,v)&&o.ref===c.ref)return Bi(o,c,j)}return c.flags|=1,o=Ma(E,v),o.ref=c.ref,o.return=c,c.child=o}function mj(o,c,p,v,j){if(o!==null){var E=o.memoizedProps;if(_u(E,v)&&o.ref===c.ref)if(Lr=!1,c.pendingProps=v=E,(o.lanes&j)!==0)(o.flags&131072)!==0&&(Lr=!0);else return c.lanes=o.lanes,Bi(o,c,j)}return yy(o,c,p,v,j)}function pj(o,c,p){var v=c.pendingProps,j=v.children,E=o!==null?o.memoizedState:null;if(v.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt($l,ts),ts|=p;else{if((p&1073741824)===0)return o=E!==null?E.baseLanes|p:p,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,Qt($l,ts),ts|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=E!==null?E.baseLanes:p,Qt($l,ts),ts|=v}else E!==null?(v=E.baseLanes|p,c.memoizedState=null):v=p,Qt($l,ts),ts|=v;return wr(o,c,j,p),c.child}function gj(o,c){var p=c.ref;(o===null&&p!==null||o!==null&&o.ref!==p)&&(c.flags|=512,c.flags|=2097152)}function yy(o,c,p,v,j){var E=Mr(p)?So:dr.current;return E=Cl(c,E),Dl(c,j),p=oy(o,c,p,v,E,j),v=ly(),o!==null&&!Lr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~j,Bi(o,c,j)):(on&&v&&qg(c),c.flags|=1,wr(o,c,p,j),c.child)}function yj(o,c,p,v,j){if(Mr(p)){var E=!0;Yf(c)}else E=!1;if(Dl(c,j),c.stateNode===null)hh(o,c),ij(c,p,v),my(c,p,v,j),v=!0;else if(o===null){var C=c.stateNode,U=c.memoizedProps;C.props=U;var Y=C.context,ae=p.contextType;typeof ae=="object"&&ae!==null?ae=ys(ae):(ae=Mr(p)?So:dr.current,ae=Cl(c,ae));var pe=p.getDerivedStateFromProps,ve=typeof pe=="function"||typeof C.getSnapshotBeforeUpdate=="function";ve||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(U!==v||Y!==ae)&&aj(c,C,v,ae),Ca=!1;var fe=c.memoizedState;C.state=fe,sh(c,v,C,j),Y=c.memoizedState,U!==v||fe!==Y||Dr.current||Ca?(typeof pe=="function"&&(hy(c,p,pe,v),Y=c.memoizedState),(U=Ca||sj(c,p,U,v,fe,Y,ae))?(ve||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(c.flags|=4194308)):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=v,c.memoizedState=Y),C.props=v,C.state=Y,C.context=ae,v=U):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),v=!1)}else{C=c.stateNode,IS(o,c),U=c.memoizedProps,ae=c.type===c.elementType?U:Ds(c.type,U),C.props=ae,ve=c.pendingProps,fe=C.context,Y=p.contextType,typeof Y=="object"&&Y!==null?Y=ys(Y):(Y=Mr(p)?So:dr.current,Y=Cl(c,Y));var Me=p.getDerivedStateFromProps;(pe=typeof Me=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(U!==ve||fe!==Y)&&aj(c,C,v,Y),Ca=!1,fe=c.memoizedState,C.state=fe,sh(c,v,C,j);var He=c.memoizedState;U!==ve||fe!==He||Dr.current||Ca?(typeof Me=="function"&&(hy(c,p,Me,v),He=c.memoizedState),(ae=Ca||sj(c,p,ae,v,fe,He,Y)||!1)?(pe||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(v,He,Y),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(v,He,Y)),typeof C.componentDidUpdate=="function"&&(c.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof C.componentDidUpdate!="function"||U===o.memoizedProps&&fe===o.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&fe===o.memoizedState||(c.flags|=1024),c.memoizedProps=v,c.memoizedState=He),C.props=v,C.state=He,C.context=Y,v=ae):(typeof C.componentDidUpdate!="function"||U===o.memoizedProps&&fe===o.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&fe===o.memoizedState||(c.flags|=1024),v=!1)}return vy(o,c,p,v,E,j)}function vy(o,c,p,v,j,E){gj(o,c);var C=(c.flags&128)!==0;if(!v&&!C)return j&&_S(c,p,!1),Bi(o,c,E);v=c.stateNode,oF.current=c;var U=C&&typeof p.getDerivedStateFromError!="function"?null:v.render();return c.flags|=1,o!==null&&C?(c.child=Il(c,o.child,null,E),c.child=Il(c,null,U,E)):wr(o,c,U,E),c.memoizedState=v.state,j&&_S(c,p,!0),c.child}function vj(o){var c=o.stateNode;c.pendingContext?wS(o,c.pendingContext,c.pendingContext!==c.context):c.context&&wS(o,c.context,!1),ty(o,c.containerInfo)}function xj(o,c,p,v,j){return Rl(),Kg(j),c.flags|=256,wr(o,c,p,v),c.child}var xy={dehydrated:null,treeContext:null,retryLane:0};function wy(o){return{baseLanes:o,cachePool:null,transitions:null}}function wj(o,c,p){var v=c.pendingProps,j=fn.current,E=!1,C=(c.flags&128)!==0,U;if((U=C)||(U=o!==null&&o.memoizedState===null?!1:(j&2)!==0),U?(E=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(j|=1),Qt(fn,j&1),o===null)return Gg(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(C=v.children,o=v.fallback,E?(v=c.mode,E=c.child,C={mode:"hidden",children:C},(v&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=C):E=Eh(C,v,0,null),o=Io(o,v,p,null),E.return=c,o.return=c,E.sibling=o,c.child=E,c.child.memoizedState=wy(p),c.memoizedState=xy,o):by(c,C));if(j=o.memoizedState,j!==null&&(U=j.dehydrated,U!==null))return lF(o,c,C,v,U,j,p);if(E){E=v.fallback,C=c.mode,j=o.child,U=j.sibling;var Y={mode:"hidden",children:v.children};return(C&1)===0&&c.child!==j?(v=c.child,v.childLanes=0,v.pendingProps=Y,c.deletions=null):(v=Ma(j,Y),v.subtreeFlags=j.subtreeFlags&14680064),U!==null?E=Ma(U,E):(E=Io(E,C,p,null),E.flags|=2),E.return=c,v.return=c,v.sibling=E,c.child=v,v=E,E=c.child,C=o.child.memoizedState,C=C===null?wy(p):{baseLanes:C.baseLanes|p,cachePool:null,transitions:C.transitions},E.memoizedState=C,E.childLanes=o.childLanes&~p,c.memoizedState=xy,v}return E=o.child,o=E.sibling,v=Ma(E,{mode:"visible",children:v.children}),(c.mode&1)===0&&(v.lanes=p),v.return=c,v.sibling=null,o!==null&&(p=c.deletions,p===null?(c.deletions=[o],c.flags|=16):p.push(o)),c.child=v,c.memoizedState=null,v}function by(o,c){return c=Eh({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function fh(o,c,p,v){return v!==null&&Kg(v),Il(c,o.child,null,p),o=by(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function lF(o,c,p,v,j,E,C){if(p)return c.flags&256?(c.flags&=-257,v=py(Error(n(422))),fh(o,c,C,v)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(E=v.fallback,j=c.mode,v=Eh({mode:"visible",children:v.children},j,0,null),E=Io(E,j,C,null),E.flags|=2,v.return=c,E.return=c,v.sibling=E,c.child=v,(c.mode&1)!==0&&Il(c,o.child,null,C),c.child.memoizedState=wy(C),c.memoizedState=xy,E);if((c.mode&1)===0)return fh(o,c,C,null);if(j.data==="$!"){if(v=j.nextSibling&&j.nextSibling.dataset,v)var U=v.dgst;return v=U,E=Error(n(419)),v=py(E,v,void 0),fh(o,c,C,v)}if(U=(C&o.childLanes)!==0,Lr||U){if(v=Zn,v!==null){switch(C&-C){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=(j&(v.suspendedLanes|C))!==0?0:j,j!==0&&j!==E.retryLane&&(E.retryLane=j,zi(o,j),Fs(v,o,j,-1))}return Ly(),v=py(Error(n(421))),fh(o,c,C,v)}return j.data==="$?"?(c.flags|=128,c.child=o.child,c=bF.bind(null,o),j._reactRetry=c,null):(o=E.treeContext,es=Ea(j.nextSibling),Zr=c,on=!0,Os=null,o!==null&&(ps[gs++]=$i,ps[gs++]=Vi,ps[gs++]=jo,$i=o.id,Vi=o.overflow,jo=c),c=by(c,v.children),c.flags|=4096,c)}function bj(o,c,p){o.lanes|=c;var v=o.alternate;v!==null&&(v.lanes|=c),Jg(o.return,c,p)}function _y(o,c,p,v,j){var E=o.memoizedState;E===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:j}:(E.isBackwards=c,E.rendering=null,E.renderingStartTime=0,E.last=v,E.tail=p,E.tailMode=j)}function _j(o,c,p){var v=c.pendingProps,j=v.revealOrder,E=v.tail;if(wr(o,c,v.children,p),v=fn.current,(v&2)!==0)v=v&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&bj(o,p,c);else if(o.tag===19)bj(o,p,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}v&=1}if(Qt(fn,v),(c.mode&1)===0)c.memoizedState=null;else switch(j){case"forwards":for(p=c.child,j=null;p!==null;)o=p.alternate,o!==null&&ih(o)===null&&(j=p),p=p.sibling;p=j,p===null?(j=c.child,c.child=null):(j=p.sibling,p.sibling=null),_y(c,!1,j,p,E);break;case"backwards":for(p=null,j=c.child,c.child=null;j!==null;){if(o=j.alternate,o!==null&&ih(o)===null){c.child=j;break}o=j.sibling,j.sibling=p,p=j,j=o}_y(c,!0,p,null,E);break;case"together":_y(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function hh(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Bi(o,c,p){if(o!==null&&(c.dependencies=o.dependencies),Co|=c.lanes,(p&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,p=Ma(o,o.pendingProps),c.child=p,p.return=c;o.sibling!==null;)o=o.sibling,p=p.sibling=Ma(o,o.pendingProps),p.return=c;p.sibling=null}return c.child}function cF(o,c,p){switch(c.tag){case 3:vj(c),Rl();break;case 5:MS(c);break;case 1:Mr(c.type)&&Yf(c);break;case 4:ty(c,c.stateNode.containerInfo);break;case 10:var v=c.type._context,j=c.memoizedProps.value;Qt(th,v._currentValue),v._currentValue=j;break;case 13:if(v=c.memoizedState,v!==null)return v.dehydrated!==null?(Qt(fn,fn.current&1),c.flags|=128,null):(p&c.child.childLanes)!==0?wj(o,c,p):(Qt(fn,fn.current&1),o=Bi(o,c,p),o!==null?o.sibling:null);Qt(fn,fn.current&1);break;case 19:if(v=(p&c.childLanes)!==0,(o.flags&128)!==0){if(v)return _j(o,c,p);c.flags|=128}if(j=c.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),Qt(fn,fn.current),v)break;return null;case 22:case 23:return c.lanes=0,pj(o,c,p)}return Bi(o,c,p)}var Sj,Sy,jj,Ej;Sj=function(o,c){for(var p=c.child;p!==null;){if(p.tag===5||p.tag===6)o.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Sy=function(){},jj=function(o,c,p,v){var j=o.memoizedProps;if(j!==v){o=c.stateNode,No(oi.current);var E=null;switch(p){case"input":j=Dt(o,j),v=Dt(o,v),E=[];break;case"select":j=I({},j,{value:void 0}),v=I({},v,{value:void 0}),E=[];break;case"textarea":j=se(o,j),v=se(o,v),E=[];break;default:typeof j.onClick!="function"&&typeof v.onClick=="function"&&(o.onclick=Hf)}dn(p,v);var C;p=null;for(ae in j)if(!v.hasOwnProperty(ae)&&j.hasOwnProperty(ae)&&j[ae]!=null)if(ae==="style"){var U=j[ae];for(C in U)U.hasOwnProperty(C)&&(p||(p={}),p[C]="")}else ae!=="dangerouslySetInnerHTML"&&ae!=="children"&&ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(s.hasOwnProperty(ae)?E||(E=[]):(E=E||[]).push(ae,null));for(ae in v){var Y=v[ae];if(U=j!=null?j[ae]:void 0,v.hasOwnProperty(ae)&&Y!==U&&(Y!=null||U!=null))if(ae==="style")if(U){for(C in U)!U.hasOwnProperty(C)||Y&&Y.hasOwnProperty(C)||(p||(p={}),p[C]="");for(C in Y)Y.hasOwnProperty(C)&&U[C]!==Y[C]&&(p||(p={}),p[C]=Y[C])}else p||(E||(E=[]),E.push(ae,p)),p=Y;else ae==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,U=U?U.__html:void 0,Y!=null&&U!==Y&&(E=E||[]).push(ae,Y)):ae==="children"?typeof Y!="string"&&typeof Y!="number"||(E=E||[]).push(ae,""+Y):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&(s.hasOwnProperty(ae)?(Y!=null&&ae==="onScroll"&&Zt("scroll",o),E||U===Y||(E=[])):(E=E||[]).push(ae,Y))}p&&(E=E||[]).push("style",p);var ae=E;(c.updateQueue=ae)&&(c.flags|=4)}},Ej=function(o,c,p,v){p!==v&&(c.flags|=4)};function Lu(o,c){if(!on)switch(o.tailMode){case"hidden":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:v.sibling=null}}function hr(o){var c=o.alternate!==null&&o.alternate.child===o.child,p=0,v=0;if(c)for(var j=o.child;j!==null;)p|=j.lanes|j.childLanes,v|=j.subtreeFlags&14680064,v|=j.flags&14680064,j.return=o,j=j.sibling;else for(j=o.child;j!==null;)p|=j.lanes|j.childLanes,v|=j.subtreeFlags,v|=j.flags,j.return=o,j=j.sibling;return o.subtreeFlags|=v,o.childLanes=p,c}function uF(o,c,p){var v=c.pendingProps;switch(Wg(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hr(c),null;case 1:return Mr(c.type)&&Kf(),hr(c),null;case 3:return v=c.stateNode,Ml(),en(Dr),en(dr),sy(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(o===null||o.child===null)&&(Zf(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Os!==null&&(Oy(Os),Os=null))),Sy(o,c),hr(c),null;case 5:ny(c);var j=No(Ru.current);if(p=c.type,o!==null&&c.stateNode!=null)jj(o,c,p,v,j),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!v){if(c.stateNode===null)throw Error(n(166));return hr(c),null}if(o=No(oi.current),Zf(c)){v=c.stateNode,p=c.type;var E=c.memoizedProps;switch(v[ai]=c,v[Nu]=E,o=(c.mode&1)!==0,p){case"dialog":Zt("cancel",v),Zt("close",v);break;case"iframe":case"object":case"embed":Zt("load",v);break;case"video":case"audio":for(j=0;j<ju.length;j++)Zt(ju[j],v);break;case"source":Zt("error",v);break;case"img":case"image":case"link":Zt("error",v),Zt("load",v);break;case"details":Zt("toggle",v);break;case"input":Pn(v,E),Zt("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!E.multiple},Zt("invalid",v);break;case"textarea":ke(v,E),Zt("invalid",v)}dn(p,E),j=null;for(var C in E)if(E.hasOwnProperty(C)){var U=E[C];C==="children"?typeof U=="string"?v.textContent!==U&&(E.suppressHydrationWarning!==!0&&Wf(v.textContent,U,o),j=["children",U]):typeof U=="number"&&v.textContent!==""+U&&(E.suppressHydrationWarning!==!0&&Wf(v.textContent,U,o),j=["children",""+U]):s.hasOwnProperty(C)&&U!=null&&C==="onScroll"&&Zt("scroll",v)}switch(p){case"input":We(v),Rr(v,E,!0);break;case"textarea":We(v),xe(v);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(v.onclick=Hf)}v=j,c.updateQueue=v,v!==null&&(c.flags|=4)}else{C=j.nodeType===9?j:j.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=ee(p)),o==="http://www.w3.org/1999/xhtml"?p==="script"?(o=C.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof v.is=="string"?o=C.createElement(p,{is:v.is}):(o=C.createElement(p),p==="select"&&(C=o,v.multiple?C.multiple=!0:v.size&&(C.size=v.size))):o=C.createElementNS(o,p),o[ai]=c,o[Nu]=v,Sj(o,c,!1,!1),c.stateNode=o;e:{switch(C=Or(p,v),p){case"dialog":Zt("cancel",o),Zt("close",o),j=v;break;case"iframe":case"object":case"embed":Zt("load",o),j=v;break;case"video":case"audio":for(j=0;j<ju.length;j++)Zt(ju[j],o);j=v;break;case"source":Zt("error",o),j=v;break;case"img":case"image":case"link":Zt("error",o),Zt("load",o),j=v;break;case"details":Zt("toggle",o),j=v;break;case"input":Pn(o,v),j=Dt(o,v),Zt("invalid",o);break;case"option":j=v;break;case"select":o._wrapperState={wasMultiple:!!v.multiple},j=I({},v,{value:void 0}),Zt("invalid",o);break;case"textarea":ke(o,v),j=se(o,v),Zt("invalid",o);break;default:j=v}dn(p,j),U=j;for(E in U)if(U.hasOwnProperty(E)){var Y=U[E];E==="style"?Ir(o,Y):E==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&et(o,Y)):E==="children"?typeof Y=="string"?(p!=="textarea"||Y!=="")&&dt(o,Y):typeof Y=="number"&&dt(o,""+Y):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(s.hasOwnProperty(E)?Y!=null&&E==="onScroll"&&Zt("scroll",o):Y!=null&&N(o,E,Y,C))}switch(p){case"input":We(o),Rr(o,v,!1);break;case"textarea":We(o),xe(o);break;case"option":v.value!=null&&o.setAttribute("value",""+ge(v.value));break;case"select":o.multiple=!!v.multiple,E=v.value,E!=null?te(o,!!v.multiple,E,!1):v.defaultValue!=null&&te(o,!!v.multiple,v.defaultValue,!0);break;default:typeof j.onClick=="function"&&(o.onclick=Hf)}switch(p){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return hr(c),null;case 6:if(o&&c.stateNode!=null)Ej(o,c,o.memoizedProps,v);else{if(typeof v!="string"&&c.stateNode===null)throw Error(n(166));if(p=No(Ru.current),No(oi.current),Zf(c)){if(v=c.stateNode,p=c.memoizedProps,v[ai]=c,(E=v.nodeValue!==p)&&(o=Zr,o!==null))switch(o.tag){case 3:Wf(v.nodeValue,p,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Wf(v.nodeValue,p,(o.mode&1)!==0)}E&&(c.flags|=4)}else v=(p.nodeType===9?p:p.ownerDocument).createTextNode(v),v[ai]=c,c.stateNode=v}return hr(c),null;case 13:if(en(fn),v=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(on&&es!==null&&(c.mode&1)!==0&&(c.flags&128)===0)TS(),Rl(),c.flags|=98560,E=!1;else if(E=Zf(c),v!==null&&v.dehydrated!==null){if(o===null){if(!E)throw Error(n(318));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[ai]=c}else Rl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;hr(c),E=!1}else Os!==null&&(Oy(Os),Os=null),E=!0;if(!E)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=p,c):(v=v!==null,v!==(o!==null&&o.memoizedState!==null)&&v&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(fn.current&1)!==0?Bn===0&&(Bn=3):Ly())),c.updateQueue!==null&&(c.flags|=4),hr(c),null);case 4:return Ml(),Sy(o,c),o===null&&Eu(c.stateNode.containerInfo),hr(c),null;case 10:return Xg(c.type._context),hr(c),null;case 17:return Mr(c.type)&&Kf(),hr(c),null;case 19:if(en(fn),E=c.memoizedState,E===null)return hr(c),null;if(v=(c.flags&128)!==0,C=E.rendering,C===null)if(v)Lu(E,!1);else{if(Bn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(C=ih(o),C!==null){for(c.flags|=128,Lu(E,!1),v=C.updateQueue,v!==null&&(c.updateQueue=v,c.flags|=4),c.subtreeFlags=0,v=p,p=c.child;p!==null;)E=p,o=v,E.flags&=14680066,C=E.alternate,C===null?(E.childLanes=0,E.lanes=o,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=C.childLanes,E.lanes=C.lanes,E.child=C.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=C.memoizedProps,E.memoizedState=C.memoizedState,E.updateQueue=C.updateQueue,E.type=C.type,o=C.dependencies,E.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),p=p.sibling;return Qt(fn,fn.current&1|2),c.child}o=o.sibling}E.tail!==null&&Sn()>Vl&&(c.flags|=128,v=!0,Lu(E,!1),c.lanes=4194304)}else{if(!v)if(o=ih(C),o!==null){if(c.flags|=128,v=!0,p=o.updateQueue,p!==null&&(c.updateQueue=p,c.flags|=4),Lu(E,!0),E.tail===null&&E.tailMode==="hidden"&&!C.alternate&&!on)return hr(c),null}else 2*Sn()-E.renderingStartTime>Vl&&p!==1073741824&&(c.flags|=128,v=!0,Lu(E,!1),c.lanes=4194304);E.isBackwards?(C.sibling=c.child,c.child=C):(p=E.last,p!==null?p.sibling=C:c.child=C,E.last=C)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=Sn(),c.sibling=null,p=fn.current,Qt(fn,v?p&1|2:p&1),c):(hr(c),null);case 22:case 23:return My(),v=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==v&&(c.flags|=8192),v&&(c.mode&1)!==0?(ts&1073741824)!==0&&(hr(c),c.subtreeFlags&6&&(c.flags|=8192)):hr(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function dF(o,c){switch(Wg(c),c.tag){case 1:return Mr(c.type)&&Kf(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Ml(),en(Dr),en(dr),sy(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return ny(c),null;case 13:if(en(fn),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Rl()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return en(fn),null;case 4:return Ml(),null;case 10:return Xg(c.type._context),null;case 22:case 23:return My(),null;case 24:return null;default:return null}}var mh=!1,mr=!1,fF=typeof WeakSet=="function"?WeakSet:Set,ze=null;function Fl(o,c){var p=o.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(v){gn(o,c,v)}else p.current=null}function jy(o,c,p){try{p()}catch(v){gn(o,c,v)}}var kj=!1;function hF(o,c){if(Mg=Of,o=sS(),Tg(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var j=v.anchorOffset,E=v.focusNode;v=v.focusOffset;try{p.nodeType,E.nodeType}catch{p=null;break e}var C=0,U=-1,Y=-1,ae=0,pe=0,ve=o,fe=null;t:for(;;){for(var Me;ve!==p||j!==0&&ve.nodeType!==3||(U=C+j),ve!==E||v!==0&&ve.nodeType!==3||(Y=C+v),ve.nodeType===3&&(C+=ve.nodeValue.length),(Me=ve.firstChild)!==null;)fe=ve,ve=Me;for(;;){if(ve===o)break t;if(fe===p&&++ae===j&&(U=C),fe===E&&++pe===v&&(Y=C),(Me=ve.nextSibling)!==null)break;ve=fe,fe=ve.parentNode}ve=Me}p=U===-1||Y===-1?null:{start:U,end:Y}}else p=null}p=p||{start:0,end:0}}else p=null;for(Lg={focusedElem:o,selectionRange:p},Of=!1,ze=c;ze!==null;)if(c=ze,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,ze=o;else for(;ze!==null;){c=ze;try{var He=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(He!==null){var Qe=He.memoizedProps,jn=He.memoizedState,re=c.stateNode,J=re.getSnapshotBeforeUpdate(c.elementType===c.type?Qe:Ds(c.type,Qe),jn);re.__reactInternalSnapshotBeforeUpdate=J}break;case 3:var ie=c.stateNode.containerInfo;ie.nodeType===1?ie.textContent="":ie.nodeType===9&&ie.documentElement&&ie.removeChild(ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ee){gn(c,c.return,Ee)}if(o=c.sibling,o!==null){o.return=c.return,ze=o;break}ze=c.return}return He=kj,kj=!1,He}function Fu(o,c,p){var v=c.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var j=v=v.next;do{if((j.tag&o)===o){var E=j.destroy;j.destroy=void 0,E!==void 0&&jy(c,p,E)}j=j.next}while(j!==v)}}function ph(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&o)===o){var v=p.create;p.destroy=v()}p=p.next}while(p!==c)}}function Ey(o){var c=o.ref;if(c!==null){var p=o.stateNode;switch(o.tag){case 5:o=p;break;default:o=p}typeof c=="function"?c(o):c.current=o}}function Nj(o){var c=o.alternate;c!==null&&(o.alternate=null,Nj(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[ai],delete c[Nu],delete c[zg],delete c[YL],delete c[QL])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Tj(o){return o.tag===5||o.tag===3||o.tag===4}function Cj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Tj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ky(o,c,p){var v=o.tag;if(v===5||v===6)o=o.stateNode,c?p.nodeType===8?p.parentNode.insertBefore(o,c):p.insertBefore(o,c):(p.nodeType===8?(c=p.parentNode,c.insertBefore(o,p)):(c=p,c.appendChild(o)),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=Hf));else if(v!==4&&(o=o.child,o!==null))for(ky(o,c,p),o=o.sibling;o!==null;)ky(o,c,p),o=o.sibling}function Ny(o,c,p){var v=o.tag;if(v===5||v===6)o=o.stateNode,c?p.insertBefore(o,c):p.appendChild(o);else if(v!==4&&(o=o.child,o!==null))for(Ny(o,c,p),o=o.sibling;o!==null;)Ny(o,c,p),o=o.sibling}var ar=null,Ms=!1;function Aa(o,c,p){for(p=p.child;p!==null;)Pj(o,c,p),p=p.sibling}function Pj(o,c,p){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(Tf,p)}catch{}switch(p.tag){case 5:mr||Fl(p,c);case 6:var v=ar,j=Ms;ar=null,Aa(o,c,p),ar=v,Ms=j,ar!==null&&(Ms?(o=ar,p=p.stateNode,o.nodeType===8?o.parentNode.removeChild(p):o.removeChild(p)):ar.removeChild(p.stateNode));break;case 18:ar!==null&&(Ms?(o=ar,p=p.stateNode,o.nodeType===8?Vg(o.parentNode,p):o.nodeType===1&&Vg(o,p),gu(o)):Vg(ar,p.stateNode));break;case 4:v=ar,j=Ms,ar=p.stateNode.containerInfo,Ms=!0,Aa(o,c,p),ar=v,Ms=j;break;case 0:case 11:case 14:case 15:if(!mr&&(v=p.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){j=v=v.next;do{var E=j,C=E.destroy;E=E.tag,C!==void 0&&((E&2)!==0||(E&4)!==0)&&jy(p,c,C),j=j.next}while(j!==v)}Aa(o,c,p);break;case 1:if(!mr&&(Fl(p,c),v=p.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=p.memoizedProps,v.state=p.memoizedState,v.componentWillUnmount()}catch(U){gn(p,c,U)}Aa(o,c,p);break;case 21:Aa(o,c,p);break;case 22:p.mode&1?(mr=(v=mr)||p.memoizedState!==null,Aa(o,c,p),mr=v):Aa(o,c,p);break;default:Aa(o,c,p)}}function Aj(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var p=o.stateNode;p===null&&(p=o.stateNode=new fF),c.forEach(function(v){var j=_F.bind(null,o,v);p.has(v)||(p.add(v),v.then(j,j))})}}function Ls(o,c){var p=c.deletions;if(p!==null)for(var v=0;v<p.length;v++){var j=p[v];try{var E=o,C=c,U=C;e:for(;U!==null;){switch(U.tag){case 5:ar=U.stateNode,Ms=!1;break e;case 3:ar=U.stateNode.containerInfo,Ms=!0;break e;case 4:ar=U.stateNode.containerInfo,Ms=!0;break e}U=U.return}if(ar===null)throw Error(n(160));Pj(E,C,j),ar=null,Ms=!1;var Y=j.alternate;Y!==null&&(Y.return=null),j.return=null}catch(ae){gn(j,c,ae)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Rj(c,o),c=c.sibling}function Rj(o,c){var p=o.alternate,v=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ls(c,o),ci(o),v&4){try{Fu(3,o,o.return),ph(3,o)}catch(Qe){gn(o,o.return,Qe)}try{Fu(5,o,o.return)}catch(Qe){gn(o,o.return,Qe)}}break;case 1:Ls(c,o),ci(o),v&512&&p!==null&&Fl(p,p.return);break;case 5:if(Ls(c,o),ci(o),v&512&&p!==null&&Fl(p,p.return),o.flags&32){var j=o.stateNode;try{dt(j,"")}catch(Qe){gn(o,o.return,Qe)}}if(v&4&&(j=o.stateNode,j!=null)){var E=o.memoizedProps,C=p!==null?p.memoizedProps:E,U=o.type,Y=o.updateQueue;if(o.updateQueue=null,Y!==null)try{U==="input"&&E.type==="radio"&&E.name!=null&&wn(j,E),Or(U,C);var ae=Or(U,E);for(C=0;C<Y.length;C+=2){var pe=Y[C],ve=Y[C+1];pe==="style"?Ir(j,ve):pe==="dangerouslySetInnerHTML"?et(j,ve):pe==="children"?dt(j,ve):N(j,pe,ve,ae)}switch(U){case"input":bn(j,E);break;case"textarea":_e(j,E);break;case"select":var fe=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!E.multiple;var Me=E.value;Me!=null?te(j,!!E.multiple,Me,!1):fe!==!!E.multiple&&(E.defaultValue!=null?te(j,!!E.multiple,E.defaultValue,!0):te(j,!!E.multiple,E.multiple?[]:"",!1))}j[Nu]=E}catch(Qe){gn(o,o.return,Qe)}}break;case 6:if(Ls(c,o),ci(o),v&4){if(o.stateNode===null)throw Error(n(162));j=o.stateNode,E=o.memoizedProps;try{j.nodeValue=E}catch(Qe){gn(o,o.return,Qe)}}break;case 3:if(Ls(c,o),ci(o),v&4&&p!==null&&p.memoizedState.isDehydrated)try{gu(c.containerInfo)}catch(Qe){gn(o,o.return,Qe)}break;case 4:Ls(c,o),ci(o);break;case 13:Ls(c,o),ci(o),j=o.child,j.flags&8192&&(E=j.memoizedState!==null,j.stateNode.isHidden=E,!E||j.alternate!==null&&j.alternate.memoizedState!==null||(Py=Sn())),v&4&&Aj(o);break;case 22:if(pe=p!==null&&p.memoizedState!==null,o.mode&1?(mr=(ae=mr)||pe,Ls(c,o),mr=ae):Ls(c,o),ci(o),v&8192){if(ae=o.memoizedState!==null,(o.stateNode.isHidden=ae)&&!pe&&(o.mode&1)!==0)for(ze=o,pe=o.child;pe!==null;){for(ve=ze=pe;ze!==null;){switch(fe=ze,Me=fe.child,fe.tag){case 0:case 11:case 14:case 15:Fu(4,fe,fe.return);break;case 1:Fl(fe,fe.return);var He=fe.stateNode;if(typeof He.componentWillUnmount=="function"){v=fe,p=fe.return;try{c=v,He.props=c.memoizedProps,He.state=c.memoizedState,He.componentWillUnmount()}catch(Qe){gn(v,p,Qe)}}break;case 5:Fl(fe,fe.return);break;case 22:if(fe.memoizedState!==null){Dj(ve);continue}}Me!==null?(Me.return=fe,ze=Me):Dj(ve)}pe=pe.sibling}e:for(pe=null,ve=o;;){if(ve.tag===5){if(pe===null){pe=ve;try{j=ve.stateNode,ae?(E=j.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(U=ve.stateNode,Y=ve.memoizedProps.style,C=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,U.style.display=Qn("display",C))}catch(Qe){gn(o,o.return,Qe)}}}else if(ve.tag===6){if(pe===null)try{ve.stateNode.nodeValue=ae?"":ve.memoizedProps}catch(Qe){gn(o,o.return,Qe)}}else if((ve.tag!==22&&ve.tag!==23||ve.memoizedState===null||ve===o)&&ve.child!==null){ve.child.return=ve,ve=ve.child;continue}if(ve===o)break e;for(;ve.sibling===null;){if(ve.return===null||ve.return===o)break e;pe===ve&&(pe=null),ve=ve.return}pe===ve&&(pe=null),ve.sibling.return=ve.return,ve=ve.sibling}}break;case 19:Ls(c,o),ci(o),v&4&&Aj(o);break;case 21:break;default:Ls(c,o),ci(o)}}function ci(o){var c=o.flags;if(c&2){try{e:{for(var p=o.return;p!==null;){if(Tj(p)){var v=p;break e}p=p.return}throw Error(n(160))}switch(v.tag){case 5:var j=v.stateNode;v.flags&32&&(dt(j,""),v.flags&=-33);var E=Cj(o);Ny(o,E,j);break;case 3:case 4:var C=v.stateNode.containerInfo,U=Cj(o);ky(o,U,C);break;default:throw Error(n(161))}}catch(Y){gn(o,o.return,Y)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function mF(o,c,p){ze=o,Ij(o)}function Ij(o,c,p){for(var v=(o.mode&1)!==0;ze!==null;){var j=ze,E=j.child;if(j.tag===22&&v){var C=j.memoizedState!==null||mh;if(!C){var U=j.alternate,Y=U!==null&&U.memoizedState!==null||mr;U=mh;var ae=mr;if(mh=C,(mr=Y)&&!ae)for(ze=j;ze!==null;)C=ze,Y=C.child,C.tag===22&&C.memoizedState!==null?Mj(j):Y!==null?(Y.return=C,ze=Y):Mj(j);for(;E!==null;)ze=E,Ij(E),E=E.sibling;ze=j,mh=U,mr=ae}Oj(o)}else(j.subtreeFlags&8772)!==0&&E!==null?(E.return=j,ze=E):Oj(o)}}function Oj(o){for(;ze!==null;){var c=ze;if((c.flags&8772)!==0){var p=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:mr||ph(5,c);break;case 1:var v=c.stateNode;if(c.flags&4&&!mr)if(p===null)v.componentDidMount();else{var j=c.elementType===c.type?p.memoizedProps:Ds(c.type,p.memoizedProps);v.componentDidUpdate(j,p.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var E=c.updateQueue;E!==null&&DS(c,E,v);break;case 3:var C=c.updateQueue;if(C!==null){if(p=null,c.child!==null)switch(c.child.tag){case 5:p=c.child.stateNode;break;case 1:p=c.child.stateNode}DS(c,C,p)}break;case 5:var U=c.stateNode;if(p===null&&c.flags&4){p=U;var Y=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&p.focus();break;case"img":Y.src&&(p.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ae=c.alternate;if(ae!==null){var pe=ae.memoizedState;if(pe!==null){var ve=pe.dehydrated;ve!==null&&gu(ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}mr||c.flags&512&&Ey(c)}catch(fe){gn(c,c.return,fe)}}if(c===o){ze=null;break}if(p=c.sibling,p!==null){p.return=c.return,ze=p;break}ze=c.return}}function Dj(o){for(;ze!==null;){var c=ze;if(c===o){ze=null;break}var p=c.sibling;if(p!==null){p.return=c.return,ze=p;break}ze=c.return}}function Mj(o){for(;ze!==null;){var c=ze;try{switch(c.tag){case 0:case 11:case 15:var p=c.return;try{ph(4,c)}catch(Y){gn(c,p,Y)}break;case 1:var v=c.stateNode;if(typeof v.componentDidMount=="function"){var j=c.return;try{v.componentDidMount()}catch(Y){gn(c,j,Y)}}var E=c.return;try{Ey(c)}catch(Y){gn(c,E,Y)}break;case 5:var C=c.return;try{Ey(c)}catch(Y){gn(c,C,Y)}}}catch(Y){gn(c,c.return,Y)}if(c===o){ze=null;break}var U=c.sibling;if(U!==null){U.return=c.return,ze=U;break}ze=c.return}}var pF=Math.ceil,gh=T.ReactCurrentDispatcher,Ty=T.ReactCurrentOwner,xs=T.ReactCurrentBatchConfig,At=0,Zn=null,In=null,or=0,ts=0,$l=ka(0),Bn=0,$u=null,Co=0,yh=0,Cy=0,Vu=null,Fr=null,Py=0,Vl=1/0,qi=null,vh=!1,Ay=null,Ra=null,xh=!1,Ia=null,wh=0,zu=0,Ry=null,bh=-1,_h=0;function br(){return(At&6)!==0?Sn():bh!==-1?bh:bh=Sn()}function Oa(o){return(o.mode&1)===0?1:(At&2)!==0&&or!==0?or&-or:JL.transition!==null?(_h===0&&(_h=C_()),_h):(o=Wt,o!==0||(o=window.event,o=o===void 0?16:F_(o.type)),o)}function Fs(o,c,p,v){if(50<zu)throw zu=0,Ry=null,Error(n(185));du(o,p,v),((At&2)===0||o!==Zn)&&(o===Zn&&((At&2)===0&&(yh|=p),Bn===4&&Da(o,or)),$r(o,v),p===1&&At===0&&(c.mode&1)===0&&(Vl=Sn()+500,Qf&&Ta()))}function $r(o,c){var p=o.callbackNode;JM(o,c);var v=Af(o,o===Zn?or:0);if(v===0)p!==null&&k_(p),o.callbackNode=null,o.callbackPriority=0;else if(c=v&-v,o.callbackPriority!==c){if(p!=null&&k_(p),c===1)o.tag===0?XL(Fj.bind(null,o)):SS(Fj.bind(null,o)),GL(function(){(At&6)===0&&Ta()}),p=null;else{switch(P_(v)){case 1:p=dg;break;case 4:p=N_;break;case 16:p=Nf;break;case 536870912:p=T_;break;default:p=Nf}p=Hj(p,Lj.bind(null,o))}o.callbackPriority=c,o.callbackNode=p}}function Lj(o,c){if(bh=-1,_h=0,(At&6)!==0)throw Error(n(327));var p=o.callbackNode;if(zl()&&o.callbackNode!==p)return null;var v=Af(o,o===Zn?or:0);if(v===0)return null;if((v&30)!==0||(v&o.expiredLanes)!==0||c)c=Sh(o,v);else{c=v;var j=At;At|=2;var E=Vj();(Zn!==o||or!==c)&&(qi=null,Vl=Sn()+500,Ao(o,c));do try{vF();break}catch(U){$j(o,U)}while(!0);Qg(),gh.current=E,At=j,In!==null?c=0:(Zn=null,or=0,c=Bn)}if(c!==0){if(c===2&&(j=fg(o),j!==0&&(v=j,c=Iy(o,j))),c===1)throw p=$u,Ao(o,0),Da(o,v),$r(o,Sn()),p;if(c===6)Da(o,v);else{if(j=o.current.alternate,(v&30)===0&&!gF(j)&&(c=Sh(o,v),c===2&&(E=fg(o),E!==0&&(v=E,c=Iy(o,E))),c===1))throw p=$u,Ao(o,0),Da(o,v),$r(o,Sn()),p;switch(o.finishedWork=j,o.finishedLanes=v,c){case 0:case 1:throw Error(n(345));case 2:Ro(o,Fr,qi);break;case 3:if(Da(o,v),(v&130023424)===v&&(c=Py+500-Sn(),10<c)){if(Af(o,0)!==0)break;if(j=o.suspendedLanes,(j&v)!==v){br(),o.pingedLanes|=o.suspendedLanes&j;break}o.timeoutHandle=$g(Ro.bind(null,o,Fr,qi),c);break}Ro(o,Fr,qi);break;case 4:if(Da(o,v),(v&4194240)===v)break;for(c=o.eventTimes,j=-1;0<v;){var C=31-Rs(v);E=1<<C,C=c[C],C>j&&(j=C),v&=~E}if(v=j,v=Sn()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*pF(v/1960))-v,10<v){o.timeoutHandle=$g(Ro.bind(null,o,Fr,qi),v);break}Ro(o,Fr,qi);break;case 5:Ro(o,Fr,qi);break;default:throw Error(n(329))}}}return $r(o,Sn()),o.callbackNode===p?Lj.bind(null,o):null}function Iy(o,c){var p=Vu;return o.current.memoizedState.isDehydrated&&(Ao(o,c).flags|=256),o=Sh(o,c),o!==2&&(c=Fr,Fr=p,c!==null&&Oy(c)),o}function Oy(o){Fr===null?Fr=o:Fr.push.apply(Fr,o)}function gF(o){for(var c=o;;){if(c.flags&16384){var p=c.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var v=0;v<p.length;v++){var j=p[v],E=j.getSnapshot;j=j.value;try{if(!Is(E(),j))return!1}catch{return!1}}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Da(o,c){for(c&=~Cy,c&=~yh,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var p=31-Rs(c),v=1<<p;o[p]=-1,c&=~v}}function Fj(o){if((At&6)!==0)throw Error(n(327));zl();var c=Af(o,0);if((c&1)===0)return $r(o,Sn()),null;var p=Sh(o,c);if(o.tag!==0&&p===2){var v=fg(o);v!==0&&(c=v,p=Iy(o,v))}if(p===1)throw p=$u,Ao(o,0),Da(o,c),$r(o,Sn()),p;if(p===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,Ro(o,Fr,qi),$r(o,Sn()),null}function Dy(o,c){var p=At;At|=1;try{return o(c)}finally{At=p,At===0&&(Vl=Sn()+500,Qf&&Ta())}}function Po(o){Ia!==null&&Ia.tag===0&&(At&6)===0&&zl();var c=At;At|=1;var p=xs.transition,v=Wt;try{if(xs.transition=null,Wt=1,o)return o()}finally{Wt=v,xs.transition=p,At=c,(At&6)===0&&Ta()}}function My(){ts=$l.current,en($l)}function Ao(o,c){o.finishedWork=null,o.finishedLanes=0;var p=o.timeoutHandle;if(p!==-1&&(o.timeoutHandle=-1,HL(p)),In!==null)for(p=In.return;p!==null;){var v=p;switch(Wg(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&Kf();break;case 3:Ml(),en(Dr),en(dr),sy();break;case 5:ny(v);break;case 4:Ml();break;case 13:en(fn);break;case 19:en(fn);break;case 10:Xg(v.type._context);break;case 22:case 23:My()}p=p.return}if(Zn=o,In=o=Ma(o.current,null),or=ts=c,Bn=0,$u=null,Cy=yh=Co=0,Fr=Vu=null,ko!==null){for(c=0;c<ko.length;c++)if(p=ko[c],v=p.interleaved,v!==null){p.interleaved=null;var j=v.next,E=p.pending;if(E!==null){var C=E.next;E.next=j,v.next=C}p.pending=v}ko=null}return o}function $j(o,c){do{var p=In;try{if(Qg(),ah.current=uh,oh){for(var v=hn.memoizedState;v!==null;){var j=v.queue;j!==null&&(j.pending=null),v=v.next}oh=!1}if(To=0,Jn=Un=hn=null,Iu=!1,Ou=0,Ty.current=null,p===null||p.return===null){Bn=1,$u=c,In=null;break}e:{var E=o,C=p.return,U=p,Y=c;if(c=or,U.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ae=Y,pe=U,ve=pe.tag;if((pe.mode&1)===0&&(ve===0||ve===11||ve===15)){var fe=pe.alternate;fe?(pe.updateQueue=fe.updateQueue,pe.memoizedState=fe.memoizedState,pe.lanes=fe.lanes):(pe.updateQueue=null,pe.memoizedState=null)}var Me=uj(C);if(Me!==null){Me.flags&=-257,dj(Me,C,U,E,c),Me.mode&1&&cj(E,ae,c),c=Me,Y=ae;var He=c.updateQueue;if(He===null){var Qe=new Set;Qe.add(Y),c.updateQueue=Qe}else He.add(Y);break e}else{if((c&1)===0){cj(E,ae,c),Ly();break e}Y=Error(n(426))}}else if(on&&U.mode&1){var jn=uj(C);if(jn!==null){(jn.flags&65536)===0&&(jn.flags|=256),dj(jn,C,U,E,c),Kg(Ll(Y,U));break e}}E=Y=Ll(Y,U),Bn!==4&&(Bn=2),Vu===null?Vu=[E]:Vu.push(E),E=C;do{switch(E.tag){case 3:E.flags|=65536,c&=-c,E.lanes|=c;var re=oj(E,Y,c);OS(E,re);break e;case 1:U=Y;var J=E.type,ie=E.stateNode;if((E.flags&128)===0&&(typeof J.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(Ra===null||!Ra.has(ie)))){E.flags|=65536,c&=-c,E.lanes|=c;var Ee=lj(E,U,c);OS(E,Ee);break e}}E=E.return}while(E!==null)}Uj(p)}catch(Xe){c=Xe,In===p&&p!==null&&(In=p=p.return);continue}break}while(!0)}function Vj(){var o=gh.current;return gh.current=uh,o===null?uh:o}function Ly(){(Bn===0||Bn===3||Bn===2)&&(Bn=4),Zn===null||(Co&268435455)===0&&(yh&268435455)===0||Da(Zn,or)}function Sh(o,c){var p=At;At|=2;var v=Vj();(Zn!==o||or!==c)&&(qi=null,Ao(o,c));do try{yF();break}catch(j){$j(o,j)}while(!0);if(Qg(),At=p,gh.current=v,In!==null)throw Error(n(261));return Zn=null,or=0,Bn}function yF(){for(;In!==null;)zj(In)}function vF(){for(;In!==null&&!BM();)zj(In)}function zj(o){var c=Wj(o.alternate,o,ts);o.memoizedProps=o.pendingProps,c===null?Uj(o):In=c,Ty.current=null}function Uj(o){var c=o;do{var p=c.alternate;if(o=c.return,(c.flags&32768)===0){if(p=uF(p,c,ts),p!==null){In=p;return}}else{if(p=dF(p,c),p!==null){p.flags&=32767,In=p;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Bn=6,In=null;return}}if(c=c.sibling,c!==null){In=c;return}In=c=o}while(c!==null);Bn===0&&(Bn=5)}function Ro(o,c,p){var v=Wt,j=xs.transition;try{xs.transition=null,Wt=1,xF(o,c,p,v)}finally{xs.transition=j,Wt=v}return null}function xF(o,c,p,v){do zl();while(Ia!==null);if((At&6)!==0)throw Error(n(327));p=o.finishedWork;var j=o.finishedLanes;if(p===null)return null;if(o.finishedWork=null,o.finishedLanes=0,p===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var E=p.lanes|p.childLanes;if(ZM(o,E),o===Zn&&(In=Zn=null,or=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||xh||(xh=!0,Hj(Nf,function(){return zl(),null})),E=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||E){E=xs.transition,xs.transition=null;var C=Wt;Wt=1;var U=At;At|=4,Ty.current=null,hF(o,p),Rj(p,o),$L(Lg),Of=!!Mg,Lg=Mg=null,o.current=p,mF(p),qM(),At=U,Wt=C,xs.transition=E}else o.current=p;if(xh&&(xh=!1,Ia=o,wh=j),E=o.pendingLanes,E===0&&(Ra=null),GM(p.stateNode),$r(o,Sn()),c!==null)for(v=o.onRecoverableError,p=0;p<c.length;p++)j=c[p],v(j.value,{componentStack:j.stack,digest:j.digest});if(vh)throw vh=!1,o=Ay,Ay=null,o;return(wh&1)!==0&&o.tag!==0&&zl(),E=o.pendingLanes,(E&1)!==0?o===Ry?zu++:(zu=0,Ry=o):zu=0,Ta(),null}function zl(){if(Ia!==null){var o=P_(wh),c=xs.transition,p=Wt;try{if(xs.transition=null,Wt=16>o?16:o,Ia===null)var v=!1;else{if(o=Ia,Ia=null,wh=0,(At&6)!==0)throw Error(n(331));var j=At;for(At|=4,ze=o.current;ze!==null;){var E=ze,C=E.child;if((ze.flags&16)!==0){var U=E.deletions;if(U!==null){for(var Y=0;Y<U.length;Y++){var ae=U[Y];for(ze=ae;ze!==null;){var pe=ze;switch(pe.tag){case 0:case 11:case 15:Fu(8,pe,E)}var ve=pe.child;if(ve!==null)ve.return=pe,ze=ve;else for(;ze!==null;){pe=ze;var fe=pe.sibling,Me=pe.return;if(Nj(pe),pe===ae){ze=null;break}if(fe!==null){fe.return=Me,ze=fe;break}ze=Me}}}var He=E.alternate;if(He!==null){var Qe=He.child;if(Qe!==null){He.child=null;do{var jn=Qe.sibling;Qe.sibling=null,Qe=jn}while(Qe!==null)}}ze=E}}if((E.subtreeFlags&2064)!==0&&C!==null)C.return=E,ze=C;else e:for(;ze!==null;){if(E=ze,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Fu(9,E,E.return)}var re=E.sibling;if(re!==null){re.return=E.return,ze=re;break e}ze=E.return}}var J=o.current;for(ze=J;ze!==null;){C=ze;var ie=C.child;if((C.subtreeFlags&2064)!==0&&ie!==null)ie.return=C,ze=ie;else e:for(C=J;ze!==null;){if(U=ze,(U.flags&2048)!==0)try{switch(U.tag){case 0:case 11:case 15:ph(9,U)}}catch(Xe){gn(U,U.return,Xe)}if(U===C){ze=null;break e}var Ee=U.sibling;if(Ee!==null){Ee.return=U.return,ze=Ee;break e}ze=U.return}}if(At=j,Ta(),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(Tf,o)}catch{}v=!0}return v}finally{Wt=p,xs.transition=c}}return!1}function Bj(o,c,p){c=Ll(p,c),c=oj(o,c,1),o=Pa(o,c,1),c=br(),o!==null&&(du(o,1,c),$r(o,c))}function gn(o,c,p){if(o.tag===3)Bj(o,o,p);else for(;c!==null;){if(c.tag===3){Bj(c,o,p);break}else if(c.tag===1){var v=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Ra===null||!Ra.has(v))){o=Ll(p,o),o=lj(c,o,1),c=Pa(c,o,1),o=br(),c!==null&&(du(c,1,o),$r(c,o));break}}c=c.return}}function wF(o,c,p){var v=o.pingCache;v!==null&&v.delete(c),c=br(),o.pingedLanes|=o.suspendedLanes&p,Zn===o&&(or&p)===p&&(Bn===4||Bn===3&&(or&130023424)===or&&500>Sn()-Py?Ao(o,0):Cy|=p),$r(o,c)}function qj(o,c){c===0&&((o.mode&1)===0?c=1:(c=Pf,Pf<<=1,(Pf&130023424)===0&&(Pf=4194304)));var p=br();o=zi(o,c),o!==null&&(du(o,c,p),$r(o,p))}function bF(o){var c=o.memoizedState,p=0;c!==null&&(p=c.retryLane),qj(o,p)}function _F(o,c){var p=0;switch(o.tag){case 13:var v=o.stateNode,j=o.memoizedState;j!==null&&(p=j.retryLane);break;case 19:v=o.stateNode;break;default:throw Error(n(314))}v!==null&&v.delete(c),qj(o,p)}var Wj;Wj=function(o,c,p){if(o!==null)if(o.memoizedProps!==c.pendingProps||Dr.current)Lr=!0;else{if((o.lanes&p)===0&&(c.flags&128)===0)return Lr=!1,cF(o,c,p);Lr=(o.flags&131072)!==0}else Lr=!1,on&&(c.flags&1048576)!==0&&jS(c,Jf,c.index);switch(c.lanes=0,c.tag){case 2:var v=c.type;hh(o,c),o=c.pendingProps;var j=Cl(c,dr.current);Dl(c,p),j=oy(null,c,v,o,j,p);var E=ly();return c.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Mr(v)?(E=!0,Yf(c)):E=!1,c.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,ey(c),j.updater=dh,c.stateNode=j,j._reactInternals=c,my(c,v,o,p),c=vy(null,c,v,!0,E,p)):(c.tag=0,on&&E&&qg(c),wr(null,c,j,p),c=c.child),c;case 16:v=c.elementType;e:{switch(hh(o,c),o=c.pendingProps,j=v._init,v=j(v._payload),c.type=v,j=c.tag=jF(v),o=Ds(v,o),j){case 0:c=yy(null,c,v,o,p);break e;case 1:c=yj(null,c,v,o,p);break e;case 11:c=fj(null,c,v,o,p);break e;case 14:c=hj(null,c,v,Ds(v.type,o),p);break e}throw Error(n(306,v,""))}return c;case 0:return v=c.type,j=c.pendingProps,j=c.elementType===v?j:Ds(v,j),yy(o,c,v,j,p);case 1:return v=c.type,j=c.pendingProps,j=c.elementType===v?j:Ds(v,j),yj(o,c,v,j,p);case 3:e:{if(vj(c),o===null)throw Error(n(387));v=c.pendingProps,E=c.memoizedState,j=E.element,IS(o,c),sh(c,v,null,p);var C=c.memoizedState;if(v=C.element,E.isDehydrated)if(E={element:v,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){j=Ll(Error(n(423)),c),c=xj(o,c,v,p,j);break e}else if(v!==j){j=Ll(Error(n(424)),c),c=xj(o,c,v,p,j);break e}else for(es=Ea(c.stateNode.containerInfo.firstChild),Zr=c,on=!0,Os=null,p=AS(c,null,v,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Rl(),v===j){c=Bi(o,c,p);break e}wr(o,c,v,p)}c=c.child}return c;case 5:return MS(c),o===null&&Gg(c),v=c.type,j=c.pendingProps,E=o!==null?o.memoizedProps:null,C=j.children,Fg(v,j)?C=null:E!==null&&Fg(v,E)&&(c.flags|=32),gj(o,c),wr(o,c,C,p),c.child;case 6:return o===null&&Gg(c),null;case 13:return wj(o,c,p);case 4:return ty(c,c.stateNode.containerInfo),v=c.pendingProps,o===null?c.child=Il(c,null,v,p):wr(o,c,v,p),c.child;case 11:return v=c.type,j=c.pendingProps,j=c.elementType===v?j:Ds(v,j),fj(o,c,v,j,p);case 7:return wr(o,c,c.pendingProps,p),c.child;case 8:return wr(o,c,c.pendingProps.children,p),c.child;case 12:return wr(o,c,c.pendingProps.children,p),c.child;case 10:e:{if(v=c.type._context,j=c.pendingProps,E=c.memoizedProps,C=j.value,Qt(th,v._currentValue),v._currentValue=C,E!==null)if(Is(E.value,C)){if(E.children===j.children&&!Dr.current){c=Bi(o,c,p);break e}}else for(E=c.child,E!==null&&(E.return=c);E!==null;){var U=E.dependencies;if(U!==null){C=E.child;for(var Y=U.firstContext;Y!==null;){if(Y.context===v){if(E.tag===1){Y=Ui(-1,p&-p),Y.tag=2;var ae=E.updateQueue;if(ae!==null){ae=ae.shared;var pe=ae.pending;pe===null?Y.next=Y:(Y.next=pe.next,pe.next=Y),ae.pending=Y}}E.lanes|=p,Y=E.alternate,Y!==null&&(Y.lanes|=p),Jg(E.return,p,c),U.lanes|=p;break}Y=Y.next}}else if(E.tag===10)C=E.type===c.type?null:E.child;else if(E.tag===18){if(C=E.return,C===null)throw Error(n(341));C.lanes|=p,U=C.alternate,U!==null&&(U.lanes|=p),Jg(C,p,c),C=E.sibling}else C=E.child;if(C!==null)C.return=E;else for(C=E;C!==null;){if(C===c){C=null;break}if(E=C.sibling,E!==null){E.return=C.return,C=E;break}C=C.return}E=C}wr(o,c,j.children,p),c=c.child}return c;case 9:return j=c.type,v=c.pendingProps.children,Dl(c,p),j=ys(j),v=v(j),c.flags|=1,wr(o,c,v,p),c.child;case 14:return v=c.type,j=Ds(v,c.pendingProps),j=Ds(v.type,j),hj(o,c,v,j,p);case 15:return mj(o,c,c.type,c.pendingProps,p);case 17:return v=c.type,j=c.pendingProps,j=c.elementType===v?j:Ds(v,j),hh(o,c),c.tag=1,Mr(v)?(o=!0,Yf(c)):o=!1,Dl(c,p),ij(c,v,j),my(c,v,j,p),vy(null,c,v,!0,o,p);case 19:return _j(o,c,p);case 22:return pj(o,c,p)}throw Error(n(156,c.tag))};function Hj(o,c){return E_(o,c)}function SF(o,c,p,v){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ws(o,c,p,v){return new SF(o,c,p,v)}function Fy(o){return o=o.prototype,!(!o||!o.isReactComponent)}function jF(o){if(typeof o=="function")return Fy(o)?1:0;if(o!=null){if(o=o.$$typeof,o===z)return 11;if(o===Q)return 14}return 2}function Ma(o,c){var p=o.alternate;return p===null?(p=ws(o.tag,c,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=c,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&14680064,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,c=o.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p}function jh(o,c,p,v,j,E){var C=2;if(v=o,typeof o=="function")Fy(o)&&(C=1);else if(typeof o=="string")C=5;else e:switch(o){case M:return Io(p.children,j,E,c);case A:C=8,j|=8;break;case W:return o=ws(12,p,c,j|2),o.elementType=W,o.lanes=E,o;case L:return o=ws(13,p,c,j),o.elementType=L,o.lanes=E,o;case B:return o=ws(19,p,c,j),o.elementType=B,o.lanes=E,o;case F:return Eh(p,j,E,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case K:C=10;break e;case H:C=9;break e;case z:C=11;break e;case Q:C=14;break e;case q:C=16,v=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return c=ws(C,p,c,j),c.elementType=o,c.type=v,c.lanes=E,c}function Io(o,c,p,v){return o=ws(7,o,v,c),o.lanes=p,o}function Eh(o,c,p,v){return o=ws(22,o,v,c),o.elementType=F,o.lanes=p,o.stateNode={isHidden:!1},o}function $y(o,c,p){return o=ws(6,o,null,c),o.lanes=p,o}function Vy(o,c,p){return c=ws(4,o.children!==null?o.children:[],o.key,c),c.lanes=p,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function EF(o,c,p,v,j){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hg(0),this.expirationTimes=hg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hg(0),this.identifierPrefix=v,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function zy(o,c,p,v,j,E,C,U,Y){return o=new EF(o,c,p,U,Y),c===1?(c=1,E===!0&&(c|=8)):c=0,E=ws(3,null,null,c),o.current=E,E.stateNode=o,E.memoizedState={element:v,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},ey(E),o}function kF(o,c,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:v==null?null:""+v,children:o,containerInfo:c,implementation:p}}function Gj(o){if(!o)return Na;o=o._reactInternals;e:{if(bo(o)!==o||o.tag!==1)throw Error(n(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Mr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(o.tag===1){var p=o.type;if(Mr(p))return bS(o,p,c)}return c}function Kj(o,c,p,v,j,E,C,U,Y){return o=zy(p,v,!0,o,j,E,C,U,Y),o.context=Gj(null),p=o.current,v=br(),j=Oa(p),E=Ui(v,j),E.callback=c??null,Pa(p,E,j),o.current.lanes=j,du(o,j,v),$r(o,v),o}function kh(o,c,p,v){var j=c.current,E=br(),C=Oa(j);return p=Gj(p),c.context===null?c.context=p:c.pendingContext=p,c=Ui(E,C),c.payload={element:o},v=v===void 0?null:v,v!==null&&(c.callback=v),o=Pa(j,c,C),o!==null&&(Fs(o,j,C,E),rh(o,j,C)),C}function Nh(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Yj(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<c?p:c}}function Uy(o,c){Yj(o,c),(o=o.alternate)&&Yj(o,c)}function NF(){return null}var Qj=typeof reportError=="function"?reportError:function(o){console.error(o)};function By(o){this._internalRoot=o}Th.prototype.render=By.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));kh(o,c,null,null)},Th.prototype.unmount=By.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Po(function(){kh(null,o,null,null)}),c[Li]=null}};function Th(o){this._internalRoot=o}Th.prototype.unstable_scheduleHydration=function(o){if(o){var c=I_();o={blockedOn:null,target:o,priority:c};for(var p=0;p<_a.length&&c!==0&&c<_a[p].priority;p++);_a.splice(p,0,o),p===0&&M_(o)}};function qy(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Ch(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Xj(){}function TF(o,c,p,v,j){if(j){if(typeof v=="function"){var E=v;v=function(){var ae=Nh(C);E.call(ae)}}var C=Kj(c,v,o,0,null,!1,!1,"",Xj);return o._reactRootContainer=C,o[Li]=C.current,Eu(o.nodeType===8?o.parentNode:o),Po(),C}for(;j=o.lastChild;)o.removeChild(j);if(typeof v=="function"){var U=v;v=function(){var ae=Nh(Y);U.call(ae)}}var Y=zy(o,0,!1,null,null,!1,!1,"",Xj);return o._reactRootContainer=Y,o[Li]=Y.current,Eu(o.nodeType===8?o.parentNode:o),Po(function(){kh(c,Y,p,v)}),Y}function Ph(o,c,p,v,j){var E=p._reactRootContainer;if(E){var C=E;if(typeof j=="function"){var U=j;j=function(){var Y=Nh(C);U.call(Y)}}kh(c,C,o,j)}else C=TF(p,c,o,j,v);return Nh(C)}A_=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var p=uu(c.pendingLanes);p!==0&&(mg(c,p|1),$r(c,Sn()),(At&6)===0&&(Vl=Sn()+500,Ta()))}break;case 13:Po(function(){var v=zi(o,1);if(v!==null){var j=br();Fs(v,o,1,j)}}),Uy(o,1)}},pg=function(o){if(o.tag===13){var c=zi(o,134217728);if(c!==null){var p=br();Fs(c,o,134217728,p)}Uy(o,134217728)}},R_=function(o){if(o.tag===13){var c=Oa(o),p=zi(o,c);if(p!==null){var v=br();Fs(p,o,c,v)}Uy(o,c)}},I_=function(){return Wt},O_=function(o,c){var p=Wt;try{return Wt=o,c()}finally{Wt=p}},ou=function(o,c,p){switch(c){case"input":if(bn(o,p),c=p.name,p.type==="radio"&&c!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<p.length;c++){var v=p[c];if(v!==o&&v.form===o.form){var j=Gf(v);if(!j)throw Error(n(90));Ve(v),bn(v,j)}}}break;case"textarea":_e(o,p);break;case"select":c=p.value,c!=null&&te(o,!!p.multiple,c,!1)}},zn=Dy,ur=Po;var CF={usingClientEntryPoint:!1,Events:[Tu,Nl,Gf,ft,_n,Dy]},Uu={findFiberByHostInstance:_o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PF={bundleType:Uu.bundleType,version:Uu.version,rendererPackageName:Uu.rendererPackageName,rendererConfig:Uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=S_(o),o===null?null:o.stateNode},findFiberByHostInstance:Uu.findFiberByHostInstance||NF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ah.isDisabled&&Ah.supportsFiber)try{Tf=Ah.inject(PF),ii=Ah}catch{}}return Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CF,Vr.createPortal=function(o,c){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qy(c))throw Error(n(200));return kF(o,c,null,p)},Vr.createRoot=function(o,c){if(!qy(o))throw Error(n(299));var p=!1,v="",j=Qj;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onRecoverableError!==void 0&&(j=c.onRecoverableError)),c=zy(o,1,!1,null,null,p,!1,v,j),o[Li]=c.current,Eu(o.nodeType===8?o.parentNode:o),new By(c)},Vr.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=S_(c),o=o===null?null:o.stateNode,o},Vr.flushSync=function(o){return Po(o)},Vr.hydrate=function(o,c,p){if(!Ch(c))throw Error(n(200));return Ph(null,o,c,!0,p)},Vr.hydrateRoot=function(o,c,p){if(!qy(o))throw Error(n(405));var v=p!=null&&p.hydratedSources||null,j=!1,E="",C=Qj;if(p!=null&&(p.unstable_strictMode===!0&&(j=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onRecoverableError!==void 0&&(C=p.onRecoverableError)),c=Kj(c,null,o,1,p??null,j,!1,E,C),o[Li]=c.current,Eu(o),v)for(o=0;o<v.length;o++)p=v[o],j=p._getVersion,j=j(p._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[p,j]:c.mutableSourceEagerHydrationData.push(p,j);return new Th(c)},Vr.render=function(o,c,p){if(!Ch(c))throw Error(n(200));return Ph(null,o,c,!1,p)},Vr.unmountComponentAtNode=function(o){if(!Ch(o))throw Error(n(40));return o._reactRootContainer?(Po(function(){Ph(null,null,o,!1,function(){o._reactRootContainer=null,o[Li]=null})}),!0):!1},Vr.unstable_batchedUpdates=Dy,Vr.unstable_renderSubtreeIntoContainer=function(o,c,p,v){if(!Ch(p))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return Ph(o,c,p,!1,v)},Vr.version="18.3.1-next-f1338f8080-20240426",Vr}var lE;function cC(){if(lE)return Yy.exports;lE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Yy.exports=WF(),Yy.exports}var cE;function HF(){if(cE)return Ih;cE=1;var e=cC();return Ih.createRoot=e.createRoot,Ih.hydrateRoot=e.hydrateRoot,Ih}var GF=HF();const KF=ho(GF),YF="modulepreload",QF=function(e){return"/"+e},uE={},Be=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=l(n.map(f=>{if(f=QF(f),f in uE)return;uE[f]=!0;const h=f.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":YF,h||(g.as="script"),g.crossOrigin="",g.href=f,d&&g.setAttribute("nonce",d),document.head.appendChild(g),h)return new Promise((y,w)=>{g.addEventListener("load",y),g.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})};function XF(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:l}=e;let u,d;const f=async(m=!0)=>{await d};async function h(){if("serviceWorker"in navigator){if(u=await Be(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:m}},[]).then(({Workbox:m})=>new m("/service-worker.js",{scope:"/",type:"classic"})).catch(m=>{l==null||l(m)}),!u)return;u.addEventListener("activated",m=>{(m.isUpdate||m.isExternal)&&window.location.reload()}),u.addEventListener("installed",m=>{m.isUpdate||r==null||r()}),u.register({immediate:t}).then(m=>{i?i("/service-worker.js",m):s==null||s(m)}).catch(m=>{l==null||l(m)})}}return d=h(),f}class sd extends Error{}sd.prototype.name="InvalidTokenError";function JF(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function ZF(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return JF(t)}catch{return atob(t)}}function uC(e,t){if(typeof e!="string")throw new sd("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new sd(`Invalid token specified: missing part #${n+1}`);let s;try{s=ZF(r)}catch(i){throw new sd(`Invalid token specified: invalid base64 for part #${n+1} (${i.message})`)}try{return JSON.parse(s)}catch(i){throw new sd(`Invalid token specified: invalid json for part #${n+1} (${i.message})`)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ae=function(){return Ae=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ae.apply(this,arguments)};function h0(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Pt(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Lt(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,i=[],l;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(u){l={error:u}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return i}function tn(e,t,n){if(arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Kt;(function(e){e.Start="xstate.start",e.Stop="xstate.stop",e.Raise="xstate.raise",e.Send="xstate.send",e.Cancel="xstate.cancel",e.NullEvent="",e.Assign="xstate.assign",e.After="xstate.after",e.DoneState="done.state",e.DoneInvoke="done.invoke",e.Log="xstate.log",e.Init="xstate.init",e.Invoke="xstate.invoke",e.ErrorExecution="error.execution",e.ErrorCommunication="error.communication",e.ErrorPlatform="error.platform",e.ErrorCustom="xstate.error",e.Update="xstate.update",e.Pure="xstate.pure",e.Choose="xstate.choose"})(Kt||(Kt={}));var Ac;(function(e){e.Parent="#_parent",e.Internal="#_internal"})(Ac||(Ac={}));var xx=Kt.Start,m0=Kt.Stop,lf=Kt.Raise,Pp=Kt.Send,dC=Kt.Cancel,e$=Kt.NullEvent,p0=Kt.Assign;Kt.After;Kt.DoneState;var fC=Kt.Log,t$=Kt.Init,wx=Kt.Invoke;Kt.ErrorExecution;var dE=Kt.ErrorPlatform,n$=Kt.ErrorCustom,hC=Kt.Update,r$=Kt.Choose,s$=Kt.Pure,mC=".",fE={},bx="xstate.guard",i$="",Oh;function g0(e,t,n){n===void 0&&(n=mC);var r=gd(e,n),s=gd(t,n);return zt(s)?zt(r)?s===r:!1:zt(r)?r in s:Object.keys(r).every(function(i){return i in s?g0(r[i],s[i]):!1})}function pC(e){try{return zt(e)||typeof e=="number"?"".concat(e):e.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function _x(e,t){try{return Vc(e)?e:e.toString().split(t)}catch{throw new Error("'".concat(e,"' is not a valid state path."))}}function a$(e){return typeof e=="object"&&"value"in e&&"context"in e&&"event"in e&&"_event"in e}function gd(e,t){if(a$(e))return e.value;if(Vc(e))return $m(e);if(typeof e!="string")return e;var n=_x(e,t);return $m(n)}function $m(e){if(e.length===1)return e[0];for(var t={},n=t,r=0;r<e.length-1;r++)r===e.length-2?n[e[r]]=e[r+1]:(n[e[r]]={},n=n[e[r]]);return t}function id(e,t){for(var n={},r=Object.keys(e),s=0;s<r.length;s++){var i=r[s];n[i]=t(e[i],i,e,s)}return n}function hE(e,t,n){var r,s,i={};try{for(var l=Pt(Object.keys(e)),u=l.next();!u.done;u=l.next()){var d=u.value,f=e[d];n(f)&&(i[d]=t(f,d,e))}}catch(h){r={error:h}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return i}var o$=function(e){return function(t){var n,r,s=t;try{for(var i=Pt(e),l=i.next();!l.done;l=i.next()){var u=l.value;s=s[u]}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s}};function l$(e,t){return function(n){var r,s,i=n;try{for(var l=Pt(e),u=l.next();!u.done;u=l.next()){var d=u.value;i=i[t][d]}}catch(f){r={error:f}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return i}}function gm(e){if(!e)return[[]];if(zt(e))return[[e]];var t=mn(Object.keys(e).map(function(n){var r=e[n];return typeof r!="string"&&(!r||!Object.keys(r).length)?[[n]]:gm(e[n]).map(function(s){return[n].concat(s)})}));return t}function mn(e){var t;return(t=[]).concat.apply(t,tn([],Lt(e),!1))}function gC(e){return Vc(e)?e:[e]}function qs(e){return e===void 0?[]:gC(e)}function Vm(e,t,n){var r,s;if($t(e))return e(t,n.data);var i={};try{for(var l=Pt(Object.keys(e)),u=l.next();!u.done;u=l.next()){var d=u.value,f=e[d];$t(f)?i[d]=f(t,n.data):i[d]=f}}catch(h){r={error:h}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return i}function c$(e){return/^(done|error)\./.test(e)}function mE(e){return!!(e instanceof Promise||e!==null&&($t(e)||typeof e=="object")&&$t(e.then))}function u$(e){return e!==null&&typeof e=="object"&&"transition"in e&&typeof e.transition=="function"}function d$(e,t){var n,r,s=Lt([[],[]],2),i=s[0],l=s[1];try{for(var u=Pt(e),d=u.next();!d.done;d=u.next()){var f=d.value;t(f)?i.push(f):l.push(f)}}catch(h){n={error:h}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return[i,l]}function yC(e,t){return id(e.states,function(n,r){if(n){var s=(zt(t)?void 0:t[r])||(n?n.current:void 0);if(s)return{current:s,states:yC(n,s)}}})}function f$(e,t){return{current:t,states:yC(e,t)}}function pE(e,t,n,r){var s=e&&n.reduce(function(i,l){var u,d,f=l.assignment,h={state:r,action:l,_event:t},m={};if($t(f))m=f(i,t.data,h);else try{for(var g=Pt(Object.keys(f)),y=g.next();!y.done;y=g.next()){var w=y.value,b=f[w];m[w]=$t(b)?b(i,t.data,h):b}}catch(S){u={error:S}}finally{try{y&&!y.done&&(d=g.return)&&d.call(g)}finally{if(u)throw u.error}}return Object.assign({},i,m)},e);return s}var h$=function(){};function Vc(e){return Array.isArray(e)}function $t(e){return typeof e=="function"}function zt(e){return typeof e=="string"}function vC(e,t){if(e)return zt(e)?{type:bx,name:e,predicate:t?t[e]:void 0}:$t(e)?{type:bx,name:e.name,predicate:e}:e}function m$(e){try{return"subscribe"in e&&$t(e.subscribe)}catch{return!1}}var Ha=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();Oh={},Oh[Ha]=function(){return this},Oh[Symbol.observable]=function(){return this};function Rc(e){return!!e&&"__xstatenode"in e}function p$(e){return!!e&&typeof e.send=="function"}function Ap(e,t){return zt(e)||typeof e=="number"?Ae({type:e},t):e}function lr(e,t){if(!zt(e)&&"$$type"in e&&e.$$type==="scxml")return e;var n=Ap(e);return Ae({name:n.type,data:n,$$type:"scxml",type:"external"},t)}function Ul(e,t){var n=gC(t).map(function(r){return typeof r>"u"||typeof r=="string"||Rc(r)?{target:r,event:e}:Ae(Ae({},r),{event:e})});return n}function g$(e){if(!(e===void 0||e===i$))return qs(e)}function xC(e,t,n,r,s){var i=e.options.guards,l={state:s,cond:t,_event:r};if(t.type===bx)return((i==null?void 0:i[t.name])||t.predicate)(n,r.data,l);var u=i==null?void 0:i[t.type];if(!u)throw new Error("Guard '".concat(t.type,"' is not implemented on machine '").concat(e.id,"'."));return u(n,r.data,l)}function wC(e){return typeof e=="string"?{type:e}:e}function yd(e,t,n){var r=function(){},s=typeof e=="object",i=s?e:null;return{next:((s?e.next:e)||r).bind(i),error:((s?e.error:t)||r).bind(i),complete:((s?e.complete:n)||r).bind(i)}}function Dh(e,t){return"".concat(e,":invocation[").concat(t,"]")}function Sx(e){return(e.type===lf||e.type===Pp&&e.to===Ac.Internal)&&typeof e.delay!="number"}var fc=lr({type:t$});function jx(e,t){return t&&t[e]||void 0}function Rd(e,t){var n;if(zt(e)||typeof e=="number"){var r=jx(e,t);$t(r)?n={type:e,exec:r}:r?n=r:n={type:e,exec:void 0}}else if($t(e))n={type:e.name||e.toString(),exec:e};else{var r=jx(e.type,t);if($t(r))n=Ae(Ae({},e),{exec:r});else if(r){var s=r.type||e.type;n=Ae(Ae(Ae({},r),e),{type:s})}else n=e}return n}var Ga=function(e,t){if(!e)return[];var n=Vc(e)?e:[e];return n.map(function(r){return Rd(r,t)})};function y0(e){var t=Rd(e);return Ae(Ae({id:zt(e)?e:t.id},t),{type:t.type})}function y$(e,t){return{type:lf,event:typeof e=="function"?e:Ap(e),delay:t?t.delay:void 0,id:t==null?void 0:t.id}}function v$(e,t,n,r){var s={_event:n},i=lr($t(e.event)?e.event(t,n.data,s):e.event),l;if(zt(e.delay)){var u=r&&r[e.delay];l=$t(u)?u(t,n.data,s):u}else l=$t(e.delay)?e.delay(t,n.data,s):e.delay;return Ae(Ae({},e),{type:lf,_event:i,delay:l})}function bC(e,t){return{to:t?t.to:void 0,type:Pp,event:$t(e)?e:Ap(e),delay:t?t.delay:void 0,id:t&&t.id!==void 0?t.id:$t(e)?e.name:pC(e)}}function x$(e,t,n,r){var s={_event:n},i=lr($t(e.event)?e.event(t,n.data,s):e.event),l;if(zt(e.delay)){var u=r&&r[e.delay];l=$t(u)?u(t,n.data,s):u}else l=$t(e.delay)?e.delay(t,n.data,s):e.delay;var d=$t(e.to)?e.to(t,n.data,s):e.to;return Ae(Ae({},e),{to:d,_event:i,event:i.data,delay:l})}var w$=function(e,t,n){return Ae(Ae({},e),{value:zt(e.expr)?e.expr:e.expr(t,n.data,{_event:n})})},b$=function(e){return{type:dC,sendId:e}};function _$(e){var t=y0(e);return{type:Kt.Start,activity:t,exec:void 0}}function S$(e){var t=$t(e)?e:y0(e);return{type:Kt.Stop,activity:t,exec:void 0}}function j$(e,t,n){var r=$t(e.activity)?e.activity(t,n.data):e.activity,s=typeof r=="string"?{id:r}:r,i={type:Kt.Stop,activity:s};return i}var E$=function(e){return{type:p0,assignment:e}};function k$(e,t){var n=t?"#".concat(t):"";return"".concat(Kt.After,"(").concat(e,")").concat(n)}function Mh(e,t){var n="".concat(Kt.DoneState,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}function ym(e,t){var n="".concat(Kt.DoneInvoke,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}function ad(e,t){var n="".concat(Kt.ErrorPlatform,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}var N$=function(e){var t,n,r=[];try{for(var s=Pt(e),i=s.next();!i.done;i=s.next())for(var l=i.value,u=0;u<l.actions.length;){if(l.actions[u].type===p0){r.push(l.actions[u]),l.actions.splice(u,1);continue}u++}}catch(d){t={error:d}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return r};function zm(e,t,n,r,s,i,l){l===void 0&&(l=!1);var u=l?[]:N$(s),d=u.length?pE(n,r,u,t):n,f=l?[n]:void 0,h=[];function m(w,b){var S;switch(b.type){case lf:{var _=v$(b,d,r,e.options.delays);return i&&typeof _.delay=="number"&&i(_,d,r),_}case Pp:var k=x$(b,d,r,e.options.delays);return i&&k.to!==Ac.Internal&&(w==="entry"?h.push(k):i(k,d,r)),k;case fC:{var N=w$(b,d,r);return i==null||i(N,d,r),N}case r$:{var T=b,P=(S=T.conds.find(function(q){var F=vC(q.cond,e.options.guards);return!F||xC(e,F,d,r,i?void 0:t)}))===null||S===void 0?void 0:S.actions;if(!P)return[];var R=Lt(zm(e,t,d,r,[{type:w,actions:Ga(qs(P),e.options.actions)}],i,l),2),M=R[0],A=R[1];return d=A,f==null||f.push(d),M}case s$:{var P=b.get(d,r.data);if(!P)return[];var W=Lt(zm(e,t,d,r,[{type:w,actions:Ga(qs(P),e.options.actions)}],i,l),2),K=W[0],H=W[1];return d=H,f==null||f.push(d),K}case m0:{var N=j$(b,d,r);return i==null||i(N,n,r),N}case p0:{d=pE(d,r,[b],i?void 0:t),f==null||f.push(d);break}default:var z=Rd(b,e.options.actions),L=z.exec;if(i)i(z,d,r);else if(L&&f){var B=f.length-1,Q=Ae(Ae({},z),{exec:function(q){for(var F=[],D=1;D<arguments.length;D++)F[D-1]=arguments[D];L.apply(void 0,tn([f[B]],Lt(F),!1))}});z=Q}return z}}function g(w){var b,S,_=[];try{for(var k=Pt(w.actions),N=k.next();!N.done;N=k.next()){var T=N.value,P=m(w.type,T);P&&(_=_.concat(P))}}catch(R){b={error:R}}finally{try{N&&!N.done&&(S=k.return)&&S.call(k)}finally{if(b)throw b.error}}return h.forEach(function(R){i(R,d,r)}),h.length=0,_}var y=mn(s.map(g));return[y,d]}var ec=function(e,t){var n=t(e);return n};function _C(e){var t;return t={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:e}}},t[Ha]=function(){return this},t}function T$(e,t,n,r){var s,i=wC(e.src),l=(s=t==null?void 0:t.options.services)===null||s===void 0?void 0:s[i.type],u=e.data?Vm(e.data,n,r):void 0,d=l?SC(l,e.id,u):_C(e.id);return d.meta=e,d}function SC(e,t,n){var r=_C(t);if(r.deferred=!0,Rc(e)){var s=r.state=ec(void 0,function(){return(n?e.withContext(n):e).initialState});r.getSnapshot=function(){return s}}return r}function C$(e){try{return typeof e.send=="function"}catch{return!1}}function P$(e){return C$(e)&&"id"in e}function A$(e){var t;return Ae((t={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},t[Ha]=function(){return this},t),e)}var Um=function(e){return e.type==="atomic"||e.type==="final"};function jC(e){return Object.keys(e.states).map(function(t){return e.states[t]})}function Id(e){return jC(e).filter(function(t){return t.type!=="history"})}function EC(e){var t=[e];return Um(e)?t:t.concat(mn(Id(e).map(EC)))}function od(e,t){var n,r,s,i,l,u,d,f,h=new Set(e),m=Ex(h),g=new Set(t);try{for(var y=Pt(g),w=y.next();!w.done;w=y.next())for(var b=w.value,S=b.parent;S&&!g.has(S);)g.add(S),S=S.parent}catch(W){n={error:W}}finally{try{w&&!w.done&&(r=y.return)&&r.call(y)}finally{if(n)throw n.error}}var _=Ex(g);try{for(var k=Pt(g),N=k.next();!N.done;N=k.next()){var b=N.value;if(b.type==="compound"&&(!_.get(b)||!_.get(b).length))m.get(b)?m.get(b).forEach(function(K){return g.add(K)}):b.initialStateNodes.forEach(function(K){return g.add(K)});else if(b.type==="parallel")try{for(var T=(l=void 0,Pt(Id(b))),P=T.next();!P.done;P=T.next()){var R=P.value;g.has(R)||(g.add(R),m.get(R)?m.get(R).forEach(function(K){return g.add(K)}):R.initialStateNodes.forEach(function(K){return g.add(K)}))}}catch(K){l={error:K}}finally{try{P&&!P.done&&(u=T.return)&&u.call(T)}finally{if(l)throw l.error}}}}catch(W){s={error:W}}finally{try{N&&!N.done&&(i=k.return)&&i.call(k)}finally{if(s)throw s.error}}try{for(var M=Pt(g),A=M.next();!A.done;A=M.next())for(var b=A.value,S=b.parent;S&&!g.has(S);)g.add(S),S=S.parent}catch(W){d={error:W}}finally{try{A&&!A.done&&(f=M.return)&&f.call(M)}finally{if(d)throw d.error}}return g}function kC(e,t){var n=t.get(e);if(!n)return{};if(e.type==="compound"){var r=n[0];if(r){if(Um(r))return r.key}else return{}}var s={};return n.forEach(function(i){s[i.key]=kC(i,t)}),s}function Ex(e){var t,n,r=new Map;try{for(var s=Pt(e),i=s.next();!i.done;i=s.next()){var l=i.value;r.has(l)||r.set(l,[]),l.parent&&(r.has(l.parent)||r.set(l.parent,[]),r.get(l.parent).push(l))}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return r}function R$(e,t){var n=od([e],t);return kC(e,Ex(n))}function ld(e,t){return Array.isArray(e)?e.some(function(n){return n===t}):e instanceof Set?e.has(t):!1}function I$(e){return tn([],Lt(new Set(mn(tn([],Lt(e.map(function(t){return t.ownEvents})),!1)))),!1)}function vm(e,t){return t.type==="compound"?Id(t).some(function(n){return n.type==="final"&&ld(e,n)}):t.type==="parallel"?Id(t).every(function(n){return vm(e,n)}):!1}function O$(e){return e===void 0&&(e=[]),e.reduce(function(t,n){return n.meta!==void 0&&(t[n.id]=n.meta),t},{})}function gE(e){return new Set(mn(e.map(function(t){return t.tags})))}function NC(e,t){if(e===t)return!0;if(e===void 0||t===void 0)return!1;if(zt(e)||zt(t))return e===t;var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(function(s){return NC(e[s],t[s])})}function D$(e){return typeof e!="object"||e===null?!1:"value"in e&&"_event"in e}function M$(e,t){var n=e.exec,r=Ae(Ae({},e),{exec:n!==void 0?function(){return n(t.context,t.event,{action:e,state:t,_event:t._event})}:void 0});return r}var Ws=(function(){function e(t){var n=this,r;this.actions=[],this.activities=fE,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||fE,this.meta=O$(t.configuration),this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,this.tags=(r=Array.isArray(t.tags)?new Set(t.tags):t.tags)!==null&&r!==void 0?r:new Set,this.machine=t.machine,Object.defineProperty(this,"nextEvents",{get:function(){return I$(n.configuration)}})}return e.from=function(t,n){if(t instanceof e)return t.context!==n?new e({value:t.value,context:n,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,events:[],configuration:[],transitions:[],children:{}}):t;var r=fc;return new e({value:t,context:n,_event:r,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(t){return new e(t)},e.inert=function(t,n){if(t instanceof e){if(!t.actions.length)return t;var r=fc;return new e({value:t.value,context:n,_event:r,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return e.from(t,n)},e.prototype.toStrings=function(t,n){var r=this;if(t===void 0&&(t=this.value),n===void 0&&(n="."),zt(t))return[t];var s=Object.keys(t);return s.concat.apply(s,tn([],Lt(s.map(function(i){return r.toStrings(t[i],n).map(function(l){return i+n+l})})),!1))},e.prototype.toJSON=function(){var t=this;t.configuration,t.transitions;var n=t.tags;t.machine;var r=h0(t,["configuration","transitions","tags","machine"]);return Ae(Ae({},r),{tags:Array.from(n)})},e.prototype.matches=function(t){return g0(t,this.value)},e.prototype.hasTag=function(t){return this.tags.has(t)},e.prototype.can=function(t){var n;h$(!!this.machine);var r=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,t);return!!(r!=null&&r.transitions.length)&&r.transitions.some(function(s){return s.target!==void 0||s.actions.length})},e})(),L$={deferEvents:!1},yE=(function(){function e(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=Ae(Ae({},L$),t)}return e.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents){this.schedule(t);return}this.process(t)}this.flushEvents()},e.prototype.schedule=function(t){if(!this.initialized||this.processingEvent){this.queue.push(t);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()},e.prototype.clear=function(){this.queue=[]},e.prototype.flushEvents=function(){for(var t=this.queue.shift();t;)this.process(t),t=this.queue.shift()},e.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},e})(),Jy=new Map,F$=0,qu={bookId:function(){return"x:".concat(F$++)},register:function(e,t){return Jy.set(e,t),e},get:function(e){return Jy.get(e)},free:function(e){Jy.delete(e)}};function v0(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function $$(){var e=v0();if(e&&"__xstate__"in e)return e.__xstate__}function V$(e){if(v0()){var t=$$();t&&t.register(e)}}function z$(e,t){t===void 0&&(t={});var n=e.initialState,r=new Set,s=[],i=!1,l=function(){if(!i){for(i=!0;s.length>0;){var f=s.shift();n=e.transition(n,f,d),r.forEach(function(h){return h.next(n)})}i=!1}},u=A$({id:t.id,send:function(f){s.push(f),l()},getSnapshot:function(){return n},subscribe:function(f,h,m){var g=yd(f,h,m);return r.add(g),g.next(n),{unsubscribe:function(){r.delete(g)}}}}),d={parent:t.parent,self:u,id:t.id||"anonymous",observers:r};return n=e.start?e.start(d):n,u}var U$={sync:!1,autoForward:!1},Wn;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Wn||(Wn={}));var B$=(function(){function e(t,n){n===void 0&&(n=e.defaultOptions);var r=this;this.machine=t,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Wn.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(h,m){if(Vc(h))return r.batch(h),r.state;var g=lr(Ap(h,m));if(r.status===Wn.Stopped)return r.state;if(r.status!==Wn.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(g.name,'" was sent to uninitialized service "').concat(r.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(g.data)));return r.scheduler.schedule(function(){r.forward(g);var y=r._nextState(g);r.update(y,g)}),r._state},this.sendTo=function(h,m,g){var y=r.parent&&(m===Ac.Parent||r.parent.id===m),w=y?r.parent:zt(m)?m===Ac.Internal?r:r.children.get(m)||qu.get(m):p$(m)?m:void 0;if(!w){if(!y)throw new Error("Unable to send event to child '".concat(m,"' from service '").concat(r.id,"'."));return}if("machine"in w){if(r.status!==Wn.Stopped||r.parent!==w||r.state.done){var b=Ae(Ae({},h),{name:h.name===n$?"".concat(ad(r.id)):h.name,origin:r.sessionId});!g&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([w,b]):w.send(b)}}else!g&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([w,h.data]):w.send(h.data)},this._exec=function(h,m,g,y){y===void 0&&(y=r.machine.options.actions);var w=h.exec||jx(h.type,y),b=$t(w)?w:w?w.exec:h.exec;if(b)try{return b(m,g.data,r.machine.config.predictableActionArguments?{action:h,_event:g}:{action:h,state:r.state,_event:g})}catch(B){throw r.parent&&r.parent.send({type:"xstate.error",data:B}),B}switch(h.type){case lf:{var S=h;r.defer(S);break}case Pp:var _=h;if(typeof _.delay=="number"){r.defer(_);return}else _.to?r.sendTo(_._event,_.to,g===fc):r.send(_._event);break;case dC:r.cancel(h.sendId);break;case xx:{if(r.status!==Wn.Running)return;var k=h.activity;if(!r.machine.config.predictableActionArguments&&!r.state.activities[k.id||k.type])break;if(k.type===Kt.Invoke){var N=wC(k.src),T=r.machine.options.services?r.machine.options.services[N.type]:void 0,P=k.id,R=k.data,M="autoForward"in k?k.autoForward:!!k.forward;if(!T)return;var A=R?Vm(R,m,g):void 0;if(typeof T=="string")return;var W=$t(T)?T(m,g.data,{data:A,src:N,meta:k.meta}):T;if(!W)return;var K=void 0;Rc(W)&&(W=A?W.withContext(A):W,K={autoForward:M}),r.spawn(W,P,K)}else r.spawnActivity(k);break}case m0:{r.stopChild(h.activity.id);break}case fC:var H=h,z=H.label,L=H.value;z?r.logger(z,L):r.logger(L);break}};var s=Ae(Ae({},e.defaultOptions),n),i=s.clock,l=s.logger,u=s.parent,d=s.id,f=d!==void 0?d:t.id;this.id=f,this.logger=l,this.clock=i,this.parent=u,this.options=s,this.scheduler=new yE({deferEvents:this.options.deferEvents}),this.sessionId=qu.bookId()}return Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:ec(this,function(){return t._initialState=t.machine.initialState,t._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.execute=function(t,n){var r,s;try{for(var i=Pt(t.actions),l=i.next();!l.done;l=i.next()){var u=l.value;this.exec(u,t,n)}}catch(d){r={error:d}}finally{try{l&&!l.done&&(s=i.return)&&s.call(i)}finally{if(r)throw r.error}}},e.prototype.update=function(t,n){var r,s,i,l,u,d,f,h,m=this;if(t._sessionid=this.sessionId,this._state=t,(!this.machine.config.predictableActionArguments||n===fc)&&this.options.execute)this.execute(this.state);else for(var g=void 0;g=this._outgoingQueue.shift();)g[0].send(g[1]);if(this.children.forEach(function(W){m.state.children[W.id]=W}),this.devTools&&this.devTools.send(n.data,t),t.event)try{for(var y=Pt(this.eventListeners),w=y.next();!w.done;w=y.next()){var b=w.value;b(t.event)}}catch(W){r={error:W}}finally{try{w&&!w.done&&(s=y.return)&&s.call(y)}finally{if(r)throw r.error}}try{for(var S=Pt(this.listeners),_=S.next();!_.done;_=S.next()){var b=_.value;b(t,t.event)}}catch(W){i={error:W}}finally{try{_&&!_.done&&(l=S.return)&&l.call(S)}finally{if(i)throw i.error}}try{for(var k=Pt(this.contextListeners),N=k.next();!N.done;N=k.next()){var T=N.value;T(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(W){u={error:W}}finally{try{N&&!N.done&&(d=k.return)&&d.call(k)}finally{if(u)throw u.error}}if(this.state.done){var P=t.configuration.find(function(W){return W.type==="final"&&W.parent===m.machine}),R=P&&P.doneData?Vm(P.doneData,t.context,n):void 0;this._doneEvent=ym(this.id,R);try{for(var M=Pt(this.doneListeners),A=M.next();!A.done;A=M.next()){var b=A.value;b(this._doneEvent)}}catch(W){f={error:W}}finally{try{A&&!A.done&&(h=M.return)&&h.call(M)}finally{if(f)throw f.error}}this._stop(),this._stopChildren(),qu.free(this.sessionId)}},e.prototype.onTransition=function(t){return this.listeners.add(t),this.status===Wn.Running&&t(this.state,this.state.event),this},e.prototype.subscribe=function(t,n,r){var s=this,i=yd(t,n,r);this.listeners.add(i.next),this.status!==Wn.NotStarted&&i.next(this.state);var l=function(){s.doneListeners.delete(l),s.stopListeners.delete(l),i.complete()};return this.status===Wn.Stopped?i.complete():(this.onDone(l),this.onStop(l)),{unsubscribe:function(){s.listeners.delete(i.next),s.doneListeners.delete(l),s.stopListeners.delete(l)}}},e.prototype.onEvent=function(t){return this.eventListeners.add(t),this},e.prototype.onSend=function(t){return this.sendListeners.add(t),this},e.prototype.onChange=function(t){return this.contextListeners.add(t),this},e.prototype.onStop=function(t){return this.stopListeners.add(t),this},e.prototype.onDone=function(t){return this.status===Wn.Stopped&&this._doneEvent?t(this._doneEvent):this.doneListeners.add(t),this},e.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},e.prototype.start=function(t){var n=this;if(this.status===Wn.Running)return this;this.machine._init(),qu.register(this.sessionId,this),this.initialized=!0,this.status=Wn.Running;var r=t===void 0?this.initialState:ec(this,function(){return D$(t)?n.machine.resolveState(t):n.machine.resolveState(Ws.from(t,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(r,fc)}),this},e.prototype._stopChildren=function(){this.children.forEach(function(t){$t(t.stop)&&t.stop()}),this.children.clear()},e.prototype._stop=function(){var t,n,r,s,i,l,u,d,f,h;try{for(var m=Pt(this.listeners),g=m.next();!g.done;g=m.next()){var y=g.value;this.listeners.delete(y)}}catch(M){t={error:M}}finally{try{g&&!g.done&&(n=m.return)&&n.call(m)}finally{if(t)throw t.error}}try{for(var w=Pt(this.stopListeners),b=w.next();!b.done;b=w.next()){var y=b.value;y(),this.stopListeners.delete(y)}}catch(M){r={error:M}}finally{try{b&&!b.done&&(s=w.return)&&s.call(w)}finally{if(r)throw r.error}}try{for(var S=Pt(this.contextListeners),_=S.next();!_.done;_=S.next()){var y=_.value;this.contextListeners.delete(y)}}catch(M){i={error:M}}finally{try{_&&!_.done&&(l=S.return)&&l.call(S)}finally{if(i)throw i.error}}try{for(var k=Pt(this.doneListeners),N=k.next();!N.done;N=k.next()){var y=N.value;this.doneListeners.delete(y)}}catch(M){u={error:M}}finally{try{N&&!N.done&&(d=k.return)&&d.call(k)}finally{if(u)throw u.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Wn.Stopped,this._initialState=void 0;try{for(var T=Pt(Object.keys(this.delayedEventsMap)),P=T.next();!P.done;P=T.next()){var R=P.value;this.clock.clearTimeout(this.delayedEventsMap[R])}}catch(M){f={error:M}}finally{try{P&&!P.done&&(h=T.return)&&h.call(T)}finally{if(f)throw f.error}}this.scheduler.clear(),this.scheduler=new yE({deferEvents:this.options.deferEvents})},e.prototype.stop=function(){var t=this,n=this.scheduler;return this._stop(),n.schedule(function(){var r;if(!(!((r=t._state)===null||r===void 0)&&r.done)){var s=lr({type:"xstate.stop"}),i=ec(t,function(){var l=mn(tn([],Lt(t.state.configuration),!1).sort(function(m,g){return g.order-m.order}).map(function(m){return Ga(m.onExit,t.machine.options.actions)})),u=Lt(zm(t.machine,t.state,t.state.context,s,[{type:"exit",actions:l}],t.machine.config.predictableActionArguments?t._exec:void 0,t.machine.config.predictableActionArguments||t.machine.config.preserveActionOrder),2),d=u[0],f=u[1],h=new Ws({value:t.state.value,context:f,_event:s,_sessionid:t.sessionId,historyValue:void 0,history:t.state,actions:d.filter(function(m){return!Sx(m)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:t.state.done,tags:t.state.tags,machine:t.machine});return h.changed=!0,h});t.update(i,s),t._stopChildren(),qu.free(t.sessionId)}}),this},e.prototype.batch=function(t){var n=this;if(!(this.status===Wn.NotStarted&&this.options.deferEvents)){if(this.status!==Wn.Running)throw new Error("".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(t.length){var r=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var s,i,l=n.state,u=!1,d=[],f=function(y){var w=lr(y);n.forward(w),l=ec(n,function(){return n.machine.transition(l,w,void 0,r||void 0)}),d.push.apply(d,tn([],Lt(n.machine.config.predictableActionArguments?l.actions:l.actions.map(function(b){return M$(b,l)})),!1)),u=u||!!l.changed};try{for(var h=Pt(t),m=h.next();!m.done;m=h.next()){var g=m.value;f(g)}}catch(y){s={error:y}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(s)throw s.error}}l.changed=u,l.actions=d,n.update(l,lr(t[t.length-1]))})}},e.prototype.sender=function(t){return this.send.bind(this,t)},e.prototype._nextState=function(t,n){var r=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var s=lr(t);if(s.name.indexOf(dE)===0&&!this.state.nextEvents.some(function(l){return l.indexOf(dE)===0}))throw s.data.data;var i=ec(this,function(){return r.machine.transition(r.state,s,void 0,n||void 0)});return i},e.prototype.nextState=function(t){return this._nextState(t,!1)},e.prototype.forward=function(t){var n,r;try{for(var s=Pt(this.forwardTo),i=s.next();!i.done;i=s.next()){var l=i.value,u=this.children.get(l);if(!u)throw new Error("Unable to forward event '".concat(t,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(l,"'."));u.send(t)}}catch(d){n={error:d}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},e.prototype.defer=function(t){var n=this,r=this.clock.setTimeout(function(){"to"in t&&t.to?n.sendTo(t._event,t.to,!0):n.send(t._event)},t.delay);t.id&&(this.delayedEventsMap[t.id]=r)},e.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},e.prototype.exec=function(t,n,r){r===void 0&&(r=this.machine.options.actions),this._exec(t,n.context,n._event,r)},e.prototype.removeChild=function(t){var n;this.children.delete(t),this.forwardTo.delete(t),(n=this.state)===null||n===void 0||delete n.children[t]},e.prototype.stopChild=function(t){var n=this.children.get(t);n&&(this.removeChild(t),$t(n.stop)&&n.stop())},e.prototype.spawn=function(t,n,r){if(this.status!==Wn.Running)return SC(t,n);if(mE(t))return this.spawnPromise(Promise.resolve(t),n);if($t(t))return this.spawnCallback(t,n);if(P$(t))return this.spawnActor(t,n);if(m$(t))return this.spawnObservable(t,n);if(Rc(t))return this.spawnMachine(t,Ae(Ae({},r),{id:n}));if(u$(t))return this.spawnBehavior(t,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof t,'".'))},e.prototype.spawnMachine=function(t,n){var r=this;n===void 0&&(n={});var s=new e(t,Ae(Ae({},this.options),{parent:this,id:n.id||t.id})),i=Ae(Ae({},U$),n);i.sync&&s.onTransition(function(u){r.send(hC,{state:u,id:s.id})});var l=s;return this.children.set(s.id,l),i.autoForward&&this.forwardTo.add(s.id),s.onDone(function(u){r.removeChild(s.id),r.send(lr(u,{origin:s.id}))}).start(),l},e.prototype.spawnBehavior=function(t,n){var r=z$(t,{id:n,parent:this});return this.children.set(n,r),r},e.prototype.spawnPromise=function(t,n){var r,s=this,i=!1,l;t.then(function(d){i||(l=d,s.removeChild(n),s.send(lr(ym(n,d),{origin:n})))},function(d){if(!i){s.removeChild(n);var f=ad(n,d);try{s.send(lr(f,{origin:n}))}catch{s.devTools&&s.devTools.send(f,s.state),s.machine.strict&&s.stop()}}});var u=(r={id:n,send:function(){},subscribe:function(d,f,h){var m=yd(d,f,h),g=!1;return t.then(function(y){g||(m.next(y),!g&&m.complete())},function(y){g||m.error(y)}),{unsubscribe:function(){return g=!0}}},stop:function(){i=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},r[Ha]=function(){return this},r);return this.children.set(n,u),u},e.prototype.spawnCallback=function(t,n){var r,s=this,i=!1,l=new Set,u=new Set,d,f=function(g){d=g,u.forEach(function(y){return y(g)}),!i&&s.send(lr(g,{origin:n}))},h;try{h=t(f,function(g){l.add(g)})}catch(g){this.send(ad(n,g))}if(mE(h))return this.spawnPromise(h,n);var m=(r={id:n,send:function(g){return l.forEach(function(y){return y(g)})},subscribe:function(g){var y=yd(g);return u.add(y.next),{unsubscribe:function(){u.delete(y.next)}}},stop:function(){i=!0,$t(h)&&h()},toJSON:function(){return{id:n}},getSnapshot:function(){return d}},r[Ha]=function(){return this},r);return this.children.set(n,m),m},e.prototype.spawnObservable=function(t,n){var r,s=this,i,l=t.subscribe(function(d){i=d,s.send(lr(d,{origin:n}))},function(d){s.removeChild(n),s.send(lr(ad(n,d),{origin:n}))},function(){s.removeChild(n),s.send(lr(ym(n),{origin:n}))}),u=(r={id:n,send:function(){},subscribe:function(d,f,h){return t.subscribe(d,f,h)},stop:function(){return l.unsubscribe()},getSnapshot:function(){return i},toJSON:function(){return{id:n}}},r[Ha]=function(){return this},r);return this.children.set(n,u),u},e.prototype.spawnActor=function(t,n){return this.children.set(n,t),t},e.prototype.spawnActivity=function(t){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(n){var r=n(this.state.context,t);this.spawnEffect(t.id,r)}},e.prototype.spawnEffect=function(t,n){var r;this.children.set(t,(r={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:t}}},r[Ha]=function(){return this},r))},e.prototype.attachDev=function(){var t=v0();if(this.options.devTools&&t){if(t.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=t.__REDUX_DEVTOOLS_EXTENSION__.connect(Ae(Ae({name:this.id,autoPause:!0,stateSanitizer:function(r){return{value:r.value,context:r.context,actions:r.actions}}},n),{features:Ae({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}V$(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[Ha]=function(){return this},e.prototype.getSnapshot=function(){return this.status===Wn.NotStarted?this.initialState:this._state},e.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(t,n){return setTimeout(t,n)},clearTimeout:function(t){return clearTimeout(t)}},logger:console.log.bind(console),devTools:!1},e.interpret=$o,e})();function $o(e,t){var n=new B$(e,t);return n}function q$(e){if(typeof e=="string"){var t={type:e};return t.toString=function(){return e},t}return e}function Lh(e){return Ae(Ae({type:wx},e),{toJSON:function(){e.onDone,e.onError;var t=h0(e,["onDone","onError"]);return Ae(Ae({},t),{type:wx,src:q$(e.src)})}})}var Fh="",kx="#",Zy="*",Bl={},ql=function(e){return e[0]===kx},W$=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},H$=(function(){function e(t,n,r,s){r===void 0&&(r="context"in t?t.context:void 0);var i=this,l;this.config=t,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(W$(),n),this.parent=s==null?void 0:s.parent,this.key=this.config.key||(s==null?void 0:s.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:mC),this.id=this.config.id||tn([this.machine.key],Lt(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(l=this.config.schema)!==null&&l!==void 0?l:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?id(this.config.states,function(f,h){var m,g=new e(f,{},void 0,{parent:i,key:h});return Object.assign(i.idMap,Ae((m={},m[g.id]=g,m),g.idMap)),g}):Bl;var u=0;function d(f){var h,m;f.order=u++;try{for(var g=Pt(jC(f)),y=g.next();!y.done;y=g.next()){var w=y.value;d(w)}}catch(b){h={error:b}}finally{try{y&&!y.done&&(m=g.return)&&m.call(g)}finally{if(h)throw h.error}}}d(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(f){var h=f.event;return h===Fh}):Fh in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=qs(this.config.entry||this.config.onEntry).map(function(f){return Rd(f)}),this.onExit=qs(this.config.exit||this.config.onExit).map(function(f){return Rd(f)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=qs(this.config.invoke).map(function(f,h){var m,g;if(Rc(f)){var y=Dh(i.id,h);return i.machine.options.services=Ae((m={},m[y]=f,m),i.machine.options.services),Lh({src:y,id:y})}else if(zt(f.src)){var y=f.id||Dh(i.id,h);return Lh(Ae(Ae({},f),{id:y,src:f.src}))}else if(Rc(f.src)||$t(f.src)){var y=f.id||Dh(i.id,h);return i.machine.options.services=Ae((g={},g[y]=f.src,g),i.machine.options.services),Lh(Ae(Ae({id:y},f),{src:y}))}else{var w=f.src;return Lh(Ae(Ae({id:Dh(i.id,h)},f),{src:w}))}}),this.activities=qs(this.config.activities).concat(this.invoke).map(function(f){return y0(f)}),this.transition=this.transition.bind(this),this.tags=qs(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||EC(this).forEach(function(t){return t.on})},e.prototype.withConfig=function(t,n){var r=this.options,s=r.actions,i=r.activities,l=r.guards,u=r.services,d=r.delays;return new e(this.config,{actions:Ae(Ae({},s),t.actions),activities:Ae(Ae({},i),t.activities),guards:Ae(Ae({},l),t.guards),services:Ae(Ae({},u),t.services),delays:Ae(Ae({},d),t.delays)},n??this.context)},e.prototype.withContext=function(t){return new e(this.config,this.options,t)},Object.defineProperty(e.prototype,"context",{get:function(){return $t(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:id(this.states,function(t){return t.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},Object.defineProperty(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce(function(n,r){return n[r.eventType]=n[r.eventType]||[],n[r.eventType].push(r),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var n=t===Fh,r=this.transitions.filter(function(s){var i=s.eventType===t;return n?i:i||s.eventType===Zy});return this.__cache.candidates[t]=r,r},e.prototype.getDelayedTransitions=function(){var t=this,n=this.config.after;if(!n)return[];var r=function(i,l){var u=$t(i)?"".concat(t.id,":delay[").concat(l,"]"):i,d=k$(u,t.id);return t.onEntry.push(bC(d,{delay:i})),t.onExit.push(b$(d)),d},s=Vc(n)?n.map(function(i,l){var u=r(i.delay,l);return Ae(Ae({},i),{event:u})}):mn(Object.keys(n).map(function(i,l){var u=n[i],d=zt(u)?{target:u}:u,f=isNaN(+i)?i:+i,h=r(f,l);return qs(d).map(function(m){return Ae(Ae({},m),{event:h,delay:f})})}));return s.map(function(i){var l=i.delay;return Ae(Ae({},t.formatTransition(i)),{delay:l})})},e.prototype.getStateNodes=function(t){var n,r=this;if(!t)return[];var s=t instanceof Ws?t.value:gd(t,this.delimiter);if(zt(s)){var i=this.getStateNode(s).initial;return i!==void 0?this.getStateNodes((n={},n[s]=i,n)):[this,this.states[s]]}var l=Object.keys(s),u=[this];return u.push.apply(u,tn([],Lt(mn(l.map(function(d){return r.getStateNode(d).getStateNodes(s[d])}))),!1)),u},e.prototype.handles=function(t){var n=pC(t);return this.events.includes(n)},e.prototype.resolveState=function(t){var n=t instanceof Ws?t:Ws.create(t),r=Array.from(od([],this.getStateNodes(n.value)));return new Ws(Ae(Ae({},n),{value:this.resolve(n.value),configuration:r,done:vm(r,this),tags:gE(r),machine:this.machine}))},e.prototype.transitionLeafNode=function(t,n,r){var s=this.getStateNode(t),i=s.next(n,r);return!i||!i.transitions.length?this.next(n,r):i},e.prototype.transitionCompoundNode=function(t,n,r){var s=Object.keys(t),i=this.getStateNode(s[0]),l=i._transition(t[s[0]],n,r);return!l||!l.transitions.length?this.next(n,r):l},e.prototype.transitionParallelNode=function(t,n,r){var s,i,l={};try{for(var u=Pt(Object.keys(t)),d=u.next();!d.done;d=u.next()){var f=d.value,h=t[f];if(h){var m=this.getStateNode(f),g=m._transition(h,n,r);g&&(l[f]=g)}}}catch(_){s={error:_}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(s)throw s.error}}var y=Object.keys(l).map(function(_){return l[_]}),w=mn(y.map(function(_){return _.transitions})),b=y.some(function(_){return _.transitions.length>0});if(!b)return this.next(n,r);var S=mn(Object.keys(l).map(function(_){return l[_].configuration}));return{transitions:w,exitSet:mn(y.map(function(_){return _.exitSet})),configuration:S,source:n,actions:mn(Object.keys(l).map(function(_){return l[_].actions}))}},e.prototype._transition=function(t,n,r){return zt(t)?this.transitionLeafNode(t,n,r):Object.keys(t).length===1?this.transitionCompoundNode(t,n,r):this.transitionParallelNode(t,n,r)},e.prototype.getTransitionData=function(t,n){return this._transition(t.value,t,lr(n))},e.prototype.next=function(t,n){var r,s,i=this,l=n.name,u=[],d=[],f;try{for(var h=Pt(this.getCandidates(l)),m=h.next();!m.done;m=h.next()){var g=m.value,y=g.cond,w=g.in,b=t.context,S=w?zt(w)&&ql(w)?t.matches(gd(this.getStateNodeById(w).path,this.delimiter)):g0(gd(w,this.delimiter),o$(this.path.slice(0,-2))(t.value)):!0,_=!1;try{_=!y||xC(this.machine,y,b,n,t)}catch(T){throw new Error("Unable to evaluate guard '".concat(y.name||y.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,`':
`).concat(T.message))}if(_&&S){g.target!==void 0&&(d=g.target),u.push.apply(u,tn([],Lt(g.actions),!1)),f=g;break}}}catch(T){r={error:T}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(r)throw r.error}}if(f){if(!d.length)return{transitions:[f],exitSet:[],configuration:t.value?[this]:[],source:t,actions:u};var k=mn(d.map(function(T){return i.getRelativeStateNodes(T,t.historyValue)})),N=!!f.internal;return{transitions:[f],exitSet:N?[]:mn(d.map(function(T){return i.getPotentiallyReenteringNodes(T)})),configuration:k,source:t,actions:u}}},e.prototype.getPotentiallyReenteringNodes=function(t){if(this.order<t.order)return[this];for(var n=[],r=this,s=t;r&&r!==s;)n.push(r),r=r.parent;return r!==s?[]:(n.push(s),n)},e.prototype.getActions=function(t,n,r,s,i,l,u){var d,f,h,m,g=this,y=l?od([],this.getStateNodes(l.value)):[],w=new Set;try{for(var b=Pt(Array.from(t).sort(function(H,z){return H.order-z.order})),S=b.next();!S.done;S=b.next()){var _=S.value;(!ld(y,_)||ld(r.exitSet,_)||_.parent&&w.has(_.parent))&&w.add(_)}}catch(H){d={error:H}}finally{try{S&&!S.done&&(f=b.return)&&f.call(b)}finally{if(d)throw d.error}}try{for(var k=Pt(y),N=k.next();!N.done;N=k.next()){var _=N.value;(!ld(t,_)||ld(r.exitSet,_.parent))&&r.exitSet.push(_)}}catch(H){h={error:H}}finally{try{N&&!N.done&&(m=k.return)&&m.call(k)}finally{if(h)throw h.error}}r.exitSet.sort(function(H,z){return z.order-H.order});var T=Array.from(w).sort(function(H,z){return H.order-z.order}),P=new Set(r.exitSet),R=mn(T.map(function(H){var z=[];if(H.type!=="final")return z;var L=H.parent;if(!L.parent)return z;z.push(Mh(H.id,H.doneData),Mh(L.id,H.doneData?Vm(H.doneData,s,i):void 0));var B=L.parent;return B.type==="parallel"&&Id(B).every(function(Q){return vm(r.configuration,Q)})&&z.push(Mh(B.id)),z})),M=T.map(function(H){var z=H.onEntry,L=H.activities.map(function(B){return _$(B)});return{type:"entry",actions:Ga(u?tn(tn([],Lt(z),!1),Lt(L),!1):tn(tn([],Lt(L),!1),Lt(z),!1),g.machine.options.actions)}}).concat({type:"state_done",actions:R.map(function(H){return y$(H)})}),A=Array.from(P).map(function(H){return{type:"exit",actions:Ga(tn(tn([],Lt(H.onExit),!1),Lt(H.activities.map(function(z){return S$(z)})),!1),g.machine.options.actions)}}),W=A.concat({type:"transition",actions:Ga(r.actions,this.machine.options.actions)}).concat(M);if(n){var K=Ga(mn(tn([],Lt(t),!1).sort(function(H,z){return z.order-H.order}).map(function(H){return H.onExit})),this.machine.options.actions).filter(function(H){return!Sx(H)});return W.concat({type:"stop",actions:K})}return W},e.prototype.transition=function(t,n,r,s){t===void 0&&(t=this.initialState);var i=lr(n),l;if(t instanceof Ws)l=r===void 0?t:this.resolveState(Ws.from(t,r));else{var u=zt(t)?this.resolve($m(this.getResolvedPath(t))):this.resolve(t),d=r??this.machine.context;l=this.resolveState(Ws.from(u,d))}if(this.strict&&!this.events.includes(i.name)&&!c$(i.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(i.name,"'"));var f=this._transition(l.value,l,i)||{transitions:[],configuration:[],exitSet:[],source:l,actions:[]},h=od([],this.getStateNodes(l.value)),m=f.configuration.length?od(h,f.configuration):h;return f.configuration=tn([],Lt(m),!1),this.resolveTransition(f,l,l.context,s,i)},e.prototype.resolveRaisedTransition=function(t,n,r,s){var i,l=t.actions;return t=this.transition(t,n,void 0,s),t._event=r,t.event=r.data,(i=t.actions).unshift.apply(i,tn([],Lt(l),!1)),t},e.prototype.resolveTransition=function(t,n,r,s,i){var l,u,d,f,h=this;i===void 0&&(i=fc);var m=t.configuration,g=!n||t.transitions.length>0,y=g?t.configuration:n?n.configuration:[],w=vm(y,this),b=g?R$(this.machine,m):void 0,S=n?n.historyValue?n.historyValue:t.source?this.machine.historyValue(n.value):void 0:void 0,_=this.getActions(new Set(y),w,t,r,i,n,s),k=n?Ae({},n.activities):{};try{for(var N=Pt(_),T=N.next();!T.done;T=N.next()){var P=T.value;try{for(var R=(d=void 0,Pt(P.actions)),M=R.next();!M.done;M=R.next()){var A=M.value;A.type===xx?k[A.activity.id||A.activity.type]=A:A.type===m0&&(k[A.activity.id||A.activity.type]=!1)}}catch(ce){d={error:ce}}finally{try{M&&!M.done&&(f=R.return)&&f.call(R)}finally{if(d)throw d.error}}}}catch(ce){l={error:ce}}finally{try{T&&!T.done&&(u=N.return)&&u.call(N)}finally{if(l)throw l.error}}var W=Lt(zm(this,n,r,i,_,s,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),K=W[0],H=W[1],z=Lt(d$(K,Sx),2),L=z[0],B=z[1],Q=K.filter(function(ce){var he;return ce.type===xx&&((he=ce.activity)===null||he===void 0?void 0:he.type)===wx}),q=Q.reduce(function(ce,he){return ce[he.activity.id]=T$(he.activity,h.machine,H,i),ce},n?Ae({},n.children):{}),F=new Ws({value:b||n.value,context:H,_event:i,_sessionid:n?n._sessionid:null,historyValue:b?S?f$(S,b):void 0:n?n.historyValue:void 0,history:!b||t.source?n:void 0,actions:b?B:[],activities:b?k:n?n.activities:{},events:[],configuration:y,transitions:t.transitions,children:q,done:w,tags:gE(y),machine:this}),D=r!==H;F.changed=i.name===hC||D;var X=F.history;X&&delete X.history;var I=!w&&(this._transient||m.some(function(ce){return ce._transient}));if(!g&&(!I||i.name===Fh))return F;var V=F;if(!w)for(I&&(V=this.resolveRaisedTransition(V,{type:e$},i,s));L.length;){var Z=L.shift();V=this.resolveRaisedTransition(V,Z._event,i,s)}var O=V.changed||(X?!!V.actions.length||D||typeof X.value!=typeof V.value||!NC(V.value,X.value):void 0);return V.changed=O,V.history=X,V},e.prototype.getStateNode=function(t){if(ql(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '".concat(t,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[t];if(!n)throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return n},e.prototype.getStateNodeById=function(t){var n=ql(t)?t.slice(kx.length):t;if(n===this.id)return this;var r=this.machine.idMap[n];if(!r)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return r},e.prototype.getStateNodeByPath=function(t){if(typeof t=="string"&&ql(t))try{return this.getStateNodeById(t.slice(1))}catch{}for(var n=_x(t,this.delimiter).slice(),r=this;n.length;){var s=n.shift();if(!s.length)break;r=r.getStateNode(s)}return r},e.prototype.resolve=function(t){var n,r=this;if(!t)return this.initialStateValue||Bl;switch(this.type){case"parallel":return id(this.initialStateValue,function(i,l){return i?r.getStateNode(l).resolve(t[l]||i):Bl});case"compound":if(zt(t)){var s=this.getStateNode(t);return s.type==="parallel"||s.type==="compound"?(n={},n[t]=s.initialStateValue,n):t}return Object.keys(t).length?id(t,function(i,l){return i?r.getStateNode(l).resolve(i):Bl}):this.initialStateValue||{};default:return t||Bl}},e.prototype.getResolvedPath=function(t){if(ql(t)){var n=this.machine.idMap[t.slice(kx.length)];if(!n)throw new Error("Unable to find state node '".concat(t,"'"));return n.path}return _x(t,this.delimiter)},Object.defineProperty(e.prototype,"initialStateValue",{get:function(){var t;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=hE(this.states,function(r){return r.initialStateValue||Bl},function(r){return r.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Um(this.states[this.initial])?this.initial:(t={},t[this.initial]=this.states[this.initial].initialStateValue,t)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(t,n){this._init();var r=this.getStateNodes(t);return this.resolveTransition({configuration:r,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){var t;if(this.type==="history"){var n=this.config;zt(n.target)?t=ql(n.target)?$m(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:t=n.target}return t},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(t,n,r){return r===void 0&&(r=!0),r?t.type==="history"?t.resolveHistory(n):t.initialStateNodes:[t]},Object.defineProperty(e.prototype,"initialStateNodes",{get:function(){var t=this;if(Um(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=gm(this.initialStateValue);return mn(n.map(function(r){return t.getFromRelativePath(r)}))},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var n=Lt(t),r=n[0],s=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(r,"' from node with no states"));var i=this.getStateNode(r);if(i.type==="history")return i.resolveHistory();if(!this.states[r])throw new Error("Child state '".concat(r,"' does not exist on '").concat(this.id,"'"));return this.states[r].getFromRelativePath(s)},e.prototype.historyValue=function(t){if(Object.keys(this.states).length)return{current:t||this.initialStateValue,states:hE(this.states,function(n,r){if(!t)return n.historyValue();var s=zt(t)?void 0:t[r];return n.historyValue(s||n.initialStateValue)},function(n){return!n.history})}},e.prototype.resolveHistory=function(t){var n=this;if(this.type!=="history")return[this];var r=this.parent;if(!t){var s=this.target;return s?mn(gm(s).map(function(l){return r.getFromRelativePath(l)})):r.initialStateNodes}var i=l$(r.path,"states")(t).current;return zt(i)?[r.getStateNode(i)]:mn(gm(i).map(function(l){return n.history==="deep"?r.getFromRelativePath(l):[r.states[l[0]]]}))},Object.defineProperty(e.prototype,"stateIds",{get:function(){var t=this,n=mn(Object.keys(this.states).map(function(r){return t.states[r].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){var t,n,r,s;if(this.__cache.events)return this.__cache.events;var i=this.states,l=new Set(this.ownEvents);if(i)try{for(var u=Pt(Object.keys(i)),d=u.next();!d.done;d=u.next()){var f=d.value,h=i[f];if(h.states)try{for(var m=(r=void 0,Pt(h.events)),g=m.next();!g.done;g=m.next()){var y=g.value;l.add("".concat(y))}}catch(w){r={error:w}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(r)throw r.error}}}}catch(w){t={error:w}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(l)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(t)},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(t){var n=this;if(t!==void 0)return t.map(function(r){if(!zt(r))return r;var s=r[0]===n.delimiter;if(s&&!n.parent)return n.getStateNodeByPath(r.slice(1));var i=s?n.key+r:r;if(n.parent)try{var l=n.parent.getStateNodeByPath(i);return l}catch(u){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(u.message))}else return n.getStateNodeByPath(i)})},e.prototype.formatTransition=function(t){var n=this,r=g$(t.target),s="internal"in t?t.internal:r?r.some(function(d){return zt(d)&&d[0]===n.delimiter}):!0,i=this.machine.options.guards,l=this.resolveTarget(r),u=Ae(Ae({},t),{actions:Ga(qs(t.actions)),cond:vC(t.cond,i),target:l,source:this,internal:s,eventType:t.event,toJSON:function(){return Ae(Ae({},u),{target:u.target?u.target.map(function(d){return"#".concat(d.id)}):void 0,source:"#".concat(n.id)})}});return u},e.prototype.formatTransitions=function(){var t,n,r=this,s;if(!this.config.on)s=[];else if(Array.isArray(this.config.on))s=this.config.on;else{var i=this.config.on,l=Zy,u=i[l],d=u===void 0?[]:u,f=h0(i,[typeof l=="symbol"?l:l+""]);s=mn(Object.keys(f).map(function(k){var N=Ul(k,f[k]);return N}).concat(Ul(Zy,d)))}var h=this.config.always?Ul("",this.config.always):[],m=this.config.onDone?Ul(String(Mh(this.id)),this.config.onDone):[],g=mn(this.invoke.map(function(k){var N=[];return k.onDone&&N.push.apply(N,tn([],Lt(Ul(String(ym(k.id)),k.onDone)),!1)),k.onError&&N.push.apply(N,tn([],Lt(Ul(String(ad(k.id)),k.onError)),!1)),N})),y=this.after,w=mn(tn(tn(tn(tn([],Lt(m),!1),Lt(g),!1),Lt(s),!1),Lt(h),!1).map(function(k){return qs(k).map(function(N){return r.formatTransition(N)})}));try{for(var b=Pt(y),S=b.next();!S.done;S=b.next()){var _=S.value;w.push(_)}}catch(k){t={error:k}}finally{try{S&&!S.done&&(n=b.return)&&n.call(b)}finally{if(t)throw t.error}}return w},e})();function cf(e,t){return new H$(e,t)}var kn=E$,Js=bC;/*! js-cookie v3.0.5 | MIT */function $h(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var G$={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Nx(e,t){function n(s,i,l){if(!(typeof document>"u")){l=$h({},t,l),typeof l.expires=="number"&&(l.expires=new Date(Date.now()+l.expires*864e5)),l.expires&&(l.expires=l.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var u="";for(var d in l)l[d]&&(u+="; "+d,l[d]!==!0&&(u+="="+l[d].split(";")[0]));return document.cookie=s+"="+e.write(i,s)+u}}function r(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var i=document.cookie?document.cookie.split("; "):[],l={},u=0;u<i.length;u++){var d=i[u].split("="),f=d.slice(1).join("=");try{var h=decodeURIComponent(d[0]);if(l[h]=e.read(f,h),s===h)break}catch{}}return s?l[s]:l}}return Object.create({set:n,get:r,remove:function(s,i){n(s,"",$h({},i,{expires:-1}))},withAttributes:function(s){return Nx(this.converter,$h({},this.attributes,s))},withConverter:function(s){return Nx($h({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Tx=Nx(G$,{path:"/"}),cd={exports:{}},K$=cd.exports,vE;function Y$(){return vE||(vE=1,(function(e,t){(function(n){function r(s){var i=s&&s.Promise||n.Promise,l=s&&s.XMLHttpRequest||n.XMLHttpRequest;return(function(){var u=Object.create(n,{fetch:{value:void 0,writable:!0}});return(function(d,f){f(t)})(this,(function(d){var f=typeof u<"u"&&u||typeof self<"u"&&self||typeof f<"u"&&f,h={searchParams:"URLSearchParams"in f,iterable:"Symbol"in f&&"iterator"in Symbol,blob:"FileReader"in f&&"Blob"in f&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in f,arrayBuffer:"ArrayBuffer"in f};function m(F){return F&&DataView.prototype.isPrototypeOf(F)}if(h.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=ArrayBuffer.isView||function(F){return F&&g.indexOf(Object.prototype.toString.call(F))>-1};function w(F){if(typeof F!="string"&&(F=String(F)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(F)||F==="")throw new TypeError("Invalid character in header field name");return F.toLowerCase()}function b(F){return typeof F!="string"&&(F=String(F)),F}function S(F){var D={next:function(){var X=F.shift();return{done:X===void 0,value:X}}};return h.iterable&&(D[Symbol.iterator]=function(){return D}),D}function _(F){this.map={},F instanceof _?F.forEach(function(D,X){this.append(X,D)},this):Array.isArray(F)?F.forEach(function(D){this.append(D[0],D[1])},this):F&&Object.getOwnPropertyNames(F).forEach(function(D){this.append(D,F[D])},this)}_.prototype.append=function(F,D){F=w(F),D=b(D);var X=this.map[F];this.map[F]=X?X+", "+D:D},_.prototype.delete=function(F){delete this.map[w(F)]},_.prototype.get=function(F){return F=w(F),this.has(F)?this.map[F]:null},_.prototype.has=function(F){return this.map.hasOwnProperty(w(F))},_.prototype.set=function(F,D){this.map[w(F)]=b(D)},_.prototype.forEach=function(F,D){for(var X in this.map)this.map.hasOwnProperty(X)&&F.call(D,this.map[X],X,this)},_.prototype.keys=function(){var F=[];return this.forEach(function(D,X){F.push(X)}),S(F)},_.prototype.values=function(){var F=[];return this.forEach(function(D){F.push(D)}),S(F)},_.prototype.entries=function(){var F=[];return this.forEach(function(D,X){F.push([X,D])}),S(F)},h.iterable&&(_.prototype[Symbol.iterator]=_.prototype.entries);function k(F){if(F.bodyUsed)return i.reject(new TypeError("Already read"));F.bodyUsed=!0}function N(F){return new i(function(D,X){F.onload=function(){D(F.result)},F.onerror=function(){X(F.error)}})}function T(F){var D=new FileReader,X=N(D);return D.readAsArrayBuffer(F),X}function P(F){var D=new FileReader,X=N(D);return D.readAsText(F),X}function R(F){for(var D=new Uint8Array(F),X=new Array(D.length),I=0;I<D.length;I++)X[I]=String.fromCharCode(D[I]);return X.join("")}function M(F){if(F.slice)return F.slice(0);var D=new Uint8Array(F.byteLength);return D.set(new Uint8Array(F)),D.buffer}function A(){return this.bodyUsed=!1,this._initBody=function(F){this.bodyUsed=this.bodyUsed,this._bodyInit=F,F?typeof F=="string"?this._bodyText=F:h.blob&&Blob.prototype.isPrototypeOf(F)?this._bodyBlob=F:h.formData&&FormData.prototype.isPrototypeOf(F)?this._bodyFormData=F:h.searchParams&&URLSearchParams.prototype.isPrototypeOf(F)?this._bodyText=F.toString():h.arrayBuffer&&h.blob&&m(F)?(this._bodyArrayBuffer=M(F.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):h.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(F)||y(F))?this._bodyArrayBuffer=M(F):this._bodyText=F=Object.prototype.toString.call(F):this._bodyText="",this.headers.get("content-type")||(typeof F=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&URLSearchParams.prototype.isPrototypeOf(F)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h.blob&&(this.blob=function(){var F=k(this);if(F)return F;if(this._bodyBlob)return i.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return i.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return i.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var F=k(this);return F||(ArrayBuffer.isView(this._bodyArrayBuffer)?i.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):i.resolve(this._bodyArrayBuffer))}else return this.blob().then(T)}),this.text=function(){var F=k(this);if(F)return F;if(this._bodyBlob)return P(this._bodyBlob);if(this._bodyArrayBuffer)return i.resolve(R(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return i.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(z)}),this.json=function(){return this.text().then(JSON.parse)},this}var W=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function K(F){var D=F.toUpperCase();return W.indexOf(D)>-1?D:F}function H(F,D){if(!(this instanceof H))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');D=D||{};var X=D.body;if(F instanceof H){if(F.bodyUsed)throw new TypeError("Already read");this.url=F.url,this.credentials=F.credentials,D.headers||(this.headers=new _(F.headers)),this.method=F.method,this.mode=F.mode,this.signal=F.signal,!X&&F._bodyInit!=null&&(X=F._bodyInit,F.bodyUsed=!0)}else this.url=String(F);if(this.credentials=D.credentials||this.credentials||"same-origin",(D.headers||!this.headers)&&(this.headers=new _(D.headers)),this.method=K(D.method||this.method||"GET"),this.mode=D.mode||this.mode||null,this.signal=D.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&X)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(X),(this.method==="GET"||this.method==="HEAD")&&(D.cache==="no-store"||D.cache==="no-cache")){var I=/([?&])_=[^&]*/;if(I.test(this.url))this.url=this.url.replace(I,"$1_="+new Date().getTime());else{var V=/\?/;this.url+=(V.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}H.prototype.clone=function(){return new H(this,{body:this._bodyInit})};function z(F){var D=new FormData;return F.trim().split("&").forEach(function(X){if(X){var I=X.split("="),V=I.shift().replace(/\+/g," "),Z=I.join("=").replace(/\+/g," ");D.append(decodeURIComponent(V),decodeURIComponent(Z))}}),D}function L(F){var D=new _,X=F.replace(/\r?\n[\t ]+/g," ");return X.split("\r").map(function(I){return I.indexOf(`
`)===0?I.substr(1,I.length):I}).forEach(function(I){var V=I.split(":"),Z=V.shift().trim();if(Z){var O=V.join(":").trim();D.append(Z,O)}}),D}A.call(H.prototype);function B(F,D){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');D||(D={}),this.type="default",this.status=D.status===void 0?200:D.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in D?D.statusText:"",this.headers=new _(D.headers),this.url=D.url||"",this._initBody(F)}A.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},B.error=function(){var F=new B(null,{status:0,statusText:""});return F.type="error",F};var Q=[301,302,303,307,308];B.redirect=function(F,D){if(Q.indexOf(D)===-1)throw new RangeError("Invalid status code");return new B(null,{status:D,headers:{location:F}})},d.DOMException=f.DOMException;try{new d.DOMException}catch{d.DOMException=function(D,X){this.message=D,this.name=X;var I=Error(D);this.stack=I.stack},d.DOMException.prototype=Object.create(Error.prototype),d.DOMException.prototype.constructor=d.DOMException}function q(F,D){return new i(function(X,I){var V=new H(F,D);if(V.signal&&V.signal.aborted)return I(new d.DOMException("Aborted","AbortError"));var Z=new l;function O(){Z.abort()}Z.onload=function(){var he={status:Z.status,statusText:Z.statusText,headers:L(Z.getAllResponseHeaders()||"")};he.url="responseURL"in Z?Z.responseURL:he.headers.get("X-Request-URL");var me="response"in Z?Z.response:Z.responseText;setTimeout(function(){X(new B(me,he))},0)},Z.onerror=function(){setTimeout(function(){I(new TypeError("Network request failed"))},0)},Z.ontimeout=function(){setTimeout(function(){I(new TypeError("Network request failed"))},0)},Z.onabort=function(){setTimeout(function(){I(new d.DOMException("Aborted","AbortError"))},0)};function ce(he){try{return he===""&&f.location.href?f.location.href:he}catch{return he}}Z.open(V.method,ce(V.url),!0),V.credentials==="include"?Z.withCredentials=!0:V.credentials==="omit"&&(Z.withCredentials=!1),"responseType"in Z&&(h.blob?Z.responseType="blob":h.arrayBuffer&&V.headers.get("Content-Type")&&V.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(Z.responseType="arraybuffer")),D&&typeof D.headers=="object"&&!(D.headers instanceof _)?Object.getOwnPropertyNames(D.headers).forEach(function(he){Z.setRequestHeader(he,b(D.headers[he]))}):V.headers.forEach(function(he,me){Z.setRequestHeader(me,he)}),V.signal&&(V.signal.addEventListener("abort",O),Z.onreadystatechange=function(){Z.readyState===4&&V.signal.removeEventListener("abort",O)}),Z.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}q.polyfill=!0,f.fetch||(f.fetch=q,f.Headers=_,f.Request=H,f.Response=B),d.Headers=_,d.Request=H,d.Response=B,d.fetch=q,Object.defineProperty(d,"__esModule",{value:!0})})),{fetch:u.fetch,Headers:u.Headers,Request:u.Request,Response:u.Response,DOMException:u.DOMException}})()}e.exports=r})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof Zj<"u"?Zj:K$)})(cd,cd.exports)),cd.exports}var Q$=Y$();const X$=ho(Q$),Wu="nhostRefreshToken",Vh="nhostRefreshTokenId",Wl="nhostRefreshTokenExpiresAt",J$=3,xE=60,wE=5,TC=0,CC=1,mo=10,Rp=20;class tc extends Error{constructor(t){super(t.message),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),t instanceof Error?(this.name=t.name,this.error={error:t.name,status:CC,message:t.message}):(this.name=t.error,this.error=t)}}const fi={status:mo,error:"invalid-email",message:"Email is incorrectly formatted"},Cx={status:mo,error:"invalid-password",message:"Password is incorrectly formatted"},bE={status:mo,error:"invalid-phone-number",message:"Phone number is incorrectly formatted"},Z$={status:mo,error:"invalid-mfa-ticket",message:"MFA ticket is invalid"},e4={status:mo,error:"no-mfa-ticket",message:"No MFA ticket has been provided"},t4={status:mo,error:"no-refresh-token",message:"No refresh token has been provided"},n4={status:Rp,error:"refresher-already-running",message:"The token refresher is already running. You must wait until is has finished before submitting a new token."},Yr={status:Rp,error:"already-signed-in",message:"User is already signed in"},r4={status:Rp,error:"unauthenticated-user",message:"User is not authenticated"},s4={status:Rp,error:"unverified-user",message:"Email needs verification"},i4={status:mo,error:"invalid-refresh-token",message:"Invalid or expired refresh token"},a4={status:CC,error:"invalid-sign-in-method",message:"Invalid sign-in method"},ev={user:null,mfa:null,accessToken:{value:null,expiresAt:null,expiresInSeconds:15},refreshTimer:{startedAt:null,attempts:0,lastAttempt:null},refreshToken:{value:null},importTokenAttempts:0,errors:{}};function o4(e){return new TextEncoder().encode(e)}function ta(e){const t=new Uint8Array(e);let n="";for(const r of t)n+=String.fromCharCode(r);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function x0(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4,r=t.padEnd(t.length+n,"="),s=atob(r),i=new ArrayBuffer(s.length),l=new Uint8Array(i);for(let u=0;u<s.length;u++)l[u]=s.charCodeAt(u);return i}function PC(){return(window==null?void 0:window.PublicKeyCredential)!==void 0&&typeof window.PublicKeyCredential=="function"}function AC(e){const{id:t}=e;return{...e,id:x0(t),transports:e.transports}}function RC(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}let pr=class extends Error{constructor({message:t,code:n,cause:r,name:s}){super(t,{cause:r}),this.name=s??r.name,this.code=n}};function l4({error:e,options:t}){var n,r;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)==null?void 0:n.requireResidentKey)===!0)return new pr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(((r=s.authenticatorSelection)==null?void 0:r.userVerification)==="required")return new pr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new pr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new pr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(i=>i.type==="public-key").length===0?new pr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new pr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(RC(i)){if(s.rp.id!==i)return new pr({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new pr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new pr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return e}let c4=class{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}};const IC=new c4,u4=["cross-platform","platform"];function OC(e){if(e&&!(u4.indexOf(e)<0))return e}async function DC(e){var t;if(!PC())throw new Error("WebAuthn is not supported in this browser");const n={publicKey:{...e,challenge:x0(e.challenge),user:{...e.user,id:o4(e.user.id)},excludeCredentials:(t=e.excludeCredentials)==null?void 0:t.map(AC)}};n.signal=IC.createNewAbortSignal();let r;try{r=await navigator.credentials.create(n)}catch(g){throw l4({error:g,options:n})}if(!r)throw new Error("Registration was not completed");const{id:s,rawId:i,response:l,type:u}=r;let d;typeof l.getTransports=="function"&&(d=l.getTransports());let f;if(typeof l.getPublicKeyAlgorithm=="function")try{f=l.getPublicKeyAlgorithm()}catch(g){tv("getPublicKeyAlgorithm()",g)}let h;if(typeof l.getPublicKey=="function")try{const g=l.getPublicKey();g!==null&&(h=ta(g))}catch(g){tv("getPublicKey()",g)}let m;if(typeof l.getAuthenticatorData=="function")try{m=ta(l.getAuthenticatorData())}catch(g){tv("getAuthenticatorData()",g)}return{id:s,rawId:ta(i),response:{attestationObject:ta(l.attestationObject),clientDataJSON:ta(l.clientDataJSON),transports:d,publicKeyAlgorithm:f,publicKey:h,authenticatorData:m},type:u,clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:OC(r.authenticatorAttachment)}}function tv(e,t){console.warn(`The browser extension that intercepted this WebAuthn API call incorrectly implemented ${e}. You should report this error to them.
`,t)}function d4(e){return new TextDecoder("utf-8").decode(e)}function f4(){const e=window.PublicKeyCredential;return e.isConditionalMediationAvailable===void 0?new Promise(t=>t(!1)):e.isConditionalMediationAvailable()}function h4({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new pr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(RC(r)){if(n.rpId!==r)return new pr({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new pr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return e}async function Px(e,t=!1){var n,r;if(!PC())throw new Error("WebAuthn is not supported in this browser");let s;((n=e.allowCredentials)==null?void 0:n.length)!==0&&(s=(r=e.allowCredentials)==null?void 0:r.map(AC));const i={...e,challenge:x0(e.challenge),allowCredentials:s},l={};if(t){if(!await f4())throw Error("Browser does not support WebAuthn autofill");if(document.querySelectorAll("input[autocomplete$='webauthn']").length<1)throw Error('No <input> with "webauthn" as the only or last value in its `autocomplete` attribute was detected');l.mediation="conditional",i.allowCredentials=[]}l.publicKey=i,l.signal=IC.createNewAbortSignal();let u;try{u=await navigator.credentials.get(l)}catch(y){throw h4({error:y,options:l})}if(!u)throw new Error("Authentication was not completed");const{id:d,rawId:f,response:h,type:m}=u;let g;return h.userHandle&&(g=d4(h.userHandle)),{id:d,rawId:ta(f),response:{authenticatorData:ta(h.authenticatorData),clientDataJSON:ta(h.clientDataJSON),signature:ta(h.signature),userHandle:g},type:m,clientExtensionResults:u.getClientExtensionResults(),authenticatorAttachment:OC(u.authenticatorAttachment)}}const Ip=typeof window<"u",xm=new Map,m4=e=>{var t;return Ip&&typeof localStorage<"u"?localStorage.getItem(e):(t=xm.get(e))!=null?t:null},p4=(e,t)=>{Ip&&typeof localStorage<"u"?t?localStorage.setItem(e,t):localStorage.removeItem(e):t?xm.set(e,t):xm.has(e)&&xm.delete(e)},g4=(e,t)=>{if(e==="localStorage"||e==="web")return m4;if(e==="cookie")return n=>{var r;return Ip&&(r=Tx.get(n))!=null?r:null};if(!t)throw Error(`clientStorageType is set to '${e}' but no clientStorage has been given`);if(e==="react-native")return n=>{var r;return(r=t.getItem)==null?void 0:r.call(t,n)};if(e==="capacitor")return n=>{var r;return(r=t.get)==null?void 0:r.call(t,{key:n})};if(e==="expo-secure-storage")return n=>{var r;return(r=t.getItemAsync)==null?void 0:r.call(t,n)};if(e==="custom"){if(t.getItem&&t.removeItem)return t.getItem;if(t.getItemAsync)return t.getItemAsync;throw Error(`clientStorageType is set to 'custom' but clientStorage is missing either "getItem" and "removeItem" properties or "getItemAsync" property`)}throw Error(`Unknown storage type: ${e}`)},y4=(e,t)=>{if(e==="localStorage"||e==="web")return p4;if(e==="cookie")return(n,r)=>{Ip&&(r?Tx.set(n,r,{expires:30,sameSite:"lax",httpOnly:!1}):Tx.remove(n))};if(!t)throw Error(`clientStorageType is set to '${e}' but no clienStorage has been given`);if(e==="react-native")return(n,r)=>{var s,i;return r?(s=t.setItem)==null?void 0:s.call(t,n,r):(i=t.removeItem)==null?void 0:i.call(t,n)};if(e==="capacitor")return(n,r)=>{var s,i;return r?(s=t.set)==null?void 0:s.call(t,{key:n,value:r}):(i=t.remove)==null?void 0:i.call(t,{key:n})};if(e==="expo-secure-storage")return async(n,r)=>{var s,i;return r?(s=t.setItemAsync)==null?void 0:s.call(t,n,r):(i=t.deleteItemAsync)==null?void 0:i.call(t,n)};if(e==="custom"){if(!t.removeItem)throw Error("clientStorageType is set to 'custom' but clientStorage is missing a removeItem property");if(t.setItem)return(n,r)=>{var s,i;return r?(s=t.setItem)==null?void 0:s.call(t,n,r):(i=t.removeItem)==null?void 0:i.call(t,n)};if(t.setItemAsync)return async(n,r)=>{var s,i;return r?(s=t.setItemAsync)==null?void 0:s.call(t,n,r):(i=t.removeItem)==null?void 0:i.call(t,n)};throw Error("clientStorageType is set to 'custom' but clientStorage is missing setItem or setItemAsync property")}throw Error(`Unknown storage type: ${e}`)},zh=e=>!e||!e.accessToken.value||!e.accessToken.expiresAt||!e.user?null:{accessToken:e.accessToken.value,accessTokenExpiresIn:(e.accessToken.expiresAt.getTime()-Date.now())/1e3,refreshToken:e.refreshToken.value,user:e.user},$s=({accessToken:e,refreshToken:t,isError:n,user:r,error:s})=>n?{session:null,error:s}:r&&e?{session:{accessToken:e,accessTokenExpiresIn:0,refreshToken:t,user:r},error:null}:{session:null,error:null},_E=()=>typeof window<"u"&&typeof window.location<"u";let MC=globalThis.fetch;typeof EdgeRuntime!="string"&&(MC=X$().fetch);const v4=async(e,t,{token:n,body:r,extraHeaders:s}={})=>{const i={"Content-Type":"application/json",Accept:"*/*"};n&&(i.Authorization=`Bearer ${n}`);const l={...i,...s},u={method:t,headers:l};r&&(u.body=JSON.stringify(r));try{const d=await MC(e,u);if(!d.ok){const f=await d.json();return Promise.reject({error:f})}try{return{data:await d.json(),error:null}}catch{return console.warn(`Unexpected response: can't parse the response of the server at ${e}`),{data:"OK",error:null}}}catch{const d={message:"Network Error",status:TC,error:"network"};return Promise.reject({error:d})}},Zs=async(e,t,n,r)=>v4(e,"POST",{token:n,body:t,extraHeaders:r}),Ax=(e,t)=>{const n=t&&Object.entries(t).map(([r,s])=>{const i=Array.isArray(s)?s.join(","):typeof s=="object"?JSON.stringify(s):s;return`${r}=${encodeURIComponent(i)}`}).join("&");return n?`${e}?${n}`:e},Ss=(e,t)=>{if(!(t!=null&&t.redirectTo))return t;const{redirectTo:n,...r}=t;if(!e)return n.startsWith("/")?r:t;const s=new URL(e),i=Object.fromEntries(new URLSearchParams(s.search)),l=new URL(n.startsWith("/")?s.origin+n:n),u=new URLSearchParams(l.search);let d=Object.fromEntries(u);n.startsWith("/")&&(d={...i,...d});let f=s.pathname;return l.pathname.length>1&&(f+=l.pathname.slice(1)),{...r,redirectTo:Ax(l.origin+f,d)}};function Uh(e,t){var n;if(!t){if(typeof window>"u")return;t=((n=window.location)==null?void 0:n.href)||""}e=e.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+e+"(=([^&#]*)|&|#|$)"),s=r.exec(t);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}function SE(e){var t;if(typeof window>"u")return;const n=window==null?void 0:window.location;if(n&&n){const r=new URLSearchParams(n.search),s=new URLSearchParams((t=n.hash)==null?void 0:t.slice(1));r.delete(e),s.delete(e);let i=window.location.pathname;Array.from(r).length&&(i+=`?${r.toString()}`),Array.from(s).length&&(i+=`#${s.toString()}`),window.history.pushState({},"",i)}}const hi=e=>!!e&&typeof e=="string"&&!!String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),Rx=e=>!!e&&typeof e=="string"&&e.length>=J$,jE=e=>!!e&&typeof e=="string",x4=e=>e&&typeof e=="string"&&e.match(/^mfaTotp:[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),w4=({backendUrl:e,clientUrl:t,broadcastKey:n,clientStorageType:r="web",clientStorage:s,refreshIntervalTime:i,autoRefreshToken:l=!0,autoSignIn:u=!0})=>{const d=g4(r,s),f=y4(r,s),h=async(g,y,w,b)=>(await Zs(`${e}${g}`,y,w,b)).data;let m=null;if(typeof window<"u"&&n)try{m=new BroadcastChannel(n)}catch{}return cf({schema:{context:{},events:{},services:{}},tsTypes:{},context:ev,predictableActionArguments:!0,id:"nhost",type:"parallel",states:{authentication:{initial:"starting",on:{SESSION_UPDATE:[{cond:"hasSession",actions:["saveSession","resetTimer","reportTokenChanged"],target:".signedIn"}]},states:{starting:{tags:["loading"],always:{cond:"isSignedIn",target:"signedIn"},invoke:{id:"importRefreshToken",src:"importRefreshToken",onDone:[{cond:"hasSession",actions:["saveSession","reportTokenChanged"],target:"signedIn"},{target:"signedOut"}],onError:[{cond:"shouldRetryImportToken",actions:"incrementTokenImportAttempts",target:"retryTokenImport"},{actions:["saveAuthenticationError"],target:"signedOut"}]}},retryTokenImport:{tags:["loading"],after:{RETRY_IMPORT_TOKEN_DELAY:"starting"}},signedOut:{initial:"noErrors",entry:"reportSignedOut",states:{noErrors:{},success:{},needsSmsOtp:{},needsMfa:{},failed:{},signingOut:{entry:["clearContextExceptTokens"],exit:["destroyAccessToken","destroyRefreshToken","reportTokenChanged"],invoke:{src:"signout",id:"signingOut",onDone:{target:"success"},onError:{target:"failed",actions:["saveAuthenticationError"]}}}},on:{SIGNIN_PASSWORD:"authenticating.password",SIGNIN_ANONYMOUS:"authenticating.anonymous",SIGNIN_SECURITY_KEY_EMAIL:"authenticating.securityKeyEmail",SIGNIN_SECURITY_KEY:"authenticating.securityKey",SIGNIN_MFA_TOTP:"authenticating.mfa.totp",SIGNIN_PAT:"authenticating.pat",SIGNIN_ID_TOKEN:"authenticating.idToken"}},authenticating:{entry:"resetErrors",states:{password:{invoke:{src:"signInPassword",id:"authenticateUserWithPassword",onDone:[{cond:"hasMfaTicket",actions:["saveMfaTicket"],target:"#nhost.authentication.signedOut.needsMfa"},{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"}],onError:[{cond:"unverified",target:["#nhost.authentication.signedOut","#nhost.registration.incomplete.needsEmailVerification"]},{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}]}},pat:{invoke:{src:"signInPAT",id:"authenticateWithPAT",onDone:{actions:["savePATSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}}},idToken:{invoke:{src:"signInIdToken",id:"authenticateWithIdToken",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}}},anonymous:{invoke:{src:"signInAnonymous",id:"authenticateAnonymously",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}}},mfa:{states:{totp:{invoke:{src:"signInMfaTotp",id:"signInMfaTotp",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:["saveAuthenticationError"],target:"#nhost.authentication.signedOut.failed"}}}}},securityKeyEmail:{invoke:{src:"signInSecurityKeyEmail",id:"authenticateUserWithSecurityKey",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:[{cond:"unverified",target:["#nhost.authentication.signedOut","#nhost.registration.incomplete.needsEmailVerification"]},{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}]}},securityKey:{invoke:{src:"signInSecurityKey",id:"authenticateUserWithSecurityKey",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:[{cond:"unverified",target:["#nhost.authentication.signedOut","#nhost.registration.incomplete.needsEmailVerification"]},{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}]}}}},signedIn:{type:"parallel",entry:["reportSignedIn","cleanUrl","broadcastToken","resetErrors"],on:{SIGNOUT:"signedOut.signingOut"},states:{refreshTimer:{id:"timer",initial:"idle",states:{disabled:{type:"final"},stopped:{always:{cond:"noToken",target:"idle"}},idle:{always:[{cond:"isAutoRefreshDisabled",target:"disabled"},{cond:"isRefreshTokenPAT",target:"disabled"},{cond:"hasRefreshToken",target:"running"}]},running:{initial:"pending",entry:"resetTimer",states:{pending:{after:{1e3:{internal:!1,target:"pending"}},always:{cond:"refreshTimerShouldRefresh",target:"refreshing"}},refreshing:{invoke:{src:"refreshToken",id:"refreshToken",onDone:{actions:["saveSession","resetTimer","reportTokenChanged","broadcastToken"],target:"pending"},onError:[{cond:"isUnauthorizedError",target:"#nhost.authentication.signedOut"},{actions:"saveRefreshAttempt",target:"pending"}]}}}}}}}}}},token:{initial:"idle",states:{idle:{on:{TRY_TOKEN:"running"},initial:"noErrors",states:{noErrors:{},error:{}}},running:{invoke:{src:"refreshToken",id:"authenticateWithToken",onDone:{actions:["saveSession","reportTokenChanged","broadcastToken"],target:["#nhost.authentication.signedIn","idle.noErrors"]},onError:[{cond:"isSignedIn",target:"idle.error"},{actions:"saveAuthenticationError",target:["#nhost.authentication.signedOut.failed","idle.error"]}]}}}},registration:{initial:"incomplete",on:{SIGNED_IN:[{cond:"isAnonymous",target:".incomplete"},".complete"]},states:{incomplete:{on:{SIGNUP_EMAIL_PASSWORD:"emailPassword",SIGNUP_SECURITY_KEY:"securityKey",PASSWORDLESS_EMAIL:"passwordlessEmail",PASSWORDLESS_SMS:"passwordlessSms",PASSWORDLESS_SMS_OTP:"passwordlessSmsOtp",SIGNIN_EMAIL_OTP:"signInEmailOTP",VERIFY_EMAIL_OTP:"verifyEmailOTP"},initial:"noErrors",states:{noErrors:{},needsEmailVerification:{},needsOtp:{},failed:{}}},emailPassword:{entry:["resetErrors"],invoke:{src:"signUpEmailPassword",id:"signUpEmailPassword",onDone:[{cond:"hasSession",actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]}],onError:[{cond:"unverified",target:"incomplete.needsEmailVerification"},{actions:"saveRegistrationError",target:"incomplete.failed"}]}},securityKey:{entry:["resetErrors"],invoke:{src:"signUpSecurityKey",id:"signUpSecurityKey",onDone:[{cond:"hasSession",actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]}],onError:[{cond:"unverified",target:"incomplete.needsEmailVerification"},{actions:"saveRegistrationError",target:"incomplete.failed"}]}},passwordlessEmail:{entry:["resetErrors"],invoke:{src:"passwordlessEmail",id:"passwordlessEmail",onDone:{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},passwordlessSms:{entry:["resetErrors"],invoke:{src:"passwordlessSms",id:"passwordlessSms",onDone:{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsOtp"]},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},passwordlessSmsOtp:{entry:["resetErrors"],invoke:{src:"passwordlessSmsOtp",id:"passwordlessSmsOtp",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},signInEmailOTP:{entry:["resetErrors"],invoke:{src:"signInEmailOTP",id:"signInEmailOTP",onDone:{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsOtp"]},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},verifyEmailOTP:{entry:["resetErrors"],invoke:{src:"verifyEmailOTP",id:"verifyEmailOTP",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},complete:{on:{SIGNED_OUT:"incomplete"}}}}}},{actions:{reportSignedIn:Js("SIGNED_IN"),reportSignedOut:Js("SIGNED_OUT"),reportTokenChanged:Js("TOKEN_CHANGED"),incrementTokenImportAttempts:kn({importTokenAttempts:({importTokenAttempts:g})=>g+1}),clearContext:kn(()=>(f(Wl,null),f(Wu,null),f(Vh,null),{...ev})),clearContextExceptTokens:kn(({accessToken:g,refreshToken:y})=>({...ev,accessToken:g,refreshToken:y})),saveSession:kn({user:(g,{data:y})=>{var w;return((w=y==null?void 0:y.session)==null?void 0:w.user)||null},accessToken:(g,{data:y})=>{if(y.session){const{accessTokenExpiresIn:w,accessToken:b}=y.session,S=new Date(Date.now()+w*1e3);return f(Wl,S.toISOString()),{value:b,expiresAt:S,expiresInSeconds:w}}return f(Wl,null),{value:null,expiresAt:null,expiresInSeconds:null}},refreshToken:(g,{data:y})=>{var w,b;const S=((w=y.session)==null?void 0:w.refreshToken)||null,_=((b=y.session)==null?void 0:b.refreshTokenId)||null;return S&&f(Wu,S),_&&f(Vh,_),{value:S}}}),savePATSession:kn({user:(g,{data:y})=>{var w;return((w=y==null?void 0:y.session)==null?void 0:w.user)||null},accessToken:(g,{data:y})=>{if(y.session){const{accessTokenExpiresIn:w,accessToken:b}=y.session,S=new Date(Date.now()+w*1e3);return f(Wl,S.toISOString()),{value:b,expiresAt:S,expiresInSeconds:w}}return f(Wl,null),{value:null,expiresAt:null,expiresInSeconds:null}},refreshToken:(g,{data:y})=>{var w,b;const S=((w=y.session)==null?void 0:w.refreshToken)||null,_=((b=y.session)==null?void 0:b.refreshTokenId)||null;return S&&f(Wu,S),_&&f(Vh,_),{value:S,isPAT:!0}}}),saveMfaTicket:kn({mfa:(g,y)=>{var w;return(w=y.data)==null?void 0:w.mfa}}),resetTimer:kn({refreshTimer:g=>({startedAt:new Date,attempts:0,lastAttempt:null})}),saveRefreshAttempt:kn({refreshTimer:(g,y)=>({startedAt:g.refreshTimer.startedAt,attempts:g.refreshTimer.attempts+1,lastAttempt:new Date})}),saveAuthenticationError:kn({errors:({errors:g},{data:{error:y}})=>({...g,authentication:y})}),resetErrors:kn({errors:g=>({}),importTokenAttempts:g=>0}),saveRegistrationError:kn({errors:({errors:g},{data:{error:y}})=>({...g,registration:y})}),destroyRefreshToken:kn({refreshToken:g=>(f(Wu,null),f(Vh,null),{value:null})}),destroyAccessToken:kn({accessToken:g=>(f(Wl,null),{value:null,expiresAt:null,expiresInSeconds:null})}),cleanUrl:()=>{u&&Uh("refreshToken")&&(SE("refreshToken"),SE("type"))},broadcastToken:g=>{if(u&&n&&m)try{m.postMessage({type:"broadcast_session",payload:{token:g.refreshToken.value,accessToken:g.accessToken.value,user:g.user,expiresAt:g.accessToken.expiresAt?g.accessToken.expiresAt.toISOString():null,expiresInSeconds:g.accessToken.expiresInSeconds}})}catch{}}},guards:{isAnonymous:(g,y)=>{var w;return!!((w=g.user)!=null&&w.isAnonymous)},isSignedIn:g=>!!g.user&&!!g.accessToken.value,noToken:g=>!g.refreshToken.value,isRefreshTokenPAT:g=>{var y;return!!((y=g.refreshToken)!=null&&y.isPAT)},hasRefreshToken:g=>!!g.refreshToken.value,isAutoRefreshDisabled:()=>!l,refreshTimerShouldRefresh:g=>{const{expiresAt:y}=g.accessToken;if(!y)return!1;if(g.refreshTimer.lastAttempt)return g.refreshTimer.attempts>wE?!1:Date.now()-g.refreshTimer.lastAttempt.getTime()>Math.pow(2,g.refreshTimer.attempts-1)*5e3;if(y.getTime()<Date.now()||i&&Date.now()-g.refreshTimer.startedAt.getTime()>i*1e3)return!0;if(!g.accessToken.expiresInSeconds)return!1;const w=y.getTime()-Date.now();return w<=xE*1e3/2||w<=xE*1e3&&Math.random()<.1},shouldRetryImportToken:(g,y)=>g.importTokenAttempts<wE&&(y.data.error.status===TC||y.data.error.status>=500),unverified:(g,{data:{error:y}})=>y.status===401&&(y.message==="Email is not verified"||y.error==="unverified-user"),hasSession:(g,y)=>{var w;return!!((w=y.data)!=null&&w.session)},hasMfaTicket:(g,y)=>{var w;return!!((w=y.data)!=null&&w.mfa)},isUnauthorizedError:(g,{data:{error:y}})=>y.status===401},services:{signInPassword:(g,{email:y,password:w})=>hi(y)?Rx(w)?h("/signin/email-password",{email:y,password:w}):Promise.reject({error:Cx}):Promise.reject({error:fi}),signInPAT:(g,{pat:y})=>h("/signin/pat",{personalAccessToken:y}),signInIdToken:(g,{provider:y,idToken:w,nonce:b})=>h("/signin/idtoken",{provider:y,idToken:w,...b&&{nonce:b}}),passwordlessSms:(g,{phoneNumber:y,options:w})=>{var b;return jE(y)?(b=g.user)!=null&&b.isAnonymous?(console.warn("Deanonymisation from a phone number is not yet implemented in hasura-auth"),h("/user/deanonymize",{signInMethod:"passwordless",connection:"sms",phoneNumber:y,options:Ss(t,w)},g.accessToken.value)):h("/signin/passwordless/sms",{phoneNumber:y,options:Ss(t,w)}):Promise.reject({error:bE})},passwordlessSmsOtp:(g,{phoneNumber:y,otp:w})=>jE(y)?h("/signin/passwordless/sms/otp",{phoneNumber:y,otp:w}):Promise.reject({error:bE}),signInEmailOTP:(g,{email:y,options:w})=>hi(y)?h("/signin/otp/email",{email:y,options:Ss(t,w)}):Promise.reject({error:fi}),verifyEmailOTP:(g,{email:y,otp:w})=>hi(y)?h("/signin/otp/email/verify",{email:y,otp:w}):Promise.reject({error:fi}),passwordlessEmail:(g,{email:y,options:w})=>{var b;return hi(y)?(b=g.user)!=null&&b.isAnonymous?h("/user/deanonymize",{signInMethod:"passwordless",connection:"email",email:y,options:Ss(t,w)},g.accessToken.value):h("/signin/passwordless/email",{email:y,options:Ss(t,w)}):Promise.reject({error:fi})},signInAnonymous:g=>h("/signin/anonymous"),signInMfaTotp:(g,y)=>{var w;const b=y.ticket||((w=g.mfa)==null?void 0:w.ticket);return b?x4(b)?h("/signin/mfa/totp",{ticket:b,otp:y.otp}):Promise.reject({error:Z$}):Promise.reject({error:e4})},signInSecurityKeyEmail:async(g,{email:y})=>{if(!hi(y))throw new tc(fi);const w=await h("/signin/webauthn",{email:y});let b;try{b=await Px(w)}catch(S){throw new tc(S)}return h("/signin/webauthn/verify",{email:y,credential:b})},refreshToken:async(g,y)=>{const w=y.type==="TRY_TOKEN"?y.token:g.refreshToken.value;return{session:await h("/token",{refreshToken:w}),error:null}},signInSecurityKey:async()=>{try{const g=await h("/signin/webauthn",{});let y;try{y=await Px(g)}catch(w){throw new tc(w)}return h("/signin/webauthn/verify",{credential:y})}catch(g){throw new tc(g)}},signout:async(g,y)=>{const w=await h("/signout",{refreshToken:g.refreshToken.value,all:!!y.all},y.all?g.accessToken.value:void 0);if(n&&m)try{m.postMessage({type:"signout"})}catch{}return w},signUpEmailPassword:async(g,{email:y,password:w,options:b,requestOptions:S})=>{var _;return hi(y)?Rx(w)?(_=g.user)!=null&&_.isAnonymous?h("/user/deanonymize",{signInMethod:"email-password",email:y,password:w,options:Ss(t,b)},g.accessToken.value,S==null?void 0:S.headers):h("/signup/email-password",{email:y,password:w,options:Ss(t,b)},null,S==null?void 0:S.headers):Promise.reject({error:Cx}):Promise.reject({error:fi})},signUpSecurityKey:async(g,{email:y,options:w,requestOptions:b})=>{if(!hi(y))return Promise.reject({error:fi});const S=w==null?void 0:w.nickname;S&&delete w.nickname;const _=await h("/signup/webauthn",{email:y,options:w},null,b==null?void 0:b.headers);let k;try{k=await DC(_)}catch(N){throw new tc(N)}return h("/signup/webauthn/verify",{credential:k,options:{redirectTo:w==null?void 0:w.redirectTo,nickname:S,displayName:w==null?void 0:w.displayName,...(w==null?void 0:w.metadata)&&{metadata:w==null?void 0:w.metadata}}})},importRefreshToken:async g=>{if(g.user&&g.refreshToken.value&&g.accessToken.value&&g.accessToken.expiresAt)return{session:{accessToken:g.accessToken.value,accessTokenExpiresIn:g.accessToken.expiresAt.getTime()-Date.now(),refreshToken:g.refreshToken.value,user:g.user},error:null};let y=null;if(u){const b=Uh("refreshToken")||null;if(b)try{return{session:await h("/token",{refreshToken:b}),error:null}}catch(S){y=S.error}else{const S=Uh("error"),_=Uh("errorDescription");if(S&&_!=="social user already exists")return Promise.reject({session:null,error:{status:mo,error:S,message:_||S}})}}const w=await d(Wu);if(w)try{return{session:await h("/token",{refreshToken:w}),error:null}}catch(b){y=b.error}return y?Promise.reject({error:y,session:null}):{error:null,session:null}}},delays:{RETRY_IMPORT_TOKEN_DELAY:({importTokenAttempts:g})=>Math.pow(2,g-1)*5e3}})},b4=({backendUrl:e,clientUrl:t,interpreter:n})=>cf({schema:{context:{},events:{},services:{}},tsTypes:{},predictableActionArguments:!0,id:"changeEmail",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:kn({error:r=>fi}),saveRequestError:kn({error:(r,{data:{error:s}})=>s}),reportError:Js(r=>({type:"ERROR",error:r.error})),reportSuccess:Js("SUCCESS")},guards:{invalidEmail:(r,{email:s})=>!hi(s)},services:{requestChange:async(r,{email:s,options:i})=>(await Zs(`${e}/user/email/change`,{newEmail:s,options:Ss(t,i)},n==null?void 0:n.getSnapshot().context.accessToken.value)).data}}),_4=({backendUrl:e,interpreter:t})=>cf({schema:{context:{},events:{},services:{}},tsTypes:{},predictableActionArguments:!0,id:"changePassword",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidPassword",actions:"saveInvalidPasswordError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidPasswordError:kn({error:n=>Cx}),saveRequestError:kn({error:(n,{data:{error:r}})=>r}),reportError:Js(n=>({type:"ERROR",error:n.error})),reportSuccess:Js("SUCCESS")},guards:{invalidPassword:(n,{password:r})=>!Rx(r)},services:{requestChange:(n,{password:r,ticket:s})=>Zs(`${e}/user/password`,{newPassword:r,ticket:s},t==null?void 0:t.getSnapshot().context.accessToken.value)}}),S4=({backendUrl:e,clientUrl:t})=>cf({schema:{context:{},events:{},services:{}},tsTypes:{},predictableActionArguments:!0,id:"changePassword",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:kn({error:n=>fi}),saveRequestError:kn({error:(n,{data:{error:r}})=>r}),reportError:Js(n=>({type:"ERROR",error:n.error})),reportSuccess:Js("SUCCESS")},guards:{invalidEmail:(n,{email:r})=>!hi(r)},services:{requestChange:(n,{email:r,options:s})=>Zs(`${e}/user/password/reset`,{email:r,options:Ss(t,s)})}}),j4=({backendUrl:e,clientUrl:t})=>cf({schema:{context:{},events:{},services:{}},tsTypes:{},predictableActionArguments:!0,id:"sendVerificationEmail",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"request",id:"request",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:kn({error:n=>fi}),saveRequestError:kn({error:(n,{data:{error:r}})=>r}),reportError:Js(n=>({type:"ERROR",error:n.error})),reportSuccess:Js("SUCCESS")},guards:{invalidEmail:(n,{email:r})=>!hi(r)},services:{request:async(n,{email:r,options:s})=>(await Zs(`${e}/user/email/send-verification-email`,{email:r,options:Ss(t,s)})).data}});let E4=class{constructor({clientStorageType:t="web",autoSignIn:n=!0,autoRefreshToken:r=!0,start:s=!0,backendUrl:i,clientUrl:l,broadcastKey:u,devTools:d,...f}){var h;if(this._started=!1,this._subscriptionsQueue=new Set,this._subscriptions=new Set,this.backendUrl=i,this.clientUrl=l,this._machine=w4({...f,backendUrl:i,clientUrl:l,broadcastKey:u,clientStorageType:t,autoSignIn:n,autoRefreshToken:r}),s&&this.start({devTools:d}),typeof window<"u"&&u)try{this._channel=new BroadcastChannel(u),n&&((h=this._channel)==null||h.addEventListener("message",m=>{var g;const{type:y,payload:w}=m.data;if(y==="broadcast_session"){const b=(g=this.interpreter)==null?void 0:g.getSnapshot().context,S=b==null?void 0:b.refreshToken.value;this.interpreter&&w.token&&w.token!==S&&this.interpreter.send("SESSION_UPDATE",{data:{session:{user:w.user,accessToken:w.accessToken,refreshToken:w.token,accessTokenExpiresIn:w.expiresInSeconds}}})}})),this._channel.addEventListener("message",m=>{const{type:g}=m.data;g==="signout"&&this.interpreter&&this.interpreter.send("SIGNOUT")})}catch{}}start({devTools:t=!1,initialSession:n,interpreter:r}={}){var s,i;const l={...this.machine.context,accessToken:{...this.machine.context.accessToken},refreshToken:{...this.machine.context.refreshToken}};n&&(l.user=n.user,l.refreshToken.value=(s=n.refreshToken)!=null?s:null,l.accessToken.value=(i=n.accessToken)!=null?i:null,l.accessToken.expiresAt=new Date(Date.now()+n.accessTokenExpiresIn*1e3));const u=this.machine.withContext(l);this._interpreter||(this._interpreter=r||$o(u,{devTools:t})),(!this._started||typeof window>"u")&&(this._interpreter.initialized&&(this._interpreter.stop(),this._subscriptions.forEach(d=>d())),this._interpreter.start(u.initialState),this._subscriptionsQueue.forEach(d=>d(this))),this._started=!0}get machine(){return this._machine}get interpreter(){return this._interpreter}get started(){return this._started}subscribe(t){if(this.started){const n=t(this);return this._subscriptions.add(n),n}else return this._subscriptionsQueue.add(t),()=>{console.log("onTokenChanged was added before the interpreter started. Cannot unsubscribe listener.")}}};const k4=async({backendUrl:e,interpreter:t},n)=>{try{const{data:r}=await Zs(`${e}/user/webauthn/add`,{},t==null?void 0:t.getSnapshot().context.accessToken.value);let s;try{s=await DC(r)}catch(l){throw new tc(l)}const{data:i}=await Zs(`${e}/user/webauthn/verify`,{credential:s,nickname:n},t==null?void 0:t.getSnapshot().context.accessToken.value);return{key:i,isError:!1,error:null,isSuccess:!0}}catch(r){const{error:s}=r;return{isError:!0,error:s,isSuccess:!1}}},N4=async(e,t,n)=>new Promise(r=>{e.send("REQUEST",{email:t,options:n}),e.onTransition(s=>{s.matches({idle:"error"})?r({error:s.context.error,isError:!0,needsEmailVerification:!1}):s.matches({idle:"success"})&&r({error:null,isError:!1,needsEmailVerification:!0})})}),T4=async(e,t,n)=>new Promise(r=>{e.send("REQUEST",{password:t,ticket:n}),e.onTransition(s=>{s.matches({idle:"error"})?r({error:s.context.error,isError:!0,isSuccess:!1}):s.matches({idle:"success"})&&r({error:null,isError:!1,isSuccess:!0})})}),C4=async(e,t,n)=>new Promise(r=>{e.send("REQUEST",{email:t,options:n}),e.onTransition(s=>{s.matches({idle:"error"})?r({error:s.context.error,isError:!0,isSent:!1}):s.matches({idle:"success"})&&r({error:null,isError:!1,isSent:!0})})}),P4=(e,t,n)=>new Promise(r=>{e.send("REQUEST",{email:t,options:n}),e.onTransition(s=>{s.matches({idle:"error"})?r({error:s.context.error,isError:!0,isSent:!1}):s.matches({idle:"success"})&&r({error:null,isError:!1,isSent:!0})})}),A4=e=>new Promise(t=>{const{changed:n}=e.send("SIGNIN_ANONYMOUS");n||t({isSuccess:!1,isError:!0,error:Yr,user:null,accessToken:null,refreshToken:null}),e.onTransition(r=>{r.matches({authentication:"signedIn"})&&t({isSuccess:!0,isError:!1,error:null,user:r.context.user,accessToken:r.context.accessToken.value,refreshToken:r.context.refreshToken.value}),r.matches({authentication:{signedOut:"failed"}})&&t({isSuccess:!1,isError:!0,error:r.context.errors.authentication||null,user:null,accessToken:null,refreshToken:null})})}),R4=(e,t,n)=>new Promise(r=>{const{changed:s,context:i}=e.send("SIGNIN_PASSWORD",{email:t,password:n});if(!s)return r({accessToken:i.accessToken.value,refreshToken:i.refreshToken.value,error:Yr,isError:!0,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:i.user});e.onTransition(l=>{l.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?r({accessToken:null,refreshToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,needsMfaOtp:!1,mfa:null,user:null}):l.matches({authentication:{signedOut:"needsMfa"}})?r({accessToken:null,refreshToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!0,mfa:l.context.mfa,user:null}):l.matches({authentication:{signedOut:"failed"}})?r({accessToken:null,refreshToken:null,error:l.context.errors.authentication||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:null}):l.matches({authentication:"signedIn"})&&r({accessToken:l.context.accessToken.value,refreshToken:l.context.refreshToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:l.context.user})})}),EE=(e,t,n)=>new Promise(r=>{const{changed:s}=e.send("PASSWORDLESS_EMAIL",{email:t,options:n});if(!s)return r({error:Yr,isError:!0,isSuccess:!1});e.onTransition(i=>{i.matches("registration.incomplete.failed")?r({error:i.context.errors.registration||null,isError:!0,isSuccess:!1}):i.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})&&r({error:null,isError:!1,isSuccess:!0})})}),I4=(e,t)=>new Promise(n=>{const{changed:r,context:s}=e.send({type:"SIGNIN_SECURITY_KEY_EMAIL",email:t});if(!r)return n({accessToken:s.accessToken.value,refreshToken:s.refreshToken.value,error:Yr,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:s.user});e.onTransition(i=>{i.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?n({accessToken:null,refreshToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):i.matches({authentication:{signedOut:"failed"}})?n({accessToken:null,refreshToken:null,error:i.context.errors.authentication||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):i.matches({authentication:"signedIn"})&&n({accessToken:i.context.accessToken.value,refreshToken:i.context.refreshToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:i.context.user})})});function kE(e){return{error:e.message||"Something went wrong!",status:e.status||1,message:e.message||"Something went wrong!"}}const O4=async(e,t)=>{var n,r;const s=(n=e.interpreter)==null?void 0:n.getSnapshot(),i=s==null?void 0:s.context.accessToken.value;let l;try{l=(await Zs(`${e.backendUrl}/elevate/webauthn`,{email:t},i)).data}catch(d){return{error:kE(d),isError:!0,isSuccess:!1,elevated:!1}}let u;try{u=await Px(l)}catch(d){return{error:kE(d),isError:!0,isSuccess:!1,elevated:!1}}try{const{data:{session:d},error:f}=await Zs(`${e.backendUrl}/elevate/webauthn/verify`,{email:t,credential:u},i);return d&&!f?((r=e.interpreter)==null||r.send({type:"SESSION_UPDATE",data:{session:d}}),{error:null,isError:!1,isSuccess:!0,elevated:!0}):{error:f,isError:!0,isSuccess:!1,elevated:!1}}catch(d){const{error:f}=d;return{error:f,isError:!0,isSuccess:!1,elevated:!1}}},D4=(e,t,n)=>new Promise(r=>{const{changed:s,context:i}=e.send("SIGNIN_MFA_TOTP",{otp:t,ticket:n});if(!s)return r({accessToken:i.accessToken.value,refreshToken:i.refreshToken.value,error:Yr,isError:!0,isSuccess:!1,user:i.user});e.onTransition(l=>{l.matches({authentication:{signedOut:"failed"}})?r({accessToken:null,refreshToken:null,error:l.context.errors.authentication||null,isError:!0,isSuccess:!1,user:null}):l.matches({authentication:"signedIn"})&&r({accessToken:l.context.accessToken.value,refreshToken:l.context.refreshToken.value,error:null,isError:!1,isSuccess:!0,user:l.context.user})})}),M4=(e,t)=>new Promise(n=>{const{changed:r}=e.send("SIGNIN_PAT",{pat:t});r||n({isSuccess:!1,isError:!0,error:Yr,user:null,accessToken:null,refreshToken:null}),e.onTransition(s=>{if(s.matches({authentication:{signedOut:"failed"}}))return n({accessToken:null,refreshToken:null,user:null,error:s.context.errors.authentication||null,isError:!0,isSuccess:!1});if(s.matches({authentication:"signedIn"}))return n({accessToken:s.context.accessToken.value,refreshToken:s.context.refreshToken.value,user:s.context.user,error:null,isError:!1,isSuccess:!0})})}),NE=(e,t,n)=>new Promise(r=>{const{changed:s}=e.send("PASSWORDLESS_SMS",{phoneNumber:t,options:n});if(!s)return r({error:Yr,isError:!0,isSuccess:!1,needsOtp:!1});e.onTransition(i=>{i.matches("registration.incomplete.needsOtp")?r({error:null,isError:!1,isSuccess:!1,needsOtp:!0}):i.matches("registration.incomplete.failed")&&r({error:i.context.errors.authentication||null,isError:!0,isSuccess:!1,needsOtp:!1})})}),L4=(e,t,n)=>new Promise(r=>{const{changed:s}=e.send({type:"PASSWORDLESS_SMS_OTP",phoneNumber:t,otp:n});if(!s)return r({error:Yr,isError:!0,isSuccess:!1,user:null,accessToken:null,refreshToken:null});e.onTransition(i=>{i.matches({authentication:"signedIn"})?r({error:null,isError:!1,isSuccess:!0,user:i.context.user,accessToken:i.context.accessToken.value,refreshToken:i.context.refreshToken.value}):i.matches({registration:{incomplete:"failed"}})&&r({error:i.context.errors.authentication||null,isError:!0,isSuccess:!1,user:null,accessToken:null,refreshToken:null})})}),F4=async(e,t)=>new Promise(n=>{const{event:r}=e.send("SIGNOUT",{all:t});if(r.type!=="SIGNED_OUT")return n({isSuccess:!1,isError:!0,error:r4});e.onTransition(s=>{s.matches({authentication:{signedOut:"success"}})?n({isSuccess:!0,isError:!1,error:null}):s.matches("authentication.signedOut.failed")&&n({isSuccess:!1,isError:!0,error:s.context.errors.signout||null})})}),TE=(e,t,n,r,s)=>new Promise(i=>{const{changed:l,context:u}=e.send("SIGNUP_EMAIL_PASSWORD",{email:t,password:n,options:r,requestOptions:s});if(!l)return i({error:Yr,accessToken:u.accessToken.value,refreshToken:u.refreshToken.value,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:u.user});e.onTransition(d=>{d.matches("registration.incomplete.failed")?i({accessToken:null,refreshToken:null,error:d.context.errors.registration||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):d.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?i({accessToken:null,refreshToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):d.matches({authentication:"signedIn",registration:"complete"})&&i({accessToken:d.context.accessToken.value,refreshToken:d.context.refreshToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:d.context.user})})}),$4=(e,t,n,r)=>new Promise(s=>{const{changed:i,context:l}=e.send("SIGNUP_SECURITY_KEY",{email:t,options:n,requestOptions:r});if(!i)return s({error:Yr,accessToken:l.accessToken.value,refreshToken:l.refreshToken.value,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:l.user});e.onTransition(u=>{u.matches("registration.incomplete.failed")?s({accessToken:null,refreshToken:null,error:u.context.errors.registration||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):u.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?s({accessToken:null,refreshToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):u.matches({authentication:"signedIn",registration:"complete"})&&s({accessToken:u.context.accessToken.value,refreshToken:u.context.refreshToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:u.context.user})})}),V4=(e,t,n)=>new Promise(r=>{const{changed:s}=e.send("SIGNIN_EMAIL_OTP",{email:t,options:n});if(!s)return r({error:Yr,isError:!0,isSuccess:!1,needsOtp:!1});e.onTransition(i=>{i.matches("registration.incomplete.needsOtp")?r({error:null,isError:!1,isSuccess:!0,needsOtp:!0}):i.matches("registration.incomplete.failed")&&r({error:i.context.errors.authentication||null,isError:!0,isSuccess:!1,needsOtp:!1})})}),z4=(e,t,n)=>new Promise(r=>{const{changed:s}=e.send({type:"VERIFY_EMAIL_OTP",email:t,otp:n});if(!s)return r({error:Yr,isError:!0,isSuccess:!1,user:null,accessToken:null,refreshToken:null});e.onTransition(i=>{i.matches({authentication:"signedIn"})?r({error:null,isError:!1,isSuccess:!0,user:i.context.user,accessToken:i.context.accessToken.value,refreshToken:i.context.refreshToken.value}):i.matches({registration:{incomplete:"failed"}})&&r({error:i.context.errors.authentication||null,isError:!0,isSuccess:!1,user:null,accessToken:null,refreshToken:null})})}),U4=(e,{provider:t,idToken:n,nonce:r})=>new Promise(s=>{const{changed:i}=e.send("SIGNIN_ID_TOKEN",{provider:t,idToken:n,...r&&{nonce:r}});i||s({isSuccess:!1,isError:!0,error:Yr,user:null,accessToken:null,refreshToken:null}),e.onTransition(l=>{if(l.matches({authentication:{signedOut:"failed"}}))return s({accessToken:null,refreshToken:null,user:null,error:l.context.errors.authentication||null,isError:!0,isSuccess:!1});if(l.matches({authentication:"signedIn"}))return s({accessToken:l.context.accessToken.value,refreshToken:l.context.refreshToken.value,user:l.context.user,error:null,isError:!1,isSuccess:!0})})}),B4=async({backendUrl:e,interpreter:t},{provider:n,idToken:r,nonce:s})=>{try{return await Zs(`${e}/link/idtoken`,{provider:n,idToken:r,...s&&{nonce:s}},t==null?void 0:t.getSnapshot().context.accessToken.value),{isError:!1,error:null,isSuccess:!0}}catch(i){const{error:l}=i;return{isError:!0,error:l,isSuccess:!1}}},q4=e=>new Promise(t=>{const{changed:n,context:r}=e.send({type:"SIGNIN_SECURITY_KEY"});if(!n)return t({accessToken:r.accessToken.value,refreshToken:r.refreshToken.value,error:Yr,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:r.user});e.onTransition(s=>{s.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?t({accessToken:null,refreshToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):s.matches({authentication:{signedOut:"failed"}})?t({accessToken:null,refreshToken:null,error:s.context.errors.authentication||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):s.matches({authentication:"signedIn"})&&t({accessToken:s.context.accessToken.value,refreshToken:s.context.refreshToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:s.context.user})})}),W4=async({backendUrl:e,interpreter:t},{expiresAt:n,metadata:r})=>{try{const{data:s}=await Zs(`${e}/pat`,{expiresAt:n.toISOString(),metadata:r},t==null?void 0:t.getSnapshot().context.accessToken.value);return{data:s?{id:s.id||null,personalAccessToken:s.personalAccessToken||null}:null,isError:!1,error:null,isSuccess:!0}}catch(s){const{error:i}=s;return{isError:!0,error:i,isSuccess:!1,data:null}}};class H4{constructor({url:t,broadcastKey:n,autoRefreshToken:r=!0,autoSignIn:s=!0,clientStorage:i,clientStorageType:l,refreshIntervalTime:u,start:d=!0}){var f;this.url=t,this._client=new E4({backendUrl:t,clientUrl:typeof window<"u"&&((f=window.location)==null?void 0:f.origin)||"",broadcastKey:n,autoRefreshToken:r,autoSignIn:s,start:d,clientStorage:i,clientStorageType:l,refreshIntervalTime:u})}async signUp(t,n){const r=await this.waitUntilReady();if("securityKey"in t){const{email:u,options:d}=t;return $s(await $4(r,u,d,n))}const{email:s,password:i,options:l}=t;return $s(await TE(r,s,i,l,n))}async connectProvider(t){const n=(await this.waitUntilReady()).getSnapshot().context.accessToken.value,{provider:r,options:s}=t,i=Ax(`${this._client.backendUrl}/signin/provider/${r}`,Ss(this._client.clientUrl,{...s,connect:n}));return _E()&&(window.location.href=i),{providerUrl:i}}async signInIdToken(t){const n=await this.waitUntilReady(),r=await U4(n,t);return{...$s(r),mfa:null}}async linkIdToken(t){return B4(this._client,t)}async signIn(t){const n=await this.waitUntilReady();if(!t){const r=await A4(n);return{...$s(r),mfa:null}}if("provider"in t){const{provider:r,options:s}=t,i=Ax(`${this._client.backendUrl}/signin/provider/${r}`,Ss(this._client.clientUrl,s));return _E()&&(window.location.href=i),{providerUrl:i,provider:r,session:null,mfa:null,error:null}}if("email"in t&&"password"in t){const r=await R4(n,t.email,t.password);return r.needsEmailVerification?{session:null,mfa:null,error:s4}:r.needsMfaOtp?{session:null,mfa:r.mfa,error:null}:{...$s(r),mfa:null}}if("email"in t&&"securityKey"in t){if(t.securityKey!==!0)throw Error("securityKey must be true");const r=await I4(n,t.email);return{...$s(r),mfa:null}}if("email"in t){const{email:r,options:s}=t,{error:i}=await EE(n,r,s);return{session:null,mfa:null,error:i}}if("phoneNumber"in t&&"otp"in t){const r=await L4(n,t.phoneNumber,t.otp);return{...$s(r),mfa:null}}if("phoneNumber"in t){const{error:r}=await NE(n,t.phoneNumber,t.options);return{error:r,mfa:null,session:null}}if("otp"in t){const r=await D4(n,t.otp,t.ticket);return{...$s(r),mfa:null}}return{error:a4,mfa:null,session:null}}async signInPAT(t){const n=await this.waitUntilReady(),r=await M4(n,t);return $s(r)}async signInEmailOTP(t,n){const r=await this.waitUntilReady(),{error:s}=await V4(r,t,n);return{error:s,session:null,mfa:null}}async verifyEmailOTP(t,n){const r=await this.waitUntilReady(),s=await z4(r,t,n);return{...$s(s),mfa:null}}async signInSecurityKey(){const t=await this.waitUntilReady(),n=await q4(t);return{...$s(n),mfa:null}}async signOut(t){const n=await this.waitUntilReady(),{error:r}=await F4(n,t==null?void 0:t.all);return{error:r}}async resetPassword({email:t,options:n}){const r=$o(S4(this._client)).start(),{error:s}=await C4(r,t,n);return{error:s}}async changePassword({newPassword:t,ticket:n}){const r=$o(_4(this._client)).start(),{error:s}=await T4(r,t,n);return{error:s}}async sendVerificationEmail({email:t,options:n}){const r=$o(j4(this._client)).start(),{error:s}=await P4(r,t,n);return{error:s}}async changeEmail({newEmail:t,options:n}){const r=$o(b4(this._client)).start(),{error:s}=await N4(r,t,n);return{error:s}}async deanonymize(t){const n=await this.waitUntilReady();if(t.signInMethod==="passwordless"){if(t.connection==="email"){const{error:r}=await EE(n,t.email,t.options);return{error:r}}if(t.connection==="sms"){const{error:r}=await NE(n,t.phoneNumber,t.options);return{error:r}}}if(t.signInMethod==="email-password"){const{error:r}=await TE(n,t.email,t.password,t.options);return{error:r}}throw Error("Unknown deanonymization method")}async addSecurityKey(t){const{error:n,key:r}=await k4(this._client,t);return{error:n,key:r}}async elevateEmailSecurityKey(t){if(!t)throw Error("A user email is required");return{...await O4(this._client,t),mfa:null}}async createPAT(t,n){return W4(this._client,{expiresAt:t,metadata:n})}onTokenChanged(t){return this._client.subscribe(()=>{var n;const r=(n=this._client.interpreter)==null?void 0:n.onTransition(({event:s,context:i})=>{s.type==="TOKEN_CHANGED"&&t(zh(i))});return()=>r==null?void 0:r.stop()})}onAuthStateChanged(t){return this._client.subscribe(()=>{var n;const r=(n=this._client.interpreter)==null?void 0:n.onTransition(({event:s,context:i})=>{(s.type==="SIGNED_IN"||s.type==="SIGNED_OUT")&&t(s.type,zh(i))});return()=>r==null?void 0:r.stop()})}isAuthenticated(){var t;return!!((t=this._client.interpreter)!=null&&t.getSnapshot().matches({authentication:"signedIn"}))}async isAuthenticatedAsync(){return(await this.waitUntilReady()).getSnapshot().matches({authentication:"signedIn"})}getAuthenticationStatus(){var t;const n=((t=this.client.interpreter)==null?void 0:t.getSnapshot().context.importTokenAttempts)||0;return this.isReady()?{isAuthenticated:this.isAuthenticated(),isLoading:!1,connectionAttempts:n}:{isAuthenticated:!1,isLoading:!0,connectionAttempts:n}}getAccessToken(){var t,n;return(n=(t=this._client.interpreter)==null?void 0:t.getSnapshot().context.accessToken.value)!=null?n:void 0}getDecodedAccessToken(){const t=this.getAccessToken();return t?uC(t):null}getHasuraClaims(){var t;return((t=this.getDecodedAccessToken())==null?void 0:t["https://hasura.io/jwt/claims"])||null}getHasuraClaim(t){var n;return((n=this.getHasuraClaims())==null?void 0:n[t.startsWith("x-hasura-")?t:`x-hasura-${t}`])||null}async refreshSession(t){try{const n=await this.waitUntilReady();return new Promise(r=>{const s=t||n.getSnapshot().context.refreshToken.value;if(!s)return r({session:null,error:t4});const{changed:i}=n.send("TRY_TOKEN",{token:s});if(!i)return r({session:null,error:n4});n.onTransition(l=>{l.matches({token:{idle:"error"}})?r({session:null,error:i4}):l.event.type==="TOKEN_CHANGED"&&r({session:zh(l.context),error:null})})})}catch(n){return{session:null,error:n.message}}}getSession(){var t,n;return zh((n=(t=this._client.interpreter)==null?void 0:t.getSnapshot())==null?void 0:n.context)}async initWithSession({session:t}){this.client.start({initialSession:t}),await this.waitUntilReady()}getUser(){var t,n,r;return((r=(n=(t=this._client.interpreter)==null?void 0:t.getSnapshot())==null?void 0:n.context)==null?void 0:r.user)||null}waitUntilReady(){const t=this._client.interpreter;if(!t)throw Error("Auth interpreter not set");return t.getSnapshot().hasTag("loading")?new Promise((n,r)=>{let s=setTimeout(()=>r("The state machine is not yet ready after 15 seconds."),15e3);t.onTransition(i=>{if(!i.hasTag("loading"))return clearTimeout(s),n(t)})}):Promise.resolve(t)}isReady(){var t,n;return!((n=(t=this._client.interpreter)==null?void 0:t.getSnapshot())!=null&&n.hasTag("loading"))}get client(){return this._client}}var G4=Object.defineProperty,K4=(e,t,n)=>t in e?G4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sc=(e,t,n)=>K4(e,typeof t!="symbol"?t+"":t,n);const CE=async(e,t,{accessToken:n,name:r,fileId:s,bucketId:i,adminSecret:l,onUploadProgress:u,headers:d={}}={})=>{var f;const h={...d};if(i&&t.append("bucket-id",i),l&&(h["x-hasura-admin-secret"]=l),n&&(h.Authorization=`Bearer ${n}`),(r||s)&&!t.has("metadata[]")){const g={};r&&(g.name=r),s&&(g.id=s),t.append("metadata[]",new Blob([JSON.stringify(g)],{type:"application/json"}),"")}const m=`${e}/files`;if(typeof XMLHttpRequest>"u")try{const g=await fetch(m,{method:"POST",headers:h,body:t}),y=await g.json();return g.ok?{fileMetadata:y,error:null}:{error:{status:g.status,message:((f=y==null?void 0:y.error)==null?void 0:f.message)||g.statusText,error:g.statusText},fileMetadata:null}}catch(g){return{error:{status:0,message:g.message,error:g.message},fileMetadata:null}}return new Promise(g=>{let y=new XMLHttpRequest;y.responseType="json",y.onload=()=>{var w,b,S,_,k,N,T,P;if(y.status<200||y.status>=300){const R={error:(k=(_=(b=(w=y.response)==null?void 0:w.error)==null?void 0:b.message)!=null?_:(S=y.response)==null?void 0:S.error)!=null?k:y.response,message:(P=(T=(N=y.response)==null?void 0:N.error)==null?void 0:T.message)!=null?P:y.response,status:y.status};return g({fileMetadata:null,error:R})}return g({fileMetadata:y.response,error:null})},y.onerror=()=>{const w={error:y.statusText,message:y.statusText,status:y.status};return g({fileMetadata:null,error:w})},u&&y.upload.addEventListener("progress",u,!1),y.open("POST",m,!0),Object.entries(h).forEach(([w,b])=>{y.setRequestHeader(w,b)}),y.send(t)})};function Ix(e,t){if(!t||Object.keys(t).length===0)return e;const n=new URL(e),r=Object.entries(t).reduce((s,[i,l])=>({...s,[i.charAt(0)]:l}),{});return Object.entries(r).forEach(([s,i])=>{i&&n.searchParams.set(s,i)}),n.toString()}let Y4=class{constructor({url:t}){sc(this,"url"),sc(this,"accessToken"),sc(this,"adminSecret"),sc(this,"headers",{}),this.url=t}async uploadFormData({formData:t,bucketId:n,headers:r}){const{error:s,fileMetadata:i}=await CE(this.url,t,{bucketId:n,headers:{...this.headers,...r},accessToken:this.accessToken,adminSecret:this.adminSecret});return s?{fileMetadata:null,error:s}:i&&!("processedFiles"in i)?{fileMetadata:{processedFiles:[i]},error:null}:{fileMetadata:i,error:null}}async uploadFile({file:t,bucketId:n,id:r,name:s,headers:i}){const l=new FormData;l.append("file[]",t),l.append("metadata[]",new Blob([JSON.stringify({id:r,name:s})],{type:"application/json"}),"");const{error:u,fileMetadata:d}=await CE(this.url,l,{accessToken:this.accessToken,adminSecret:this.adminSecret,bucketId:n,headers:{...this.headers,...i}});return u?{fileMetadata:null,error:u}:d&&"processedFiles"in d?{fileMetadata:d.processedFiles[0],error:null}:{fileMetadata:d,error:null}}async downloadFile(t){try{const{fileId:n,headers:r,...s}=t,i=Ix(`${this.url}/files/${n}`,s),l=await fetch(i,{method:"GET",headers:{...this.generateAuthHeaders(),...this.headers,...r}});if(!l.ok)throw new Error(await l.text());return{file:await l.blob(),error:null}}catch(n){return{file:null,error:n}}}async getPresignedUrl(t){try{const{fileId:n,headers:r}=t,s=await fetch(`${this.url}/files/${n}/presignedurl`,{method:"GET",headers:{...this.generateAuthHeaders(),...this.headers,...r}});if(!s.ok)throw new Error(await s.text());return{presignedUrl:await s.json(),error:null}}catch(n){return{presignedUrl:null,error:n}}}async delete(t){try{const{fileId:n,headers:r}=t,s=await fetch(`${this.url}/files/${n}`,{method:"DELETE",headers:{...this.generateAuthHeaders(),...this.headers,...r}});if(!s.ok)throw new Error(await s.text());return{error:null}}catch(n){return{error:n}}}setAccessToken(t){return this.accessToken=t,this}setAdminSecret(t){return this.adminSecret=t,this}getHeaders(){return this.headers}setHeaders(t){return t?(this.headers={...this.headers,...t},this):this}unsetHeaders(){const t=this.headers["x-hasura-role"];return this.headers=t?{"x-hasura-role":t}:{},this}generateAuthHeaders(){if(!(!this.adminSecret&&!this.accessToken))return this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:{Authorization:`Bearer ${this.accessToken}`}}},Q4=class{constructor({url:t,adminSecret:n}){sc(this,"url"),sc(this,"api"),this.url=t,this.api=new Y4({url:t}),this.setAdminSecret(n)}async upload(t){return"file"in t?this.api.uploadFile(t):this.api.uploadFormData(t)}getPublicUrl(t){const{fileId:n,...r}=t;return Ix(`${this.url}/files/${n}`,r)}async getPresignedUrl(t){const{fileId:n,headers:r,...s}=t,{presignedUrl:i,error:l}=await this.api.getPresignedUrl(t);if(l)return{presignedUrl:null,error:l};if(!i)return{presignedUrl:null,error:new Error("Invalid file id")};const u=Ix(i.url,s);return{presignedUrl:{...i,url:u},error:null}}async download(t){const{file:n,error:r}=await this.api.downloadFile(t);return r?{file:null,error:r}:n?{file:n,error:null}:{file:null,error:new Error("File does not exist")}}async delete(t){const{error:n}=await this.api.delete(t);return n?{error:n}:{error:null}}setAccessToken(t){return this.api.setAccessToken(t),this}setAdminSecret(t){return this.api.setAdminSecret(t),this}getHeaders(){return this.api.getHeaders()}setHeaders(t){return this.api.setHeaders(t),this}unsetHeaders(){return this.api.unsetHeaders(),this}};function X4(e,t){return t=t||{},new Promise(function(n,r){var s=new XMLHttpRequest,i=[],l=[],u={},d=function(){return{ok:(s.status/100|0)==2,statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:d,headers:{keys:function(){return i},entries:function(){return l},get:function(h){return u[h.toLowerCase()]},has:function(h){return h.toLowerCase()in u}}}};for(var f in s.open(t.method||"get",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(h,m,g){i.push(m=m.toLowerCase()),l.push([m,g]),u[m]=u[m]?u[m]+","+g:g}),n(d())},s.onerror=r,s.withCredentials=t.credentials=="include",t.headers)s.setRequestHeader(f,t.headers[f]);s.send(t.body||null)})}const J4=Object.freeze(Object.defineProperty({__proto__:null,default:X4},Symbol.toStringTag,{value:"Module"})),PE=DF(J4);var nv,AE;function Z4(){return AE||(AE=1,nv=self.fetch||(self.fetch=PE.default||PE)),nv}var eV=Z4();const LC=ho(eV);function wm(e,t){if(!!!e)throw new Error(t)}function tV(e){return typeof e=="object"&&e!==null}function nV(e,t){if(!!!e)throw new Error("Unexpected invariant triggered.")}const rV=/\r\n|[\n\r]/g;function Ox(e,t){let n=0,r=1;for(const s of e.body.matchAll(rV)){if(typeof s.index=="number"||nV(!1),s.index>=t)break;n=s.index+s[0].length,r+=1}return{line:r,column:t+1-n}}function sV(e){return FC(e.source,Ox(e.source,e.start))}function FC(e,t){const n=e.locationOffset.column-1,r="".padStart(n)+e.body,s=t.line-1,i=e.locationOffset.line-1,l=t.line+i,u=t.line===1?n:0,d=t.column+u,f=`${e.name}:${l}:${d}
`,h=r.split(/\r\n|[\n\r]/g),m=h[s];if(m.length>120){const g=Math.floor(d/80),y=d%80,w=[];for(let b=0;b<m.length;b+=80)w.push(m.slice(b,b+80));return f+RE([[`${l} |`,w[0]],...w.slice(1,g+1).map(b=>["|",b]),["|","^".padStart(y)],["|",w[g+1]]])}return f+RE([[`${l-1} |`,h[s-1]],[`${l} |`,m],["|","^".padStart(d)],[`${l+1} |`,h[s+1]]])}function RE(e){const t=e.filter(([r,s])=>s!==void 0),n=Math.max(...t.map(([r])=>r.length));return t.map(([r,s])=>r.padStart(n)+(s?" "+s:"")).join(`
`)}function iV(e){const t=e[0];return t==null||"kind"in t||"length"in t?{nodes:t,source:e[1],positions:e[2],path:e[3],originalError:e[4],extensions:e[5]}:t}class w0 extends Error{constructor(t,...n){var r,s,i;const{nodes:l,source:u,positions:d,path:f,originalError:h,extensions:m}=iV(n);super(t),this.name="GraphQLError",this.path=f??void 0,this.originalError=h??void 0,this.nodes=IE(Array.isArray(l)?l:l?[l]:void 0);const g=IE((r=this.nodes)===null||r===void 0?void 0:r.map(w=>w.loc).filter(w=>w!=null));this.source=u??(g==null||(s=g[0])===null||s===void 0?void 0:s.source),this.positions=d??(g==null?void 0:g.map(w=>w.start)),this.locations=d&&u?d.map(w=>Ox(u,w)):g==null?void 0:g.map(w=>Ox(w.source,w.start));const y=tV(h==null?void 0:h.extensions)?h==null?void 0:h.extensions:void 0;this.extensions=(i=m??y)!==null&&i!==void 0?i:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),h!=null&&h.stack?Object.defineProperty(this,"stack",{value:h.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,w0):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let t=this.message;if(this.nodes)for(const n of this.nodes)n.loc&&(t+=`

`+sV(n.loc));else if(this.source&&this.locations)for(const n of this.locations)t+=`

`+FC(this.source,n);return t}toJSON(){const t={message:this.message};return this.locations!=null&&(t.locations=this.locations),this.path!=null&&(t.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(t.extensions=this.extensions),t}}function IE(e){return e===void 0||e.length===0?void 0:e}function Gn(e,t,n){return new w0(`Syntax Error: ${n}`,{source:e,positions:[t]})}class aV{constructor(t,n,r){this.start=t.start,this.end=n.end,this.startToken=t,this.endToken=n,this.source=r}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class $C{constructor(t,n,r,s,i,l){this.kind=t,this.start=n,this.end=r,this.line=s,this.column=i,this.value=l,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const VC={Name:[],Document:["definitions"],OperationDefinition:["description","name","variableDefinitions","directives","selectionSet"],VariableDefinition:["description","variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["description","name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"],TypeCoordinate:["name"],MemberCoordinate:["name","memberName"],ArgumentCoordinate:["name","fieldName","argumentName"],DirectiveCoordinate:["name"],DirectiveArgumentCoordinate:["name","argumentName"]},oV=new Set(Object.keys(VC));function OE(e){const t=e==null?void 0:e.kind;return typeof t=="string"&&oV.has(t)}var ic;(function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"})(ic||(ic={}));var Dx;(function(e){e.QUERY="QUERY",e.MUTATION="MUTATION",e.SUBSCRIPTION="SUBSCRIPTION",e.FIELD="FIELD",e.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",e.FRAGMENT_SPREAD="FRAGMENT_SPREAD",e.INLINE_FRAGMENT="INLINE_FRAGMENT",e.VARIABLE_DEFINITION="VARIABLE_DEFINITION",e.SCHEMA="SCHEMA",e.SCALAR="SCALAR",e.OBJECT="OBJECT",e.FIELD_DEFINITION="FIELD_DEFINITION",e.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",e.INTERFACE="INTERFACE",e.UNION="UNION",e.ENUM="ENUM",e.ENUM_VALUE="ENUM_VALUE",e.INPUT_OBJECT="INPUT_OBJECT",e.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(Dx||(Dx={}));var tt;(function(e){e.NAME="Name",e.DOCUMENT="Document",e.OPERATION_DEFINITION="OperationDefinition",e.VARIABLE_DEFINITION="VariableDefinition",e.SELECTION_SET="SelectionSet",e.FIELD="Field",e.ARGUMENT="Argument",e.FRAGMENT_SPREAD="FragmentSpread",e.INLINE_FRAGMENT="InlineFragment",e.FRAGMENT_DEFINITION="FragmentDefinition",e.VARIABLE="Variable",e.INT="IntValue",e.FLOAT="FloatValue",e.STRING="StringValue",e.BOOLEAN="BooleanValue",e.NULL="NullValue",e.ENUM="EnumValue",e.LIST="ListValue",e.OBJECT="ObjectValue",e.OBJECT_FIELD="ObjectField",e.DIRECTIVE="Directive",e.NAMED_TYPE="NamedType",e.LIST_TYPE="ListType",e.NON_NULL_TYPE="NonNullType",e.SCHEMA_DEFINITION="SchemaDefinition",e.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",e.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",e.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",e.FIELD_DEFINITION="FieldDefinition",e.INPUT_VALUE_DEFINITION="InputValueDefinition",e.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",e.UNION_TYPE_DEFINITION="UnionTypeDefinition",e.ENUM_TYPE_DEFINITION="EnumTypeDefinition",e.ENUM_VALUE_DEFINITION="EnumValueDefinition",e.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",e.DIRECTIVE_DEFINITION="DirectiveDefinition",e.SCHEMA_EXTENSION="SchemaExtension",e.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",e.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",e.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",e.UNION_TYPE_EXTENSION="UnionTypeExtension",e.ENUM_TYPE_EXTENSION="EnumTypeExtension",e.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension",e.TYPE_COORDINATE="TypeCoordinate",e.MEMBER_COORDINATE="MemberCoordinate",e.ARGUMENT_COORDINATE="ArgumentCoordinate",e.DIRECTIVE_COORDINATE="DirectiveCoordinate",e.DIRECTIVE_ARGUMENT_COORDINATE="DirectiveArgumentCoordinate"})(tt||(tt={}));function Mx(e){return e===9||e===32}function Od(e){return e>=48&&e<=57}function zC(e){return e>=97&&e<=122||e>=65&&e<=90}function UC(e){return zC(e)||e===95}function lV(e){return zC(e)||Od(e)||e===95}function cV(e){var t;let n=Number.MAX_SAFE_INTEGER,r=null,s=-1;for(let l=0;l<e.length;++l){var i;const u=e[l],d=uV(u);d!==u.length&&(r=(i=r)!==null&&i!==void 0?i:l,s=l,l!==0&&d<n&&(n=d))}return e.map((l,u)=>u===0?l:l.slice(n)).slice((t=r)!==null&&t!==void 0?t:0,s+1)}function uV(e){let t=0;for(;t<e.length&&Mx(e.charCodeAt(t));)++t;return t}function dV(e,t){const n=e.replace(/"""/g,'\\"""'),r=n.split(/\r\n|[\n\r]/g),s=r.length===1,i=r.length>1&&r.slice(1).every(y=>y.length===0||Mx(y.charCodeAt(0))),l=n.endsWith('\\"""'),u=e.endsWith('"')&&!l,d=e.endsWith("\\"),f=u||d,h=!s||e.length>70||f||i||l;let m="";const g=s&&Mx(e.charCodeAt(0));return(h&&!g||i)&&(m+=`
`),m+=n,(h||f)&&(m+=`
`),'"""'+m+'"""'}var ue;(function(e){e.SOF="<SOF>",e.EOF="<EOF>",e.BANG="!",e.DOLLAR="$",e.AMP="&",e.PAREN_L="(",e.PAREN_R=")",e.DOT=".",e.SPREAD="...",e.COLON=":",e.EQUALS="=",e.AT="@",e.BRACKET_L="[",e.BRACKET_R="]",e.BRACE_L="{",e.PIPE="|",e.BRACE_R="}",e.NAME="Name",e.INT="Int",e.FLOAT="Float",e.STRING="String",e.BLOCK_STRING="BlockString",e.COMMENT="Comment"})(ue||(ue={}));class fV{constructor(t){const n=new $C(ue.SOF,0,0,0,0);this.source=t,this.lastToken=n,this.token=n,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let t=this.token;if(t.kind!==ue.EOF)do if(t.next)t=t.next;else{const n=mV(this,t.end);t.next=n,n.prev=t,t=n}while(t.kind===ue.COMMENT);return t}}function hV(e){return e===ue.BANG||e===ue.DOLLAR||e===ue.AMP||e===ue.PAREN_L||e===ue.PAREN_R||e===ue.DOT||e===ue.SPREAD||e===ue.COLON||e===ue.EQUALS||e===ue.AT||e===ue.BRACKET_L||e===ue.BRACKET_R||e===ue.BRACE_L||e===ue.PIPE||e===ue.BRACE_R}function zc(e){return e>=0&&e<=55295||e>=57344&&e<=1114111}function Op(e,t){return BC(e.charCodeAt(t))&&qC(e.charCodeAt(t+1))}function BC(e){return e>=55296&&e<=56319}function qC(e){return e>=56320&&e<=57343}function tl(e,t){const n=e.source.body.codePointAt(t);if(n===void 0)return ue.EOF;if(n>=32&&n<=126){const r=String.fromCodePoint(n);return r==='"'?`'"'`:`"${r}"`}return"U+"+n.toString(16).toUpperCase().padStart(4,"0")}function Dn(e,t,n,r,s){const i=e.line,l=1+n-e.lineStart;return new $C(t,n,r,i,l,s)}function mV(e,t){const n=e.source.body,r=n.length;let s=t;for(;s<r;){const i=n.charCodeAt(s);switch(i){case 65279:case 9:case 32:case 44:++s;continue;case 10:++s,++e.line,e.lineStart=s;continue;case 13:n.charCodeAt(s+1)===10?s+=2:++s,++e.line,e.lineStart=s;continue;case 35:return pV(e,s);case 33:return Dn(e,ue.BANG,s,s+1);case 36:return Dn(e,ue.DOLLAR,s,s+1);case 38:return Dn(e,ue.AMP,s,s+1);case 40:return Dn(e,ue.PAREN_L,s,s+1);case 41:return Dn(e,ue.PAREN_R,s,s+1);case 46:if(n.charCodeAt(s+1)===46&&n.charCodeAt(s+2)===46)return Dn(e,ue.SPREAD,s,s+3);break;case 58:return Dn(e,ue.COLON,s,s+1);case 61:return Dn(e,ue.EQUALS,s,s+1);case 64:return Dn(e,ue.AT,s,s+1);case 91:return Dn(e,ue.BRACKET_L,s,s+1);case 93:return Dn(e,ue.BRACKET_R,s,s+1);case 123:return Dn(e,ue.BRACE_L,s,s+1);case 124:return Dn(e,ue.PIPE,s,s+1);case 125:return Dn(e,ue.BRACE_R,s,s+1);case 34:return n.charCodeAt(s+1)===34&&n.charCodeAt(s+2)===34?bV(e,s):yV(e,s)}if(Od(i)||i===45)return gV(e,s,i);if(UC(i))return _V(e,s);throw Gn(e.source,s,i===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:zc(i)||Op(n,s)?`Unexpected character: ${tl(e,s)}.`:`Invalid character: ${tl(e,s)}.`)}return Dn(e,ue.EOF,r,r)}function pV(e,t){const n=e.source.body,r=n.length;let s=t+1;for(;s<r;){const i=n.charCodeAt(s);if(i===10||i===13)break;if(zc(i))++s;else if(Op(n,s))s+=2;else break}return Dn(e,ue.COMMENT,t,s,n.slice(t+1,s))}function gV(e,t,n){const r=e.source.body;let s=t,i=n,l=!1;if(i===45&&(i=r.charCodeAt(++s)),i===48){if(i=r.charCodeAt(++s),Od(i))throw Gn(e.source,s,`Invalid number, unexpected digit after 0: ${tl(e,s)}.`)}else s=rv(e,s,i),i=r.charCodeAt(s);if(i===46&&(l=!0,i=r.charCodeAt(++s),s=rv(e,s,i),i=r.charCodeAt(s)),(i===69||i===101)&&(l=!0,i=r.charCodeAt(++s),(i===43||i===45)&&(i=r.charCodeAt(++s)),s=rv(e,s,i),i=r.charCodeAt(s)),i===46||UC(i))throw Gn(e.source,s,`Invalid number, expected digit but got: ${tl(e,s)}.`);return Dn(e,l?ue.FLOAT:ue.INT,t,s,r.slice(t,s))}function rv(e,t,n){if(!Od(n))throw Gn(e.source,t,`Invalid number, expected digit but got: ${tl(e,t)}.`);const r=e.source.body;let s=t+1;for(;Od(r.charCodeAt(s));)++s;return s}function yV(e,t){const n=e.source.body,r=n.length;let s=t+1,i=s,l="";for(;s<r;){const u=n.charCodeAt(s);if(u===34)return l+=n.slice(i,s),Dn(e,ue.STRING,t,s+1,l);if(u===92){l+=n.slice(i,s);const d=n.charCodeAt(s+1)===117?n.charCodeAt(s+2)===123?vV(e,s):xV(e,s):wV(e,s);l+=d.value,s+=d.size,i=s;continue}if(u===10||u===13)break;if(zc(u))++s;else if(Op(n,s))s+=2;else throw Gn(e.source,s,`Invalid character within String: ${tl(e,s)}.`)}throw Gn(e.source,s,"Unterminated string.")}function vV(e,t){const n=e.source.body;let r=0,s=3;for(;s<12;){const i=n.charCodeAt(t+s++);if(i===125){if(s<5||!zc(r))break;return{value:String.fromCodePoint(r),size:s}}if(r=r<<4|ud(i),r<0)break}throw Gn(e.source,t,`Invalid Unicode escape sequence: "${n.slice(t,t+s)}".`)}function xV(e,t){const n=e.source.body,r=DE(n,t+2);if(zc(r))return{value:String.fromCodePoint(r),size:6};if(BC(r)&&n.charCodeAt(t+6)===92&&n.charCodeAt(t+7)===117){const s=DE(n,t+8);if(qC(s))return{value:String.fromCodePoint(r,s),size:12}}throw Gn(e.source,t,`Invalid Unicode escape sequence: "${n.slice(t,t+6)}".`)}function DE(e,t){return ud(e.charCodeAt(t))<<12|ud(e.charCodeAt(t+1))<<8|ud(e.charCodeAt(t+2))<<4|ud(e.charCodeAt(t+3))}function ud(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function wV(e,t){const n=e.source.body;switch(n.charCodeAt(t+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw Gn(e.source,t,`Invalid character escape sequence: "${n.slice(t,t+2)}".`)}function bV(e,t){const n=e.source.body,r=n.length;let s=e.lineStart,i=t+3,l=i,u="";const d=[];for(;i<r;){const f=n.charCodeAt(i);if(f===34&&n.charCodeAt(i+1)===34&&n.charCodeAt(i+2)===34){u+=n.slice(l,i),d.push(u);const h=Dn(e,ue.BLOCK_STRING,t,i+3,cV(d).join(`
`));return e.line+=d.length-1,e.lineStart=s,h}if(f===92&&n.charCodeAt(i+1)===34&&n.charCodeAt(i+2)===34&&n.charCodeAt(i+3)===34){u+=n.slice(l,i),l=i+1,i+=4;continue}if(f===10||f===13){u+=n.slice(l,i),d.push(u),f===13&&n.charCodeAt(i+1)===10?i+=2:++i,u="",l=i,s=i;continue}if(zc(f))++i;else if(Op(n,i))i+=2;else throw Gn(e.source,i,`Invalid character within String: ${tl(e,i)}.`)}throw Gn(e.source,i,"Unterminated string.")}function _V(e,t){const n=e.source.body,r=n.length;let s=t+1;for(;s<r;){const i=n.charCodeAt(s);if(lV(i))++s;else break}return Dn(e,ue.NAME,t,s,n.slice(t,s))}const SV=10,WC=2;function b0(e){return Dp(e,[])}function Dp(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return jV(e,t);default:return String(e)}}function jV(e,t){if(e===null)return"null";if(t.includes(e))return"[Circular]";const n=[...t,e];if(EV(e)){const r=e.toJSON();if(r!==e)return typeof r=="string"?r:Dp(r,n)}else if(Array.isArray(e))return NV(e,n);return kV(e,n)}function EV(e){return typeof e.toJSON=="function"}function kV(e,t){const n=Object.entries(e);return n.length===0?"{}":t.length>WC?"["+TV(e)+"]":"{ "+n.map(([s,i])=>s+": "+Dp(i,t)).join(", ")+" }"}function NV(e,t){if(e.length===0)return"[]";if(t.length>WC)return"[Array]";const n=Math.min(SV,e.length),r=e.length-n,s=[];for(let i=0;i<n;++i)s.push(Dp(e[i],t));return r===1?s.push("... 1 more item"):r>1&&s.push(`... ${r} more items`),"["+s.join(", ")+"]"}function TV(e){const t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof e.constructor=="function"){const n=e.constructor.name;if(typeof n=="string"&&n!=="")return n}return t}const CV=globalThis.process&&!0,PV=CV?function(t,n){return t instanceof n}:function(t,n){if(t instanceof n)return!0;if(typeof t=="object"&&t!==null){var r;const s=n.prototype[Symbol.toStringTag],i=Symbol.toStringTag in t?t[Symbol.toStringTag]:(r=t.constructor)===null||r===void 0?void 0:r.name;if(s===i){const l=b0(t);throw new Error(`Cannot use ${s} "${l}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class HC{constructor(t,n="GraphQL request",r={line:1,column:1}){typeof t=="string"||wm(!1,`Body must be a string. Received: ${b0(t)}.`),this.body=t,this.name=n,this.locationOffset=r,this.locationOffset.line>0||wm(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||wm(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function AV(e){return PV(e,HC)}function RV(e,t){const n=new IV(e,t),r=n.parseDocument();return Object.defineProperty(r,"tokenCount",{enumerable:!1,value:n.tokenCount}),r}class IV{constructor(t,n={}){const{lexer:r,...s}=n;if(r)this._lexer=r;else{const i=AV(t)?t:new HC(t);this._lexer=new fV(i)}this._options=s,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){const t=this.expectToken(ue.NAME);return this.node(t,{kind:tt.NAME,value:t.value})}parseDocument(){return this.node(this._lexer.token,{kind:tt.DOCUMENT,definitions:this.many(ue.SOF,this.parseDefinition,ue.EOF)})}parseDefinition(){if(this.peek(ue.BRACE_L))return this.parseOperationDefinition();const t=this.peekDescription(),n=t?this._lexer.lookahead():this._lexer.token;if(t&&n.kind===ue.BRACE_L)throw Gn(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are not supported on shorthand queries.");if(n.kind===ue.NAME){switch(n.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}switch(n.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition()}if(t)throw Gn(this._lexer.source,this._lexer.token.start,"Unexpected description, only GraphQL definitions support descriptions.");switch(n.value){case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(n)}parseOperationDefinition(){const t=this._lexer.token;if(this.peek(ue.BRACE_L))return this.node(t,{kind:tt.OPERATION_DEFINITION,operation:ic.QUERY,description:void 0,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const n=this.parseDescription(),r=this.parseOperationType();let s;return this.peek(ue.NAME)&&(s=this.parseName()),this.node(t,{kind:tt.OPERATION_DEFINITION,operation:r,description:n,name:s,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const t=this.expectToken(ue.NAME);switch(t.value){case"query":return ic.QUERY;case"mutation":return ic.MUTATION;case"subscription":return ic.SUBSCRIPTION}throw this.unexpected(t)}parseVariableDefinitions(){return this.optionalMany(ue.PAREN_L,this.parseVariableDefinition,ue.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:tt.VARIABLE_DEFINITION,description:this.parseDescription(),variable:this.parseVariable(),type:(this.expectToken(ue.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(ue.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const t=this._lexer.token;return this.expectToken(ue.DOLLAR),this.node(t,{kind:tt.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:tt.SELECTION_SET,selections:this.many(ue.BRACE_L,this.parseSelection,ue.BRACE_R)})}parseSelection(){return this.peek(ue.SPREAD)?this.parseFragment():this.parseField()}parseField(){const t=this._lexer.token,n=this.parseName();let r,s;return this.expectOptionalToken(ue.COLON)?(r=n,s=this.parseName()):s=n,this.node(t,{kind:tt.FIELD,alias:r,name:s,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(ue.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(t){const n=t?this.parseConstArgument:this.parseArgument;return this.optionalMany(ue.PAREN_L,n,ue.PAREN_R)}parseArgument(t=!1){const n=this._lexer.token,r=this.parseName();return this.expectToken(ue.COLON),this.node(n,{kind:tt.ARGUMENT,name:r,value:this.parseValueLiteral(t)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const t=this._lexer.token;this.expectToken(ue.SPREAD);const n=this.expectOptionalKeyword("on");return!n&&this.peek(ue.NAME)?this.node(t,{kind:tt.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(t,{kind:tt.INLINE_FRAGMENT,typeCondition:n?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const t=this._lexer.token,n=this.parseDescription();return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(t,{kind:tt.FRAGMENT_DEFINITION,description:n,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(t,{kind:tt.FRAGMENT_DEFINITION,description:n,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(t){const n=this._lexer.token;switch(n.kind){case ue.BRACKET_L:return this.parseList(t);case ue.BRACE_L:return this.parseObject(t);case ue.INT:return this.advanceLexer(),this.node(n,{kind:tt.INT,value:n.value});case ue.FLOAT:return this.advanceLexer(),this.node(n,{kind:tt.FLOAT,value:n.value});case ue.STRING:case ue.BLOCK_STRING:return this.parseStringLiteral();case ue.NAME:switch(this.advanceLexer(),n.value){case"true":return this.node(n,{kind:tt.BOOLEAN,value:!0});case"false":return this.node(n,{kind:tt.BOOLEAN,value:!1});case"null":return this.node(n,{kind:tt.NULL});default:return this.node(n,{kind:tt.ENUM,value:n.value})}case ue.DOLLAR:if(t)if(this.expectToken(ue.DOLLAR),this._lexer.token.kind===ue.NAME){const r=this._lexer.token.value;throw Gn(this._lexer.source,n.start,`Unexpected variable "$${r}" in constant value.`)}else throw this.unexpected(n);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const t=this._lexer.token;return this.advanceLexer(),this.node(t,{kind:tt.STRING,value:t.value,block:t.kind===ue.BLOCK_STRING})}parseList(t){const n=()=>this.parseValueLiteral(t);return this.node(this._lexer.token,{kind:tt.LIST,values:this.any(ue.BRACKET_L,n,ue.BRACKET_R)})}parseObject(t){const n=()=>this.parseObjectField(t);return this.node(this._lexer.token,{kind:tt.OBJECT,fields:this.any(ue.BRACE_L,n,ue.BRACE_R)})}parseObjectField(t){const n=this._lexer.token,r=this.parseName();return this.expectToken(ue.COLON),this.node(n,{kind:tt.OBJECT_FIELD,name:r,value:this.parseValueLiteral(t)})}parseDirectives(t){const n=[];for(;this.peek(ue.AT);)n.push(this.parseDirective(t));return n}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(t){const n=this._lexer.token;return this.expectToken(ue.AT),this.node(n,{kind:tt.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(t)})}parseTypeReference(){const t=this._lexer.token;let n;if(this.expectOptionalToken(ue.BRACKET_L)){const r=this.parseTypeReference();this.expectToken(ue.BRACKET_R),n=this.node(t,{kind:tt.LIST_TYPE,type:r})}else n=this.parseNamedType();return this.expectOptionalToken(ue.BANG)?this.node(t,{kind:tt.NON_NULL_TYPE,type:n}):n}parseNamedType(){return this.node(this._lexer.token,{kind:tt.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(ue.STRING)||this.peek(ue.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("schema");const r=this.parseConstDirectives(),s=this.many(ue.BRACE_L,this.parseOperationTypeDefinition,ue.BRACE_R);return this.node(t,{kind:tt.SCHEMA_DEFINITION,description:n,directives:r,operationTypes:s})}parseOperationTypeDefinition(){const t=this._lexer.token,n=this.parseOperationType();this.expectToken(ue.COLON);const r=this.parseNamedType();return this.node(t,{kind:tt.OPERATION_TYPE_DEFINITION,operation:n,type:r})}parseScalarTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("scalar");const r=this.parseName(),s=this.parseConstDirectives();return this.node(t,{kind:tt.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:s})}parseObjectTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("type");const r=this.parseName(),s=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),l=this.parseFieldsDefinition();return this.node(t,{kind:tt.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:s,directives:i,fields:l})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(ue.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(ue.BRACE_L,this.parseFieldDefinition,ue.BRACE_R)}parseFieldDefinition(){const t=this._lexer.token,n=this.parseDescription(),r=this.parseName(),s=this.parseArgumentDefs();this.expectToken(ue.COLON);const i=this.parseTypeReference(),l=this.parseConstDirectives();return this.node(t,{kind:tt.FIELD_DEFINITION,description:n,name:r,arguments:s,type:i,directives:l})}parseArgumentDefs(){return this.optionalMany(ue.PAREN_L,this.parseInputValueDef,ue.PAREN_R)}parseInputValueDef(){const t=this._lexer.token,n=this.parseDescription(),r=this.parseName();this.expectToken(ue.COLON);const s=this.parseTypeReference();let i;this.expectOptionalToken(ue.EQUALS)&&(i=this.parseConstValueLiteral());const l=this.parseConstDirectives();return this.node(t,{kind:tt.INPUT_VALUE_DEFINITION,description:n,name:r,type:s,defaultValue:i,directives:l})}parseInterfaceTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("interface");const r=this.parseName(),s=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),l=this.parseFieldsDefinition();return this.node(t,{kind:tt.INTERFACE_TYPE_DEFINITION,description:n,name:r,interfaces:s,directives:i,fields:l})}parseUnionTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("union");const r=this.parseName(),s=this.parseConstDirectives(),i=this.parseUnionMemberTypes();return this.node(t,{kind:tt.UNION_TYPE_DEFINITION,description:n,name:r,directives:s,types:i})}parseUnionMemberTypes(){return this.expectOptionalToken(ue.EQUALS)?this.delimitedMany(ue.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("enum");const r=this.parseName(),s=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();return this.node(t,{kind:tt.ENUM_TYPE_DEFINITION,description:n,name:r,directives:s,values:i})}parseEnumValuesDefinition(){return this.optionalMany(ue.BRACE_L,this.parseEnumValueDefinition,ue.BRACE_R)}parseEnumValueDefinition(){const t=this._lexer.token,n=this.parseDescription(),r=this.parseEnumValueName(),s=this.parseConstDirectives();return this.node(t,{kind:tt.ENUM_VALUE_DEFINITION,description:n,name:r,directives:s})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw Gn(this._lexer.source,this._lexer.token.start,`${Bh(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("input");const r=this.parseName(),s=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();return this.node(t,{kind:tt.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:s,fields:i})}parseInputFieldsDefinition(){return this.optionalMany(ue.BRACE_L,this.parseInputValueDef,ue.BRACE_R)}parseTypeSystemExtension(){const t=this._lexer.lookahead();if(t.kind===ue.NAME)switch(t.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(t)}parseSchemaExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const n=this.parseConstDirectives(),r=this.optionalMany(ue.BRACE_L,this.parseOperationTypeDefinition,ue.BRACE_R);if(n.length===0&&r.length===0)throw this.unexpected();return this.node(t,{kind:tt.SCHEMA_EXTENSION,directives:n,operationTypes:r})}parseScalarTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const n=this.parseName(),r=this.parseConstDirectives();if(r.length===0)throw this.unexpected();return this.node(t,{kind:tt.SCALAR_TYPE_EXTENSION,name:n,directives:r})}parseObjectTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const n=this.parseName(),r=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(r.length===0&&s.length===0&&i.length===0)throw this.unexpected();return this.node(t,{kind:tt.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:s,fields:i})}parseInterfaceTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const n=this.parseName(),r=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(r.length===0&&s.length===0&&i.length===0)throw this.unexpected();return this.node(t,{kind:tt.INTERFACE_TYPE_EXTENSION,name:n,interfaces:r,directives:s,fields:i})}parseUnionTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const n=this.parseName(),r=this.parseConstDirectives(),s=this.parseUnionMemberTypes();if(r.length===0&&s.length===0)throw this.unexpected();return this.node(t,{kind:tt.UNION_TYPE_EXTENSION,name:n,directives:r,types:s})}parseEnumTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const n=this.parseName(),r=this.parseConstDirectives(),s=this.parseEnumValuesDefinition();if(r.length===0&&s.length===0)throw this.unexpected();return this.node(t,{kind:tt.ENUM_TYPE_EXTENSION,name:n,directives:r,values:s})}parseInputObjectTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const n=this.parseName(),r=this.parseConstDirectives(),s=this.parseInputFieldsDefinition();if(r.length===0&&s.length===0)throw this.unexpected();return this.node(t,{kind:tt.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:s})}parseDirectiveDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("directive"),this.expectToken(ue.AT);const r=this.parseName(),s=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const l=this.parseDirectiveLocations();return this.node(t,{kind:tt.DIRECTIVE_DEFINITION,description:n,name:r,arguments:s,repeatable:i,locations:l})}parseDirectiveLocations(){return this.delimitedMany(ue.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const t=this._lexer.token,n=this.parseName();if(Object.prototype.hasOwnProperty.call(Dx,n.value))return n;throw this.unexpected(t)}parseSchemaCoordinate(){const t=this._lexer.token,n=this.expectOptionalToken(ue.AT),r=this.parseName();let s;!n&&this.expectOptionalToken(ue.DOT)&&(s=this.parseName());let i;return(n||s)&&this.expectOptionalToken(ue.PAREN_L)&&(i=this.parseName(),this.expectToken(ue.COLON),this.expectToken(ue.PAREN_R)),n?i?this.node(t,{kind:tt.DIRECTIVE_ARGUMENT_COORDINATE,name:r,argumentName:i}):this.node(t,{kind:tt.DIRECTIVE_COORDINATE,name:r}):s?i?this.node(t,{kind:tt.ARGUMENT_COORDINATE,name:r,fieldName:s,argumentName:i}):this.node(t,{kind:tt.MEMBER_COORDINATE,name:r,memberName:s}):this.node(t,{kind:tt.TYPE_COORDINATE,name:r})}node(t,n){return this._options.noLocation!==!0&&(n.loc=new aV(t,this._lexer.lastToken,this._lexer.source)),n}peek(t){return this._lexer.token.kind===t}expectToken(t){const n=this._lexer.token;if(n.kind===t)return this.advanceLexer(),n;throw Gn(this._lexer.source,n.start,`Expected ${GC(t)}, found ${Bh(n)}.`)}expectOptionalToken(t){return this._lexer.token.kind===t?(this.advanceLexer(),!0):!1}expectKeyword(t){const n=this._lexer.token;if(n.kind===ue.NAME&&n.value===t)this.advanceLexer();else throw Gn(this._lexer.source,n.start,`Expected "${t}", found ${Bh(n)}.`)}expectOptionalKeyword(t){const n=this._lexer.token;return n.kind===ue.NAME&&n.value===t?(this.advanceLexer(),!0):!1}unexpected(t){const n=t??this._lexer.token;return Gn(this._lexer.source,n.start,`Unexpected ${Bh(n)}.`)}any(t,n,r){this.expectToken(t);const s=[];for(;!this.expectOptionalToken(r);)s.push(n.call(this));return s}optionalMany(t,n,r){if(this.expectOptionalToken(t)){const s=[];do s.push(n.call(this));while(!this.expectOptionalToken(r));return s}return[]}many(t,n,r){this.expectToken(t);const s=[];do s.push(n.call(this));while(!this.expectOptionalToken(r));return s}delimitedMany(t,n){this.expectOptionalToken(t);const r=[];do r.push(n.call(this));while(this.expectOptionalToken(t));return r}advanceLexer(){const{maxTokens:t}=this._options,n=this._lexer.advance();if(n.kind!==ue.EOF&&(++this._tokenCounter,t!==void 0&&this._tokenCounter>t))throw Gn(this._lexer.source,n.start,`Document contains more that ${t} tokens. Parsing aborted.`)}}function Bh(e){const t=e.value;return GC(e.kind)+(t!=null?` "${t}"`:"")}function GC(e){return hV(e)?`"${e}"`:e}function OV(e){return`"${e.replace(DV,MV)}"`}const DV=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function MV(e){return LV[e.charCodeAt(0)]}const LV=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],FV=Object.freeze({});function $V(e,t,n=VC){const r=new Map;for(const _ of Object.values(tt))r.set(_,VV(t,_));let s,i=Array.isArray(e),l=[e],u=-1,d=[],f=e,h,m;const g=[],y=[];do{u++;const _=u===l.length,k=_&&d.length!==0;if(_){if(h=y.length===0?void 0:g[g.length-1],f=m,m=y.pop(),k)if(i){f=f.slice();let T=0;for(const[P,R]of d){const M=P-T;R===null?(f.splice(M,1),T++):f[M]=R}}else{f={...f};for(const[T,P]of d)f[T]=P}u=s.index,l=s.keys,d=s.edits,i=s.inArray,s=s.prev}else if(m){if(h=i?u:l[u],f=m[h],f==null)continue;g.push(h)}let N;if(!Array.isArray(f)){var w,b;OE(f)||wm(!1,`Invalid AST Node: ${b0(f)}.`);const T=_?(w=r.get(f.kind))===null||w===void 0?void 0:w.leave:(b=r.get(f.kind))===null||b===void 0?void 0:b.enter;if(N=T==null?void 0:T.call(t,f,h,m,g,y),N===FV)break;if(N===!1){if(!_){g.pop();continue}}else if(N!==void 0&&(d.push([h,N]),!_))if(OE(N))f=N;else{g.pop();continue}}if(N===void 0&&k&&d.push([h,f]),_)g.pop();else{var S;s={inArray:i,index:u,keys:l,edits:d,prev:s},i=Array.isArray(f),l=i?f:(S=n[f.kind])!==null&&S!==void 0?S:[],u=-1,d=[],m&&y.push(m),m=f}}while(s!==void 0);return d.length!==0?d[d.length-1][1]:e}function VV(e,t){const n=e[t];return typeof n=="object"?n:typeof n=="function"?{enter:n,leave:void 0}:{enter:e.enter,leave:e.leave}}function zV(e){return $V(e,BV)}const UV=80,BV={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>Fe(e.definitions,`

`)},OperationDefinition:{leave(e){const t=sv(e.variableDefinitions)?ht(`(
`,Fe(e.variableDefinitions,`
`),`
)`):ht("(",Fe(e.variableDefinitions,", "),")"),n=ht("",e.description,`
`)+Fe([e.operation,Fe([e.name,t]),Fe(e.directives," ")]," ");return(n==="query"?"":n+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:n,directives:r,description:s})=>ht("",s,`
`)+e+": "+t+ht(" = ",n)+ht(" ",Fe(r," "))},SelectionSet:{leave:({selections:e})=>Vs(e)},Field:{leave({alias:e,name:t,arguments:n,directives:r,selectionSet:s}){const i=ht("",e,": ")+t;let l=i+ht("(",Fe(n,", "),")");return l.length>UV&&(l=i+ht(`(
`,bm(Fe(n,`
`)),`
)`)),Fe([l,Fe(r," "),s]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+ht(" ",Fe(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:n})=>Fe(["...",ht("on ",e),Fe(t," "),n]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:n,directives:r,selectionSet:s,description:i})=>ht("",i,`
`)+`fragment ${e}${ht("(",Fe(n,", "),")")} on ${t} ${ht("",Fe(r," ")," ")}`+s},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?dV(e):OV(e)},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+Fe(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+Fe(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+ht("(",Fe(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:n})=>ht("",e,`
`)+Fe(["schema",Fe(t," "),Vs(n)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:n})=>ht("",e,`
`)+Fe(["scalar",t,Fe(n," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:n,directives:r,fields:s})=>ht("",e,`
`)+Fe(["type",t,ht("implements ",Fe(n," & ")),Fe(r," "),Vs(s)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:n,type:r,directives:s})=>ht("",e,`
`)+t+(sv(n)?ht(`(
`,bm(Fe(n,`
`)),`
)`):ht("(",Fe(n,", "),")"))+": "+r+ht(" ",Fe(s," "))},InputValueDefinition:{leave:({description:e,name:t,type:n,defaultValue:r,directives:s})=>ht("",e,`
`)+Fe([t+": "+n,ht("= ",r),Fe(s," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:n,directives:r,fields:s})=>ht("",e,`
`)+Fe(["interface",t,ht("implements ",Fe(n," & ")),Fe(r," "),Vs(s)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:n,types:r})=>ht("",e,`
`)+Fe(["union",t,Fe(n," "),ht("= ",Fe(r," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:n,values:r})=>ht("",e,`
`)+Fe(["enum",t,Fe(n," "),Vs(r)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:n})=>ht("",e,`
`)+Fe([t,Fe(n," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:n,fields:r})=>ht("",e,`
`)+Fe(["input",t,Fe(n," "),Vs(r)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:n,repeatable:r,locations:s})=>ht("",e,`
`)+"directive @"+t+(sv(n)?ht(`(
`,bm(Fe(n,`
`)),`
)`):ht("(",Fe(n,", "),")"))+(r?" repeatable":"")+" on "+Fe(s," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>Fe(["extend schema",Fe(e," "),Vs(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>Fe(["extend scalar",e,Fe(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:r})=>Fe(["extend type",e,ht("implements ",Fe(t," & ")),Fe(n," "),Vs(r)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:r})=>Fe(["extend interface",e,ht("implements ",Fe(t," & ")),Fe(n," "),Vs(r)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:n})=>Fe(["extend union",e,Fe(t," "),ht("= ",Fe(n," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:n})=>Fe(["extend enum",e,Fe(t," "),Vs(n)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:n})=>Fe(["extend input",e,Fe(t," "),Vs(n)]," ")},TypeCoordinate:{leave:({name:e})=>e},MemberCoordinate:{leave:({name:e,memberName:t})=>Fe([e,ht(".",t)])},ArgumentCoordinate:{leave:({name:e,fieldName:t,argumentName:n})=>Fe([e,ht(".",t),ht("(",n,":)")])},DirectiveCoordinate:{leave:({name:e})=>Fe(["@",e])},DirectiveArgumentCoordinate:{leave:({name:e,argumentName:t})=>Fe(["@",e,ht("(",t,":)")])}};function Fe(e,t=""){var n;return(n=e==null?void 0:e.filter(r=>r).join(t))!==null&&n!==void 0?n:""}function Vs(e){return ht(`{
`,bm(Fe(e,`
`)),`
}`)}function ht(e,t,n=""){return t!=null&&t!==""?e+t+n:""}function bm(e){return ht("  ",e.replace(/\n/g,`
  `))}function sv(e){var t;return(t=e==null?void 0:e.some(n=>n.includes(`
`)))!==null&&t!==void 0?t:!1}var qV={};function WV(e,t,n){return e.document?e:{document:e,variables:t,config:n}}function ME(e){var t;let n;const r=e.definitions.filter(s=>s.kind==="OperationDefinition");return r.length===1&&(n=(t=r[0].name)==null?void 0:t.value),n}function HV(e){if(typeof e=="string"){let n;try{const r=RV(e);n=ME(r)}catch{}return{query:e,operationName:n}}const t=ME(e);return{query:zV(e),operationName:t}}let GV=class{constructor(t){this.headers={},this.isAccessTokenValidOrNull=()=>{if(!this.accessToken)return!0;try{const s=uC(this.accessToken);return s.exp!=null&&s.exp*1e3>Date.now()}catch(s){return console.error("Error decoding token:",s),!1}},this.awaitForValidAccessTokenOrNull=async()=>{if(this.isAccessTokenValidOrNull())return!0;const s=()=>this.isAccessTokenValidOrNull()?Promise.resolve(!0):new Promise(i=>{setTimeout(()=>s().then(i),100)});return s()};const{url:n,adminSecret:r}=t;this._url=n,this.accessToken=null,this.adminSecret=r}async request(t,...n){const[r,s]=n,i=WV(t,r,s),{headers:l,...u}=s||{},{query:d,operationName:f}=HV(i.document);typeof process<"u"&&!qV.TEST_MODE&&await this.awaitForValidAccessTokenOrNull();try{const h=await LC(this.httpUrl,{method:"POST",body:JSON.stringify({operationName:f,query:d,variables:r}),headers:{"Content-Type":"application/json",...this.generateAccessTokenHeaders(),...this.headers,...l},...u});if(!h.ok)return{data:null,error:{error:h.statusText,message:h.statusText,status:h.status}};const{data:m,errors:g}=await h.json();return g?{data:null,error:g}:typeof m!="object"||Array.isArray(m)||m===null?{data:null,error:{error:"invalid-response",message:"incorrect response data from GraphQL server",status:0}}:{data:m,error:null}}catch(h){const m=h;return{data:null,error:{message:m.message,status:m.name==="AbortError"?0:500,error:m.name==="AbortError"?"abort-error":"unknown"}}}}get httpUrl(){return this._url}get wsUrl(){return this._url.replace(/^(http)(s?):\/\//,"ws$2://")}get url(){return this._url}getUrl(){return this._url}setAccessToken(t){if(!t){this.accessToken=null;return}this.accessToken=t}getHeaders(){return this.headers}setHeaders(t){t&&(this.headers={...this.headers,...t})}unsetHeaders(){const t=this.headers["x-hasura-role"];this.headers=t?{"x-hasura-role":t}:{}}generateAccessTokenHeaders(){return this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:this.accessToken?{Authorization:`Bearer ${this.accessToken}`}:{}}};var KC={},KV=Object.defineProperty,YV=(e,t,n)=>t in e?KV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vi=(e,t,n)=>YV(e,typeof t!="symbol"?t+"":t,n);const QV=/^((?<protocol>http[s]?):\/\/)?(?<host>(localhost|local))(:(?<port>(\d+|__\w+__)))?$/;function Mp(e,t){const{subdomain:n,region:r}=e;if(!n)throw new Error("A `subdomain` must be set.");const s=n.match(QV);if(s!=null&&s.groups){const{protocol:i,host:l,port:u}=s.groups;return ZV(t)||(l==="localhost"?(console.warn('The `subdomain` is set to "localhost". Support for this will be removed in a future release. Please use "local" instead.'),`${i||"http"}://localhost:${u||1337}/v1/${t}`):u?`${i||"https"}://local.${t}.local.nhost.run:${u}/v1`:`${i||"https"}://local.${t}.local.nhost.run/v1`)}if(!r)throw new Error('`region` must be set when using a `subdomain` other than "local".');return`https://${n}.${t}.${r}.nhost.run/v1`}function XV(){return typeof window<"u"}function JV(){return typeof process<"u"&&KC}function ZV(e){return XV()||!JV()?null:KC[`NHOST_${e.toUpperCase()}_URL`]}function ez(e,t){const n=t.startsWith("/")?t:`/${t}`;return e+n}function tz(e){const t="subdomain"in e?Mp(e,"auth"):e.authUrl,{subdomain:n,region:r}=e;if(!t)throw new Error("Please provide `subdomain` or `authUrl`.");return new H4({url:t,broadcastKey:`${n}${r??"local"}`,...e})}function nz(e){const t="subdomain"in e?Mp(e,"functions"):e.functionsUrl;if(!t)throw new Error("Please provide `subdomain` or `functionsUrl`.");return new rz({url:t,...e})}let rz=class{constructor(t){vi(this,"url"),vi(this,"accessToken"),vi(this,"adminSecret"),vi(this,"headers",{});const{url:n,adminSecret:r}=t;this.url=n,this.accessToken=null,this.adminSecret=r}async call(t,n,r){var s,i;const l={"Content-Type":"application/json",...this.generateAccessTokenHeaders(),...r==null?void 0:r.headers,...this.headers},u=ez(this.url,t);try{const d=await LC(u,{body:n?JSON.stringify(n):null,headers:l,method:"POST"});if(!d.ok){let h;return(s=d.headers.get("content-type"))!=null&&s.includes("application/json")?h=await d.json():h=await d.text(),{res:null,error:{message:h,error:d.statusText,status:d.status}}}let f;return(i=d.headers.get("content-type"))!=null&&i.includes("application/json")?f=await d.json():f=await d.text(),{res:{data:f,status:d.status,statusText:d.statusText},error:null}}catch(d){const f=d;return{res:null,error:{message:f.message,status:f.name==="AbortError"?0:500,error:f.name==="AbortError"?"abort-error":"unknown"}}}}setAccessToken(t){if(!t){this.accessToken=null;return}this.accessToken=t}getHeaders(){return this.headers}setHeaders(t){t&&(this.headers={...this.headers,...t})}unsetHeaders(){const t=this.headers["x-hasura-role"];this.headers=t?{"x-hasura-role":t}:{}}generateAccessTokenHeaders(){return this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:this.accessToken?{Authorization:`Bearer ${this.accessToken}`}:{}}};function sz(e){const t="subdomain"in e?Mp(e,"graphql"):e.graphqlUrl;if(!t)throw new Error("Please provide `subdomain` or `graphqlUrl`.");return new GV({url:t,...e})}function iz(e){const t="subdomain"in e?Mp(e,"storage"):e.storageUrl;if(!t)throw new Error("Please provide `subdomain` or `storageUrl`.");return new Q4({url:t,...e})}let az=class{constructor({refreshIntervalTime:t,clientStorage:n,clientStorageType:r,autoRefreshToken:s,autoSignIn:i,adminSecret:l,devTools:u,start:d=!0,...f}){vi(this,"auth"),vi(this,"storage"),vi(this,"functions"),vi(this,"graphql"),vi(this,"_adminSecret"),vi(this,"devTools"),this.auth=tz({refreshIntervalTime:t,clientStorage:n,clientStorageType:r,autoRefreshToken:s,autoSignIn:i,start:d,...f}),this.storage=iz({adminSecret:l,...f}),this.functions=nz({adminSecret:l,...f}),this.graphql=sz({adminSecret:l,...f}),this.auth.onAuthStateChanged((h,m)=>{if(h==="SIGNED_OUT"){this.storage.setAccessToken(void 0),this.functions.setAccessToken(void 0),this.graphql.setAccessToken(void 0);return}const g=m==null?void 0:m.accessToken;this.storage.setAccessToken(g),this.functions.setAccessToken(g),this.graphql.setAccessToken(g)}),this.auth.onTokenChanged(h=>{const m=h==null?void 0:h.accessToken;this.storage.setAccessToken(m),this.functions.setAccessToken(m),this.graphql.setAccessToken(m)}),this._adminSecret=l,this.devTools=u}get adminSecret(){return this._adminSecret}set adminSecret(t){this._adminSecret=t,this.storage.setAdminSecret(t)}setRole(t){this.graphql.setHeaders({"x-hasura-role":t}),this.storage.setHeaders({"x-hasura-role":t}),this.functions.setHeaders({"x-hasura-role":t})}unsetRole(){this.graphql.setHeaders((({"x-hasura-role":t,...n})=>n)(this.graphql.getHeaders())),this.storage.setHeaders((({"x-hasura-role":t,...n})=>n)(this.storage.getHeaders())),this.functions.setHeaders((({"x-hasura-role":t,...n})=>n)(this.functions.getHeaders()))}};var iv={exports:{}},av={},ov={exports:{}},lv={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE;function oz(){if(LE)return lv;LE=1;var e=of();function t(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function u(m,g){var y=g(),w=r({inst:{value:y,getSnapshot:g}}),b=w[0].inst,S=w[1];return i(function(){b.value=y,b.getSnapshot=g,d(b)&&S({inst:b})},[m,y,g]),s(function(){return d(b)&&S({inst:b}),m(function(){d(b)&&S({inst:b})})},[m]),l(y),y}function d(m){var g=m.getSnapshot;m=m.value;try{var y=g();return!n(m,y)}catch{return!0}}function f(m,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return lv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,lv}var FE;function lz(){return FE||(FE=1,ov.exports=oz()),ov.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E;function cz(){if($E)return av;$E=1;var e=of(),t=lz();function n(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:n,s=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return av.useSyncExternalStoreWithSelector=function(f,h,m,g,y){var w=i(null);if(w.current===null){var b={hasValue:!1,value:null};w.current=b}else b=w.current;w=u(function(){function _(R){if(!k){if(k=!0,N=R,R=g(R),y!==void 0&&b.hasValue){var M=b.value;if(y(M,R))return T=M}return T=R}if(M=T,r(N,R))return M;var A=g(R);return y!==void 0&&y(M,A)?(N=R,M):(N=R,T=A)}var k=!1,N,T,P=m===void 0?null:m;return[function(){return _(h())},P===null?void 0:function(){return _(P())}]},[h,m,g,y]);var S=s(f,w[0],w[1]);return l(function(){b.hasValue=!0,b.value=S},[S]),d(S),S},av}var VE;function uz(){return VE||(VE=1,iv.exports=cz()),iv.exports}var dz=uz(),fz=x.useLayoutEffect;function zE(e){var t=x.useRef();return t.current||(t.current={v:e()}),t.current.v}var Bm=function(){return Bm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Bm.apply(this,arguments)},hz=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n},mz=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,i=[],l;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(u){l={error:u}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return i};function pz(e,t){var n=zE(function(){return typeof e=="function"?e():e}),r=t.context,s=t.guards,i=t.actions,l=t.activities,u=t.services,d=t.delays;t.state;var f=hz(t,["context","guards","actions","activities","services","delays","state"]),h=zE(function(){var m={context:r,guards:s,actions:i,activities:l,services:u,delays:d},g=n.withConfig(m,function(){return Bm(Bm({},n.context),r)});return $o(g,f)});return fz(function(){Object.assign(h.machine.options.actions,i),Object.assign(h.machine.options.guards,s),Object.assign(h.machine.options.activities,l),Object.assign(h.machine.options.services,u),Object.assign(h.machine.options.delays,d)},[i,s,l,u,d]),h}function gz(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=mz(t,2),s=r[0],i=s===void 0?{}:s,l=r[1],u=pz(e,i);return x.useEffect(function(){if(l){var d=u.subscribe(yd(l));return function(){d.unsubscribe()}}},[l]),x.useEffect(function(){var d=i.state;return u.start(d?Ws.create(d):void 0),function(){u.stop(),u.status=Wn.NotStarted}},[]),u}function yz(e){return e.status!==0?e.getSnapshot():e.machine.initialState}function vz(e){return"state"in e&&"machine"in e}function xz(e){return"state"in e}var wz=function(e,t){return e===t},bz=function(e,t){if(vz(e)){if(e.status===0&&t.current)return t.current;var n=yz(e);return t.current=e.status===0?n:null,n}return xz(e)?e.state:void 0};function _0(e,t,n,r){n===void 0&&(n=wz);var s=x.useRef(null),i=x.useCallback(function(d){var f=e.subscribe(d).unsubscribe;return f},[e]),l=x.useCallback(function(){return bz(e,s)},[e,r]),u=dz.useSyncExternalStoreWithSelector(i,l,l,t,n);return u}const YC=x.createContext({}),QC=({nhost:e,initial:t,...n})=>{const r=gz(e.auth.client.machine,{devTools:e.devTools});e.auth.client.start({interpreter:r,initialSession:t,devTools:e.devTools});const s=x.useRef(!0);return x.useEffect(()=>{s.current?s.current=!1:t&&r.send("SESSION_UPDATE",{data:{session:t}})},[t,r]),oe.createElement(YC.Provider,{value:e},n.children)},_z=QC,S0=()=>{var e;const t=(e=x.useContext(YC).auth)==null?void 0:e.client.interpreter;if(!t)throw Error("Could not find the Nhost auth client. Did you wrap your app in <NhostProvider />?");return t},ma=()=>{const e=S0();return _0(e,t=>({isAuthenticated:t.matches({authentication:"signedIn"}),isLoading:t.hasTag("loading"),error:t.context.errors.authentication||null,isError:t.matches({authentication:{signedOut:"failed"}}),connectionAttempts:t.context.importTokenAttempts}),(t,n)=>t.isAuthenticated===n.isAuthenticated&&t.isLoading===n.isLoading&&t.connectionAttempts===n.connectionAttempts)},Oi=()=>{const e=S0();return _0(e,t=>t.context.user,(t,n)=>(t&&JSON.stringify(t))===(n&&JSON.stringify(n)))},uf=()=>{const e=S0();return _0(e,t=>{var n;return(n=t.context.user)==null?void 0:n.id},(t,n)=>t===n)};var Uc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Sz={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Qa,f0,YT,jz=(YT=class{constructor(){Ze(this,Qa,Sz);Ze(this,f0,!1)}setTimeoutProvider(e){Re(this,Qa,e)}setTimeout(e,t){return G(this,Qa).setTimeout(e,t)}clearTimeout(e){G(this,Qa).clearTimeout(e)}setInterval(e,t){return G(this,Qa).setInterval(e,t)}clearInterval(e){G(this,Qa).clearInterval(e)}},Qa=new WeakMap,f0=new WeakMap,YT),Vo=new jz;function Ez(e){setTimeout(e,0)}var nl=typeof window>"u"||"Deno"in globalThis;function Er(){}function kz(e,t){return typeof e=="function"?e(t):e}function Lx(e){return typeof e=="number"&&e>=0&&e!==1/0}function XC(e,t){return Math.max(e+(t||0)-Date.now(),0)}function io(e,t){return typeof e=="function"?e(t):e}function js(e,t){return typeof e=="function"?e(t):e}function UE(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:l,stale:u}=e;if(l){if(r){if(t.queryHash!==j0(l,t.options))return!1}else if(!Dd(t.queryKey,l))return!1}if(n!=="all"){const d=t.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||s&&s!==t.state.fetchStatus||i&&!i(t))}function BE(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(rl(t.options.mutationKey)!==rl(i))return!1}else if(!Dd(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function j0(e,t){return((t==null?void 0:t.queryKeyHashFn)||rl)(e)}function rl(e){return JSON.stringify(e,(t,n)=>Fx(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Dd(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Dd(e[n],t[n])):!1}var Nz=Object.prototype.hasOwnProperty;function JC(e,t){if(e===t)return e;const n=qE(e)&&qE(t);if(!n&&!(Fx(e)&&Fx(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),l=i.length,u=n?new Array(l):{};let d=0;for(let f=0;f<l;f++){const h=n?f:i[f],m=e[h],g=t[h];if(m===g){u[h]=m,(n?f<s:Nz.call(e,h))&&d++;continue}if(m===null||g===null||typeof m!="object"||typeof g!="object"){u[h]=g;continue}const y=JC(m,g);u[h]=y,y===m&&d++}return s===l&&d===s?e:u}function qm(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function qE(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Fx(e){if(!WE(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!WE(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function WE(e){return Object.prototype.toString.call(e)==="[object Object]"}function Tz(e){return new Promise(t=>{Vo.setTimeout(t,e)})}function $x(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?JC(e,t):t}function Cz(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function Pz(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var E0=Symbol();function ZC(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===E0?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function eP(e,t){return typeof e=="function"?e(...t):!!e}var qo,Xa,xc,QT,Az=(QT=class extends Uc{constructor(){super();Ze(this,qo);Ze(this,Xa);Ze(this,xc);Re(this,xc,t=>{if(!nl&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){G(this,Xa)||this.setEventListener(G(this,xc))}onUnsubscribe(){var t;this.hasListeners()||((t=G(this,Xa))==null||t.call(this),Re(this,Xa,void 0))}setEventListener(t){var n;Re(this,xc,t),(n=G(this,Xa))==null||n.call(this),Re(this,Xa,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){G(this,qo)!==t&&(Re(this,qo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof G(this,qo)=="boolean"?G(this,qo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},qo=new WeakMap,Xa=new WeakMap,xc=new WeakMap,QT),k0=new Az;function Vx(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var Rz=Ez;function Iz(){let e=[],t=0,n=u=>{u()},r=u=>{u()},s=Rz;const i=u=>{t?e.push(u):s(()=>{n(u)})},l=()=>{const u=e;e=[],u.length&&s(()=>{r(()=>{u.forEach(d=>{n(d)})})})};return{batch:u=>{let d;t++;try{d=u()}finally{t--,t||l()}return d},batchCalls:u=>(...d)=>{i(()=>{u(...d)})},schedule:i,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Kn=Iz(),wc,Ja,bc,XT,Oz=(XT=class extends Uc{constructor(){super();Ze(this,wc,!0);Ze(this,Ja);Ze(this,bc);Re(this,bc,t=>{if(!nl&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){G(this,Ja)||this.setEventListener(G(this,bc))}onUnsubscribe(){var t;this.hasListeners()||((t=G(this,Ja))==null||t.call(this),Re(this,Ja,void 0))}setEventListener(t){var n;Re(this,bc,t),(n=G(this,Ja))==null||n.call(this),Re(this,Ja,t(this.setOnline.bind(this)))}setOnline(t){G(this,wc)!==t&&(Re(this,wc,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return G(this,wc)}},wc=new WeakMap,Ja=new WeakMap,bc=new WeakMap,XT),Wm=new Oz;function Dz(e){return Math.min(1e3*2**e,3e4)}function tP(e){return(e??"online")==="online"?Wm.isOnline():!0}var zx=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function nP(e){let t=!1,n=0,r;const s=Vx(),i=()=>s.status!=="pending",l=b=>{var S;if(!i()){const _=new zx(b);g(_),(S=e.onCancel)==null||S.call(e,_)}},u=()=>{t=!0},d=()=>{t=!1},f=()=>k0.isFocused()&&(e.networkMode==="always"||Wm.isOnline())&&e.canRun(),h=()=>tP(e.networkMode)&&e.canRun(),m=b=>{i()||(r==null||r(),s.resolve(b))},g=b=>{i()||(r==null||r(),s.reject(b))},y=()=>new Promise(b=>{var S;r=_=>{(i()||f())&&b(_)},(S=e.onPause)==null||S.call(e)}).then(()=>{var b;r=void 0,i()||(b=e.onContinue)==null||b.call(e)}),w=()=>{if(i())return;let b;const S=n===0?e.initialPromise:void 0;try{b=S??e.fn()}catch(_){b=Promise.reject(_)}Promise.resolve(b).then(m).catch(_=>{var R;if(i())return;const k=e.retry??(nl?0:3),N=e.retryDelay??Dz,T=typeof N=="function"?N(n,_):N,P=k===!0||typeof k=="number"&&n<k||typeof k=="function"&&k(n,_);if(t||!P){g(_);return}n++,(R=e.onFail)==null||R.call(e,n,_),Tz(T).then(()=>f()?void 0:y()).then(()=>{t?g(_):w()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r==null||r(),s),cancelRetry:u,continueRetry:d,canStart:h,start:()=>(h()?w():y().then(w),s)}}var Wo,JT,rP=(JT=class{constructor(){Ze(this,Wo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Lx(this.gcTime)&&Re(this,Wo,Vo.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(nl?1/0:300*1e3))}clearGcTimeout(){G(this,Wo)&&(Vo.clearTimeout(G(this,Wo)),Re(this,Wo,void 0))}},Wo=new WeakMap,JT),Ho,_c,_s,Go,nr,tf,Ko,Hs,Yi,ZT,Mz=(ZT=class extends rP{constructor(t){super();Ze(this,Hs);Ze(this,Ho);Ze(this,_c);Ze(this,_s);Ze(this,Go);Ze(this,nr);Ze(this,tf);Ze(this,Ko);Re(this,Ko,!1),Re(this,tf,t.defaultOptions),this.setOptions(t.options),this.observers=[],Re(this,Go,t.client),Re(this,_s,G(this,Go).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Re(this,Ho,GE(this.options)),this.state=t.state??G(this,Ho),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=G(this,nr))==null?void 0:t.promise}setOptions(t){if(this.options={...G(this,tf),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=GE(this.options);n.data!==void 0&&(this.setState(HE(n.data,n.dataUpdatedAt)),Re(this,Ho,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&G(this,_s).remove(this)}setData(t,n){const r=$x(this.state.data,t,this.options);return bt(this,Hs,Yi).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){bt(this,Hs,Yi).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=G(this,nr))==null?void 0:r.promise;return(s=G(this,nr))==null||s.cancel(t),n?n.then(Er).catch(Er):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(G(this,Ho))}isActive(){return this.observers.some(t=>js(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===E0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>io(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!XC(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=G(this,nr))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=G(this,nr))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),G(this,_s).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(G(this,nr)&&(G(this,Ko)?G(this,nr).cancel({revert:!0}):G(this,nr).cancelRetry()),this.scheduleGc()),G(this,_s).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||bt(this,Hs,Yi).call(this,{type:"invalidate"})}async fetch(t,n){var d,f,h,m,g,y,w,b,S,_,k,N;if(this.state.fetchStatus!=="idle"&&((d=G(this,nr))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(G(this,nr))return G(this,nr).continueRetry(),G(this,nr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const T=this.observers.find(P=>P.options.queryFn);T&&this.setOptions(T.options)}const r=new AbortController,s=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(Re(this,Ko,!0),r.signal)})},i=()=>{const T=ZC(this.options,n),R=(()=>{const M={client:G(this,Go),queryKey:this.queryKey,meta:this.meta};return s(M),M})();return Re(this,Ko,!1),this.options.persister?this.options.persister(T,R,this):T(R)},u=(()=>{const T={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:G(this,Go),state:this.state,fetchFn:i};return s(T),T})();(f=this.options.behavior)==null||f.onFetch(u,this),Re(this,_c,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=u.fetchOptions)==null?void 0:h.meta))&&bt(this,Hs,Yi).call(this,{type:"fetch",meta:(m=u.fetchOptions)==null?void 0:m.meta}),Re(this,nr,nP({initialPromise:n==null?void 0:n.initialPromise,fn:u.fetchFn,onCancel:T=>{T instanceof zx&&T.revert&&this.setState({...G(this,_c),fetchStatus:"idle"}),r.abort()},onFail:(T,P)=>{bt(this,Hs,Yi).call(this,{type:"failed",failureCount:T,error:P})},onPause:()=>{bt(this,Hs,Yi).call(this,{type:"pause"})},onContinue:()=>{bt(this,Hs,Yi).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0}));try{const T=await G(this,nr).start();if(T===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(T),(y=(g=G(this,_s).config).onSuccess)==null||y.call(g,T,this),(b=(w=G(this,_s).config).onSettled)==null||b.call(w,T,this.state.error,this),T}catch(T){if(T instanceof zx){if(T.silent)return G(this,nr).promise;if(T.revert){if(this.state.data===void 0)throw T;return this.state.data}}throw bt(this,Hs,Yi).call(this,{type:"error",error:T}),(_=(S=G(this,_s).config).onError)==null||_.call(S,T,this),(N=(k=G(this,_s).config).onSettled)==null||N.call(k,this.state.data,T,this),T}finally{this.scheduleGc()}}},Ho=new WeakMap,_c=new WeakMap,_s=new WeakMap,Go=new WeakMap,nr=new WeakMap,tf=new WeakMap,Ko=new WeakMap,Hs=new WeakSet,Yi=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...sP(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...HE(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Re(this,_c,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Kn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),G(this,_s).notify({query:this,type:"updated",action:t})})},ZT);function sP(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:tP(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function HE(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function GE(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ur,Ct,nf,_r,Yo,Sc,Xi,Za,rf,jc,Ec,Qo,Xo,eo,kc,Ut,dd,Ux,Bx,qx,Wx,Hx,Gx,Kx,iP,eC,Lz=(eC=class extends Uc{constructor(t,n){super();Ze(this,Ut);Ze(this,Ur);Ze(this,Ct);Ze(this,nf);Ze(this,_r);Ze(this,Yo);Ze(this,Sc);Ze(this,Xi);Ze(this,Za);Ze(this,rf);Ze(this,jc);Ze(this,Ec);Ze(this,Qo);Ze(this,Xo);Ze(this,eo);Ze(this,kc,new Set);this.options=n,Re(this,Ur,t),Re(this,Za,null),Re(this,Xi,Vx()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(G(this,Ct).addObserver(this),KE(G(this,Ct),this.options)?bt(this,Ut,dd).call(this):this.updateResult(),bt(this,Ut,Wx).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Yx(G(this,Ct),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Yx(G(this,Ct),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,bt(this,Ut,Hx).call(this),bt(this,Ut,Gx).call(this),G(this,Ct).removeObserver(this)}setOptions(t){const n=this.options,r=G(this,Ct);if(this.options=G(this,Ur).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof js(this.options.enabled,G(this,Ct))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");bt(this,Ut,Kx).call(this),G(this,Ct).setOptions(this.options),n._defaulted&&!qm(this.options,n)&&G(this,Ur).getQueryCache().notify({type:"observerOptionsUpdated",query:G(this,Ct),observer:this});const s=this.hasListeners();s&&YE(G(this,Ct),r,this.options,n)&&bt(this,Ut,dd).call(this),this.updateResult(),s&&(G(this,Ct)!==r||js(this.options.enabled,G(this,Ct))!==js(n.enabled,G(this,Ct))||io(this.options.staleTime,G(this,Ct))!==io(n.staleTime,G(this,Ct)))&&bt(this,Ut,Ux).call(this);const i=bt(this,Ut,Bx).call(this);s&&(G(this,Ct)!==r||js(this.options.enabled,G(this,Ct))!==js(n.enabled,G(this,Ct))||i!==G(this,eo))&&bt(this,Ut,qx).call(this,i)}getOptimisticResult(t){const n=G(this,Ur).getQueryCache().build(G(this,Ur),t),r=this.createResult(n,t);return $z(this,r)&&(Re(this,_r,r),Re(this,Sc,this.options),Re(this,Yo,G(this,Ct).state)),r}getCurrentResult(){return G(this,_r)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&G(this,Xi).status==="pending"&&G(this,Xi).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){G(this,kc).add(t)}getCurrentQuery(){return G(this,Ct)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=G(this,Ur).defaultQueryOptions(t),r=G(this,Ur).getQueryCache().build(G(this,Ur),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return bt(this,Ut,dd).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),G(this,_r)))}createResult(t,n){var W;const r=G(this,Ct),s=this.options,i=G(this,_r),l=G(this,Yo),u=G(this,Sc),f=t!==r?t.state:G(this,nf),{state:h}=t;let m={...h},g=!1,y;if(n._optimisticResults){const K=this.hasListeners(),H=!K&&KE(t,n),z=K&&YE(t,r,n,s);(H||z)&&(m={...m,...sP(h.data,t.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:w,errorUpdatedAt:b,status:S}=m;y=m.data;let _=!1;if(n.placeholderData!==void 0&&y===void 0&&S==="pending"){let K;i!=null&&i.isPlaceholderData&&n.placeholderData===(u==null?void 0:u.placeholderData)?(K=i.data,_=!0):K=typeof n.placeholderData=="function"?n.placeholderData((W=G(this,Ec))==null?void 0:W.state.data,G(this,Ec)):n.placeholderData,K!==void 0&&(S="success",y=$x(i==null?void 0:i.data,K,n),g=!0)}if(n.select&&y!==void 0&&!_)if(i&&y===(l==null?void 0:l.data)&&n.select===G(this,rf))y=G(this,jc);else try{Re(this,rf,n.select),y=n.select(y),y=$x(i==null?void 0:i.data,y,n),Re(this,jc,y),Re(this,Za,null)}catch(K){Re(this,Za,K)}G(this,Za)&&(w=G(this,Za),y=G(this,jc),b=Date.now(),S="error");const k=m.fetchStatus==="fetching",N=S==="pending",T=S==="error",P=N&&k,R=y!==void 0,A={status:S,fetchStatus:m.fetchStatus,isPending:N,isSuccess:S==="success",isError:T,isInitialLoading:P,isLoading:P,data:y,dataUpdatedAt:m.dataUpdatedAt,error:w,errorUpdatedAt:b,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:k,isRefetching:k&&!N,isLoadingError:T&&!R,isPaused:m.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:T&&R,isStale:N0(t,n),refetch:this.refetch,promise:G(this,Xi),isEnabled:js(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const K=L=>{A.status==="error"?L.reject(A.error):A.data!==void 0&&L.resolve(A.data)},H=()=>{const L=Re(this,Xi,A.promise=Vx());K(L)},z=G(this,Xi);switch(z.status){case"pending":t.queryHash===r.queryHash&&K(z);break;case"fulfilled":(A.status==="error"||A.data!==z.value)&&H();break;case"rejected":(A.status!=="error"||A.error!==z.reason)&&H();break}}return A}updateResult(){const t=G(this,_r),n=this.createResult(G(this,Ct),this.options);if(Re(this,Yo,G(this,Ct).state),Re(this,Sc,this.options),G(this,Yo).data!==void 0&&Re(this,Ec,G(this,Ct)),qm(n,t))return;Re(this,_r,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!G(this,kc).size)return!0;const l=new Set(i??G(this,kc));return this.options.throwOnError&&l.add("error"),Object.keys(G(this,_r)).some(u=>{const d=u;return G(this,_r)[d]!==t[d]&&l.has(d)})};bt(this,Ut,iP).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&bt(this,Ut,Wx).call(this)}},Ur=new WeakMap,Ct=new WeakMap,nf=new WeakMap,_r=new WeakMap,Yo=new WeakMap,Sc=new WeakMap,Xi=new WeakMap,Za=new WeakMap,rf=new WeakMap,jc=new WeakMap,Ec=new WeakMap,Qo=new WeakMap,Xo=new WeakMap,eo=new WeakMap,kc=new WeakMap,Ut=new WeakSet,dd=function(t){bt(this,Ut,Kx).call(this);let n=G(this,Ct).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Er)),n},Ux=function(){bt(this,Ut,Hx).call(this);const t=io(this.options.staleTime,G(this,Ct));if(nl||G(this,_r).isStale||!Lx(t))return;const r=XC(G(this,_r).dataUpdatedAt,t)+1;Re(this,Qo,Vo.setTimeout(()=>{G(this,_r).isStale||this.updateResult()},r))},Bx=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(G(this,Ct)):this.options.refetchInterval)??!1},qx=function(t){bt(this,Ut,Gx).call(this),Re(this,eo,t),!(nl||js(this.options.enabled,G(this,Ct))===!1||!Lx(G(this,eo))||G(this,eo)===0)&&Re(this,Xo,Vo.setInterval(()=>{(this.options.refetchIntervalInBackground||k0.isFocused())&&bt(this,Ut,dd).call(this)},G(this,eo)))},Wx=function(){bt(this,Ut,Ux).call(this),bt(this,Ut,qx).call(this,bt(this,Ut,Bx).call(this))},Hx=function(){G(this,Qo)&&(Vo.clearTimeout(G(this,Qo)),Re(this,Qo,void 0))},Gx=function(){G(this,Xo)&&(Vo.clearInterval(G(this,Xo)),Re(this,Xo,void 0))},Kx=function(){const t=G(this,Ur).getQueryCache().build(G(this,Ur),this.options);if(t===G(this,Ct))return;const n=G(this,Ct);Re(this,Ct,t),Re(this,nf,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},iP=function(t){Kn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(G(this,_r))}),G(this,Ur).getQueryCache().notify({query:G(this,Ct),type:"observerResultsUpdated"})})},eC);function Fz(e,t){return js(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function KE(e,t){return Fz(e,t)||e.state.data!==void 0&&Yx(e,t,t.refetchOnMount)}function Yx(e,t,n){if(js(t.enabled,e)!==!1&&io(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&N0(e,t)}return!1}function YE(e,t,n,r){return(e!==t||js(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&N0(e,n)}function N0(e,t){return js(t.enabled,e)!==!1&&e.isStaleByTime(io(t.staleTime,e))}function $z(e,t){return!qm(e.getCurrentResult(),t)}function QE(e){return{onFetch:(t,n)=>{var h,m,g,y,w;const r=t.options,s=(g=(m=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:m.fetchMore)==null?void 0:g.direction,i=((y=t.state.data)==null?void 0:y.pages)||[],l=((w=t.state.data)==null?void 0:w.pageParams)||[];let u={pages:[],pageParams:[]},d=0;const f=async()=>{let b=!1;const S=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(t.signal.aborted?b=!0:t.signal.addEventListener("abort",()=>{b=!0}),t.signal)})},_=ZC(t.options,t.fetchOptions),k=async(N,T,P)=>{if(b)return Promise.reject();if(T==null&&N.pages.length)return Promise.resolve(N);const M=(()=>{const H={client:t.client,queryKey:t.queryKey,pageParam:T,direction:P?"backward":"forward",meta:t.options.meta};return S(H),H})(),A=await _(M),{maxPages:W}=t.options,K=P?Pz:Cz;return{pages:K(N.pages,A,W),pageParams:K(N.pageParams,T,W)}};if(s&&i.length){const N=s==="backward",T=N?Vz:XE,P={pages:i,pageParams:l},R=T(r,P);u=await k(P,R,N)}else{const N=e??i.length;do{const T=d===0?l[0]??r.initialPageParam:XE(r,u);if(d>0&&T==null)break;u=await k(u,T),d++}while(d<N)}return u};t.options.persister?t.fetchFn=()=>{var b,S;return(S=(b=t.options).persister)==null?void 0:S.call(b,f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=f}}}function XE(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Vz(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var sf,pi,Sr,Jo,gi,za,tC,zz=(tC=class extends rP{constructor(t){super();Ze(this,gi);Ze(this,sf);Ze(this,pi);Ze(this,Sr);Ze(this,Jo);Re(this,sf,t.client),this.mutationId=t.mutationId,Re(this,Sr,t.mutationCache),Re(this,pi,[]),this.state=t.state||aP(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){G(this,pi).includes(t)||(G(this,pi).push(t),this.clearGcTimeout(),G(this,Sr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Re(this,pi,G(this,pi).filter(n=>n!==t)),this.scheduleGc(),G(this,Sr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){G(this,pi).length||(this.state.status==="pending"?this.scheduleGc():G(this,Sr).remove(this))}continue(){var t;return((t=G(this,Jo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,u,d,f,h,m,g,y,w,b,S,_,k,N,T,P,R,M,A,W;const n=()=>{bt(this,gi,za).call(this,{type:"continue"})},r={client:G(this,sf),meta:this.options.meta,mutationKey:this.options.mutationKey};Re(this,Jo,nP({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(K,H)=>{bt(this,gi,za).call(this,{type:"failed",failureCount:K,error:H})},onPause:()=>{bt(this,gi,za).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>G(this,Sr).canRun(this)}));const s=this.state.status==="pending",i=!G(this,Jo).canStart();try{if(s)n();else{bt(this,gi,za).call(this,{type:"pending",variables:t,isPaused:i}),await((u=(l=G(this,Sr).config).onMutate)==null?void 0:u.call(l,t,this,r));const H=await((f=(d=this.options).onMutate)==null?void 0:f.call(d,t,r));H!==this.state.context&&bt(this,gi,za).call(this,{type:"pending",context:H,variables:t,isPaused:i})}const K=await G(this,Jo).start();return await((m=(h=G(this,Sr).config).onSuccess)==null?void 0:m.call(h,K,t,this.state.context,this,r)),await((y=(g=this.options).onSuccess)==null?void 0:y.call(g,K,t,this.state.context,r)),await((b=(w=G(this,Sr).config).onSettled)==null?void 0:b.call(w,K,null,this.state.variables,this.state.context,this,r)),await((_=(S=this.options).onSettled)==null?void 0:_.call(S,K,null,t,this.state.context,r)),bt(this,gi,za).call(this,{type:"success",data:K}),K}catch(K){try{throw await((N=(k=G(this,Sr).config).onError)==null?void 0:N.call(k,K,t,this.state.context,this,r)),await((P=(T=this.options).onError)==null?void 0:P.call(T,K,t,this.state.context,r)),await((M=(R=G(this,Sr).config).onSettled)==null?void 0:M.call(R,void 0,K,this.state.variables,this.state.context,this,r)),await((W=(A=this.options).onSettled)==null?void 0:W.call(A,void 0,K,t,this.state.context,r)),K}finally{bt(this,gi,za).call(this,{type:"error",error:K})}}finally{G(this,Sr).runNext(this)}}},sf=new WeakMap,pi=new WeakMap,Sr=new WeakMap,Jo=new WeakMap,gi=new WeakSet,za=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Kn.batch(()=>{G(this,pi).forEach(r=>{r.onMutationUpdate(t)}),G(this,Sr).notify({mutation:this,type:"updated",action:t})})},tC);function aP(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ji,Gs,af,nC,Uz=(nC=class extends Uc{constructor(t={}){super();Ze(this,Ji);Ze(this,Gs);Ze(this,af);this.config=t,Re(this,Ji,new Set),Re(this,Gs,new Map),Re(this,af,0)}build(t,n,r){const s=new zz({client:t,mutationCache:this,mutationId:++Rh(this,af)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){G(this,Ji).add(t);const n=qh(t);if(typeof n=="string"){const r=G(this,Gs).get(n);r?r.push(t):G(this,Gs).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(G(this,Ji).delete(t)){const n=qh(t);if(typeof n=="string"){const r=G(this,Gs).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&G(this,Gs).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=qh(t);if(typeof n=="string"){const r=G(this,Gs).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=qh(t);if(typeof n=="string"){const s=(r=G(this,Gs).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Kn.batch(()=>{G(this,Ji).forEach(t=>{this.notify({type:"removed",mutation:t})}),G(this,Ji).clear(),G(this,Gs).clear()})}getAll(){return Array.from(G(this,Ji))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>BE(n,r))}findAll(t={}){return this.getAll().filter(n=>BE(t,n))}notify(t){Kn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Kn.batch(()=>Promise.all(t.map(n=>n.continue().catch(Er))))}},Ji=new WeakMap,Gs=new WeakMap,af=new WeakMap,nC);function qh(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Zi,to,Br,ea,ia,_m,Qx,rC,Bz=(rC=class extends Uc{constructor(n,r){super();Ze(this,ia);Ze(this,Zi);Ze(this,to);Ze(this,Br);Ze(this,ea);Re(this,Zi,n),this.setOptions(r),this.bindMethods(),bt(this,ia,_m).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=G(this,Zi).defaultMutationOptions(n),qm(this.options,r)||G(this,Zi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:G(this,Br),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&rl(r.mutationKey)!==rl(this.options.mutationKey)?this.reset():((s=G(this,Br))==null?void 0:s.state.status)==="pending"&&G(this,Br).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=G(this,Br))==null||n.removeObserver(this)}onMutationUpdate(n){bt(this,ia,_m).call(this),bt(this,ia,Qx).call(this,n)}getCurrentResult(){return G(this,to)}reset(){var n;(n=G(this,Br))==null||n.removeObserver(this),Re(this,Br,void 0),bt(this,ia,_m).call(this),bt(this,ia,Qx).call(this)}mutate(n,r){var s;return Re(this,ea,r),(s=G(this,Br))==null||s.removeObserver(this),Re(this,Br,G(this,Zi).getMutationCache().build(G(this,Zi),this.options)),G(this,Br).addObserver(this),G(this,Br).execute(n)}},Zi=new WeakMap,to=new WeakMap,Br=new WeakMap,ea=new WeakMap,ia=new WeakSet,_m=function(){var r;const n=((r=G(this,Br))==null?void 0:r.state)??aP();Re(this,to,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Qx=function(n){Kn.batch(()=>{var r,s,i,l,u,d,f,h;if(G(this,ea)&&this.hasListeners()){const m=G(this,to).variables,g=G(this,to).context,y={client:G(this,Zi),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((s=(r=G(this,ea)).onSuccess)==null||s.call(r,n.data,m,g,y),(l=(i=G(this,ea)).onSettled)==null||l.call(i,n.data,null,m,g,y)):(n==null?void 0:n.type)==="error"&&((d=(u=G(this,ea)).onError)==null||d.call(u,n.error,m,g,y),(h=(f=G(this,ea)).onSettled)==null||h.call(f,void 0,n.error,m,g,y))}this.listeners.forEach(m=>{m(G(this,to))})})},rC),yi,sC,qz=(sC=class extends Uc{constructor(t={}){super();Ze(this,yi);this.config=t,Re(this,yi,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??j0(s,n);let l=this.get(i);return l||(l=new Mz({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(l)),l}add(t){G(this,yi).has(t.queryHash)||(G(this,yi).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=G(this,yi).get(t.queryHash);n&&(t.destroy(),n===t&&G(this,yi).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Kn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return G(this,yi).get(t)}getAll(){return[...G(this,yi).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>UE(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>UE(t,r)):n}notify(t){Kn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Kn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Kn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},yi=new WeakMap,sC),yn,no,ro,Nc,Tc,so,Cc,Pc,iC,Wz=(iC=class{constructor(e={}){Ze(this,yn);Ze(this,no);Ze(this,ro);Ze(this,Nc);Ze(this,Tc);Ze(this,so);Ze(this,Cc);Ze(this,Pc);Re(this,yn,e.queryCache||new qz),Re(this,no,e.mutationCache||new Uz),Re(this,ro,e.defaultOptions||{}),Re(this,Nc,new Map),Re(this,Tc,new Map),Re(this,so,0)}mount(){Rh(this,so)._++,G(this,so)===1&&(Re(this,Cc,k0.subscribe(async e=>{e&&(await this.resumePausedMutations(),G(this,yn).onFocus())})),Re(this,Pc,Wm.subscribe(async e=>{e&&(await this.resumePausedMutations(),G(this,yn).onOnline())})))}unmount(){var e,t;Rh(this,so)._--,G(this,so)===0&&((e=G(this,Cc))==null||e.call(this),Re(this,Cc,void 0),(t=G(this,Pc))==null||t.call(this),Re(this,Pc,void 0))}isFetching(e){return G(this,yn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return G(this,no).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=G(this,yn).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=G(this,yn).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(io(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return G(this,yn).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=G(this,yn).get(r.queryHash),i=s==null?void 0:s.state.data,l=kz(t,i);if(l!==void 0)return G(this,yn).build(this,r).setData(l,{...n,manual:!0})}setQueriesData(e,t,n){return Kn.batch(()=>G(this,yn).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=G(this,yn).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=G(this,yn);Kn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=G(this,yn);return Kn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Kn.batch(()=>G(this,yn).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Er).catch(Er)}invalidateQueries(e,t={}){return Kn.batch(()=>(G(this,yn).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Kn.batch(()=>G(this,yn).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Er)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Er)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=G(this,yn).build(this,t);return n.isStaleByTime(io(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Er).catch(Er)}fetchInfiniteQuery(e){return e.behavior=QE(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Er).catch(Er)}ensureInfiniteQueryData(e){return e.behavior=QE(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Wm.isOnline()?G(this,no).resumePausedMutations():Promise.resolve()}getQueryCache(){return G(this,yn)}getMutationCache(){return G(this,no)}getDefaultOptions(){return G(this,ro)}setDefaultOptions(e){Re(this,ro,e)}setQueryDefaults(e,t){G(this,Nc).set(rl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...G(this,Nc).values()],n={};return t.forEach(r=>{Dd(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){G(this,Tc).set(rl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...G(this,Tc).values()],n={};return t.forEach(r=>{Dd(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...G(this,ro).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=j0(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===E0&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...G(this,ro).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){G(this,yn).clear(),G(this,no).clear()}},yn=new WeakMap,no=new WeakMap,ro=new WeakMap,Nc=new WeakMap,Tc=new WeakMap,so=new WeakMap,Cc=new WeakMap,Pc=new WeakMap,iC),oP=x.createContext(void 0),lP=e=>{const t=x.useContext(oP);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Hz=({client:e,children:t})=>(x.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(oP.Provider,{value:e,children:t})),cP=x.createContext(!1),Gz=()=>x.useContext(cP);cP.Provider;function Kz(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Yz=x.createContext(Kz()),Qz=()=>x.useContext(Yz),Xz=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Jz=e=>{x.useEffect(()=>{e.clearReset()},[e])},Zz=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||eP(n,[e.error,r])),e3=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},t3=(e,t)=>e.isLoading&&e.isFetching&&!t,n3=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,JE=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function r3(e,t,n){var m,g,y,w,b;const r=Gz(),s=Qz(),i=lP(n),l=i.defaultQueryOptions(e);(g=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||g.call(m,l),l._optimisticResults=r?"isRestoring":"optimistic",e3(l),Xz(l,s),Jz(s);const u=!i.getQueryCache().get(l.queryHash),[d]=x.useState(()=>new t(i,l)),f=d.getOptimisticResult(l),h=!r&&e.subscribed!==!1;if(x.useSyncExternalStore(x.useCallback(S=>{const _=h?d.subscribe(Kn.batchCalls(S)):Er;return d.updateResult(),_},[d,h]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),x.useEffect(()=>{d.setOptions(l)},[l,d]),n3(l,f))throw JE(l,d,s);if(Zz({result:f,errorResetBoundary:s,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw f.error;if((w=(y=i.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||w.call(y,l,f),l.experimental_prefetchInRender&&!nl&&t3(f,r)){const S=u?JE(l,d,s):(b=i.getQueryCache().get(l.queryHash))==null?void 0:b.promise;S==null||S.catch(Er).finally(()=>{d.updateResult()})}return l.notifyOnChangeProps?f:d.trackResult(f)}function _t(e,t){return r3(e,Lz,t)}function Tn(e,t){const n=lP(t),[r]=x.useState(()=>new Bz(n,e));x.useEffect(()=>{r.setOptions(e)},[r,e]);const s=x.useSyncExternalStore(x.useCallback(l=>r.subscribe(Kn.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=x.useCallback((l,u)=>{r.mutate(l,u).catch(Er)},[r]);if(s.error&&eP(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}let s3={data:""},i3=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||s3},a3=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,o3=/\/\*[^]*?\*\/|  +/g,ZE=/\n+/g,Ka=(e,t)=>{let n="",r="",s="";for(let i in e){let l=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+l+";":r+=i[1]=="f"?Ka(l,i):i+"{"+Ka(l,i[1]=="k"?"":t)+"}":typeof l=="object"?r+=Ka(l,t?t.replace(/([^,])+/g,u=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,u):u?u+" "+d:d)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ka.p?Ka.p(i,l):i+":"+l+";")}return n+(t&&s?t+"{"+s+"}":s)+r},Wi={},uP=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+uP(e[n]);return t}return e},l3=(e,t,n,r,s)=>{let i=uP(e),l=Wi[i]||(Wi[i]=(d=>{let f=0,h=11;for(;f<d.length;)h=101*h+d.charCodeAt(f++)>>>0;return"go"+h})(i));if(!Wi[l]){let d=i!==e?e:(f=>{let h,m,g=[{}];for(;h=a3.exec(f.replace(o3,""));)h[4]?g.shift():h[3]?(m=h[3].replace(ZE," ").trim(),g.unshift(g[0][m]=g[0][m]||{})):g[0][h[1]]=h[2].replace(ZE," ").trim();return g[0]})(e);Wi[l]=Ka(s?{["@keyframes "+l]:d}:d,n?"":"."+l)}let u=n&&Wi.g?Wi.g:null;return n&&(Wi.g=Wi[l]),((d,f,h,m)=>{m?f.data=f.data.replace(m,d):f.data.indexOf(d)===-1&&(f.data=h?d+f.data:f.data+d)})(Wi[l],t,r,u),l},c3=(e,t,n)=>e.reduce((r,s,i)=>{let l=t[i];if(l&&l.call){let u=l(n),d=u&&u.props&&u.props.className||/^go/.test(u)&&u;l=d?"."+d:u&&typeof u=="object"?u.props?"":Ka(u,""):u===!1?"":u}return r+s+(l??"")},"");function Lp(e){let t=this||{},n=e.call?e(t.p):e;return l3(n.unshift?n.raw?c3(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,i3(t.target),t.g,t.o,t.k)}let dP,Xx,Jx;Lp.bind({g:1});let aa=Lp.bind({k:1});function u3(e,t,n,r){Ka.p=t,dP=e,Xx=n,Jx=r}function po(e,t){let n=this||{};return function(){let r=arguments;function s(i,l){let u=Object.assign({},i),d=u.className||s.className;n.p=Object.assign({theme:Xx&&Xx()},u),n.o=/ *go\d+/.test(d),u.className=Lp.apply(n,r)+(d?" "+d:"");let f=e;return e[0]&&(f=u.as||e,delete u.as),Jx&&f[0]&&Jx(u),dP(f,u)}return s}}var d3=e=>typeof e=="function",Hm=(e,t)=>d3(e)?e(t):e,f3=(()=>{let e=0;return()=>(++e).toString()})(),fP=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),h3=20,T0="default",hP=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:r}=t;return hP(e,{type:e.toasts.find(l=>l.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(l=>l.id===s||s===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},Sm=[],mP={toasts:[],pausedAt:void 0,settings:{toastLimit:h3}},bi={},pP=(e,t=T0)=>{bi[t]=hP(bi[t]||mP,e),Sm.forEach(([n,r])=>{n===t&&r(bi[t])})},gP=e=>Object.keys(bi).forEach(t=>pP(e,t)),m3=e=>Object.keys(bi).find(t=>bi[t].toasts.some(n=>n.id===e)),Fp=(e=T0)=>t=>{pP(t,e)},p3={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},g3=(e={},t=T0)=>{let[n,r]=x.useState(bi[t]||mP),s=x.useRef(bi[t]);x.useEffect(()=>(s.current!==bi[t]&&r(bi[t]),Sm.push([t,r]),()=>{let l=Sm.findIndex(([u])=>u===t);l>-1&&Sm.splice(l,1)}),[t]);let i=n.toasts.map(l=>{var u,d,f;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((u=e[l.type])==null?void 0:u.removeDelay)||(e==null?void 0:e.removeDelay),duration:l.duration||((d=e[l.type])==null?void 0:d.duration)||(e==null?void 0:e.duration)||p3[l.type],style:{...e.style,...(f=e[l.type])==null?void 0:f.style,...l.style}}});return{...n,toasts:i}},y3=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||f3()}),df=e=>(t,n)=>{let r=y3(t,e,n);return Fp(r.toasterId||m3(r.id))({type:2,toast:r}),r.id},rr=(e,t)=>df("blank")(e,t);rr.error=df("error");rr.success=df("success");rr.loading=df("loading");rr.custom=df("custom");rr.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Fp(t)(n):gP(n)};rr.dismissAll=e=>rr.dismiss(void 0,e);rr.remove=(e,t)=>{let n={type:4,toastId:e};t?Fp(t)(n):gP(n)};rr.removeAll=e=>rr.remove(void 0,e);rr.promise=(e,t,n)=>{let r=rr.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?Hm(t.success,s):void 0;return i?rr.success(i,{id:r,...n,...n==null?void 0:n.success}):rr.dismiss(r),s}).catch(s=>{let i=t.error?Hm(t.error,s):void 0;i?rr.error(i,{id:r,...n,...n==null?void 0:n.error}):rr.dismiss(r)}),e};var v3=1e3,x3=(e,t="default")=>{let{toasts:n,pausedAt:r}=g3(e,t),s=x.useRef(new Map).current,i=x.useCallback((m,g=v3)=>{if(s.has(m))return;let y=setTimeout(()=>{s.delete(m),l({type:4,toastId:m})},g);s.set(m,y)},[]);x.useEffect(()=>{if(r)return;let m=Date.now(),g=n.map(y=>{if(y.duration===1/0)return;let w=(y.duration||0)+y.pauseDuration-(m-y.createdAt);if(w<0){y.visible&&rr.dismiss(y.id);return}return setTimeout(()=>rr.dismiss(y.id,t),w)});return()=>{g.forEach(y=>y&&clearTimeout(y))}},[n,r,t]);let l=x.useCallback(Fp(t),[t]),u=x.useCallback(()=>{l({type:5,time:Date.now()})},[l]),d=x.useCallback((m,g)=>{l({type:1,toast:{id:m,height:g}})},[l]),f=x.useCallback(()=>{r&&l({type:6,time:Date.now()})},[r,l]),h=x.useCallback((m,g)=>{let{reverseOrder:y=!1,gutter:w=8,defaultPosition:b}=g||{},S=n.filter(N=>(N.position||b)===(m.position||b)&&N.height),_=S.findIndex(N=>N.id===m.id),k=S.filter((N,T)=>T<_&&N.visible).length;return S.filter(N=>N.visible).slice(...y?[k+1]:[0,k]).reduce((N,T)=>N+(T.height||0)+w,0)},[n]);return x.useEffect(()=>{n.forEach(m=>{if(m.dismissed)i(m.id,m.removeDelay);else{let g=s.get(m.id);g&&(clearTimeout(g),s.delete(m.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:d,startPause:u,endPause:f,calculateOffset:h}}},w3=aa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,b3=aa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_3=aa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,S3=po("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${w3} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${b3} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${_3} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,j3=aa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,E3=po("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${j3} 1s linear infinite;
`,k3=aa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,N3=aa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,T3=po("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${k3} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${N3} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,C3=po("div")`
  position: absolute;
`,P3=po("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,A3=aa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,R3=po("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${A3} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,I3=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?x.createElement(R3,null,t):t:n==="blank"?null:x.createElement(P3,null,x.createElement(E3,{...r}),n!=="loading"&&x.createElement(C3,null,n==="error"?x.createElement(S3,{...r}):x.createElement(T3,{...r})))},O3=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,D3=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,M3="0%{opacity:0;} 100%{opacity:1;}",L3="0%{opacity:1;} 100%{opacity:0;}",F3=po("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,$3=po("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,V3=(e,t)=>{let n=e.includes("top")?1:-1,[r,s]=fP()?[M3,L3]:[O3(n),D3(n)];return{animation:t?`${aa(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${aa(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},z3=x.memo(({toast:e,position:t,style:n,children:r})=>{let s=e.height?V3(e.position||t||"top-center",e.visible):{opacity:0},i=x.createElement(I3,{toast:e}),l=x.createElement($3,{...e.ariaProps},Hm(e.message,e));return x.createElement(F3,{className:e.className,style:{...s,...n,...e.style}},typeof r=="function"?r({icon:i,message:l}):x.createElement(x.Fragment,null,i,l))});u3(x.createElement);var U3=({id:e,className:t,style:n,onHeightUpdate:r,children:s})=>{let i=x.useCallback(l=>{if(l){let u=()=>{let d=l.getBoundingClientRect().height;r(e,d)};u(),new MutationObserver(u).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return x.createElement("div",{ref:i,className:t,style:n},s)},B3=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:fP()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}},q3=Lp`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Wh=16,W3=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:l,containerClassName:u})=>{let{toasts:d,handlers:f}=x3(n,i);return x.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Wh,left:Wh,right:Wh,bottom:Wh,pointerEvents:"none",...l},className:u,onMouseEnter:f.startPause,onMouseLeave:f.endPause},d.map(h=>{let m=h.position||t,g=f.calculateOffset(h,{reverseOrder:e,gutter:r,defaultPosition:t}),y=B3(m,g);return x.createElement(U3,{id:h.id,key:h.id,onHeightUpdate:f.updateHeight,className:h.visible?q3:"",style:y},h.type==="custom"?Hm(h.message,h):s?s(h):x.createElement(z3,{toast:h,position:m}))}))};/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ek="popstate";function H3(e={}){function t(r,s){let{pathname:i,search:l,hash:u}=r.location;return Zx("",{pathname:i,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Md(s)}return K3(t,n,null,e)}function un(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function cs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function G3(){return Math.random().toString(36).substring(2,10)}function tk(e,t){return{usr:e.state,key:e.key,idx:t}}function Zx(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Bc(t):t,state:n,key:t&&t.key||r||G3()}}function Md({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Bc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function K3(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,l=s.history,u="POP",d=null,f=h();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function h(){return(l.state||{idx:null}).idx}function m(){u="POP";let S=h(),_=S==null?null:S-f;f=S,d&&d({action:u,location:b.location,delta:_})}function g(S,_){u="PUSH";let k=Zx(b.location,S,_);f=h()+1;let N=tk(k,f),T=b.createHref(k);try{l.pushState(N,"",T)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(T)}i&&d&&d({action:u,location:b.location,delta:1})}function y(S,_){u="REPLACE";let k=Zx(b.location,S,_);f=h();let N=tk(k,f),T=b.createHref(k);l.replaceState(N,"",T),i&&d&&d({action:u,location:b.location,delta:0})}function w(S){return Y3(S)}let b={get action(){return u},get location(){return e(s,l)},listen(S){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(ek,m),d=S,()=>{s.removeEventListener(ek,m),d=null}},createHref(S){return t(s,S)},createURL:w,encodeLocation(S){let _=w(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:y,go(S){return l.go(S)}};return b}function Y3(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),un(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Md(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function yP(e,t,n="/"){return Q3(e,t,n,!1)}function Q3(e,t,n,r){let s=typeof t=="string"?Bc(t):t,i=oa(s.pathname||"/",n);if(i==null)return null;let l=vP(e);X3(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=l5(i);u=a5(l[d],f,r)}return u}function vP(e,t=[],n=[],r="",s=!1){let i=(l,u,d=s,f)=>{let h={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&d)return;un(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let m=na([r,h.relativePath]),g=n.concat(h);l.children&&l.children.length>0&&(un(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),vP(l.children,t,g,m,d)),!(l.path==null&&!l.index)&&t.push({path:m,score:s5(m,l.index),routesMeta:g})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))i(l,u);else for(let f of xP(l.path))i(l,u,!0,f)}),t}function xP(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let l=xP(r.join("/")),u=[];return u.push(...l.map(d=>d===""?i:[i,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function X3(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:i5(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var J3=/^:[\w-]+$/,Z3=3,e5=2,t5=1,n5=10,r5=-2,nk=e=>e==="*";function s5(e,t){let n=e.split("/"),r=n.length;return n.some(nk)&&(r+=r5),t&&(r+=e5),n.filter(s=>!nk(s)).reduce((s,i)=>s+(J3.test(i)?Z3:i===""?t5:n5),r)}function i5(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function a5(e,t,n=!1){let{routesMeta:r}=e,s={},i="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],f=u===r.length-1,h=i==="/"?t:t.slice(i.length)||"/",m=Gm({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},h),g=d.route;if(!m&&f&&n&&!r[r.length-1].route.index&&(m=Gm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},h)),!m)return null;Object.assign(s,m.params),l.push({params:s,pathname:na([i,m.pathname]),pathnameBase:h5(na([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=na([i,m.pathnameBase]))}return l}function Gm(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=o5(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((f,{paramName:h,isOptional:m},g)=>{if(h==="*"){let w=u[g]||"";l=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const y=u[g];return m&&!y?f[h]=void 0:f[h]=(y||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:l,pattern:e}}function o5(e,t=!1,n=!0){cs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function l5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return cs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function oa(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var c5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,u5=e=>c5.test(e);function d5(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Bc(e):e,i;if(n)if(u5(n))i=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),cs(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${n}`)}n.startsWith("/")?i=rk(n.substring(1),"/"):i=rk(n,t)}else i=t;return{pathname:i,search:m5(r),hash:p5(s)}}function rk(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function cv(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function f5(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function C0(e){let t=f5(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function P0(e,t,n,r=!1){let s;typeof e=="string"?s=Bc(e):(s={...e},un(!s.pathname||!s.pathname.includes("?"),cv("?","pathname","search",s)),un(!s.pathname||!s.pathname.includes("#"),cv("#","pathname","hash",s)),un(!s.search||!s.search.includes("#"),cv("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,u;if(l==null)u=n;else{let m=t.length-1;if(!r&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}u=m>=0?t[m]:"/"}let d=d5(s,u),f=l&&l!=="/"&&l.endsWith("/"),h=(i||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||h)&&(d.pathname+="/"),d}var na=e=>e.join("/").replace(/\/\/+/g,"/"),h5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),m5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,p5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function g5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function y5(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var wP=["POST","PUT","PATCH","DELETE"];new Set(wP);var v5=["GET",...wP];new Set(v5);var qc=x.createContext(null);qc.displayName="DataRouter";var $p=x.createContext(null);$p.displayName="DataRouterState";x.createContext(!1);var bP=x.createContext({isTransitioning:!1});bP.displayName="ViewTransition";var x5=x.createContext(new Map);x5.displayName="Fetchers";var w5=x.createContext(null);w5.displayName="Await";var Ps=x.createContext(null);Ps.displayName="Navigation";var ff=x.createContext(null);ff.displayName="Location";var ri=x.createContext({outlet:null,matches:[],isDataRoute:!1});ri.displayName="Route";var A0=x.createContext(null);A0.displayName="RouteError";function b5(e,{relative:t}={}){un(Wc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=x.useContext(Ps),{hash:s,pathname:i,search:l}=hf(e,{relative:t}),u=i;return n!=="/"&&(u=i==="/"?n:na([n,i])),r.createHref({pathname:u,search:l,hash:s})}function Wc(){return x.useContext(ff)!=null}function si(){return un(Wc(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(ff).location}var _P="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function SP(e){x.useContext(Ps).static||x.useLayoutEffect(e)}function pl(){let{isDataRoute:e}=x.useContext(ri);return e?O5():_5()}function _5(){un(Wc(),"useNavigate() may be used only in the context of a <Router> component.");let e=x.useContext(qc),{basename:t,navigator:n}=x.useContext(Ps),{matches:r}=x.useContext(ri),{pathname:s}=si(),i=JSON.stringify(C0(r)),l=x.useRef(!1);return SP(()=>{l.current=!0}),x.useCallback((d,f={})=>{if(cs(l.current,_P),!l.current)return;if(typeof d=="number"){n.go(d);return}let h=P0(d,JSON.parse(i),s,f.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:na([t,h.pathname])),(f.replace?n.replace:n.push)(h,f.state,f)},[t,n,i,s,e])}x.createContext(null);function gle(){let{matches:e}=x.useContext(ri),t=e[e.length-1];return t?t.params:{}}function hf(e,{relative:t}={}){let{matches:n}=x.useContext(ri),{pathname:r}=si(),s=JSON.stringify(C0(n));return x.useMemo(()=>P0(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function S5(e,t){return jP(e,t)}function jP(e,t,n,r,s){var k;un(Wc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=x.useContext(Ps),{matches:l}=x.useContext(ri),u=l[l.length-1],d=u?u.params:{},f=u?u.pathname:"/",h=u?u.pathnameBase:"/",m=u&&u.route;{let N=m&&m.path||"";EP(f,!m||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let g=si(),y;if(t){let N=typeof t=="string"?Bc(t):t;un(h==="/"||((k=N.pathname)==null?void 0:k.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${N.pathname}" was given in the \`location\` prop.`),y=N}else y=g;let w=y.pathname||"/",b=w;if(h!=="/"){let N=h.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(N.length).join("/")}let S=yP(e,{pathname:b});cs(m||S!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),cs(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=T5(S&&S.map(N=>Object.assign({},N,{params:Object.assign({},d,N.params),pathname:na([h,i.encodeLocation?i.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:na([h,i.encodeLocation?i.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),l,n,r,s);return t&&_?x.createElement(ff.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},_):_}function j5(){let e=I5(),t=g5(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:i},"ErrorBoundary")," or"," ",x.createElement("code",{style:i},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),n?x.createElement("pre",{style:s},n):null,l)}var E5=x.createElement(j5,null),k5=class extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?x.createElement(ri.Provider,{value:this.props.routeContext},x.createElement(A0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function N5({routeContext:e,match:t,children:n}){let r=x.useContext(qc);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),x.createElement(ri.Provider,{value:e},n)}function T5(e,t=[],n=null,r=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,l=n==null?void 0:n.errors;if(l!=null){let h=i.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);un(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let u=!1,d=-1;if(n)for(let h=0;h<i.length;h++){let m=i[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:g,errors:y}=n,w=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!y||y[m.route.id]===void 0);if(m.route.lazy||w){u=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}let f=n&&r?(h,m)=>{var g,y;r(h,{location:n.location,params:((y=(g=n.matches)==null?void 0:g[0])==null?void 0:y.params)??{},unstable_pattern:y5(n.matches),errorInfo:m})}:void 0;return i.reduceRight((h,m,g)=>{let y,w=!1,b=null,S=null;n&&(y=l&&m.route.id?l[m.route.id]:void 0,b=m.route.errorElement||E5,u&&(d<0&&g===0?(EP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):d===g&&(w=!0,S=m.route.hydrateFallbackElement||null)));let _=t.concat(i.slice(0,g+1)),k=()=>{let N;return y?N=b:w?N=S:m.route.Component?N=x.createElement(m.route.Component,null):m.route.element?N=m.route.element:N=h,x.createElement(N5,{match:m,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:N})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?x.createElement(k5,{location:n.location,revalidation:n.revalidation,component:b,error:y,children:k(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:f}):k()},null)}function R0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C5(e){let t=x.useContext(qc);return un(t,R0(e)),t}function P5(e){let t=x.useContext($p);return un(t,R0(e)),t}function A5(e){let t=x.useContext(ri);return un(t,R0(e)),t}function I0(e){let t=A5(e),n=t.matches[t.matches.length-1];return un(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function R5(){return I0("useRouteId")}function I5(){var r;let e=x.useContext(A0),t=P5("useRouteError"),n=I0("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function O5(){let{router:e}=C5("useNavigate"),t=I0("useNavigate"),n=x.useRef(!1);return SP(()=>{n.current=!0}),x.useCallback(async(s,i={})=>{cs(n.current,_P),n.current&&(typeof s=="number"?await e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var sk={};function EP(e,t,n){!t&&!sk[e]&&(sk[e]=!0,cs(!1,n))}x.memo(D5);function D5({routes:e,future:t,state:n,unstable_onError:r}){return jP(e,void 0,n,r,t)}function Qs({to:e,replace:t,state:n,relative:r}){un(Wc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=x.useContext(Ps);cs(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=x.useContext(ri),{pathname:l}=si(),u=pl(),d=P0(e,C0(i),l,r==="path"),f=JSON.stringify(d);return x.useEffect(()=>{u(JSON.parse(f),{replace:t,state:n,relative:r})},[u,f,r,t,n]),null}function ut(e){un(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function M5({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:l}){un(!Wc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:u,navigator:s,static:i,unstable_useTransitions:l,future:{}}),[u,s,i,l]);typeof n=="string"&&(n=Bc(n));let{pathname:f="/",search:h="",hash:m="",state:g=null,key:y="default"}=n,w=x.useMemo(()=>{let b=oa(f,u);return b==null?null:{location:{pathname:b,search:h,hash:m,state:g,key:y},navigationType:r}},[u,f,h,m,g,y,r]);return cs(w!=null,`<Router basename="${u}"> is not able to match the URL "${f}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:x.createElement(Ps.Provider,{value:d},x.createElement(ff.Provider,{children:t,value:w}))}function L5({children:e,location:t}){return S5(ew(e),t)}function ew(e,t=[]){let n=[];return x.Children.forEach(e,(r,s)=>{if(!x.isValidElement(r))return;let i=[...t,s];if(r.type===x.Fragment){n.push.apply(n,ew(r.props.children,i));return}un(r.type===ut,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),un(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=ew(r.props.children,i)),n.push(l)}),n}var jm="get",Em="application/x-www-form-urlencoded";function Vp(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function F5(e){return Vp(e)&&e.tagName.toLowerCase()==="button"}function $5(e){return Vp(e)&&e.tagName.toLowerCase()==="form"}function V5(e){return Vp(e)&&e.tagName.toLowerCase()==="input"}function z5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function U5(e,t){return e.button===0&&(!t||t==="_self")&&!z5(e)}function tw(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function B5(e,t){let n=tw(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(i=>{n.append(s,i)})}),n}var Hh=null;function q5(){if(Hh===null)try{new FormData(document.createElement("form"),0),Hh=!1}catch{Hh=!0}return Hh}var W5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function uv(e){return e!=null&&!W5.has(e)?(cs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Em}"`),null):e}function H5(e,t){let n,r,s,i,l;if($5(e)){let u=e.getAttribute("action");r=u?oa(u,t):null,n=e.getAttribute("method")||jm,s=uv(e.getAttribute("enctype"))||Em,i=new FormData(e)}else if(F5(e)||V5(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(r=d?oa(d,t):null,n=e.getAttribute("formmethod")||u.getAttribute("method")||jm,s=uv(e.getAttribute("formenctype"))||uv(u.getAttribute("enctype"))||Em,i=new FormData(u,e),!q5()){let{name:f,type:h,value:m}=e;if(h==="image"){let g=f?`${f}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else f&&i.append(f,m)}}else{if(Vp(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=jm,r=null,s=Em,l=e}return i&&s==="text/plain"&&(l=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function O0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function G5(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&oa(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function K5(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Y5(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Q5(e,t,n){let r=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let l=await K5(i,n);return l.links?l.links():[]}return[]}));return eU(r.flat(1).filter(Y5).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function ik(e,t,n,r,s,i){let l=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,u=(d,f)=>{var h;return n[f].pathname!==d.pathname||((h=n[f].route.path)==null?void 0:h.endsWith("*"))&&n[f].params["*"]!==d.params["*"]};return i==="assets"?t.filter((d,f)=>l(d,f)||u(d,f)):i==="data"?t.filter((d,f)=>{var m;let h=r.routes[d.route.id];if(!h||!h.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let g=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function X5(e,t,{includeHydrateFallback:n}={}){return J5(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function J5(e){return[...new Set(e)]}function Z5(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function eU(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let i=JSON.stringify(Z5(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function kP(){let e=x.useContext(qc);return O0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function tU(){let e=x.useContext($p);return O0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var D0=x.createContext(void 0);D0.displayName="FrameworkContext";function NP(){let e=x.useContext(D0);return O0(e,"You must render this element inside a <HydratedRouter> element"),e}function nU(e,t){let n=x.useContext(D0),[r,s]=x.useState(!1),[i,l]=x.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:h,onTouchStart:m}=t,g=x.useRef(null);x.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let b=_=>{_.forEach(k=>{l(k.isIntersecting)})},S=new IntersectionObserver(b,{threshold:.5});return g.current&&S.observe(g.current),()=>{S.disconnect()}}},[e]),x.useEffect(()=>{if(r){let b=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(b)}}},[r]);let y=()=>{s(!0)},w=()=>{s(!1),l(!1)};return n?e!=="intent"?[i,g,{}]:[i,g,{onFocus:Hu(u,y),onBlur:Hu(d,w),onMouseEnter:Hu(f,y),onMouseLeave:Hu(h,w),onTouchStart:Hu(m,y)}]:[!1,g,{}]}function Hu(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function rU({page:e,...t}){let{router:n}=kP(),r=x.useMemo(()=>yP(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?x.createElement(iU,{page:e,matches:r,...t}):null}function sU(e){let{manifest:t,routeModules:n}=NP(),[r,s]=x.useState([]);return x.useEffect(()=>{let i=!1;return Q5(e,t,n).then(l=>{i||s(l)}),()=>{i=!0}},[e,t,n]),r}function iU({page:e,matches:t,...n}){let r=si(),{manifest:s,routeModules:i}=NP(),{basename:l}=kP(),{loaderData:u,matches:d}=tU(),f=x.useMemo(()=>ik(e,t,d,s,r,"data"),[e,t,d,s,r]),h=x.useMemo(()=>ik(e,t,d,s,r,"assets"),[e,t,d,s,r]),m=x.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let w=new Set,b=!1;if(t.forEach(_=>{var N;let k=s.routes[_.route.id];!k||!k.hasLoader||(!f.some(T=>T.route.id===_.route.id)&&_.route.id in u&&((N=i[_.route.id])!=null&&N.shouldRevalidate)||k.hasClientLoader?b=!0:w.add(_.route.id))}),w.size===0)return[];let S=G5(e,l,"data");return b&&w.size>0&&S.searchParams.set("_routes",t.filter(_=>w.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[l,u,r,s,f,t,e,i]),g=x.useMemo(()=>X5(h,s),[h,s]),y=sU(h);return x.createElement(x.Fragment,null,m.map(w=>x.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),g.map(w=>x.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),y.map(({key:w,link:b})=>x.createElement("link",{key:w,nonce:n.nonce,...b})))}function aU(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var TP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{TP&&(window.__reactRouterVersion="7.10.1")}catch{}function oU({basename:e,children:t,unstable_useTransitions:n,window:r}){let s=x.useRef();s.current==null&&(s.current=H3({window:r,v5Compat:!0}));let i=s.current,[l,u]=x.useState({action:i.action,location:i.location}),d=x.useCallback(f=>{n===!1?u(f):x.startTransition(()=>u(f))},[n]);return x.useLayoutEffect(()=>i.listen(d),[i,d]),x.createElement(M5,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:i,unstable_useTransitions:n===!0})}var CP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,as=x.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:l,state:u,target:d,to:f,preventScrollReset:h,viewTransition:m,...g},y){let{basename:w,unstable_useTransitions:b}=x.useContext(Ps),S=typeof f=="string"&&CP.test(f),_,k=!1;if(typeof f=="string"&&S&&(_=f,TP))try{let K=new URL(window.location.href),H=f.startsWith("//")?new URL(K.protocol+f):new URL(f),z=oa(H.pathname,w);H.origin===K.origin&&z!=null?f=z+H.search+H.hash:k=!0}catch{cs(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=b5(f,{relative:s}),[T,P,R]=nU(r,g),M=dU(f,{replace:l,state:u,target:d,preventScrollReset:h,relative:s,viewTransition:m,unstable_useTransitions:b});function A(K){t&&t(K),K.defaultPrevented||M(K)}let W=x.createElement("a",{...g,...R,href:_||N,onClick:k||i?t:A,ref:aU(y,P),target:d,"data-discover":!S&&n==="render"?"true":void 0});return T&&!S?x.createElement(x.Fragment,null,W,x.createElement(rU,{page:N})):W});as.displayName="Link";var lU=x.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:l,viewTransition:u,children:d,...f},h){let m=hf(l,{relative:f.relative}),g=si(),y=x.useContext($p),{navigator:w,basename:b}=x.useContext(Ps),S=y!=null&&gU(m)&&u===!0,_=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,k=g.pathname,N=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(k=k.toLowerCase(),N=N?N.toLowerCase():null,_=_.toLowerCase()),N&&b&&(N=oa(N,b)||N);const T=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let P=k===_||!s&&k.startsWith(_)&&k.charAt(T)==="/",R=N!=null&&(N===_||!s&&N.startsWith(_)&&N.charAt(_.length)==="/"),M={isActive:P,isPending:R,isTransitioning:S},A=P?t:void 0,W;typeof r=="function"?W=r(M):W=[r,P?"active":null,R?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let K=typeof i=="function"?i(M):i;return x.createElement(as,{...f,"aria-current":A,className:W,ref:h,style:K,to:l,viewTransition:u},typeof d=="function"?d(M):d)});lU.displayName="NavLink";var cU=x.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:i,method:l=jm,action:u,onSubmit:d,relative:f,preventScrollReset:h,viewTransition:m,...g},y)=>{let{unstable_useTransitions:w}=x.useContext(Ps),b=mU(),S=pU(u,{relative:f}),_=l.toLowerCase()==="get"?"get":"post",k=typeof u=="string"&&CP.test(u),N=T=>{if(d&&d(T),T.defaultPrevented)return;T.preventDefault();let P=T.nativeEvent.submitter,R=(P==null?void 0:P.getAttribute("formmethod"))||l,M=()=>b(P||T.currentTarget,{fetcherKey:t,method:R,navigate:n,replace:s,state:i,relative:f,preventScrollReset:h,viewTransition:m});w&&n!==!1?x.startTransition(()=>M()):M()};return x.createElement("form",{ref:y,method:_,action:S,onSubmit:r?d:N,...g,"data-discover":!k&&e==="render"?"true":void 0})});cU.displayName="Form";function uU(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PP(e){let t=x.useContext(qc);return un(t,uU(e)),t}function dU(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:l,unstable_useTransitions:u}={}){let d=pl(),f=si(),h=hf(e,{relative:i});return x.useCallback(m=>{if(U5(m,t)){m.preventDefault();let g=n!==void 0?n:Md(f)===Md(h),y=()=>d(e,{replace:g,state:r,preventScrollReset:s,relative:i,viewTransition:l});u?x.startTransition(()=>y()):y()}},[f,d,h,n,r,t,e,s,i,l,u])}function yle(e){cs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=x.useRef(tw(e)),n=x.useRef(!1),r=si(),s=x.useMemo(()=>B5(r.search,n.current?null:t.current),[r.search]),i=pl(),l=x.useCallback((u,d)=>{const f=tw(typeof u=="function"?u(new URLSearchParams(s)):u);n.current=!0,i("?"+f,d)},[i,s]);return[s,l]}var fU=0,hU=()=>`__${String(++fU)}__`;function mU(){let{router:e}=PP("useSubmit"),{basename:t}=x.useContext(Ps),n=R5(),r=e.fetch,s=e.navigate;return x.useCallback(async(i,l={})=>{let{action:u,method:d,encType:f,formData:h,body:m}=H5(i,t);if(l.navigate===!1){let g=l.fetcherKey||hU();await r(g,n,l.action||u,{preventScrollReset:l.preventScrollReset,formData:h,body:m,formMethod:l.method||d,formEncType:l.encType||f,flushSync:l.flushSync})}else await s(l.action||u,{preventScrollReset:l.preventScrollReset,formData:h,body:m,formMethod:l.method||d,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,t,n])}function pU(e,{relative:t}={}){let{basename:n}=x.useContext(Ps),r=x.useContext(ri);un(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...hf(e||".",{relative:t})},l=si();if(e==null){i.search=l.search;let u=new URLSearchParams(i.search),d=u.getAll("index");if(d.some(h=>h==="")){u.delete("index"),d.filter(m=>m).forEach(m=>u.append("index",m));let h=u.toString();i.search=h?`?${h}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:na([n,i.pathname])),Md(i)}function gU(e,{relative:t}={}){let n=x.useContext(bP);un(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=PP("useViewTransitionState"),s=hf(e,{relative:t});if(!n.isTransitioning)return!1;let i=oa(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=oa(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Gm(s.pathname,l)!=null||Gm(s.pathname,i)!=null}var mf=cC();const AP=ho(mf),vt="/api",RP=()=>vt,ak={admin:"system_admin"},Ic={parent:{id:"parent",label:"Parent/Guardian",defaultPath:"/parent/dashboard",scopes:["core:dashboard","content:read","child:read","messages:basic"]},teacher:{id:"teacher",label:"Teacher",defaultPath:"/teacher/dashboard",inherits:["parent"],scopes:["core:dashboard","classrooms:manage","assignments:manage","messages:educator"]},school_admin:{id:"school_admin",label:"School Admin",defaultPath:"/admin",inherits:["teacher"],scopes:["core:dashboard","org:manage","users:manage","reporting:view","safety:review","tenant:manage","directory:manage"]},district_admin:{id:"district_admin",label:"District Admin",defaultPath:"/admin",inherits:["school_admin"],scopes:["district:manage","reporting:district"]},system_admin:{id:"system_admin",label:"System Admin",defaultPath:"/admin",inherits:["district_admin"],scopes:["system:manage","feature-flags:manage"]},partner:{id:"partner",label:"Partner",defaultPath:"/partners",scopes:["core:dashboard","partner:portal","partner:resources","partner:submissions"]}},Km="parent";function Hc(e){if(!e)return Km;const t=e.toLowerCase();return t in ak?ak[t]:t in Ic?t:Km}function yU(e){const t=Hc(e);return Ic[t]||Ic[Km]}function IP(e,t=new Set){if(t.has(e))return[];t.add(e);const n=Ic[e];if(!n)return[];const r=(n.inherits||[]).flatMap(s=>IP(s,t));return[...new Set([...n.scopes,...r])]}function vU(e){const t=Hc(e);return IP(t)}function OP(e,t){const n=Hc(t);if(e===n)return!0;const r=Ic[e];return r!=null&&r.inherits?r.inherits.some(s=>OP(s,n)):!1}function ok({role:e,allowedRoles:t,requiredScopes:n}){const r=Hc(e);if(!(!t||t.length===0||t.some(l=>OP(r,l))))return!1;const i=vU(r);return n&&n.length>0?n.every(l=>i.includes(l)):!0}function zp(e){return yU(e).defaultPath||Ic[Km].defaultPath}function xU(e){var r,s;if(!e)return;const n=(typeof((r=e==null?void 0:e.metadata)==null?void 0:r.preferred_active_role)=="string"?e.metadata.preferred_active_role:typeof((s=e==null?void 0:e.metadata)==null?void 0:s.role)=="string"?e.metadata.role:void 0)||(Array.isArray(e==null?void 0:e.roles)&&typeof e.roles[0]=="string"?e.roles[0]:void 0)||(typeof(e==null?void 0:e.defaultRole)=="string"?e.defaultRole:void 0);return Hc(n)}function Gc(){const e=Oi();return x.useMemo(()=>xU(e),[e])}const wU="http://localhost:1337",Nt=new az({backendUrl:wU}),lk=Ii("graphql");async function Hr({query:e,variables:t,headers:n={}}){try{const{data:r,error:s}=await Nt.graphql.request(e,t,n);if(s){const i=s.message||"We could not complete your request. Please try again.";throw lk.error("GraphQL request failed",s),new Error(i,{cause:s})}return r}catch(r){throw lk.error("GraphQL request exception",r),r}}async function Gt(e,t,n={}){return Hr({query:e,variables:t,headers:n})}Gt.request=function(t,n,r={}){return Nt.graphql.request(t,n,r)};async function bU(e){var r;const n=await Hr({query:`query GetProfile($userId: uuid!) {
    profiles(where: { user_id: { _eq: $userId } }, limit: 1) {
      id
      user_id
      full_name
      app_role
      organization_id
      school_id
    }
  }`,variables:{userId:e}});return((r=n==null?void 0:n.profiles)==null?void 0:r[0])||null}async function _U(e){const n=await Hr({query:`mutation InsertProfile($input: profiles_insert_input!) {
    insert_profiles_one(object: $input) {
      id
      user_id
      full_name
      app_role
      organization_id
      school_id
    }
  }`,variables:{input:e}});return n==null?void 0:n.insert_profiles_one}const DP=x.createContext({organizationId:null,schoolId:null,loading:!0});function SU(e){if(!e)return null;const t=e.split(".");if(t.length<2)return null;try{return JSON.parse(atob(t[1].replace(/-/g,"+").replace(/_/g,"/")))}catch(n){return Ad.error("Failed to decode access token",n),null}}function jU(e,t){const n=(e==null?void 0:e.metadata)??{},r=t&&(t["https://hasura.io/jwt/claims"]||t["https://nhost.io/jwt/claims"])||{},s=n.organization_id||n.org_id||r["x-hasura-organization-id"]||r["x-hasura-org-id"]||null,i=n.school_id||r["x-hasura-school-id"]||null;return{organizationId:s,schoolId:i}}function EU({children:e}){const{isLoading:t}=ma(),n=Oi(),[r,s]=x.useState({organizationId:null,schoolId:null,loading:!0});x.useEffect(()=>{let l=!0;return(async()=>{if(!t){if(!n){l&&s({organizationId:null,schoolId:null,loading:!1});return}try{const u=await Nt.auth.getAccessToken(),d=SU(u),f=jU(n,d);let h={organizationId:null,schoolId:null};try{const m=await bU(n.id);h={organizationId:(m==null?void 0:m.organization_id)??null,schoolId:(m==null?void 0:m.school_id)??null}}catch(m){Ad.error("Failed to fetch user profile for tenant resolution",m),h={organizationId:null,schoolId:null}}l&&s({organizationId:h.organizationId||f.organizationId,schoolId:h.schoolId||f.schoolId,loading:!1})}catch(u){Ad.error("TenantProvider encountered an error resolving tenant info",u),l&&s({organizationId:null,schoolId:null,loading:!1})}}})(),()=>{l=!1}},[t,n]);const i=x.useMemo(()=>r,[r.organizationId,r.schoolId,r.loading]);return a.jsx(DP.Provider,{value:i,children:e})}function gl(){return x.useContext(DP)}function MP(){const{isAuthenticated:e}=ma(),t=Oi(),n=Gc(),r=gl(),[s,i]=x.useState(!0),[l,u]=x.useState({submissions:[],incentives:[],assignments:[]}),[d,f]=x.useState(null);x.useEffect(()=>{if(!e||r.loading||!r.organizationId)return;(async()=>{i(!0);try{const g=await Nt.auth.getAccessToken(),y={};g&&(y.authorization=`Bearer ${g}`),y["x-teachmo-org-id"]=r.organizationId,r.schoolId&&(y["x-teachmo-school-id"]=r.schoolId);const[w,b,S]=await Promise.all([fetch(`${vt}/submissions`,{headers:y}).then(_=>_.json()),fetch(`${vt}/incentives`,{headers:y}).then(_=>_.json()),fetch(`${vt}/assignments`).then(_=>_.json())]);u({submissions:w,incentives:b,assignments:S}),f(null)}catch(g){f(g)}finally{i(!1)}})()},[e,r.loading,r.organizationId,r.schoolId]);const h=x.useMemo(()=>l.submissions.filter(m=>m.status==="pending"),[l.submissions]);return e?a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("header",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-gray-500",children:["Logged in as ",t==null?void 0:t.email]}),a.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Family dashboard"}),a.jsxs("p",{className:"text-gray-600",children:["Role detected: ",n]})]})}),s&&a.jsx("p",{className:"text-gray-600",children:"Loading your latest updates"}),d&&a.jsxs("p",{className:"text-red-600",role:"alert",children:["Unable to load updates. ",d.message]}),!s&&!d&&a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"New assignments"}),a.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Pulled from the Teachmo backend API."}),a.jsxs("ul",{className:"space-y-2",children:[l.assignments.map(m=>a.jsxs("li",{className:"rounded-lg bg-slate-50 p-3",children:[a.jsx("p",{className:"font-medium text-gray-900",children:m.title}),a.jsx("p",{className:"text-sm text-gray-600",children:m.description})]},m.id)),l.assignments.length===0&&a.jsx("li",{className:"text-sm text-gray-500",children:"No assignments yet."})]})]}),a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Partner submissions"}),a.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Monitor ideas waiting for review."}),a.jsxs("ul",{className:"space-y-2",children:[h.map(m=>a.jsxs("li",{className:"rounded-lg bg-amber-50 p-3 border border-amber-100",children:[a.jsx("p",{className:"font-medium text-amber-900",children:m.title}),a.jsx("p",{className:"text-sm text-amber-800",children:m.description})]},m.id)),h.length===0&&a.jsx("li",{className:"text-sm text-gray-500",children:"You have no pending submissions."})]})]}),a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Open incentives"}),a.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Claim rewards for your organization."}),a.jsxs("ul",{className:"space-y-2",children:[l.incentives.map(m=>a.jsxs("li",{className:"rounded-lg bg-green-50 p-3 border border-green-100",children:[a.jsx("p",{className:"font-medium text-green-900",children:m.title}),a.jsxs("p",{className:"text-sm text-green-800",children:["Value: $",m.value]})]},m.id)),l.incentives.length===0&&a.jsx("li",{className:"text-sm text-gray-500",children:"No incentive programs are active."})]})]})]})]}):a.jsx(Qs,{to:"/",replace:!0})}const kU=Object.freeze(Object.defineProperty({__proto__:null,default:MP},Symbol.toStringTag,{value:"Module"}));function vr(){const e=uf();return _t({queryKey:["tenant-scope",e],enabled:!!e,queryFn:async()=>{var s;if(!e)return null;const t=await Gt(`query TenantScope($userId: uuid!) {
          profiles(where: { user_id: { _eq: $userId } }, limit: 1) {
            id
            user_id
            full_name
            app_role
            organization_id
            school_id
          }
          user_profiles_by_pk(user_id: $userId) {
            user_id
            full_name
            role
            district_id
            school_id
          }
        }`,{userId:e}),n=((s=t==null?void 0:t.profiles)==null?void 0:s[0])??null,r=(t==null?void 0:t.user_profiles_by_pk)??null;return{userId:e,profileId:(n==null?void 0:n.id)??null,fullName:(n==null?void 0:n.full_name)??(r==null?void 0:r.full_name)??null,role:(n==null?void 0:n.app_role)??(r==null?void 0:r.role)??null,organizationId:(n==null?void 0:n.organization_id)??null,districtId:(r==null?void 0:r.district_id)??null,schoolId:(n==null?void 0:n.school_id)??(r==null?void 0:r.school_id)??null}}})}function LP(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=LP(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function FP(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=LP(e))&&(r&&(r+=" "),r+=t);return r}const NU=(e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n},TU=(e,t)=>({classGroupId:e,validator:t}),$P=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),Ym="-",ck=[],CU="arbitrary..",PU=e=>{const t=RU(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return AU(l);const u=l.split(Ym),d=u[0]===""&&u.length>1?1:0;return VP(u,d,t)},getConflictingClassGroupIds:(l,u)=>{if(u){const d=r[l],f=n[l];return d?f?NU(f,d):d:f||ck}return n[l]||ck}}},VP=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const s=e[t],i=n.nextPart.get(s);if(i){const f=VP(e,t+1,i);if(f)return f}const l=n.validators;if(l===null)return;const u=t===0?e.join(Ym):e.slice(t).join(Ym),d=l.length;for(let f=0;f<d;f++){const h=l[f];if(h.validator(u))return h.classGroupId}},AU=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?CU+r:void 0})(),RU=e=>{const{theme:t,classGroups:n}=e;return IU(n,t)},IU=(e,t)=>{const n=$P();for(const r in e){const s=e[r];M0(s,n,r,t)}return n},M0=(e,t,n,r)=>{const s=e.length;for(let i=0;i<s;i++){const l=e[i];OU(l,t,n,r)}},OU=(e,t,n,r)=>{if(typeof e=="string"){DU(e,t,n);return}if(typeof e=="function"){MU(e,t,n,r);return}LU(e,t,n,r)},DU=(e,t,n)=>{const r=e===""?t:zP(t,e);r.classGroupId=n},MU=(e,t,n,r)=>{if(FU(e)){M0(e(r),t,n,r);return}t.validators===null&&(t.validators=[]),t.validators.push(TU(n,e))},LU=(e,t,n,r)=>{const s=Object.entries(e),i=s.length;for(let l=0;l<i;l++){const[u,d]=s[l];M0(d,zP(t,u),n,r)}},zP=(e,t)=>{let n=e;const r=t.split(Ym),s=r.length;for(let i=0;i<s;i++){const l=r[i];let u=n.nextPart.get(l);u||(u=$P(),n.nextPart.set(l,u)),n=u}return n},FU=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,$U=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const s=(i,l)=>{n[i]=l,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(i){let l=n[i];if(l!==void 0)return l;if((l=r[i])!==void 0)return s(i,l),l},set(i,l){i in n?n[i]=l:s(i,l)}}},nw="!",uk=":",VU=[],dk=(e,t,n,r,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),zU=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const i=[];let l=0,u=0,d=0,f;const h=s.length;for(let b=0;b<h;b++){const S=s[b];if(l===0&&u===0){if(S===uk){i.push(s.slice(d,b)),d=b+1;continue}if(S==="/"){f=b;continue}}S==="["?l++:S==="]"?l--:S==="("?u++:S===")"&&u--}const m=i.length===0?s:s.slice(d);let g=m,y=!1;m.endsWith(nw)?(g=m.slice(0,-1),y=!0):m.startsWith(nw)&&(g=m.slice(1),y=!0);const w=f&&f>d?f-d:void 0;return dk(i,y,g,w)};if(t){const s=t+uk,i=r;r=l=>l.startsWith(s)?i(l.slice(s.length)):dk(VU,!1,l,void 0,!0)}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},UU=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,r)=>{t.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let i=0;i<n.length;i++){const l=n[i],u=l[0]==="[",d=t.has(l);u||d?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(l)):s.push(l)}return s.length>0&&(s.sort(),r.push(...s)),r}},BU=e=>({cache:$U(e.cacheSize),parseClassName:zU(e),sortModifiers:UU(e),...PU(e)}),qU=/\s+/,WU=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=t,l=[],u=e.trim().split(qU);let d="";for(let f=u.length-1;f>=0;f-=1){const h=u[f],{isExternal:m,modifiers:g,hasImportantModifier:y,baseClassName:w,maybePostfixModifierPosition:b}=n(h);if(m){d=h+(d.length>0?" "+d:d);continue}let S=!!b,_=r(S?w.substring(0,b):w);if(!_){if(!S){d=h+(d.length>0?" "+d:d);continue}if(_=r(w),!_){d=h+(d.length>0?" "+d:d);continue}S=!1}const k=g.length===0?"":g.length===1?g[0]:i(g).join(":"),N=y?k+nw:k,T=N+_;if(l.indexOf(T)>-1)continue;l.push(T);const P=s(_,S);for(let R=0;R<P.length;++R){const M=P[R];l.push(N+M)}d=h+(d.length>0?" "+d:d)}return d},HU=(...e)=>{let t=0,n,r,s="";for(;t<e.length;)(n=e[t++])&&(r=UP(n))&&(s&&(s+=" "),s+=r);return s},UP=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=UP(e[r]))&&(n&&(n+=" "),n+=t);return n},GU=(e,...t)=>{let n,r,s,i;const l=d=>{const f=t.reduce((h,m)=>m(h),e());return n=BU(f),r=n.cache.get,s=n.cache.set,i=u,u(d)},u=d=>{const f=r(d);if(f)return f;const h=WU(d,n);return s(d,h),h};return i=l,(...d)=>i(HU(...d))},KU=[],qn=e=>{const t=n=>n[e]||KU;return t.isThemeGetter=!0,t},BP=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,qP=/^\((?:(\w[\w-]*):)?(.+)\)$/i,YU=/^\d+\/\d+$/,QU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,XU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,JU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,ZU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hl=e=>YU.test(e),St=e=>!!e&&!Number.isNaN(Number(e)),Fa=e=>!!e&&Number.isInteger(Number(e)),dv=e=>e.endsWith("%")&&St(e.slice(0,-1)),Hi=e=>QU.test(e),tB=()=>!0,nB=e=>XU.test(e)&&!JU.test(e),WP=()=>!1,rB=e=>ZU.test(e),sB=e=>eB.test(e),iB=e=>!Ge(e)&&!Ke(e),aB=e=>Kc(e,KP,WP),Ge=e=>BP.test(e),Oo=e=>Kc(e,YP,nB),fv=e=>Kc(e,dB,St),fk=e=>Kc(e,HP,WP),oB=e=>Kc(e,GP,sB),Gh=e=>Kc(e,QP,rB),Ke=e=>qP.test(e),Gu=e=>Yc(e,YP),lB=e=>Yc(e,fB),hk=e=>Yc(e,HP),cB=e=>Yc(e,KP),uB=e=>Yc(e,GP),Kh=e=>Yc(e,QP,!0),Kc=(e,t,n)=>{const r=BP.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Yc=(e,t,n=!1)=>{const r=qP.exec(e);return r?r[1]?t(r[1]):n:!1},HP=e=>e==="position"||e==="percentage",GP=e=>e==="image"||e==="url",KP=e=>e==="length"||e==="size"||e==="bg-size",YP=e=>e==="length",dB=e=>e==="number",fB=e=>e==="family-name",QP=e=>e==="shadow",hB=()=>{const e=qn("color"),t=qn("font"),n=qn("text"),r=qn("font-weight"),s=qn("tracking"),i=qn("leading"),l=qn("breakpoint"),u=qn("container"),d=qn("spacing"),f=qn("radius"),h=qn("shadow"),m=qn("inset-shadow"),g=qn("text-shadow"),y=qn("drop-shadow"),w=qn("blur"),b=qn("perspective"),S=qn("aspect"),_=qn("ease"),k=qn("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],P=()=>[...T(),Ke,Ge],R=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],A=()=>[Ke,Ge,d],W=()=>[Hl,"full","auto",...A()],K=()=>[Fa,"none","subgrid",Ke,Ge],H=()=>["auto",{span:["full",Fa,Ke,Ge]},Fa,Ke,Ge],z=()=>[Fa,"auto",Ke,Ge],L=()=>["auto","min","max","fr",Ke,Ge],B=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Q=()=>["start","end","center","stretch","center-safe","end-safe"],q=()=>["auto",...A()],F=()=>[Hl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],D=()=>[e,Ke,Ge],X=()=>[...T(),hk,fk,{position:[Ke,Ge]}],I=()=>["no-repeat",{repeat:["","x","y","space","round"]}],V=()=>["auto","cover","contain",cB,aB,{size:[Ke,Ge]}],Z=()=>[dv,Gu,Oo],O=()=>["","none","full",f,Ke,Ge],ce=()=>["",St,Gu,Oo],he=()=>["solid","dashed","dotted","double"],me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ce=()=>[St,dv,hk,fk],ge=()=>["","none",w,Ke,Ge],$e=()=>["none",St,Ke,Ge],ne=()=>["none",St,Ke,Ge],We=()=>[St,Ke,Ge],Ve=()=>[Hl,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Hi],breakpoint:[Hi],color:[tB],container:[Hi],"drop-shadow":[Hi],ease:["in","out","in-out"],font:[iB],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Hi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Hi],shadow:[Hi],spacing:["px",St],text:[Hi],"text-shadow":[Hi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Hl,Ge,Ke,S]}],container:["container"],columns:[{columns:[St,Ge,Ke,u]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:P()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:W()}],"inset-x":[{"inset-x":W()}],"inset-y":[{"inset-y":W()}],start:[{start:W()}],end:[{end:W()}],top:[{top:W()}],right:[{right:W()}],bottom:[{bottom:W()}],left:[{left:W()}],visibility:["visible","invisible","collapse"],z:[{z:[Fa,"auto",Ke,Ge]}],basis:[{basis:[Hl,"full","auto",u,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[St,Hl,"auto","initial","none",Ge]}],grow:[{grow:["",St,Ke,Ge]}],shrink:[{shrink:["",St,Ke,Ge]}],order:[{order:[Fa,"first","last","none",Ke,Ge]}],"grid-cols":[{"grid-cols":K()}],"col-start-end":[{col:H()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":K()}],"row-start-end":[{row:H()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":L()}],"auto-rows":[{"auto-rows":L()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...B(),"normal"]}],"justify-items":[{"justify-items":[...Q(),"normal"]}],"justify-self":[{"justify-self":["auto",...Q()]}],"align-content":[{content:["normal",...B()]}],"align-items":[{items:[...Q(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Q(),{baseline:["","last"]}]}],"place-content":[{"place-content":B()}],"place-items":[{"place-items":[...Q(),"baseline"]}],"place-self":[{"place-self":["auto",...Q()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:q()}],mx:[{mx:q()}],my:[{my:q()}],ms:[{ms:q()}],me:[{me:q()}],mt:[{mt:q()}],mr:[{mr:q()}],mb:[{mb:q()}],ml:[{ml:q()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:F()}],w:[{w:[u,"screen",...F()]}],"min-w":[{"min-w":[u,"screen","none",...F()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...F()]}],h:[{h:["screen","lh",...F()]}],"min-h":[{"min-h":["screen","lh","none",...F()]}],"max-h":[{"max-h":["screen","lh",...F()]}],"font-size":[{text:["base",n,Gu,Oo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ke,fv]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",dv,Ge]}],"font-family":[{font:[lB,Ge,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ke,Ge]}],"line-clamp":[{"line-clamp":[St,"none",Ke,fv]}],leading:[{leading:[i,...A()]}],"list-image":[{"list-image":["none",Ke,Ge]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ke,Ge]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:D()}],"text-color":[{text:D()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:[St,"from-font","auto",Ke,Oo]}],"text-decoration-color":[{decoration:D()}],"underline-offset":[{"underline-offset":[St,"auto",Ke,Ge]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ke,Ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ke,Ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:X()}],"bg-repeat":[{bg:I()}],"bg-size":[{bg:V()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Fa,Ke,Ge],radial:["",Ke,Ge],conic:[Fa,Ke,Ge]},uB,oB]}],"bg-color":[{bg:D()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:D()}],"gradient-via":[{via:D()}],"gradient-to":[{to:D()}],rounded:[{rounded:O()}],"rounded-s":[{"rounded-s":O()}],"rounded-e":[{"rounded-e":O()}],"rounded-t":[{"rounded-t":O()}],"rounded-r":[{"rounded-r":O()}],"rounded-b":[{"rounded-b":O()}],"rounded-l":[{"rounded-l":O()}],"rounded-ss":[{"rounded-ss":O()}],"rounded-se":[{"rounded-se":O()}],"rounded-ee":[{"rounded-ee":O()}],"rounded-es":[{"rounded-es":O()}],"rounded-tl":[{"rounded-tl":O()}],"rounded-tr":[{"rounded-tr":O()}],"rounded-br":[{"rounded-br":O()}],"rounded-bl":[{"rounded-bl":O()}],"border-w":[{border:ce()}],"border-w-x":[{"border-x":ce()}],"border-w-y":[{"border-y":ce()}],"border-w-s":[{"border-s":ce()}],"border-w-e":[{"border-e":ce()}],"border-w-t":[{"border-t":ce()}],"border-w-r":[{"border-r":ce()}],"border-w-b":[{"border-b":ce()}],"border-w-l":[{"border-l":ce()}],"divide-x":[{"divide-x":ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...he(),"hidden","none"]}],"divide-style":[{divide:[...he(),"hidden","none"]}],"border-color":[{border:D()}],"border-color-x":[{"border-x":D()}],"border-color-y":[{"border-y":D()}],"border-color-s":[{"border-s":D()}],"border-color-e":[{"border-e":D()}],"border-color-t":[{"border-t":D()}],"border-color-r":[{"border-r":D()}],"border-color-b":[{"border-b":D()}],"border-color-l":[{"border-l":D()}],"divide-color":[{divide:D()}],"outline-style":[{outline:[...he(),"none","hidden"]}],"outline-offset":[{"outline-offset":[St,Ke,Ge]}],"outline-w":[{outline:["",St,Gu,Oo]}],"outline-color":[{outline:D()}],shadow:[{shadow:["","none",h,Kh,Gh]}],"shadow-color":[{shadow:D()}],"inset-shadow":[{"inset-shadow":["none",m,Kh,Gh]}],"inset-shadow-color":[{"inset-shadow":D()}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:D()}],"ring-offset-w":[{"ring-offset":[St,Oo]}],"ring-offset-color":[{"ring-offset":D()}],"inset-ring-w":[{"inset-ring":ce()}],"inset-ring-color":[{"inset-ring":D()}],"text-shadow":[{"text-shadow":["none",g,Kh,Gh]}],"text-shadow-color":[{"text-shadow":D()}],opacity:[{opacity:[St,Ke,Ge]}],"mix-blend":[{"mix-blend":[...me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[St]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ce()}],"mask-image-linear-from-color":[{"mask-linear-from":D()}],"mask-image-linear-to-color":[{"mask-linear-to":D()}],"mask-image-t-from-pos":[{"mask-t-from":Ce()}],"mask-image-t-to-pos":[{"mask-t-to":Ce()}],"mask-image-t-from-color":[{"mask-t-from":D()}],"mask-image-t-to-color":[{"mask-t-to":D()}],"mask-image-r-from-pos":[{"mask-r-from":Ce()}],"mask-image-r-to-pos":[{"mask-r-to":Ce()}],"mask-image-r-from-color":[{"mask-r-from":D()}],"mask-image-r-to-color":[{"mask-r-to":D()}],"mask-image-b-from-pos":[{"mask-b-from":Ce()}],"mask-image-b-to-pos":[{"mask-b-to":Ce()}],"mask-image-b-from-color":[{"mask-b-from":D()}],"mask-image-b-to-color":[{"mask-b-to":D()}],"mask-image-l-from-pos":[{"mask-l-from":Ce()}],"mask-image-l-to-pos":[{"mask-l-to":Ce()}],"mask-image-l-from-color":[{"mask-l-from":D()}],"mask-image-l-to-color":[{"mask-l-to":D()}],"mask-image-x-from-pos":[{"mask-x-from":Ce()}],"mask-image-x-to-pos":[{"mask-x-to":Ce()}],"mask-image-x-from-color":[{"mask-x-from":D()}],"mask-image-x-to-color":[{"mask-x-to":D()}],"mask-image-y-from-pos":[{"mask-y-from":Ce()}],"mask-image-y-to-pos":[{"mask-y-to":Ce()}],"mask-image-y-from-color":[{"mask-y-from":D()}],"mask-image-y-to-color":[{"mask-y-to":D()}],"mask-image-radial":[{"mask-radial":[Ke,Ge]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ce()}],"mask-image-radial-from-color":[{"mask-radial-from":D()}],"mask-image-radial-to-color":[{"mask-radial-to":D()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[St]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ce()}],"mask-image-conic-from-color":[{"mask-conic-from":D()}],"mask-image-conic-to-color":[{"mask-conic-to":D()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:X()}],"mask-repeat":[{mask:I()}],"mask-size":[{mask:V()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ke,Ge]}],filter:[{filter:["","none",Ke,Ge]}],blur:[{blur:ge()}],brightness:[{brightness:[St,Ke,Ge]}],contrast:[{contrast:[St,Ke,Ge]}],"drop-shadow":[{"drop-shadow":["","none",y,Kh,Gh]}],"drop-shadow-color":[{"drop-shadow":D()}],grayscale:[{grayscale:["",St,Ke,Ge]}],"hue-rotate":[{"hue-rotate":[St,Ke,Ge]}],invert:[{invert:["",St,Ke,Ge]}],saturate:[{saturate:[St,Ke,Ge]}],sepia:[{sepia:["",St,Ke,Ge]}],"backdrop-filter":[{"backdrop-filter":["","none",Ke,Ge]}],"backdrop-blur":[{"backdrop-blur":ge()}],"backdrop-brightness":[{"backdrop-brightness":[St,Ke,Ge]}],"backdrop-contrast":[{"backdrop-contrast":[St,Ke,Ge]}],"backdrop-grayscale":[{"backdrop-grayscale":["",St,Ke,Ge]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[St,Ke,Ge]}],"backdrop-invert":[{"backdrop-invert":["",St,Ke,Ge]}],"backdrop-opacity":[{"backdrop-opacity":[St,Ke,Ge]}],"backdrop-saturate":[{"backdrop-saturate":[St,Ke,Ge]}],"backdrop-sepia":[{"backdrop-sepia":["",St,Ke,Ge]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ke,Ge]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[St,"initial",Ke,Ge]}],ease:[{ease:["linear","initial",_,Ke,Ge]}],delay:[{delay:[St,Ke,Ge]}],animate:[{animate:["none",k,Ke,Ge]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,Ke,Ge]}],"perspective-origin":[{"perspective-origin":P()}],rotate:[{rotate:$e()}],"rotate-x":[{"rotate-x":$e()}],"rotate-y":[{"rotate-y":$e()}],"rotate-z":[{"rotate-z":$e()}],scale:[{scale:ne()}],"scale-x":[{"scale-x":ne()}],"scale-y":[{"scale-y":ne()}],"scale-z":[{"scale-z":ne()}],"scale-3d":["scale-3d"],skew:[{skew:We()}],"skew-x":[{"skew-x":We()}],"skew-y":[{"skew-y":We()}],transform:[{transform:[Ke,Ge,"","none","gpu","cpu"]}],"transform-origin":[{origin:P()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ve()}],"translate-x":[{"translate-x":Ve()}],"translate-y":[{"translate-y":Ve()}],"translate-z":[{"translate-z":Ve()}],"translate-none":["translate-none"],accent:[{accent:D()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:D()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ke,Ge]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ke,Ge]}],fill:[{fill:["none",...D()]}],"stroke-w":[{stroke:[St,Gu,Oo,fv]}],stroke:[{stroke:["none",...D()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},mB=GU(hB);function Ot(...e){return mB(FP(e))}const L0=x.createContext({});function F0(e){const t=x.useRef(null);return t.current===null&&(t.current=e()),t.current}const $0=typeof window<"u",XP=$0?x.useLayoutEffect:x.useEffect,Up=x.createContext(null);function V0(e,t){e.indexOf(t)===-1&&e.push(t)}function z0(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const la=(e,t,n)=>n>t?t:n<e?e:n;let U0=()=>{};const ca={},JP=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function ZP(e){return typeof e=="object"&&e!==null}const eA=e=>/^0[^.\s]+$/u.test(e);function B0(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ns=e=>e,pB=(e,t)=>n=>t(e(n)),pf=(...e)=>e.reduce(pB),Ld=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class q0{constructor(){this.subscriptions=[]}add(t){return V0(this.subscriptions,t),()=>z0(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const l=this.subscriptions[i];l&&l(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ki=e=>e*1e3,ks=e=>e/1e3;function tA(e,t){return t?e*(1e3/t):0}const nA=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,gB=1e-7,yB=12;function vB(e,t,n,r,s){let i,l,u=0;do l=t+(n-t)/2,i=nA(l,r,s)-e,i>0?n=l:t=l;while(Math.abs(i)>gB&&++u<yB);return l}function gf(e,t,n,r){if(e===t&&n===r)return Ns;const s=i=>vB(i,0,1,e,n);return i=>i===0||i===1?i:nA(s(i),t,r)}const rA=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,sA=e=>t=>1-e(1-t),iA=gf(.33,1.53,.69,.99),W0=sA(iA),aA=rA(W0),oA=e=>(e*=2)<1?.5*W0(e):.5*(2-Math.pow(2,-10*(e-1))),H0=e=>1-Math.sin(Math.acos(e)),lA=sA(H0),cA=rA(H0),xB=gf(.42,0,1,1),wB=gf(0,0,.58,1),uA=gf(.42,0,.58,1),bB=e=>Array.isArray(e)&&typeof e[0]!="number",dA=e=>Array.isArray(e)&&typeof e[0]=="number",_B={linear:Ns,easeIn:xB,easeInOut:uA,easeOut:wB,circIn:H0,circInOut:cA,circOut:lA,backIn:W0,backInOut:aA,backOut:iA,anticipate:oA},SB=e=>typeof e=="string",mk=e=>{if(dA(e)){U0(e.length===4);const[t,n,r,s]=e;return gf(t,n,r,s)}else if(SB(e))return _B[e];return e},Yh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function jB(e,t){let n=new Set,r=new Set,s=!1,i=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(h){l.has(h)&&(f.schedule(h),e()),h(u)}const f={schedule:(h,m=!1,g=!1)=>{const w=g&&s?n:r;return m&&l.add(h),w.has(h)||w.add(h),h},cancel:h=>{r.delete(h),l.delete(h)},process:h=>{if(u=h,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(d),n.clear(),s=!1,i&&(i=!1,f.process(h))}};return f}const EB=40;function fA(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,l=Yh.reduce((N,T)=>(N[T]=jB(i),N),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:h,update:m,preRender:g,render:y,postRender:w}=l,b=()=>{const N=ca.useManualTiming?s.timestamp:performance.now();n=!1,ca.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(N-s.timestamp,EB),1)),s.timestamp=N,s.isProcessing=!0,u.process(s),d.process(s),f.process(s),h.process(s),m.process(s),g.process(s),y.process(s),w.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(b))},S=()=>{n=!0,r=!0,s.isProcessing||e(b)};return{schedule:Yh.reduce((N,T)=>{const P=l[T];return N[T]=(R,M=!1,A=!1)=>(n||S(),P.schedule(R,M,A)),N},{}),cancel:N=>{for(let T=0;T<Yh.length;T++)l[Yh[T]].cancel(N)},state:s,steps:l}}const{schedule:cn,cancel:ao,state:cr,steps:hv}=fA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ns,!0);let km;function kB(){km=void 0}const Gr={now:()=>(km===void 0&&Gr.set(cr.isProcessing||ca.useManualTiming?cr.timestamp:performance.now()),km),set:e=>{km=e,queueMicrotask(kB)}},hA=e=>t=>typeof t=="string"&&t.startsWith(e),G0=hA("--"),NB=hA("var(--"),K0=e=>NB(e)?TB.test(e.split("/*")[0].trim()):!1,TB=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Qc={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Fd={...Qc,transform:e=>la(0,1,e)},Qh={...Qc,default:1},vd=e=>Math.round(e*1e5)/1e5,Y0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function CB(e){return e==null}const PB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Q0=(e,t)=>n=>!!(typeof n=="string"&&PB.test(n)&&n.startsWith(e)||t&&!CB(n)&&Object.prototype.hasOwnProperty.call(n,t)),mA=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,l,u]=r.match(Y0);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},AB=e=>la(0,255,e),mv={...Qc,transform:e=>Math.round(AB(e))},zo={test:Q0("rgb","red"),parse:mA("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+mv.transform(e)+", "+mv.transform(t)+", "+mv.transform(n)+", "+vd(Fd.transform(r))+")"};function RB(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const rw={test:Q0("#"),parse:RB,transform:zo.transform},yf=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ua=yf("deg"),Ni=yf("%"),it=yf("px"),IB=yf("vh"),OB=yf("vw"),pk={...Ni,parse:e=>Ni.parse(e)/100,transform:e=>Ni.transform(e*100)},ac={test:Q0("hsl","hue"),parse:mA("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ni.transform(vd(t))+", "+Ni.transform(vd(n))+", "+vd(Fd.transform(r))+")"},Fn={test:e=>zo.test(e)||rw.test(e)||ac.test(e),parse:e=>zo.test(e)?zo.parse(e):ac.test(e)?ac.parse(e):rw.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?zo.transform(e):ac.transform(e),getAnimatableNone:e=>{const t=Fn.parse(e);return t.alpha=0,Fn.transform(t)}},DB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function MB(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Y0))==null?void 0:t.length)||0)+(((n=e.match(DB))==null?void 0:n.length)||0)>0}const pA="number",gA="color",LB="var",FB="var(",gk="${}",$B=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $d(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const u=t.replace($B,d=>(Fn.test(d)?(r.color.push(i),s.push(gA),n.push(Fn.parse(d))):d.startsWith(FB)?(r.var.push(i),s.push(LB),n.push(d)):(r.number.push(i),s.push(pA),n.push(parseFloat(d))),++i,gk)).split(gk);return{values:n,split:u,indexes:r,types:s}}function yA(e){return $d(e).values}function vA(e){const{split:t,types:n}=$d(e),r=t.length;return s=>{let i="";for(let l=0;l<r;l++)if(i+=t[l],s[l]!==void 0){const u=n[l];u===pA?i+=vd(s[l]):u===gA?i+=Fn.transform(s[l]):i+=s[l]}return i}}const VB=e=>typeof e=="number"?0:Fn.test(e)?Fn.getAnimatableNone(e):e;function zB(e){const t=yA(e);return vA(e)(t.map(VB))}const oo={test:MB,parse:yA,createTransformer:vA,getAnimatableNone:zB};function pv(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function UB({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,l=0;if(!t)s=i=l=n;else{const u=n<.5?n*(1+t):n+t-n*t,d=2*n-u;s=pv(d,u,e+1/3),i=pv(d,u,e),l=pv(d,u,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(l*255),alpha:r}}function Qm(e,t){return n=>n>0?t:e}const pn=(e,t,n)=>e+(t-e)*n,gv=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},BB=[rw,zo,ac],qB=e=>BB.find(t=>t.test(e));function yk(e){const t=qB(e);if(!t)return!1;let n=t.parse(e);return t===ac&&(n=UB(n)),n}const vk=(e,t)=>{const n=yk(e),r=yk(t);if(!n||!r)return Qm(e,t);const s={...n};return i=>(s.red=gv(n.red,r.red,i),s.green=gv(n.green,r.green,i),s.blue=gv(n.blue,r.blue,i),s.alpha=pn(n.alpha,r.alpha,i),zo.transform(s))},sw=new Set(["none","hidden"]);function WB(e,t){return sw.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function HB(e,t){return n=>pn(e,t,n)}function X0(e){return typeof e=="number"?HB:typeof e=="string"?K0(e)?Qm:Fn.test(e)?vk:YB:Array.isArray(e)?xA:typeof e=="object"?Fn.test(e)?vk:GB:Qm}function xA(e,t){const n=[...e],r=n.length,s=e.map((i,l)=>X0(i)(i,t[l]));return i=>{for(let l=0;l<r;l++)n[l]=s[l](i);return n}}function GB(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=X0(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function KB(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],l=e.indexes[i][r[i]],u=e.values[l]??0;n[s]=u,r[i]++}return n}const YB=(e,t)=>{const n=oo.createTransformer(t),r=$d(e),s=$d(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?sw.has(e)&&!s.values.length||sw.has(t)&&!r.values.length?WB(e,t):pf(xA(KB(r,s),s.values),n):Qm(e,t)};function wA(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?pn(e,t,n):X0(e)(e,t)}const QB=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>cn.update(t,n),stop:()=>ao(t),now:()=>cr.isProcessing?cr.timestamp:Gr.now()}},bA=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Xm=2e4;function J0(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Xm;)t+=n,r=e.next(t);return t>=Xm?1/0:t}function XB(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(J0(r),Xm);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:ks(s)}}const JB=5;function _A(e,t,n){const r=Math.max(t-JB,0);return tA(n-e(r),t-r)}const vn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},yv=.001;function ZB({duration:e=vn.duration,bounce:t=vn.bounce,velocity:n=vn.velocity,mass:r=vn.mass}){let s,i,l=1-t;l=la(vn.minDamping,vn.maxDamping,l),e=la(vn.minDuration,vn.maxDuration,ks(e)),l<1?(s=f=>{const h=f*l,m=h*e,g=h-n,y=iw(f,l),w=Math.exp(-m);return yv-g/y*w},i=f=>{const m=f*l*e,g=m*n+n,y=Math.pow(l,2)*Math.pow(f,2)*e,w=Math.exp(-m),b=iw(Math.pow(f,2),l);return(-s(f)+yv>0?-1:1)*((g-y)*w)/b}):(s=f=>{const h=Math.exp(-f*e),m=(f-n)*e+1;return-yv+h*m},i=f=>{const h=Math.exp(-f*e),m=(n-f)*(e*e);return h*m});const u=5/e,d=t6(s,i,u);if(e=ki(e),isNaN(d))return{stiffness:vn.stiffness,damping:vn.damping,duration:e};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:l*2*Math.sqrt(r*f),duration:e}}}const e6=12;function t6(e,t,n){let r=n;for(let s=1;s<e6;s++)r=r-e(r)/t(r);return r}function iw(e,t){return e*Math.sqrt(1-t*t)}const n6=["duration","bounce"],r6=["stiffness","damping","mass"];function xk(e,t){return t.some(n=>e[n]!==void 0)}function s6(e){let t={velocity:vn.velocity,stiffness:vn.stiffness,damping:vn.damping,mass:vn.mass,isResolvedFromDuration:!1,...e};if(!xk(e,r6)&&xk(e,n6))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*la(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:vn.mass,stiffness:s,damping:i}}else{const n=ZB(e);t={...t,...n,mass:vn.mass},t.isResolvedFromDuration=!0}return t}function Jm(e=vn.visualDuration,t=vn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:i},{stiffness:d,damping:f,mass:h,duration:m,velocity:g,isResolvedFromDuration:y}=s6({...n,velocity:-ks(n.velocity||0)}),w=g||0,b=f/(2*Math.sqrt(d*h)),S=l-i,_=ks(Math.sqrt(d/h)),k=Math.abs(S)<5;r||(r=k?vn.restSpeed.granular:vn.restSpeed.default),s||(s=k?vn.restDelta.granular:vn.restDelta.default);let N;if(b<1){const P=iw(_,b);N=R=>{const M=Math.exp(-b*_*R);return l-M*((w+b*_*S)/P*Math.sin(P*R)+S*Math.cos(P*R))}}else if(b===1)N=P=>l-Math.exp(-_*P)*(S+(w+_*S)*P);else{const P=_*Math.sqrt(b*b-1);N=R=>{const M=Math.exp(-b*_*R),A=Math.min(P*R,300);return l-M*((w+b*_*S)*Math.sinh(A)+P*S*Math.cosh(A))/P}}const T={calculatedDuration:y&&m||null,next:P=>{const R=N(P);if(y)u.done=P>=m;else{let M=P===0?w:0;b<1&&(M=P===0?ki(w):_A(N,P,R));const A=Math.abs(M)<=r,W=Math.abs(l-R)<=s;u.done=A&&W}return u.value=u.done?l:R,u},toString:()=>{const P=Math.min(J0(T),Xm),R=bA(M=>T.next(P*M).value,P,30);return P+"ms "+R},toTransition:()=>{}};return T}Jm.applyToOptions=e=>{const t=XB(e,100,Jm);return e.ease=t.ease,e.duration=ki(t.duration),e.type="keyframes",e};function aw({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:l,min:u,max:d,restDelta:f=.5,restSpeed:h}){const m=e[0],g={done:!1,value:m},y=A=>u!==void 0&&A<u||d!==void 0&&A>d,w=A=>u===void 0?d:d===void 0||Math.abs(u-A)<Math.abs(d-A)?u:d;let b=n*t;const S=m+b,_=l===void 0?S:l(S);_!==S&&(b=_-m);const k=A=>-b*Math.exp(-A/r),N=A=>_+k(A),T=A=>{const W=k(A),K=N(A);g.done=Math.abs(W)<=f,g.value=g.done?_:K};let P,R;const M=A=>{y(g.value)&&(P=A,R=Jm({keyframes:[g.value,w(g.value)],velocity:_A(N,A,g.value),damping:s,stiffness:i,restDelta:f,restSpeed:h}))};return M(0),{calculatedDuration:null,next:A=>{let W=!1;return!R&&P===void 0&&(W=!0,T(A),M(A)),P!==void 0&&A>=P?R.next(A-P):(!W&&T(A),g)}}}function i6(e,t,n){const r=[],s=n||ca.mix||wA,i=e.length-1;for(let l=0;l<i;l++){let u=s(e[l],e[l+1]);if(t){const d=Array.isArray(t)?t[l]||Ns:t;u=pf(d,u)}r.push(u)}return r}function a6(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(U0(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const l=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const u=i6(t,r,s),d=u.length,f=h=>{if(l&&h<e[0])return t[0];let m=0;if(d>1)for(;m<e.length-2&&!(h<e[m+1]);m++);const g=Ld(e[m],e[m+1],h);return u[m](g)};return n?h=>f(la(e[0],e[i-1],h)):f}function o6(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Ld(0,t,r);e.push(pn(n,1,s))}}function l6(e){const t=[0];return o6(t,e.length-1),t}function c6(e,t){return e.map(n=>n*t)}function u6(e,t){return e.map(()=>t||uA).splice(0,e.length-1)}function xd({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=bB(r)?r.map(mk):mk(r),i={done:!1,value:t[0]},l=c6(n&&n.length===t.length?n:l6(t),e),u=a6(l,t,{ease:Array.isArray(s)?s:u6(t,s)});return{calculatedDuration:e,next:d=>(i.value=u(d),i.done=d>=e,i)}}const d6=e=>e!==null;function Z0(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(d6),u=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!u||r===void 0?i[u]:r}const f6={decay:aw,inertia:aw,tween:xd,keyframes:xd,spring:Jm};function SA(e){typeof e.type=="string"&&(e.type=f6[e.type])}class eb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const h6=e=>e/100;class tb extends eb{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Gr.now()&&this.tick(Gr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;SA(t);const{type:n=xd,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:l=0}=t;let{keyframes:u}=t;const d=n||xd;d!==xd&&typeof u[0]!="number"&&(this.mixKeyframes=pf(h6,wA(u[0],u[1])),u=[0,100]);const f=d({...t,keyframes:u});i==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=J0(f));const{calculatedDuration:h}=f;this.calculatedDuration=h,this.resolvedDuration=h+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=f}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:h,repeat:m,repeatType:g,repeatDelay:y,type:w,onUpdate:b,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const _=this.currentTime-f*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?_<0:_>s;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let N=this.currentTime,T=r;if(m){const A=Math.min(this.currentTime,s)/u;let W=Math.floor(A),K=A%1;!K&&A>=1&&(K=1),K===1&&W--,W=Math.min(W,m+1),!!(W%2)&&(g==="reverse"?(K=1-K,y&&(K-=y/u)):g==="mirror"&&(T=l)),N=la(0,1,K)*u}const P=k?{done:!1,value:h[0]}:T.next(N);i&&(P.value=i(P.value));let{done:R}=P;!k&&d!==null&&(R=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return M&&w!==aw&&(P.value=Z0(h,this.options,S,this.speed)),b&&b(P.value),M&&this.finish(),P}then(t,n){return this.finished.then(t,n)}get duration(){return ks(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ks(t)}get time(){return ks(this.currentTime)}set time(t){var n;t=ki(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Gr.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=ks(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=QB,startTime:n}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Gr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function m6(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Uo=e=>e*180/Math.PI,ow=e=>{const t=Uo(Math.atan2(e[1],e[0]));return lw(t)},p6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:ow,rotateZ:ow,skewX:e=>Uo(Math.atan(e[1])),skewY:e=>Uo(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},lw=e=>(e=e%360,e<0&&(e+=360),e),wk=ow,bk=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),_k=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),g6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:bk,scaleY:_k,scale:e=>(bk(e)+_k(e))/2,rotateX:e=>lw(Uo(Math.atan2(e[6],e[5]))),rotateY:e=>lw(Uo(Math.atan2(-e[2],e[0]))),rotateZ:wk,rotate:wk,skewX:e=>Uo(Math.atan(e[4])),skewY:e=>Uo(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function cw(e){return e.includes("scale")?1:0}function uw(e,t){if(!e||e==="none")return cw(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=g6,s=n;else{const u=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=p6,s=u}if(!s)return cw(t);const i=r[t],l=s[1].split(",").map(v6);return typeof i=="function"?i(l):l[i]}const y6=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return uw(n,t)};function v6(e){return parseFloat(e.trim())}const Xc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Jc=new Set(Xc),Sk=e=>e===Qc||e===it,x6=new Set(["x","y","z"]),w6=Xc.filter(e=>!x6.has(e));function b6(e){const t=[];return w6.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Zo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>uw(t,"x"),y:(e,{transform:t})=>uw(t,"y")};Zo.translateX=Zo.x;Zo.translateY=Zo.y;const el=new Set;let dw=!1,fw=!1,hw=!1;function jA(){if(fw){const e=Array.from(el).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=b6(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,l])=>{var u;(u=r.getValue(i))==null||u.set(l)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}fw=!1,dw=!1,el.forEach(e=>e.complete(hw)),el.clear()}function EA(){el.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(fw=!0)})}function _6(){hw=!0,EA(),jA(),hw=!1}class nb{constructor(t,n,r,s,i,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(el.add(this),dw||(dw=!0,cn.read(EA),cn.resolveKeyframes(jA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),l=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const u=r.readValue(n,l);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=l),s&&i===void 0&&s.set(t[0])}m6(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),el.delete(this)}cancel(){this.state==="scheduled"&&(el.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const S6=e=>e.startsWith("--");function j6(e,t,n){S6(t)?e.style.setProperty(t,n):e.style[t]=n}const E6=B0(()=>window.ScrollTimeline!==void 0),k6={};function N6(e,t){const n=B0(e);return()=>k6[t]??n()}const kA=N6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),fd=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,jk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:fd([0,.65,.55,1]),circOut:fd([.55,0,1,.45]),backIn:fd([.31,.01,.66,-.59]),backOut:fd([.33,1.53,.69,.99])};function NA(e,t){if(e)return typeof e=="function"?kA()?bA(e,t):"ease-out":dA(e)?fd(e):Array.isArray(e)?e.map(n=>NA(n,t)||jk.easeOut):jk[e]}function T6(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:l="loop",ease:u="easeOut",times:d}={},f=void 0){const h={[t]:n};d&&(h.offset=d);const m=NA(u,s);Array.isArray(m)&&(h.easing=m);const g={delay:r,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:i+1,direction:l==="reverse"?"alternate":"normal"};return f&&(g.pseudoElement=f),e.animate(h,g)}function TA(e){return typeof e=="function"&&"applyToOptions"in e}function C6({type:e,...t}){return TA(e)&&kA()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class P6 extends eb{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=t;this.isPseudoElement=!!i,this.allowFlatten=l,this.options=t,U0(typeof t.type!="string");const f=C6(t);this.animation=T6(n,r,s,f,i),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const h=Z0(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(h):j6(n,r,h),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return ks(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ks(t)}get time(){return ks(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ki(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&E6()?(this.animation.timeline=t,Ns):n(this)}}const CA={anticipate:oA,backInOut:aA,circInOut:cA};function A6(e){return e in CA}function R6(e){typeof e.ease=="string"&&A6(e.ease)&&(e.ease=CA[e.ease])}const Ek=10;class I6 extends P6{constructor(t){R6(t),SA(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...l}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const u=new tb({...l,autoplay:!1}),d=ki(this.finishedTime??this.time);n.setWithVelocity(u.sample(d-Ek).value,u.sample(d).value,Ek),u.stop()}}const kk=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(oo.test(e)||e==="0")&&!e.startsWith("url("));function O6(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function D6(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],l=kk(s,t),u=kk(i,t);return!l||!u?!1:O6(e)||(n==="spring"||TA(n))&&r}function mw(e){e.duration=0,e.type="keyframes"}const M6=new Set(["opacity","clipPath","filter","transform"]),L6=B0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function F6(e){var h;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:l}=e;if(!(((h=t==null?void 0:t.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=t.owner.getProps();return L6()&&n&&M6.has(n)&&(n!=="transform"||!f)&&!d&&!r&&s!=="mirror"&&i!==0&&l!=="inertia"}const $6=40;class V6 extends eb{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:l="loop",keyframes:u,name:d,motionValue:f,element:h,...m}){var w;super(),this.stop=()=>{var b,S;this._animation&&(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)),(S=this.keyframeResolver)==null||S.cancel()},this.createdAt=Gr.now();const g={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:l,name:d,motionValue:f,element:h,...m},y=(h==null?void 0:h.KeyframeResolver)||nb;this.keyframeResolver=new y(u,(b,S,_)=>this.onKeyframesResolved(b,S,g,!_),d,f,h),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:l,velocity:u,delay:d,isHandoff:f,onUpdate:h}=r;this.resolvedAt=Gr.now(),D6(t,i,l,u)||((ca.instantAnimations||!d)&&(h==null||h(Z0(t,r,n))),t[0]=t[t.length-1],mw(r),r.repeat=0);const g={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>$6?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},y=!f&&F6(g)?new I6({...g,element:g.motionValue.owner.current}):new tb(g);y.finished.then(()=>this.notifyFinished()).catch(Ns),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),_6()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const z6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function U6(e){const t=z6.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function PA(e,t,n=1){const[r,s]=U6(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const l=i.trim();return JP(l)?parseFloat(l):l}return K0(s)?PA(s,t,n+1):s}function rb(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const AA=new Set(["width","height","top","left","right","bottom",...Xc]),B6={test:e=>e==="auto",parse:e=>e},RA=e=>t=>t.test(e),IA=[Qc,it,Ni,Ua,OB,IB,B6],Nk=e=>IA.find(RA(e));function q6(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||eA(e):!0}const W6=new Set(["brightness","contrast","saturate","opacity"]);function H6(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Y0)||[];if(!r)return e;const s=n.replace(r,"");let i=W6.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const G6=/\b([a-z-]*)\(.*?\)/gu,pw={...oo,getAnimatableNone:e=>{const t=e.match(G6);return t?t.map(H6).join(" "):e}},Tk={...Qc,transform:Math.round},K6={rotate:Ua,rotateX:Ua,rotateY:Ua,rotateZ:Ua,scale:Qh,scaleX:Qh,scaleY:Qh,scaleZ:Qh,skew:Ua,skewX:Ua,skewY:Ua,distance:it,translateX:it,translateY:it,translateZ:it,x:it,y:it,z:it,perspective:it,transformPerspective:it,opacity:Fd,originX:pk,originY:pk,originZ:it},sb={borderWidth:it,borderTopWidth:it,borderRightWidth:it,borderBottomWidth:it,borderLeftWidth:it,borderRadius:it,radius:it,borderTopLeftRadius:it,borderTopRightRadius:it,borderBottomRightRadius:it,borderBottomLeftRadius:it,width:it,maxWidth:it,height:it,maxHeight:it,top:it,right:it,bottom:it,left:it,padding:it,paddingTop:it,paddingRight:it,paddingBottom:it,paddingLeft:it,margin:it,marginTop:it,marginRight:it,marginBottom:it,marginLeft:it,backgroundPositionX:it,backgroundPositionY:it,...K6,zIndex:Tk,fillOpacity:Fd,strokeOpacity:Fd,numOctaves:Tk},Y6={...sb,color:Fn,backgroundColor:Fn,outlineColor:Fn,fill:Fn,stroke:Fn,borderColor:Fn,borderTopColor:Fn,borderRightColor:Fn,borderBottomColor:Fn,borderLeftColor:Fn,filter:pw,WebkitFilter:pw},OA=e=>Y6[e];function DA(e,t){let n=OA(e);return n!==pw&&(n=oo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Q6=new Set(["auto","none","0"]);function X6(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!Q6.has(i)&&$d(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=DA(n,s)}class J6 extends nb{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let f=t[d];if(typeof f=="string"&&(f=f.trim(),K0(f))){const h=PA(f,n.current);h!==void 0&&(t[d]=h),d===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!AA.has(r)||t.length!==2)return;const[s,i]=t,l=Nk(s),u=Nk(i);if(l!==u)if(Sk(l)&&Sk(u))for(let d=0;d<t.length;d++){const f=t[d];typeof f=="string"&&(t[d]=parseFloat(f))}else Zo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||q6(t[s]))&&r.push(s);r.length&&X6(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Zo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var u;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,l=r[i];r[i]=Zo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([d,f])=>{t.getValue(d).set(f)}),this.resolveNoneKeyframes()}}function Z6(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=(n==null?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const MA=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function LA(e){return ZP(e)&&"offsetHeight"in e}const Ck=30,eq=e=>!isNaN(parseFloat(e));class tq{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=Gr.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Gr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=eq(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new q0);const r=this.events[t].add(n);return t==="change"?()=>{r(),cn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Gr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Ck)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Ck);return tA(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Oc(e,t){return new tq(e,t)}const{schedule:ib}=fA(queueMicrotask,!1),Bs={x:!1,y:!1};function FA(){return Bs.x||Bs.y}function nq(e){return e==="x"||e==="y"?Bs[e]?null:(Bs[e]=!0,()=>{Bs[e]=!1}):Bs.x||Bs.y?null:(Bs.x=Bs.y=!0,()=>{Bs.x=Bs.y=!1})}function $A(e,t){const n=Z6(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function Pk(e){return!(e.pointerType==="touch"||FA())}function rq(e,t,n={}){const[r,s,i]=$A(e,n),l=u=>{if(!Pk(u))return;const{target:d}=u,f=t(d,u);if(typeof f!="function"||!d)return;const h=m=>{Pk(m)&&(f(m),d.removeEventListener("pointerleave",h))};d.addEventListener("pointerleave",h,s)};return r.forEach(u=>{u.addEventListener("pointerenter",l,s)}),i}const VA=(e,t)=>t?e===t?!0:VA(e,t.parentElement):!1,ab=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,sq=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function iq(e){return sq.has(e.tagName)||e.tabIndex!==-1}const Nm=new WeakSet;function Ak(e){return t=>{t.key==="Enter"&&e(t)}}function vv(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const aq=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Ak(()=>{if(Nm.has(n))return;vv(n,"down");const s=Ak(()=>{vv(n,"up")}),i=()=>vv(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Rk(e){return ab(e)&&!FA()}function oq(e,t,n={}){const[r,s,i]=$A(e,n),l=u=>{const d=u.currentTarget;if(!Rk(u))return;Nm.add(d);const f=t(d,u),h=(y,w)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",g),Nm.has(d)&&Nm.delete(d),Rk(y)&&typeof f=="function"&&f(y,{success:w})},m=y=>{h(y,d===window||d===document||n.useGlobalTarget||VA(d,y.target))},g=y=>{h(y,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",g,s)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),LA(u)&&(u.addEventListener("focus",f=>aq(f,s)),!iq(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),i}function zA(e){return ZP(e)&&"ownerSVGElement"in e}function lq(e){return zA(e)&&e.tagName==="svg"}const gr=e=>!!(e&&e.getVelocity),cq=[...IA,Fn,oo],uq=e=>cq.find(RA(e)),ob=x.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Ik(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function dq(...e){return t=>{let n=!1;const r=e.map(s=>{const i=Ik(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Ik(e[s],null)}}}}function fq(...e){return x.useCallback(dq(...e),e)}class hq extends x.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=LA(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function mq({children:e,isPresent:t,anchorX:n,root:r}){const s=x.useId(),i=x.useRef(null),l=x.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=x.useContext(ob),d=fq(i,e==null?void 0:e.ref);return x.useInsertionEffect(()=>{const{width:f,height:h,top:m,left:g,right:y}=l.current;if(t||!i.current||!f||!h)return;const w=n==="left"?`left: ${g}`:`right: ${y}`;i.current.dataset.motionPopId=s;const b=document.createElement("style");u&&(b.nonce=u);const S=r??document.head;return S.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${h}px !important;
            ${w}px !important;
            top: ${m}px !important;
          }
        `),()=>{S.contains(b)&&S.removeChild(b)}},[t]),a.jsx(hq,{isPresent:t,childRef:i,sizeRef:l,children:x.cloneElement(e,{ref:d})})}const pq=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:l,anchorX:u,root:d})=>{const f=F0(gq),h=x.useId();let m=!0,g=x.useMemo(()=>(m=!1,{id:h,initial:t,isPresent:n,custom:s,onExitComplete:y=>{f.set(y,!0);for(const w of f.values())if(!w)return;r&&r()},register:y=>(f.set(y,!1),()=>f.delete(y))}),[n,f,r]);return i&&m&&(g={...g}),x.useMemo(()=>{f.forEach((y,w)=>f.set(w,!1))},[n]),x.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),l==="popLayout"&&(e=a.jsx(mq,{isPresent:n,anchorX:u,root:d,children:e})),a.jsx(Up.Provider,{value:g,children:e})};function gq(){return new Map}function UA(e=!0){const t=x.useContext(Up);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=x.useId();x.useEffect(()=>{if(e)return s(i)},[e]);const l=x.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,l]:[!0]}const Xh=e=>e.key||"";function Ok(e){const t=[];return x.Children.forEach(e,n=>{x.isValidElement(n)&&t.push(n)}),t}const Bp=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:l=!1,anchorX:u="left",root:d})=>{const[f,h]=UA(l),m=x.useMemo(()=>Ok(e),[e]),g=l&&!f?[]:m.map(Xh),y=x.useRef(!0),w=x.useRef(m),b=F0(()=>new Map),[S,_]=x.useState(m),[k,N]=x.useState(m);XP(()=>{y.current=!1,w.current=m;for(let R=0;R<k.length;R++){const M=Xh(k[R]);g.includes(M)?b.delete(M):b.get(M)!==!0&&b.set(M,!1)}},[k,g.length,g.join("-")]);const T=[];if(m!==S){let R=[...m];for(let M=0;M<k.length;M++){const A=k[M],W=Xh(A);g.includes(W)||(R.splice(M,0,A),T.push(A))}return i==="wait"&&T.length&&(R=T),N(Ok(R)),_(m),null}const{forceRender:P}=x.useContext(L0);return a.jsx(a.Fragment,{children:k.map(R=>{const M=Xh(R),A=l&&!f?!1:m===k||g.includes(M),W=()=>{if(b.has(M))b.set(M,!0);else return;let K=!0;b.forEach(H=>{H||(K=!1)}),K&&(P==null||P(),N(w.current),l&&(h==null||h()),r&&r())};return a.jsx(pq,{isPresent:A,initial:!y.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:d,onExitComplete:A?void 0:W,anchorX:u,children:R},M)})})},BA=x.createContext({strict:!1}),Dk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Dc={};for(const e in Dk)Dc[e]={isEnabled:t=>Dk[e].some(n=>!!t[n])};function yq(e){for(const t in e)Dc[t]={...Dc[t],...e[t]}}const vq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zm(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||vq.has(e)}let qA=e=>!Zm(e);function xq(e){typeof e=="function"&&(qA=t=>t.startsWith("on")?!Zm(t):e(t))}try{xq(require("@emotion/is-prop-valid").default)}catch{}function wq(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(qA(s)||n===!0&&Zm(s)||!t&&!Zm(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const qp=x.createContext({});function Wp(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Vd(e){return typeof e=="string"||Array.isArray(e)}const lb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cb=["initial",...lb];function Hp(e){return Wp(e.animate)||cb.some(t=>Vd(e[t]))}function WA(e){return!!(Hp(e)||e.variants)}function bq(e,t){if(Hp(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Vd(n)?n:void 0,animate:Vd(r)?r:void 0}}return e.inherit!==!1?t:{}}function _q(e){const{initial:t,animate:n}=bq(e,x.useContext(qp));return x.useMemo(()=>({initial:t,animate:n}),[Mk(t),Mk(n)])}function Mk(e){return Array.isArray(e)?e.join(" "):e}const zd={};function Sq(e){for(const t in e)zd[t]=e[t],G0(t)&&(zd[t].isCSSVariable=!0)}function HA(e,{layout:t,layoutId:n}){return Jc.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!zd[e]||e==="opacity")}const jq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Eq=Xc.length;function kq(e,t,n){let r="",s=!0;for(let i=0;i<Eq;i++){const l=Xc[i],u=e[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||n){const f=MA(u,sb[l]);if(!d){s=!1;const h=jq[l]||l;r+=`${h}(${f}) `}n&&(t[l]=f)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function ub(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let l=!1,u=!1;for(const d in t){const f=t[d];if(Jc.has(d)){l=!0;continue}else if(G0(d)){s[d]=f;continue}else{const h=MA(f,sb[d]);d.startsWith("origin")?(u=!0,i[d]=h):r[d]=h}}if(t.transform||(l||n?r.transform=kq(t,e.transform,n):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:h=0}=i;r.transformOrigin=`${d} ${f} ${h}`}}const db=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function GA(e,t,n){for(const r in t)!gr(t[r])&&!HA(r,n)&&(e[r]=t[r])}function Nq({transformTemplate:e},t){return x.useMemo(()=>{const n=db();return ub(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Tq(e,t){const n=e.style||{},r={};return GA(r,n,e),Object.assign(r,Nq(e,t)),r}function Cq(e,t){const n={},r=Tq(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const Pq={offset:"stroke-dashoffset",array:"stroke-dasharray"},Aq={offset:"strokeDashoffset",array:"strokeDasharray"};function Rq(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?Pq:Aq;e[i.offset]=it.transform(-r);const l=it.transform(t),u=it.transform(n);e[i.array]=`${l} ${u}`}function KA(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:l=0,...u},d,f,h){if(ub(e,u,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:g}=e;m.transform&&(g.transform=m.transform,delete m.transform),(g.transform||m.transformOrigin)&&(g.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),g.transform&&(g.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete m.transformBox),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),s!==void 0&&Rq(m,s,i,l,!1)}const YA=()=>({...db(),attrs:{}}),QA=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Iq(e,t,n,r){const s=x.useMemo(()=>{const i=YA();return KA(i,t,QA(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};GA(i,e.style,e),s.style={...i,...s.style}}return s}const Oq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fb(e){return typeof e!="string"||e.includes("-")?!1:!!(Oq.indexOf(e)>-1||/[A-Z]/u.test(e))}function Dq(e,t,n,{latestValues:r},s,i=!1){const u=(fb(e)?Iq:Cq)(t,r,s,e),d=wq(t,typeof e=="string",i),f=e!==x.Fragment?{...d,...u,ref:n}:{},{children:h}=t,m=x.useMemo(()=>gr(h)?h.get():h,[h]);return x.createElement(e,{...f,children:m})}function Lk(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function hb(e,t,n,r){if(typeof t=="function"){const[s,i]=Lk(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=Lk(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function Tm(e){return gr(e)?e.get():e}function Mq({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:Lq(n,r,s,e),renderState:t()}}function Lq(e,t,n,r){const s={},i=r(e,{});for(const g in i)s[g]=Tm(i[g]);let{initial:l,animate:u}=e;const d=Hp(e),f=WA(e);t&&f&&!d&&e.inherit!==!1&&(l===void 0&&(l=t.initial),u===void 0&&(u=t.animate));let h=n?n.initial===!1:!1;h=h||l===!1;const m=h?u:l;if(m&&typeof m!="boolean"&&!Wp(m)){const g=Array.isArray(m)?m:[m];for(let y=0;y<g.length;y++){const w=hb(e,g[y]);if(w){const{transitionEnd:b,transition:S,..._}=w;for(const k in _){let N=_[k];if(Array.isArray(N)){const T=h?N.length-1:0;N=N[T]}N!==null&&(s[k]=N)}for(const k in b)s[k]=b[k]}}}return s}const XA=e=>(t,n)=>{const r=x.useContext(qp),s=x.useContext(Up),i=()=>Mq(e,t,r,s);return n?i():F0(i)};function mb(e,t,n){var i;const{style:r}=e,s={};for(const l in r)(gr(r[l])||t.style&&gr(t.style[l])||HA(l,e)||((i=n==null?void 0:n.getValue(l))==null?void 0:i.liveStyle)!==void 0)&&(s[l]=r[l]);return s}const Fq=XA({scrapeMotionValuesFromProps:mb,createRenderState:db});function JA(e,t,n){const r=mb(e,t,n);for(const s in e)if(gr(e[s])||gr(t[s])){const i=Xc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const $q=XA({scrapeMotionValuesFromProps:JA,createRenderState:YA}),Vq=Symbol.for("motionComponentSymbol");function oc(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function zq(e,t,n){return x.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):oc(n)&&(n.current=r))},[t])}const pb=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Uq="framerAppearId",ZA="data-"+pb(Uq),eR=x.createContext({});function Bq(e,t,n,r,s){var b,S;const{visualElement:i}=x.useContext(qp),l=x.useContext(BA),u=x.useContext(Up),d=x.useContext(ob).reducedMotion,f=x.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(e,{visualState:t,parent:i,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const h=f.current,m=x.useContext(eR);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&qq(f.current,n,s,m);const g=x.useRef(!1);x.useInsertionEffect(()=>{h&&g.current&&h.update(n,u)});const y=n[ZA],w=x.useRef(!!y&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,y))&&((S=window.MotionHasOptimisedAnimation)==null?void 0:S.call(window,y)));return XP(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),w.current&&h.animationState&&h.animationState.animateChanges())}),x.useEffect(()=>{h&&(!w.current&&h.animationState&&h.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,y)}),w.current=!1),h.enteringChildren=void 0)}),h}function qq(e,t,n,r){const{layoutId:s,layout:i,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:h}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:tR(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!l||u&&oc(u),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:d,layoutRoot:f})}function tR(e){if(e)return e.options.allowProjection!==!1?e.projection:tR(e.parent)}function xv(e,{forwardMotionProps:t=!1}={},n,r){n&&yq(n);const s=fb(e)?$q:Fq;function i(u,d){let f;const h={...x.useContext(ob),...u,layoutId:Wq(u)},{isStatic:m}=h,g=_q(u),y=s(u,m);if(!m&&$0){Hq();const w=Gq(h);f=w.MeasureLayout,g.visualElement=Bq(e,y,h,r,w.ProjectionNode)}return a.jsxs(qp.Provider,{value:g,children:[f&&g.visualElement?a.jsx(f,{visualElement:g.visualElement,...h}):null,Dq(e,u,zq(y,g.visualElement,d),y,m,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const l=x.forwardRef(i);return l[Vq]=e,l}function Wq({layoutId:e}){const t=x.useContext(L0).id;return t&&e!==void 0?t+"-"+e:e}function Hq(e,t){x.useContext(BA).strict}function Gq(e){const{drag:t,layout:n}=Dc;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Kq(e,t){if(typeof Proxy>"u")return xv;const n=new Map,r=(i,l)=>xv(i,l,e,t),s=(i,l)=>r(i,l);return new Proxy(s,{get:(i,l)=>l==="create"?r:(n.has(l)||n.set(l,xv(l,void 0,e,t)),n.get(l))})}function nR({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Yq({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Qq(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function wv(e){return e===void 0||e===1}function gw({scale:e,scaleX:t,scaleY:n}){return!wv(e)||!wv(t)||!wv(n)}function Lo(e){return gw(e)||rR(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function rR(e){return Fk(e.x)||Fk(e.y)}function Fk(e){return e&&e!=="0%"}function ep(e,t,n){const r=e-n,s=t*r;return n+s}function $k(e,t,n,r,s){return s!==void 0&&(e=ep(e,s,r)),ep(e,n,r)+t}function yw(e,t=0,n=1,r,s){e.min=$k(e.min,t,n,r,s),e.max=$k(e.max,t,n,r,s)}function sR(e,{x:t,y:n}){yw(e.x,t.translate,t.scale,t.originPoint),yw(e.y,n.translate,n.scale,n.originPoint)}const Vk=.999999999999,zk=1.0000000000001;function Xq(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,l;for(let u=0;u<s;u++){i=n[u],l=i.projectionDelta;const{visualElement:d}=i.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&cc(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,sR(e,l)),r&&Lo(i.latestValues)&&cc(e,i.latestValues))}t.x<zk&&t.x>Vk&&(t.x=1),t.y<zk&&t.y>Vk&&(t.y=1)}function lc(e,t){e.min=e.min+t,e.max=e.max+t}function Uk(e,t,n,r,s=.5){const i=pn(e.min,e.max,s);yw(e,t,n,i,r)}function cc(e,t){Uk(e.x,t.x,t.scaleX,t.scale,t.originX),Uk(e.y,t.y,t.scaleY,t.scale,t.originY)}function iR(e,t){return nR(Qq(e.getBoundingClientRect(),t))}function Jq(e,t,n){const r=iR(e,n),{scroll:s}=t;return s&&(lc(r.x,s.offset.x),lc(r.y,s.offset.y)),r}const Bk=()=>({translate:0,scale:1,origin:0,originPoint:0}),uc=()=>({x:Bk(),y:Bk()}),qk=()=>({min:0,max:0}),Hn=()=>({x:qk(),y:qk()}),vw={current:null},aR={current:!1};function Zq(){if(aR.current=!0,!!$0)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>vw.current=e.matches;e.addEventListener("change",t),t()}else vw.current=!1}const e9=new WeakMap;function t9(e,t,n){for(const r in t){const s=t[r],i=n[r];if(gr(s))e.addValue(r,s);else if(gr(i))e.addValue(r,Oc(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const l=e.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=e.getStaticValue(r);e.addValue(r,Oc(l!==void 0?l:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Wk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class n9{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Gr.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,cn.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!i,this.isControllingVariants=Hp(n),this.isVariantNode=WA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in m){const y=m[g];d[g]!==void 0&&gr(y)&&y.set(d[g])}}mount(t){var n;this.current=t,e9.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),aR.current||Zq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:vw.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),ao(this.notifyUpdate),ao(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Jc.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&cn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Dc){const n=Dc[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Hn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Wk.length;r++){const s=Wk[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,l=t[i];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=t9(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Oc(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(JP(r)||eA(r))?r=parseFloat(r):!uq(r)&&oo.test(n)&&(r=DA(t,n)),this.setBaseTarget(t,gr(r)?r.get():r)),gr(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const l=hb(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);l&&(r=l[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!gr(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new q0),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){ib.render(this.render)}}class oR extends n9{constructor(){super(...arguments),this.KeyframeResolver=J6}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;gr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function lR(e,{style:t,vars:n},r,s){const i=e.style;let l;for(l in t)i[l]=t[l];s==null||s.applyProjectionStyles(i,r);for(l in n)i.setProperty(l,n[l])}function r9(e){return window.getComputedStyle(e)}class s9 extends oR{constructor(){super(...arguments),this.type="html",this.renderInstance=lR}readValueFromInstance(t,n){var r;if(Jc.has(n))return(r=this.projection)!=null&&r.isProjecting?cw(n):y6(t,n);{const s=r9(t),i=(G0(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return iR(t,n)}build(t,n,r){ub(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return mb(t,n,r)}}const cR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function i9(e,t,n,r){lR(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(cR.has(s)?s:pb(s),t.attrs[s])}class a9 extends oR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Hn}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Jc.has(n)){const r=OA(n);return r&&r.default||0}return n=cR.has(n)?n:pb(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return JA(t,n,r)}build(t,n,r){KA(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){i9(t,n,r,s)}mount(t){this.isSVGTag=QA(t.tagName),super.mount(t)}}const o9=(e,t)=>fb(e)?new a9(t):new s9(t,{allowProjection:e!==x.Fragment});function hc(e,t,n){const r=e.getProps();return hb(r,t,n!==void 0?n:r.custom,e)}const xw=e=>Array.isArray(e);function l9(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Oc(n))}function c9(e){return xw(e)?e[e.length-1]||0:e}function u9(e,t){const n=hc(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const l in i){const u=c9(i[l]);l9(e,l,u)}}function d9(e){return!!(gr(e)&&e.add)}function ww(e,t){const n=e.getValue("willChange");if(d9(n))return n.add(t);if(!n&&ca.WillChange){const r=new ca.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function uR(e){return e.props[ZA]}const f9=e=>e!==null;function h9(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(f9),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[i]}const m9={type:"spring",stiffness:500,damping:25,restSpeed:10},p9=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),g9={type:"keyframes",duration:.8},y9={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},v9=(e,{keyframes:t})=>t.length>2?g9:Jc.has(e)?e.startsWith("scale")?p9(t[1]):m9:y9;function x9({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:l,repeatDelay:u,from:d,elapsed:f,...h}){return!!Object.keys(h).length}const gb=(e,t,n,r={},s,i)=>l=>{const u=rb(r,e)||{},d=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-ki(d);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-f,onUpdate:g=>{t.set(g),u.onUpdate&&u.onUpdate(g)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:e,motionValue:t,element:i?void 0:s};x9(u)||Object.assign(h,v9(e,h)),h.duration&&(h.duration=ki(h.duration)),h.repeatDelay&&(h.repeatDelay=ki(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let m=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(mw(h),h.delay===0&&(m=!0)),(ca.instantAnimations||ca.skipAnimations)&&(m=!0,mw(h),h.delay=0),h.allowFlatten=!u.type&&!u.ease,m&&!i&&t.get()!==void 0){const g=h9(h.keyframes,u);if(g!==void 0){cn.update(()=>{h.onUpdate(g),h.onComplete()});return}}return u.isSync?new tb(h):new V6(h)};function w9({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function dR(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:l,...u}=t;r&&(i=r);const d=[],f=s&&e.animationState&&e.animationState.getState()[s];for(const h in u){const m=e.getValue(h,e.latestValues[h]??null),g=u[h];if(g===void 0||f&&w9(f,h))continue;const y={delay:n,...rb(i||{},h)},w=m.get();if(w!==void 0&&!m.isAnimating&&!Array.isArray(g)&&g===w&&!y.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const _=uR(e);if(_){const k=window.MotionHandoffAnimation(_,h,cn);k!==null&&(y.startTime=k,b=!0)}}ww(e,h),m.start(gb(h,m,g,e.shouldReduceMotion&&AA.has(h)?{type:!1}:y,e,b));const S=m.animation;S&&d.push(S)}return l&&Promise.all(d).then(()=>{cn.update(()=>{l&&u9(e,l)})}),d}function fR(e,t,n,r=0,s=1){const i=Array.from(e).sort((f,h)=>f.sortNodePosition(h)).indexOf(t),l=e.size,u=(l-1)*r;return typeof n=="function"?n(i,l):s===1?i*r:u-i*r}function bw(e,t,n={}){var d;const r=hc(e,t,n.type==="exit"?(d=e.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(dR(e,r,n)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(f=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:g}=s;return b9(e,t,f,h,m,g,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[f,h]=u==="beforeChildren"?[i,l]:[l,i];return f().then(()=>h())}else return Promise.all([i(),l(n.delay)])}function b9(e,t,n=0,r=0,s=0,i=1,l){const u=[];for(const d of e.variantChildren)d.notify("AnimationStart",t),u.push(bw(d,t,{...l,delay:n+(typeof r=="function"?0:r)+fR(e.variantChildren,d,r,s,i)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(u)}function _9(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>bw(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=bw(e,t,n);else{const s=typeof t=="function"?hc(e,t,n.custom):t;r=Promise.all(dR(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function hR(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const S9=cb.length;function mR(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?mR(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<S9;n++){const r=cb[n],s=e.props[r];(Vd(s)||s===!1)&&(t[r]=s)}return t}const j9=[...lb].reverse(),E9=lb.length;function k9(e){return t=>Promise.all(t.map(({animation:n,options:r})=>_9(e,n,r)))}function N9(e){let t=k9(e),n=Hk(),r=!0;const s=d=>(f,h)=>{var g;const m=hc(e,h,d==="exit"?(g=e.presenceContext)==null?void 0:g.custom:void 0);if(m){const{transition:y,transitionEnd:w,...b}=m;f={...f,...b,...w}}return f};function i(d){t=d(e)}function l(d){const{props:f}=e,h=mR(e.parent)||{},m=[],g=new Set;let y={},w=1/0;for(let S=0;S<E9;S++){const _=j9[S],k=n[_],N=f[_]!==void 0?f[_]:h[_],T=Vd(N),P=_===d?k.isActive:null;P===!1&&(w=S);let R=N===h[_]&&N!==f[_]&&T;if(R&&r&&e.manuallyAnimateOnMount&&(R=!1),k.protectedKeys={...y},!k.isActive&&P===null||!N&&!k.prevProp||Wp(N)||typeof N=="boolean")continue;const M=T9(k.prevProp,N);let A=M||_===d&&k.isActive&&!R&&T||S>w&&T,W=!1;const K=Array.isArray(N)?N:[N];let H=K.reduce(s(_),{});P===!1&&(H={});const{prevResolvedValues:z={}}=k,L={...z,...H},B=F=>{A=!0,g.has(F)&&(W=!0,g.delete(F)),k.needsAnimating[F]=!0;const D=e.getValue(F);D&&(D.liveStyle=!1)};for(const F in L){const D=H[F],X=z[F];if(y.hasOwnProperty(F))continue;let I=!1;xw(D)&&xw(X)?I=!hR(D,X):I=D!==X,I?D!=null?B(F):g.add(F):D!==void 0&&g.has(F)?B(F):k.protectedKeys[F]=!0}k.prevProp=N,k.prevResolvedValues=H,k.isActive&&(y={...y,...H}),r&&e.blockInitialAnimation&&(A=!1);const Q=R&&M;A&&(!Q||W)&&m.push(...K.map(F=>{const D={type:_};if(typeof F=="string"&&r&&!Q&&e.manuallyAnimateOnMount&&e.parent){const{parent:X}=e,I=hc(X,F);if(X.enteringChildren&&I){const{delayChildren:V}=I.transition||{};D.delay=fR(X.enteringChildren,e,V)}}return{animation:F,options:D}}))}if(g.size){const S={};if(typeof f.initial!="boolean"){const _=hc(e,Array.isArray(f.initial)?f.initial[0]:f.initial);_&&_.transition&&(S.transition=_.transition)}g.forEach(_=>{const k=e.getBaseTarget(_),N=e.getValue(_);N&&(N.liveStyle=!0),S[_]=k??null}),m.push({animation:S})}let b=!!m.length;return r&&(f.initial===!1||f.initial===f.animate)&&!e.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(m):Promise.resolve()}function u(d,f){var m;if(n[d].isActive===f)return Promise.resolve();(m=e.variantChildren)==null||m.forEach(g=>{var y;return(y=g.animationState)==null?void 0:y.setActive(d,f)}),n[d].isActive=f;const h=l(d);for(const g in n)n[g].protectedKeys={};return h}return{animateChanges:l,setActive:u,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Hk()}}}function T9(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!hR(t,e):!1}function Do(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Hk(){return{animate:Do(!0),whileInView:Do(),whileHover:Do(),whileTap:Do(),whileDrag:Do(),whileFocus:Do(),exit:Do()}}class go{constructor(t){this.isMounted=!1,this.node=t}update(){}}class C9 extends go{constructor(t){super(t),t.animationState||(t.animationState=N9(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Wp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let P9=0;class A9 extends go{constructor(){super(...arguments),this.id=P9++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const R9={animation:{Feature:C9},exit:{Feature:A9}};function Ud(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function vf(e){return{point:{x:e.pageX,y:e.pageY}}}const I9=e=>t=>ab(t)&&e(t,vf(t));function wd(e,t,n,r){return Ud(e,t,I9(n),r)}const pR=1e-4,O9=1-pR,D9=1+pR,gR=.01,M9=0-gR,L9=0+gR;function Cr(e){return e.max-e.min}function F9(e,t,n){return Math.abs(e-t)<=n}function Gk(e,t,n,r=.5){e.origin=r,e.originPoint=pn(t.min,t.max,e.origin),e.scale=Cr(n)/Cr(t),e.translate=pn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=O9&&e.scale<=D9||isNaN(e.scale))&&(e.scale=1),(e.translate>=M9&&e.translate<=L9||isNaN(e.translate))&&(e.translate=0)}function bd(e,t,n,r){Gk(e.x,t.x,n.x,r?r.originX:void 0),Gk(e.y,t.y,n.y,r?r.originY:void 0)}function Kk(e,t,n){e.min=n.min+t.min,e.max=e.min+Cr(t)}function $9(e,t,n){Kk(e.x,t.x,n.x),Kk(e.y,t.y,n.y)}function Yk(e,t,n){e.min=t.min-n.min,e.max=e.min+Cr(t)}function tp(e,t,n){Yk(e.x,t.x,n.x),Yk(e.y,t.y,n.y)}function bs(e){return[e("x"),e("y")]}const yR=({current:e})=>e?e.ownerDocument.defaultView:null,Qk=(e,t)=>Math.abs(e-t);function V9(e,t){const n=Qk(e.x,t.x),r=Qk(e.y,t.y);return Math.sqrt(n**2+r**2)}class vR{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=_v(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,w=V9(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!w)return;const{point:b}=g,{timestamp:S}=cr;this.history.push({...b,timestamp:S});const{onStart:_,onMove:k}=this.handlers;y||(_&&_(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=bv(y,this.transformPagePoint),cn.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:w,onSessionEnd:b,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=_v(g.type==="pointercancel"?this.lastMoveEventInfo:bv(y,this.transformPagePoint),this.history);this.startEvent&&w&&w(g,_),b&&b(g,_)},!ab(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=s||window;const u=vf(t),d=bv(u,this.transformPagePoint),{point:f}=d,{timestamp:h}=cr;this.history=[{...f,timestamp:h}];const{onSessionStart:m}=n;m&&m(t,_v(d,this.history)),this.removeListeners=pf(wd(this.contextWindow,"pointermove",this.handlePointerMove),wd(this.contextWindow,"pointerup",this.handlePointerUp),wd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ao(this.updatePoint)}}function bv(e,t){return t?{point:t(e.point)}:e}function Xk(e,t){return{x:e.x-t.x,y:e.y-t.y}}function _v({point:e},t){return{point:e,delta:Xk(e,xR(t)),offset:Xk(e,z9(t)),velocity:U9(t,.1)}}function z9(e){return e[0]}function xR(e){return e[e.length-1]}function U9(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=xR(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>ki(t)));)n--;if(!r)return{x:0,y:0};const i=ks(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const l={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function B9(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?pn(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?pn(n,e,r.max):Math.min(e,n)),e}function Jk(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function q9(e,{top:t,left:n,bottom:r,right:s}){return{x:Jk(e.x,n,s),y:Jk(e.y,t,r)}}function Zk(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function W9(e,t){return{x:Zk(e.x,t.x),y:Zk(e.y,t.y)}}function H9(e,t){let n=.5;const r=Cr(e),s=Cr(t);return s>r?n=Ld(t.min,t.max-r,e.min):r>s&&(n=Ld(e.min,e.max-s,t.min)),la(0,1,n)}function G9(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const _w=.35;function K9(e=_w){return e===!1?e=0:e===!0&&(e=_w),{x:eN(e,"left","right"),y:eN(e,"top","bottom")}}function eN(e,t,n){return{min:tN(e,t),max:tN(e,n)}}function tN(e,t){return typeof e=="number"?e:e[t]||0}const Y9=new WeakMap;class Q9{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Hn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(vf(m).point)},l=(m,g)=>{const{drag:y,dragPropagation:w,onDragStart:b}=this.getProps();if(y&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=nq(y),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),bs(_=>{let k=this.getAxisMotionValue(_).get()||0;if(Ni.test(k)){const{projection:N}=this.visualElement;if(N&&N.layout){const T=N.layout.layoutBox[_];T&&(k=Cr(T)*(parseFloat(k)/100))}}this.originPoint[_]=k}),b&&cn.postRender(()=>b(m,g)),ww(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},u=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g;const{dragPropagation:y,dragDirectionLock:w,onDirectionLock:b,onDrag:S}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:_}=g;if(w&&this.currentDirection===null){this.currentDirection=X9(_),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",g.point,_),this.updateAxis("y",g.point,_),this.visualElement.render(),S&&S(m,g)},d=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g,this.stop(m,g),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>bs(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)==null?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new vR(t,{onSessionStart:i,onStart:l,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:yR(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&cn.postRender(()=>u(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Jh(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let l=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(l=B9(l,this.constraints[t],this.elastic[t])),i.set(l)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&oc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=q9(r.layoutBox,t):this.constraints=!1,this.elastic=K9(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&bs(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=G9(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!oc(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Jq(r,s.root,this.visualElement.getTransformPagePoint());let l=W9(s.layout.layoutBox,i);if(n){const u=n(Yq(l));this.hasMutatedConstraints=!!u,u&&(l=nR(u))}return l}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=bs(h=>{if(!Jh(h,n,this.currentDirection))return;let m=d&&d[h]||{};l&&(m={min:0,max:0});const g=s?200:1e6,y=s?40:1e7,w={type:"inertia",velocity:r?t[h]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(h,w)});return Promise.all(f).then(u)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return ww(this.visualElement,t),r.start(gb(t,r,0,n,this.visualElement,!1))}stopAnimation(){bs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){bs(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){bs(n=>{const{drag:r}=this.getProps();if(!Jh(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[n];i.set(t[n]-pn(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!oc(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};bs(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();s[l]=H9({min:d,max:d},this.constraints[l])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),bs(l=>{if(!Jh(l,t,null))return;const u=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];u.set(pn(d,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;Y9.set(this.visualElement,this);const t=this.visualElement.current,n=wd(t,"pointerdown",d=>{const{drag:f,dragListener:h=!0}=this.getProps();f&&h&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();oc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),cn.read(r);const l=Ud(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(bs(h=>{const m=this.getAxisMotionValue(h);m&&(this.originPoint[h]+=d[h].translate,m.set(m.get()+d[h].translate))}),this.visualElement.render())}));return()=>{l(),n(),i(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:l=_w,dragMomentum:u=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:l,dragMomentum:u}}}function Jh(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function X9(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class J9 extends go{constructor(t){super(t),this.removeGroupControls=Ns,this.removeListeners=Ns,this.controls=new Q9(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ns}unmount(){this.removeGroupControls(),this.removeListeners()}}const nN=e=>(t,n)=>{e&&cn.postRender(()=>e(t,n))};class Z9 extends go{constructor(){super(...arguments),this.removePointerDownListener=Ns}onPointerDown(t){this.session=new vR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yR(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:nN(t),onStart:nN(n),onMove:r,onEnd:(i,l)=>{delete this.session,s&&cn.postRender(()=>s(i,l))}}}mount(){this.removePointerDownListener=wd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Cm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function rN(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ku={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(it.test(e))e=parseFloat(e);else return e;const n=rN(e,t.target.x),r=rN(e,t.target.y);return`${n}% ${r}%`}},eW={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=oo.parse(e);if(s.length>5)return r;const i=oo.createTransformer(e),l=typeof s[0]!="number"?1:0,u=n.x.scale*t.x,d=n.y.scale*t.y;s[0+l]/=u,s[1+l]/=d;const f=pn(u,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),i(s)}};let Sv=!1;class tW extends x.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;Sq(nW),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),Sv&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Cm.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:l}=r;return l&&(l.isPresent=i,Sv=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?l.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?l.promote():l.relegate()||cn.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),ib.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;Sv=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function wR(e){const[t,n]=UA(),r=x.useContext(L0);return a.jsx(tW,{...e,layoutGroup:r,switchLayoutGroup:x.useContext(eR),isPresent:t,safeToRemove:n})}const nW={borderRadius:{...Ku,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ku,borderTopRightRadius:Ku,borderBottomLeftRadius:Ku,borderBottomRightRadius:Ku,boxShadow:eW};function rW(e,t,n){const r=gr(e)?e:Oc(e);return r.start(gb("",r,t,n)),r.animation}const sW=(e,t)=>e.depth-t.depth;class iW{constructor(){this.children=[],this.isDirty=!1}add(t){V0(this.children,t),this.isDirty=!0}remove(t){z0(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(sW),this.isDirty=!1,this.children.forEach(t)}}function aW(e,t){const n=Gr.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(ao(r),e(i-t))};return cn.setup(r,!0),()=>ao(r)}const bR=["TopLeft","TopRight","BottomLeft","BottomRight"],oW=bR.length,sN=e=>typeof e=="string"?parseFloat(e):e,iN=e=>typeof e=="number"||it.test(e);function lW(e,t,n,r,s,i){s?(e.opacity=pn(0,n.opacity??1,cW(r)),e.opacityExit=pn(t.opacity??1,0,uW(r))):i&&(e.opacity=pn(t.opacity??1,n.opacity??1,r));for(let l=0;l<oW;l++){const u=`border${bR[l]}Radius`;let d=aN(t,u),f=aN(n,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||iN(d)===iN(f)?(e[u]=Math.max(pn(sN(d),sN(f),r),0),(Ni.test(f)||Ni.test(d))&&(e[u]+="%")):e[u]=f}(t.rotate||n.rotate)&&(e.rotate=pn(t.rotate||0,n.rotate||0,r))}function aN(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const cW=_R(0,.5,lA),uW=_R(.5,.95,Ns);function _R(e,t,n){return r=>r<e?0:r>t?1:n(Ld(e,t,r))}function oN(e,t){e.min=t.min,e.max=t.max}function zs(e,t){oN(e.x,t.x),oN(e.y,t.y)}function lN(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function cN(e,t,n,r,s){return e-=t,e=ep(e,1/n,r),s!==void 0&&(e=ep(e,1/s,r)),e}function dW(e,t=0,n=1,r=.5,s,i=e,l=e){if(Ni.test(t)&&(t=parseFloat(t),t=pn(l.min,l.max,t/100)-l.min),typeof t!="number")return;let u=pn(i.min,i.max,r);e===i&&(u-=t),e.min=cN(e.min,t,n,u,s),e.max=cN(e.max,t,n,u,s)}function uN(e,t,[n,r,s],i,l){dW(e,t[n],t[r],t[s],t.scale,i,l)}const fW=["x","scaleX","originX"],hW=["y","scaleY","originY"];function dN(e,t,n,r){uN(e.x,t,fW,n?n.x:void 0,r?r.x:void 0),uN(e.y,t,hW,n?n.y:void 0,r?r.y:void 0)}function fN(e){return e.translate===0&&e.scale===1}function SR(e){return fN(e.x)&&fN(e.y)}function hN(e,t){return e.min===t.min&&e.max===t.max}function mW(e,t){return hN(e.x,t.x)&&hN(e.y,t.y)}function mN(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function jR(e,t){return mN(e.x,t.x)&&mN(e.y,t.y)}function pN(e){return Cr(e.x)/Cr(e.y)}function gN(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class pW{constructor(){this.members=[]}add(t){V0(this.members,t),t.scheduleRender()}remove(t){if(z0(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function gW(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,l=(n==null?void 0:n.z)||0;if((s||i||l)&&(r=`translate3d(${s}px, ${i}px, ${l}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:f,rotate:h,rotateX:m,rotateY:g,skewX:y,skewY:w}=n;f&&(r=`perspective(${f}px) ${r}`),h&&(r+=`rotate(${h}deg) `),m&&(r+=`rotateX(${m}deg) `),g&&(r+=`rotateY(${g}deg) `),y&&(r+=`skewX(${y}deg) `),w&&(r+=`skewY(${w}deg) `)}const u=e.x.scale*t.x,d=e.y.scale*t.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const jv=["","X","Y","Z"],yW=1e3;let vW=0;function Ev(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function ER(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=uR(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",cn,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&ER(r)}function kR({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},u=t==null?void 0:t()){this.id=vW++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(bW),this.nodes.forEach(EW),this.nodes.forEach(kW),this.nodes.forEach(_W)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new iW)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new q0),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=zA(l)&&!lq(l),this.instance=l;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),e){let h,m=0;const g=()=>this.root.updateBlockedByResize=!1;cn.read(()=>{m=window.innerWidth}),e(l,()=>{const y=window.innerWidth;y!==m&&(m=y,this.root.updateBlockedByResize=!0,h&&h(),h=aW(g,250),Cm.hasAnimatedSinceResize&&(Cm.hasAnimatedSinceResize=!1,this.nodes.forEach(xN)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||f.getDefaultTransition()||AW,{onLayoutAnimationStart:b,onLayoutAnimationComplete:S}=f.getProps(),_=!this.targetLayout||!jR(this.targetLayout,y),k=!m&&g;if(this.options.layoutRoot||this.resumeFrom||k||m&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...rb(w,"layout"),onPlay:b,onComplete:S};(f.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(h,k)}else m||xN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ao(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(NW),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ER(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const m=this.path[h];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yN);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(vN);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(jW),this.nodes.forEach(xW),this.nodes.forEach(wW)):this.nodes.forEach(vN),this.clearAllSnapshots();const u=Gr.now();cr.delta=la(0,1e3/60,u-cr.timestamp),cr.timestamp=u,cr.isProcessing=!0,hv.update.process(cr),hv.preRender.process(cr),hv.render.process(cr),cr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ib.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(SW),this.sharedNodes.forEach(TW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,cn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){cn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Cr(this.snapshot.measuredBox.x)&&!Cr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Hn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!SR(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,h=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||Lo(this.latestValues)||h)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),RW(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:l}=this.options;if(!l)return Hn();const u=l.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(IW))){const{scroll:h}=this.root;h&&(lc(u.x,h.offset.x),lc(u.y,h.offset.y))}return u}removeElementScroll(l){var d;const u=Hn();if(zs(u,l),(d=this.scroll)!=null&&d.wasRoot)return u;for(let f=0;f<this.path.length;f++){const h=this.path[f],{scroll:m,options:g}=h;h!==this.root&&m&&g.layoutScroll&&(m.wasRoot&&zs(u,l),lc(u.x,m.offset.x),lc(u.y,m.offset.y))}return u}applyTransform(l,u=!1){const d=Hn();zs(d,l);for(let f=0;f<this.path.length;f++){const h=this.path[f];!u&&h.options.layoutScroll&&h.scroll&&h!==h.root&&cc(d,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Lo(h.latestValues)&&cc(d,h.latestValues)}return Lo(this.latestValues)&&cc(d,this.latestValues),d}removeTransform(l){const u=Hn();zs(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Lo(f.latestValues))continue;gw(f.latestValues)&&f.updateSnapshot();const h=Hn(),m=f.measurePageBox();zs(h,m),dN(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,h)}return Lo(this.latestValues)&&dN(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==cr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var y;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!this.layout||!(h||m))return;this.resolvedRelativeTargetAt=cr.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Hn(),this.targetWithTransforms=Hn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):zs(this.target,this.layout.layoutBox),sR(this.target,this.targetDelta)):zs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||gw(this.parent.latestValues)||rR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,u,d){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Hn(),this.relativeTargetOrigin=Hn(),tp(this.relativeTargetOrigin,u,d),zs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var w;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===cr.timestamp&&(d=!1),d)return;const{layout:f,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||h))return;zs(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;Xq(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Hn());const{target:y}=l;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(lN(this.prevProjectionDelta.x,this.projectionDelta.x),lN(this.prevProjectionDelta.y,this.projectionDelta.y)),bd(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!gN(this.projectionDelta.x,this.prevProjectionDelta.x)||!gN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=uc(),this.projectionDelta=uc(),this.projectionDeltaWithTransform=uc()}setAnimationOrigin(l,u=!1){const d=this.snapshot,f=d?d.latestValues:{},h={...this.latestValues},m=uc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const g=Hn(),y=d?d.source:void 0,w=this.layout?this.layout.source:void 0,b=y!==w,S=this.getStack(),_=!S||S.members.length<=1,k=!!(b&&!_&&this.options.crossfade===!0&&!this.path.some(PW));this.animationProgress=0;let N;this.mixTargetDelta=T=>{const P=T/1e3;wN(m.x,l.x,P),wN(m.y,l.y,P),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(tp(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),CW(this.relativeTarget,this.relativeTargetOrigin,g,P),N&&mW(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Hn()),zs(N,this.relativeTarget)),b&&(this.animationValues=h,lW(h,f,this.latestValues,P,k,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var u,d,f;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(f=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||f.stop(),this.pendingAnimation&&(ao(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=cn.update(()=>{Cm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Oc(0)),this.currentAnimation=rW(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),l.onUpdate&&l.onUpdate(h)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:h}=l;if(!(!u||!d||!f)){if(this!==l&&this.layout&&f&&NR(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Hn();const m=Cr(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+m;const g=Cr(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+g}zs(u,d),cc(u,h),bd(this.projectionDeltaWithTransform,this.layoutCorrected,u,h)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new pW),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var u;const{layoutId:l}=this.options;return l?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:l}=this.options;return l?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&Ev("z",l,f,this.animationValues);for(let h=0;h<jv.length;h++)Ev(`rotate${jv[h]}`,l,f,this.animationValues),Ev(`skew${jv[h]}`,l,f,this.animationValues);l.render();for(const h in f)l.setStaticValue(h,f[h]),this.animationValues&&(this.animationValues[h]=f[h]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Tm(u==null?void 0:u.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Tm(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!Lo(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const h=f.animationValues||f.latestValues;this.applyTransformsToTarget();let m=gW(this.projectionDeltaWithTransform,this.treeScale,h);d&&(m=d(h,m)),l.transform=m;const{x:g,y}=this.projectionDelta;l.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,f.animationValues?l.opacity=f===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:l.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const w in zd){if(h[w]===void 0)continue;const{correct:b,applyTo:S,isCSSVariable:_}=zd[w],k=m==="none"?h[w]:b(h[w],f);if(S){const N=S.length;for(let T=0;T<N;T++)l[S[T]]=k}else _?this.options.visualElement.renderState.vars[w]=k:l[w]=k}this.options.layoutId&&(l.pointerEvents=f===this?Tm(u==null?void 0:u.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(yN),this.root.sharedNodes.clear()}}}function xW(e){e.updateLayout()}function wW(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,l=t.source!==e.layout.source;i==="size"?bs(m=>{const g=l?t.measuredBox[m]:t.layoutBox[m],y=Cr(g);g.min=r[m].min,g.max=g.min+y}):NR(i,t.layoutBox,r)&&bs(m=>{const g=l?t.measuredBox[m]:t.layoutBox[m],y=Cr(r[m]);g.max=g.min+y,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+y)});const u=uc();bd(u,r,t.layoutBox);const d=uc();l?bd(d,e.applyTransform(s,!0),t.measuredBox):bd(d,r,t.layoutBox);const f=!SR(u);let h=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:g,layout:y}=m;if(g&&y){const w=Hn();tp(w,t.layoutBox,g.layoutBox);const b=Hn();tp(b,r,y.layoutBox),jR(w,b)||(h=!0),m.options.layoutRoot&&(e.relativeTarget=b,e.relativeTargetOrigin=w,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:h})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function bW(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function _W(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function SW(e){e.clearSnapshot()}function yN(e){e.clearMeasurements()}function vN(e){e.isLayoutDirty=!1}function jW(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function xN(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function EW(e){e.resolveTargetDelta()}function kW(e){e.calcProjection()}function NW(e){e.resetSkewAndRotation()}function TW(e){e.removeLeadSnapshot()}function wN(e,t,n){e.translate=pn(t.translate,0,n),e.scale=pn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function bN(e,t,n,r){e.min=pn(t.min,n.min,r),e.max=pn(t.max,n.max,r)}function CW(e,t,n,r){bN(e.x,t.x,n.x,r),bN(e.y,t.y,n.y,r)}function PW(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const AW={duration:.45,ease:[.4,0,.1,1]},_N=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),SN=_N("applewebkit/")&&!_N("chrome/")?Math.round:Ns;function jN(e){e.min=SN(e.min),e.max=SN(e.max)}function RW(e){jN(e.x),jN(e.y)}function NR(e,t,n){return e==="position"||e==="preserve-aspect"&&!F9(pN(t),pN(n),.2)}function IW(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const OW=kR({attachResizeListener:(e,t)=>Ud(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),kv={current:void 0},TR=kR({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!kv.current){const e=new OW({});e.mount(window),e.setOptions({layoutScroll:!0}),kv.current=e}return kv.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),DW={pan:{Feature:Z9},drag:{Feature:J9,ProjectionNode:TR,MeasureLayout:wR}};function EN(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&cn.postRender(()=>i(t,vf(t)))}class MW extends go{mount(){const{current:t}=this.node;t&&(this.unmount=rq(t,(n,r)=>(EN(this.node,r,"Start"),s=>EN(this.node,s,"End"))))}unmount(){}}class LW extends go{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pf(Ud(this.node.current,"focus",()=>this.onFocus()),Ud(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function kN(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&cn.postRender(()=>i(t,vf(t)))}class FW extends go{mount(){const{current:t}=this.node;t&&(this.unmount=oq(t,(n,r)=>(kN(this.node,r,"Start"),(s,{success:i})=>kN(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Sw=new WeakMap,Nv=new WeakMap,$W=e=>{const t=Sw.get(e.target);t&&t(e)},VW=e=>{e.forEach($W)};function zW({root:e,...t}){const n=e||document;Nv.has(n)||Nv.set(n,{});const r=Nv.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(VW,{root:e,...t})),r[s]}function UW(e,t,n){const r=zW(t);return Sw.set(e,n),r.observe(e),()=>{Sw.delete(e),r.unobserve(e)}}const BW={some:0,all:1};class qW extends go{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:BW[s]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,i&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:h,onViewportLeave:m}=this.node.getProps(),g=f?h:m;g&&g(d)};return UW(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(WW(t,n))&&this.startObserver()}unmount(){}}function WW({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const HW={inView:{Feature:qW},tap:{Feature:FW},focus:{Feature:LW},hover:{Feature:MW}},GW={layout:{ProjectionNode:TR,MeasureLayout:wR}},KW={...R9,...HW,...DW,...GW},Cs=Kq(KW,o9),YW=Cs.button,we=oe.forwardRef(({className:e,variant:t="default",size:n="default",asChild:r=!1,...s},i)=>{const l=r?Cs.span:YW,u={default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},d={default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"};return a.jsx(l,{className:Ot("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",u[t],d[n],e),ref:i,whileHover:{scale:1.03},whileTap:{scale:.98},transition:{type:"spring",stiffness:400,damping:17},...s})});we.displayName="Button";const QW=Cs.div,Ne=oe.forwardRef(({className:e,isHoverable:t=!1,...n},r)=>a.jsx(QW,{ref:r,className:Ot("rounded-lg border bg-card text-card-foreground shadow-sm",e),whileHover:t?{y:-4,boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)"}:{},transition:{type:"spring",stiffness:300,damping:20},...n}));Ne.displayName="Card";const Oe=oe.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:Ot("flex flex-col space-y-1.5 p-6",e),...t}));Oe.displayName="CardHeader";const Le=oe.forwardRef(({className:e,...t},n)=>a.jsx("h3",{ref:n,className:Ot("text-2xl font-semibold leading-none tracking-tight",e),...t}));Le.displayName="CardTitle";const Bd=oe.forwardRef(({className:e,...t},n)=>a.jsx("p",{ref:n,className:Ot("text-sm text-muted-foreground",e),...t}));Bd.displayName="CardDescription";const Te=oe.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:Ot("p-6 pt-0",e),...t}));Te.displayName="CardContent";const CR=oe.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:Ot("flex items-center p-6 pt-0",e),...t}));CR.displayName="CardFooter";const be=oe.forwardRef(({className:e="",type:t="text",...n},r)=>a.jsx("input",{type:t,className:["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2","text-sm ring-offset-background file:border-0 file:bg-transparent","file:text-sm file:font-medium placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e].filter(Boolean).join(" "),ref:r,...n}));be.displayName="Input";const ln=({children:e,value:t,onValueChange:n,disabled:r})=>a.jsx("div",{className:"relative",children:oe.Children.map(e,s=>oe.cloneElement(s,{value:t,onValueChange:n,disabled:r}))}),nn=oe.forwardRef(({className:e="",children:t,value:n,onValueChange:r,disabled:s,...i},l)=>a.jsx("button",{type:"button",ref:l,className:["flex h-10 w-full items-center justify-between rounded-md border border-input","bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",e].filter(Boolean).join(" "),disabled:s,...i,children:t})),rn=({placeholder:e,value:t})=>a.jsx("span",{className:"block truncate",children:t||e}),sn=({children:e,value:t,onValueChange:n})=>a.jsx("div",{className:"absolute z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md",children:oe.Children.map(e,r=>oe.cloneElement(r,{onClick:()=>n==null?void 0:n(r.props.value),isSelected:t===r.props.value}))}),qe=({value:e,children:t,onClick:n,isSelected:r,className:s=""})=>a.jsx("div",{className:["relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2","text-sm outline-none focus:bg-accent focus:text-accent-foreground","data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r?"bg-accent text-accent-foreground":"",s].filter(Boolean).join(" "),onClick:n,children:t});nn.displayName="SelectTrigger";rn.displayName="SelectValue";sn.displayName="SelectContent";qe.displayName="SelectItem";function NN(e){return e?e.slice(0,10):null}function TN(e,t,n="text/plain"){const r=new Blob([t],{type:n}),s=URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=e,i.click(),URL.revokeObjectURL(s)}function Us(e){const t=String(e??"");return/[\n\r,\"]/g.test(t)?`"${t.replaceAll('"','""')}"`:t}function PR(){var P,R,M,A,W,K,H,z;const{data:e}=vr(),[t,n]=x.useState(()=>{const L=new Date;return L.setDate(L.getDate()-14),L.toISOString().slice(0,10)}),[r,s]=x.useState(()=>new Date().toISOString().slice(0,10)),[i,l]=x.useState("all"),[u,d]=x.useState("all"),[f,h]=x.useState(null),m=_t({queryKey:["analytics-ai-token"],queryFn:async()=>{const L=await Nt.auth.getAccessToken();return{"Content-Type":"application/json",...L?{Authorization:`Bearer ${L}`}:{}}}}),g=_t({queryKey:["analytics-ai-usage-summary"],enabled:!!m.data,queryFn:async()=>{const L=await fetch(`${vt}/admin/ai/usage-summary`,{headers:m.data});if(!L.ok)throw new Error("Failed to load AI usage summary");return L.json()}}),y=x.useMemo(()=>{const L={day:{_gte:t,_lte:r}};return e!=null&&e.districtId&&(L.district_id={_eq:e.districtId}),e!=null&&e.schoolId&&(L.school_id={_eq:e.schoolId}),i!=="all"&&(L.event_name={_eq:i}),L},[t,r,e==null?void 0:e.districtId,e==null?void 0:e.schoolId,i]),w=_t({queryKey:["analytics-rollups",y],enabled:!!(e!=null&&e.districtId),queryFn:async()=>{const L=await Gt(`query Rollups($where: analytics_event_rollups_daily_bool_exp!) {
          analytics_event_rollups_daily(
            where: $where,
            order_by: [{ day: desc }, { event_count: desc }],
            limit: 500
          ) {
            day
            event_name
            district_id
            school_id
            event_count
          }
        }`,{where:y});return(L==null?void 0:L.analytics_event_rollups_daily)??[]}}),b=x.useMemo(()=>{if(!f)return null;const L={event_ts:{_gte:`${t}T00:00:00.000Z`,_lte:`${r}T23:59:59.999Z`},event_name:{_eq:f}};return e!=null&&e.districtId&&(L.district_id={_eq:e.districtId}),e!=null&&e.schoolId&&(L.school_id={_eq:e.schoolId}),u!=="all"&&(L.metadata={_contains:{actor_role:u}}),L},[f,t,r,e==null?void 0:e.districtId,e==null?void 0:e.schoolId,u]),S=_t({queryKey:["analytics-drill",b],enabled:!!b,queryFn:async()=>{const L=await Gt(`query Drill($where: analytics_events_bool_exp!) {
          analytics_events(
            where: $where,
            order_by: { event_ts: desc },
            limit: 200
          ) {
            id
            event_ts
            event_name
            actor_user_id
            entity_type
            entity_id
            metadata
          }
        }`,{where:b});return(L==null?void 0:L.analytics_events)??[]}}),_=x.useMemo(()=>{const L=new Set;for(const B of w.data??[])L.add(B.event_name);return Array.from(L).sort()},[w.data]),k=()=>{const L=w.data??[],Q=[["day","event_name","district_id","school_id","event_count"].join(",")];for(const q of L)Q.push([Us(q.day),Us(q.event_name),Us(q.district_id??""),Us(q.school_id??""),Us(q.event_count??0)].join(","));TN(`teachmo_analytics_rollups_${t}_${r}.csv`,Q.join(`
`),"text/csv")},N=()=>{const L=S.data??[],Q=[["event_ts","event_name","actor_user_id","entity_type","entity_id","metadata"].join(",")];for(const q of L)Q.push([Us(q.event_ts),Us(q.event_name),Us(q.actor_user_id??""),Us(q.entity_type??""),Us(q.entity_id??""),Us(JSON.stringify(q.metadata??{}))].join(","));TN(`teachmo_analytics_events_${f}_${t}_${r}.csv`,Q.join(`
`),"text/csv")},T=()=>{const L=`
      <html>
        <head>
          <title>Teachmo Analytics Export</title>
          <style>
            body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; padding: 24px; }
            h1 { font-size: 18px; margin: 0 0 8px; }
            h2 { font-size: 14px; margin: 18px 0 8px; }
            table { width: 100%; border-collapse: collapse; }
            th, td { border: 1px solid #ddd; padding: 6px 8px; font-size: 12px; }
            th { text-align: left; background: #f6f6f6; }
            .meta { color: #555; font-size: 12px; margin-bottom: 8px; }
          </style>
        </head>
        <body>
          <h1>Teachmo Analytics Export</h1>
          <div class="meta">Range: ${t}  ${r}</div>
          <h2>Rollups (daily)</h2>
          <table>
            <thead>
              <tr><th>Day</th><th>Event</th><th>District</th><th>School</th><th>Count</th></tr>
            </thead>
            <tbody>
              ${(w.data??[]).map(Q=>`<tr><td>${Q.day}</td><td>${Q.event_name}</td><td>${Q.district_id??""}</td><td>${Q.school_id??""}</td><td>${Q.event_count??0}</td></tr>`).join("")}
            </tbody>
          </table>
          ${f?`
            <h2>Drilldown: ${f}</h2>
            <table>
              <thead>
                <tr><th>Time</th><th>User</th><th>Entity</th><th>Metadata</th></tr>
              </thead>
              <tbody>
                ${(S.data??[]).map(Q=>`<tr><td>${new Date(Q.event_ts).toLocaleString()}</td><td>${Q.actor_user_id??""}</td><td>${(Q.entity_type??"")+(Q.entity_id?":"+Q.entity_id:"")}</td><td><pre style="margin:0; white-space: pre-wrap;">${JSON.stringify(Q.metadata??{},null,2)}</pre></td></tr>`).join("")}
              </tbody>
            </table>
          `:""}
        </body>
      </html>
    `,B=window.open("","_blank");B&&(B.document.open(),B.document.write(L),B.document.close(),B.focus(),B.print())};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Analytics"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Tenant-scoped rollups and event drilldowns (event_ts + metadata). Export to CSV or PDF."})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(we,{variant:"secondary",onClick:T,disabled:w.isLoading,children:"Export PDF"}),a.jsx(we,{onClick:k,disabled:w.isLoading,children:"Export Rollups CSV"})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Filters"})}),a.jsxs(Te,{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"From"}),a.jsx(be,{type:"date",value:t,onChange:L=>n(NN(L.target.value))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"To"}),a.jsx(be,{type:"date",value:r,onChange:L=>s(NN(L.target.value))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Event"}),a.jsxs(ln,{value:i,onValueChange:l,children:[a.jsx(nn,{children:a.jsx(rn,{placeholder:"All events"})}),a.jsxs(sn,{children:[a.jsx(qe,{value:"all",children:"All events"}),_.map(L=>a.jsx(qe,{value:L,children:L},L))]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Actor role (drilldown)"}),a.jsxs(ln,{value:u,onValueChange:d,children:[a.jsx(nn,{children:a.jsx(rn,{placeholder:"All roles"})}),a.jsxs(sn,{children:[a.jsx(qe,{value:"all",children:"All roles"}),["parent","teacher","school_admin","district_admin","system_admin"].map(L=>a.jsx(qe,{value:L,children:L},L))]})]})]})]})]}),a.jsxs(Ne,{children:[a.jsxs(Oe,{className:"flex flex-row items-center justify-between",children:[a.jsx(Le,{children:"Daily rollups"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:e!=null&&e.districtId?`District: ${e.districtId}${e.schoolId?`  School: ${e.schoolId}`:""}`:"Loading tenant scope"})]}),a.jsx(Te,{children:w.isLoading?a.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading rollups"}):(P=w.data)!=null&&P.length?a.jsx("div",{className:"overflow-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left border-b",children:[a.jsx("th",{className:"p-2",children:"Day"}),a.jsx("th",{className:"p-2",children:"Event"}),a.jsx("th",{className:"p-2",children:"School"}),a.jsx("th",{className:"p-2",children:"Count"}),a.jsx("th",{className:"p-2"})]})}),a.jsx("tbody",{children:w.data.map(L=>a.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[a.jsx("td",{className:"p-2 whitespace-nowrap",children:L.day}),a.jsx("td",{className:"p-2",children:L.event_name}),a.jsx("td",{className:"p-2 font-mono text-xs",children:L.school_id??""}),a.jsx("td",{className:"p-2 font-semibold",children:L.event_count}),a.jsx("td",{className:"p-2",children:a.jsx(we,{size:"sm",variant:"secondary",onClick:()=>h(L.event_name),children:"Drill down"})})]},`${L.day}-${L.event_name}-${L.school_id??"district"}`))})]})}):a.jsx("div",{className:"text-sm text-muted-foreground",children:"No events in this range yet."})})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"AI Usage Summary"})}),a.jsx(Te,{className:"space-y-3 text-sm",children:g.isLoading?a.jsx("div",{className:"text-muted-foreground",children:"Loading AI usage"}):(M=(R=g.data)==null?void 0:R.byModel)!=null&&M.length?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[a.jsx("span",{children:"Total calls"}),a.jsx("span",{children:((W=(A=g.data)==null?void 0:A.totals)==null?void 0:W.calls)??0})]}),a.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[a.jsx("span",{children:"Estimated spend"}),a.jsxs("span",{children:["$",Number(((H=(K=g.data)==null?void 0:K.totals)==null?void 0:H.cost_usd)||0).toFixed(2)]})]}),a.jsx("div",{className:"overflow-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left border-b",children:[a.jsx("th",{className:"p-2",children:"Model"}),a.jsx("th",{className:"p-2",children:"Calls"}),a.jsx("th",{className:"p-2",children:"Tokens"}),a.jsx("th",{className:"p-2",children:"Cost"})]})}),a.jsx("tbody",{children:g.data.byModel.map(L=>a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"p-2 font-mono text-xs",children:L.model||""}),a.jsx("td",{className:"p-2",children:L.calls}),a.jsx("td",{className:"p-2",children:L.tokens??0}),a.jsxs("td",{className:"p-2",children:["$",Number(L.cost_usd||0).toFixed(2)]})]},L.model))})]})})]}):a.jsx("div",{className:"text-muted-foreground",children:"No AI usage recorded yet."})})]}),a.jsxs(Ne,{children:[a.jsxs(Oe,{className:"flex flex-row items-center justify-between",children:[a.jsxs(Le,{children:["Drilldown ",f?` ${f}`:""]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(we,{variant:"secondary",onClick:()=>h(null),disabled:!f,children:"Clear"}),a.jsx(we,{onClick:N,disabled:!f||S.isLoading,children:"Export Events CSV"})]})]}),a.jsx(Te,{children:f?S.isLoading?a.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading events"}):(z=S.data)!=null&&z.length?a.jsx("div",{className:"overflow-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left border-b",children:[a.jsx("th",{className:"p-2",children:"Time"}),a.jsx("th",{className:"p-2",children:"User"}),a.jsx("th",{className:"p-2",children:"Entity"}),a.jsx("th",{className:"p-2",children:"Metadata"})]})}),a.jsx("tbody",{children:S.data.map(L=>a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"p-2 whitespace-nowrap",children:new Date(L.event_ts).toLocaleString()}),a.jsx("td",{className:"p-2 font-mono text-xs",children:L.actor_user_id??""}),a.jsx("td",{className:"p-2 font-mono text-xs",children:(L.entity_type??"")+(L.entity_id?`:${L.entity_id}`:"")}),a.jsx("td",{className:"p-2",children:a.jsx("pre",{className:"text-xs whitespace-pre-wrap max-w-[720px]",children:JSON.stringify(L.metadata??{},null,2)})})]},L.id))})]})}):a.jsx("div",{className:"text-sm text-muted-foreground",children:"No matching events."}):a.jsx("div",{className:"text-sm text-muted-foreground",children:"Select an event in rollups to drill down."})})]})]})}const XW=Object.freeze(Object.defineProperty({__proto__:null,default:PR},Symbol.toStringTag,{value:"Module"})),JW=1,ZW=1e6;let Tv=0;function eH(){return Tv=(Tv+1)%100,Tv.toString()}const Cv=new Map,CN=e=>{if(Cv.has(e))return;const t=setTimeout(()=>{Cv.delete(e),_d({type:"REMOVE_TOAST",toastId:e})},ZW);Cv.set(e,t)},tH=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,JW)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?CN(n):e.toasts.forEach(r=>{CN(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":{const{toastId:n}=t;return n===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==n)}}}},Pm=[];let Am={toasts:[]};function _d(e){Am=tH(Am,e),Pm.forEach(t=>{t(Am)})}function nH(e){const t=eH(),n=s=>_d({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>_d({type:"DISMISS_TOAST",toastId:t});return _d({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function ds(){const[e,t]=x.useState(Am);return x.useEffect(()=>(Pm.push(t),()=>{const n=Pm.indexOf(t);n>-1&&Pm.splice(n,1)}),[e]),{...e,toast:nH,dismiss:n=>_d({type:"DISMISS_TOAST",toastId:n})}}const an=oe.forwardRef(({className:e="",...t},n)=>a.jsx("textarea",{className:["flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2","text-sm ring-offset-background placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e].filter(Boolean).join(" "),ref:n,...t}));an.displayName="Textarea";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rH=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AR=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:l,...u},d)=>x.createElement("svg",{ref:d,...sH,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:AR("lucide",s),...u},[...l.map(([f,h])=>x.createElement(f,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=(e,t)=>{const n=x.forwardRef(({className:r,...s},i)=>x.createElement(iH,{ref:i,iconNode:t,className:AR(`lucide-${rH(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],oH=wt("ArrowLeft",aH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],cH=wt("ArrowRight",lH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]],dH=wt("BookmarkPlus",uH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fH=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],hH=wt("Bookmark",fH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mH=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],RR=wt("Building",mH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pH=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],PN=wt("Calendar",pH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gH=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],yH=wt("ChartNoAxesColumnIncreasing",gH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vH=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],IR=wt("Check",vH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xH=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],wH=wt("ChevronLeft",xH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bH=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yb=wt("ChevronRight",bH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _H=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],SH=wt("CircleCheckBig",_H);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],EH=wt("CircleHelp",jH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],NH=wt("Circle",kH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TH=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],CH=wt("Compass",TH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PH=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],OR=wt("Ellipsis",PH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AH=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],RH=wt("Eye",AH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IH=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],OH=wt("Flag",IH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],DR=wt("Globe",DH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MH=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],LH=wt("Hash",MH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],$H=wt("Heart",FH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],MR=wt("House",VH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Mc=wt("LoaderCircle",zH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],BH=wt("Lock",UH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],WH=wt("MessageCircle",qH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],np=wt("MessageSquare",HH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],KH=wt("MousePointer",GH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],sl=wt("Plus",YH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],jw=wt("RefreshCw",QH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],LR=wt("School",XH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],rp=wt("Search",JH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZH=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],e8=wt("Send",ZH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],n8=wt("Share2",t8);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],s8=wt("ShieldAlert",r8);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],FR=wt("Shield",i8);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],vb=wt("Sparkles",a8);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],l8=wt("SquarePen",o8);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],AN=wt("Tag",c8);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],d8=wt("Trash2",u8);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xb=wt("TriangleAlert",f8);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],qd=wt("Users",h8);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Wd=wt("X",m8),il=x.forwardRef(({className:e,checked:t,onCheckedChange:n,disabled:r,...s},i)=>{const l=()=>{!r&&n&&n(!t)},u=m=>{(m.key===" "||m.key==="Enter")&&(m.preventDefault(),l())},h=["peer h-4 w-4 shrink-0 rounded-sm border border-gray-300 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t?"bg-blue-600 text-white border-blue-600":"bg-white",e].filter(Boolean).join(" ");return a.jsx("button",{ref:i,type:"button",role:"checkbox","aria-checked":t,disabled:r,onClick:l,onKeyDown:u,className:h,...s,children:t&&a.jsx(IR,{className:"h-4 w-4"})})});il.displayName="Checkbox";const De=oe.forwardRef(({className:e="",...t},n)=>a.jsx("label",{ref:n,className:["text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e].filter(Boolean).join(" "),...t}));De.displayName="Label";const Xs=oe.forwardRef(({className:e="",checked:t,onCheckedChange:n,disabled:r,...s},i)=>a.jsx("button",{type:"button",role:"switch","aria-checked":t,ref:i,className:["peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent","transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","focus-visible:ring-offset-2 focus-visible:ring-offset-background","disabled:cursor-not-allowed disabled:opacity-50",t?"bg-primary":"bg-input",e].filter(Boolean).join(" "),disabled:r,onClick:()=>n==null?void 0:n(!t),...s,children:a.jsx("span",{className:["pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0","transition-transform",t?"translate-x-5":"translate-x-0"].join(" ")})}));Xs.displayName="Switch";const p8=[{value:"parent",label:"Parents"},{value:"teacher",label:"Teachers"},{value:"school_admin",label:"School admins"},{value:"district_admin",label:"District admins"},{value:"system_admin",label:"System admins"}];async function Yu(e,t={}){const n=await fetch(e,t);if(!n.ok){const r=await n.text();throw new Error(r||"Request failed")}return n.json()}function RN(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function $R(){var A,W,K,H,z,L,B,Q;const{toast:e}=ds(),[t,n]=x.useState("email"),[r,s]=x.useState(""),[i,l]=x.useState(""),[u,d]=x.useState(""),[f,h]=x.useState(""),[m,g]=x.useState(""),[y,w]=x.useState(new Set(["parent","teacher"])),b=_t({queryKey:["notification_headers"],queryFn:async()=>{const q=await Nt.auth.getAccessToken();return{"Content-Type":"application/json",...q?{Authorization:`Bearer ${q}`}:{}}}}),S=_t({queryKey:["admin_announcements"],queryFn:async()=>Yu(`${vt}/admin/notifications/announcements`,{headers:b.data})}),_=_t({queryKey:["admin_notification_metrics",t],queryFn:async()=>Yu(`${vt}/admin/notifications/metrics?channel=${t}`,{headers:b.data})}),k=_t({queryKey:["admin_notification_settings"],queryFn:async()=>Yu(`${vt}/tenants/settings`,{headers:b.data})}),N=x.useMemo(()=>{var F,D;return(((D=(F=k.data)==null?void 0:F.settings)==null?void 0:D.settings)||{}).notifications||{}},[k.data]),T=q=>{w(F=>{const D=new Set(F);return D.has(q)?D.delete(q):D.add(q),D})},P=Tn({mutationFn:async()=>{const q={channel:t,title:r,body:i,send_at:u?new Date(u).toISOString():null,segment:{roles:Array.from(y),user_ids:RN(f),school_ids:RN(m)}};return Yu(`${vt}/admin/notifications/announcements`,{method:"POST",headers:b.data,body:JSON.stringify(q)})},onSuccess:()=>{e({title:"Announcement queued",description:"Your notification is now in the delivery queue."}),s(""),l(""),d(""),S.refetch()},onError:q=>{e({variant:"destructive",title:"Unable to send",description:q instanceof Error?q.message:"Failed to create announcement."})}}),R=Tn({mutationFn:async q=>{var D;const F=((D=k.data)==null?void 0:D.settings)||{};return Yu(`${vt}/tenants/settings`,{method:"PUT",headers:b.data,body:JSON.stringify({branding:F.branding||{},settings:{...F.settings||{},notifications:q}})})},onSuccess:()=>{e({title:"Deliverability settings saved",description:"Tenant validation settings are updated."}),k.refetch()},onError:q=>{e({variant:"destructive",title:"Save failed",description:q instanceof Error?q.message:"Unable to update settings."})}}),M=((A=_.data)==null?void 0:A.metrics)||{};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Queue tenant-wide or segmented announcements and monitor deliverability signals."})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Deliverability Settings"})}),a.jsx(Te,{className:"space-y-4 text-sm",children:a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(De,{htmlFor:"spf-toggle",children:"SPF validated"}),a.jsx(Xs,{id:"spf-toggle",checked:((W=N.email)==null?void 0:W.spf)==="pass",onCheckedChange:q=>R.mutate({...N,email:{...N.email,spf:q?"pass":"fail"}})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(De,{htmlFor:"dkim-toggle",children:"DKIM validated"}),a.jsx(Xs,{id:"dkim-toggle",checked:((K=N.email)==null?void 0:K.dkim)==="pass",onCheckedChange:q=>R.mutate({...N,email:{...N.email,dkim:q?"pass":"fail"}})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(De,{htmlFor:"dmarc-toggle",children:"DMARC validated"}),a.jsx(Xs,{id:"dmarc-toggle",checked:((H=N.email)==null?void 0:H.dmarc)==="pass",onCheckedChange:q=>R.mutate({...N,email:{...N.email,dmarc:q?"pass":"fail"}})})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(De,{htmlFor:"sms-toggle",children:"SMS opt-in enabled"}),a.jsx(Xs,{id:"sms-toggle",checked:((z=N.sms)==null?void 0:z.opt_in)===!0,onCheckedChange:q=>R.mutate({...N,sms:{...N.sms,opt_in:q}})})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"SPF/DKIM/DMARC must pass to send email; SMS opt-in is required for SMS delivery."})]})]})})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Announcement Composer"})}),a.jsxs(Te,{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"announcement-title",children:"Title"}),a.jsx(be,{id:"announcement-title",value:r,onChange:q=>s(q.target.value),placeholder:"Quarterly update"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{children:"Channel"}),a.jsxs(ln,{value:t,onValueChange:n,children:[a.jsx(nn,{children:a.jsx(rn,{placeholder:"Select channel"})}),a.jsxs(sn,{children:[a.jsx(qe,{value:"email",children:"Email"}),a.jsx(qe,{value:"sms",children:"SMS"}),a.jsx(qe,{value:"push",children:"Push"})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"announcement-body",children:"Message"}),a.jsx(an,{id:"announcement-body",value:i,onChange:q=>l(q.target.value),rows:4,placeholder:"Share an update with your community..."})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"announcement-sendat",children:"Scheduled send time"}),a.jsx(be,{id:"announcement-sendat",type:"datetime-local",value:u,onChange:q=>d(q.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"announcement-school",children:"School IDs (optional)"}),a.jsx(be,{id:"announcement-school",value:m,onChange:q=>g(q.target.value),placeholder:"uuid, uuid"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{children:"Target roles"}),a.jsx("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:p8.map(q=>a.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[a.jsx(il,{checked:y.has(q.value),onCheckedChange:()=>T(q.value)}),q.label]},q.value))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"announcement-users",children:"Specific user IDs (optional)"}),a.jsx(an,{id:"announcement-users",value:f,onChange:q=>h(q.target.value),rows:2,placeholder:"uuid, uuid"})]}),a.jsx(we,{onClick:()=>P.mutate(),disabled:P.isPending,children:"Queue announcement"})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Deliverability Metrics"})}),a.jsxs(Te,{className:"grid gap-4 md:grid-cols-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-muted-foreground",children:"Delivered"}),a.jsx("div",{className:"text-lg font-semibold",children:M.delivered||0})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-muted-foreground",children:"Bounced"}),a.jsx("div",{className:"text-lg font-semibold",children:M.bounced||0})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-muted-foreground",children:"Opened"}),a.jsx("div",{className:"text-lg font-semibold",children:M.opened||0})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-muted-foreground",children:"Clicked"}),a.jsx("div",{className:"text-lg font-semibold",children:M.clicked||0})]})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Recent Announcements"})}),a.jsxs(Te,{className:"space-y-4 text-sm",children:[(((L=S.data)==null?void 0:L.announcements)||[]).map(q=>a.jsxs("div",{className:"border rounded-md p-4 space-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"font-semibold",children:q.title||"Untitled announcement"}),a.jsx("div",{className:"text-xs uppercase text-muted-foreground",children:q.status})]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[q.channel,"  scheduled ",q.send_at?new Date(q.send_at).toLocaleString():"now"]}),a.jsx("p",{children:q.body}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Delivered ",q.sent_count||0,"  Bounced ",q.bounced_count||0]})]},q.id)),((Q=(B=S.data)==null?void 0:B.announcements)==null?void 0:Q.length)===0&&a.jsx("p",{className:"text-muted-foreground",children:"No announcements yet."})]})]})]})}const g8=Object.freeze(Object.defineProperty({__proto__:null,default:$R},Symbol.toStringTag,{value:"Module"}));async function VR({organizationName:e,schoolName:t}){return await Hr({query:`mutation UpsertOrg($org: organizations_insert_input!, $school: schools_insert_input!) {
    organization: insert_organizations_one(object: $org, on_conflict: { constraint: organizations_name_key, update_columns: [name] }) {
      id
      name
    }
    school: insert_schools_one(object: $school, on_conflict: { constraint: schools_organization_id_name_key, update_columns: [name, timezone] }) {
      id
      name
      organization_id
    }
  }`,variables:{org:{name:e},school:{name:t}}})}async function y8({userId:e,fullName:t,appRole:n,organizationId:r,schoolId:s}){const l=await Hr({query:`mutation CompleteOnboarding($input: profiles_insert_input!) {
    insert_profiles_one(object: $input) {
      id
      user_id
      full_name
      app_role
      organization_id
      school_id
    }
  }`,variables:{input:{user_id:e,full_name:t,app_role:n,organization_id:r,school_id:s}}});return l==null?void 0:l.insert_profiles_one}const v8=()=>{const[e,t]=x.useState([]),[n,r]=x.useState(!0);return x.useEffect(()=>{fetch(`${vt}/admin/audit-logs`).then(s=>s.json()).then(s=>t(s)).finally(()=>r(!1))},[]),a.jsxs("div",{className:"mt-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-2",children:"Audit Log"}),a.jsx("div",{className:"overflow-x-auto bg-white border rounded shadow p-4",children:n?a.jsx("p",{className:"text-sm text-gray-600",children:"Loading audit log"}):a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-gray-500",children:[a.jsx("th",{className:"py-2 pr-4",children:"User"}),a.jsx("th",{className:"py-2 pr-4",children:"Action"}),a.jsx("th",{className:"py-2 pr-4",children:"Time"}),a.jsx("th",{className:"py-2 pr-4",children:"Meta"})]})}),a.jsxs("tbody",{children:[e.map(s=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"py-2 pr-4",children:s.user_email||s.adminId||"System"}),a.jsx("td",{className:"py-2 pr-4",children:s.entity?`${s.entity} ${s.action}`:s.action}),a.jsx("td",{className:"py-2 pr-4",children:new Date(s.timestamp).toLocaleString()}),a.jsx("td",{className:"py-2 pr-4 text-xs text-gray-500",children:JSON.stringify(s.meta||{})})]},s.id)),e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"py-4 text-center text-gray-500",children:"No audit history yet."})})]})]})})]})},IN=Ii("telemetry");async function rs(e){try{const{error:t}=await Nt.functions.call("track-event",e);t&&IN.warn("track-event failed",t)}catch(t){IN.warn("track-event exception",t)}}async function zR(e,t){const n={...t.metadata,organizationId:e.organizationId??void 0,schoolId:e.schoolId??void 0,userId:e.userId??void 0};await rs({...t,metadata:n})}function x8(){typeof window>"u"||window.addEventListener("beforeunload",()=>{})}const w8=()=>{const e=gl();return{log:(n,r={})=>{e.organizationId&&zR({organizationId:e.organizationId,schoolId:e.schoolId},{eventName:n,metadata:r}).catch(()=>{})}}};function UR(){const[e,t]=x.useState({organizationName:"",schoolName:""}),[n,r]=x.useState({userId:"",fullName:"",role:"teacher",organizationId:"",schoolId:""}),[s,i]=x.useState(""),[l,u]=x.useState({}),{log:d}=w8(),f=gl();x.useEffect(()=>{if(f.loading||!f.organizationId)return;(async()=>{const y=await Nt.auth.getAccessToken(),w={};y&&(w.authorization=`Bearer ${y}`),w["x-teachmo-org-id"]=f.organizationId,f.schoolId&&(w["x-teachmo-school-id"]=f.schoolId),fetch(`${vt}/admin/metrics`,{headers:w}).then(b=>b.json()).then(u).catch(()=>u({}))})()},[f.loading,f.organizationId,f.schoolId]);const h=async g=>{var w,b;g.preventDefault();const y=await VR({organizationName:e.organizationName,schoolName:e.schoolName});d("organization_bootstrap",{organizationName:e.organizationName,schoolName:e.schoolName,organizationId:(w=y.organization)==null?void 0:w.id}),i(`Created/updated organization ${(b=y.organization)==null?void 0:b.name}`)},m=async g=>{g.preventDefault(),await _U({user_id:n.userId,full_name:n.fullName,app_role:n.role,organization_id:n.organizationId||null,school_id:n.schoolId||null}),d("admin_assign_role",{userId:n.userId,role:n.role,organizationId:n.organizationId||null,schoolId:n.schoolId||null}),i("User role saved")};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("header",{children:[a.jsx("h1",{className:"text-3xl font-semibold",children:"Admin dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Manage organizations, schools, and roles."})]}),a.jsxs("section",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[a.jsx(Zh,{label:"Active Parents (7d)",value:l.active_parents}),a.jsx(Zh,{label:"Messages Sent (24h)",value:l.messages_sent}),a.jsx(Zh,{label:"Workflows Run (total)",value:l.workflows_run}),a.jsx(Zh,{label:"Average AI Latency (ms)",value:l.ai_latency})]}),a.jsxs("form",{onSubmit:h,className:"bg-white rounded shadow p-4 space-y-3",children:[a.jsx("h2",{className:"font-medium",children:"Create organization & school"}),a.jsx("input",{placeholder:"Organization name",value:e.organizationName,onChange:g=>t({...e,organizationName:g.target.value}),className:"w-full border rounded px-3 py-2",required:!0}),a.jsx("input",{placeholder:"School name",value:e.schoolName,onChange:g=>t({...e,schoolName:g.target.value}),className:"w-full border rounded px-3 py-2",required:!0}),a.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Create"})]}),a.jsxs("form",{onSubmit:m,className:"bg-white rounded shadow p-4 space-y-3",children:[a.jsx("h2",{className:"font-medium",children:"Assign user role"}),a.jsx("input",{placeholder:"User ID",value:n.userId,onChange:g=>r({...n,userId:g.target.value}),className:"w-full border rounded px-3 py-2",required:!0}),a.jsx("input",{placeholder:"Full name",value:n.fullName,onChange:g=>r({...n,fullName:g.target.value}),className:"w-full border rounded px-3 py-2",required:!0}),a.jsxs("select",{value:n.role,onChange:g=>r({...n,role:g.target.value}),className:"w-full border rounded px-3 py-2",children:[a.jsx("option",{value:"parent",children:"Parent"}),a.jsx("option",{value:"teacher",children:"Teacher"}),a.jsx("option",{value:"partner",children:"Partner"}),a.jsx("option",{value:"system_admin",children:"System admin"}),a.jsx("option",{value:"school_admin",children:"School admin"}),a.jsx("option",{value:"district_admin",children:"District admin"})]}),a.jsx("input",{placeholder:"Organization ID",value:n.organizationId,onChange:g=>r({...n,organizationId:g.target.value}),className:"w-full border rounded px-3 py-2"}),a.jsx("input",{placeholder:"School ID",value:n.schoolId,onChange:g=>r({...n,schoolId:g.target.value}),className:"w-full border rounded px-3 py-2"}),a.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Save role"})]}),s&&a.jsx("p",{className:"text-green-700 text-sm",children:s}),a.jsxs("section",{className:"bg-white rounded shadow p-4 space-y-2",children:[a.jsx("h2",{className:"font-medium",children:"Pilot tools"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Generate and review weekly parent briefs on demand."}),a.jsx(as,{to:"/admin/weekly-briefs",className:"inline-flex items-center text-sm text-blue-700 hover:underline",children:"Open Weekly Briefs tool"})]}),a.jsx(v8,{})]})}const Zh=({label:e,value:t})=>a.jsxs("div",{className:"border rounded p-4 bg-white shadow",children:[a.jsx("p",{className:"text-sm text-gray-600",children:e}),a.jsx("p",{className:"text-3xl font-semibold",children:t??""})]}),b8=Object.freeze(Object.defineProperty({__proto__:null,default:UR},Symbol.toStringTag,{value:"Module"})),_8={parent:new Set(["messages:read","messages:write"]),teacher:new Set(["messages:read","messages:write","messages:invite","threads:invite_manage"]),school_admin:new Set(["messages:read","messages:write","messages:moderate","messages:invite","threads:invite_manage","directory:manage","automation:manage","automation:run","automation:replay","automation:request_review","tenant:manage","users:manage","analytics:view","analytics:export"]),district_admin:new Set(["messages:read","messages:write","messages:moderate","messages:invite","threads:invite_manage","directory:manage","automation:manage","automation:run","automation:replay","automation:request_review","automation:approve","automation:publish","tenant:manage","users:manage","analytics:view","analytics:export"]),partner:new Set([]),admin:new Set(["messages:read","messages:write","messages:moderate","messages:invite","threads:invite_manage","directory:manage","automation:manage","automation:run","automation:replay","automation:request_review","automation:approve","automation:publish","tenant:manage","users:manage","analytics:view","analytics:export"]),system_admin:new Set(["messages:read","messages:write","messages:moderate","messages:invite","threads:invite_manage","directory:manage","automation:manage","automation:run","automation:replay","automation:request_review","automation:approve","automation:publish","tenant:manage","users:manage","analytics:view","analytics:export"])};function Ba(e,t){var n;return e?((n=_8[e])==null?void 0:n.has(t))??!1:!1}function BR(e,t){return t.length?t.every(n=>Ba(e,n)):!0}function al(...e){return e.filter(Boolean).join(" ")}const wb=x.createContext({activeTab:"",setActiveTab:()=>{}});function bb({defaultValue:e,children:t,className:n,...r}){const[s,i]=x.useState(e);return a.jsx(wb.Provider,{value:{activeTab:s,setActiveTab:i},children:a.jsx("div",{className:al("w-full",n),...r,children:t})})}function _b({children:e,className:t,...n}){return a.jsx("div",{className:al("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...n,children:e})}function _i({children:e,value:t,className:n,...r}){const{activeTab:s,setActiveTab:i}=x.useContext(wb),l=s===t;return a.jsx("button",{onClick:()=>i(t),className:al("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",n),"data-state":l?"active":"inactive",...r,children:e})}function Si({children:e,value:t,className:n,...r}){const{activeTab:s}=x.useContext(wb);return s===t?a.jsx("div",{className:al("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...r,children:e}):null}const Sb=({open:e,onOpenChange:t,children:n})=>e?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>t==null?void 0:t(!1)}),a.jsx("div",{className:"relative z-50 max-h-[90vh] overflow-y-auto",children:n})]}):null,Gp=x.forwardRef(({className:e,children:t,...n},r)=>a.jsx("div",{ref:r,className:`bg-white rounded-lg shadow-lg p-6 w-full max-w-lg mx-4 ${e||""}`,...n,children:t}));Gp.displayName="DialogContent";const jb=({className:e,...t})=>a.jsx("div",{className:`flex flex-col space-y-1.5 text-center sm:text-left mb-4 ${e||""}`,...t}),Kp=x.forwardRef(({className:e,...t},n)=>a.jsx("h2",{ref:n,className:`text-lg font-semibold leading-none tracking-tight ${e||""}`,...t}));Kp.displayName="DialogTitle";const qR=x.forwardRef(({className:e,...t},n)=>a.jsx("p",{ref:n,className:`text-sm text-gray-600 ${e||""}`,...t}));qR.displayName="DialogDescription";const S8=({className:e,...t})=>a.jsx("div",{className:`flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 mt-6 ${e||""}`,...t}),j8=x.forwardRef(({className:e,children:t,...n},r)=>a.jsx("button",{ref:r,className:`inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 ${e||""}`,...n,children:t}));j8.displayName="DialogClose";const E8=({asChild:e,children:t,...n})=>e&&x.isValidElement(t)?x.cloneElement(t,{...n,...t.props}):a.jsx("button",{type:"button",...n,children:t}),ON=[{value:"create_entity",label:"Create entity"},{value:"update_entity",label:"Update entity"},{value:"condition",label:"Condition (branch)"},{value:"notify",label:"Notify (in-app)"},{value:"noop",label:"No-op"}],k8=[{value:"eq",label:"Equals"},{value:"ne",label:"Not equals"},{value:"contains",label:"Contains"},{value:"ncontains",label:"Not contains"},{value:"gt",label:"Greater than"},{value:"gte",label:"Greater or equal"},{value:"lt",label:"Less than"},{value:"lte",label:"Less or equal"},{value:"exists",label:"Exists"}],N8=[{value:"",label:"(none)"},{value:"automation:manage",label:"automation:manage"},{value:"automation:run",label:"automation:run"},{value:"automation:replay",label:"automation:replay"},{value:"automation:request_review",label:"automation:request_review"},{value:"automation:approve",label:"automation:approve"},{value:"automation:publish",label:"automation:publish"},{value:"tenant:manage",label:"tenant:manage"},{value:"users:manage",label:"users:manage"},{value:"analytics:view",label:"analytics:view"},{value:"analytics:export",label:"analytics:export"}];function DN(e){var i;const t=e&&typeof e=="object"?e:{},r=(Array.isArray(t.steps)?t.steps:[]).map((l,u)=>({id:String(l.id||l.key||`step_${u+1}`),type:l.type||"noop",config:l.config&&typeof l.config=="object"?l.config:{},next:l.next??null,on_true:l.on_true??null,on_false:l.on_false??null})).filter(l=>l.id);return{version:2,start:typeof t.start=="string"?t.start:((i=r[0])==null?void 0:i.id)||null,steps:r}}function em(e){try{return JSON.parse(e)}catch{return null}}function MN({value:e,onChange:t,placeholderKey:n,placeholderValue:r}){const s=x.useMemo(()=>Object.entries(e&&typeof e=="object"?e:{}).map(([f,h])=>({k:f,v:typeof h=="string"?h:JSON.stringify(h)})),[e]),[i,l]=x.useState(s);x.useEffect(()=>l(s),[s]);const u=d=>{l(d);const f={};for(const h of d){const m=String(h.k||"").trim();m&&(f[m]=h.v)}t(f)};return a.jsxs("div",{className:"space-y-2",children:[i.map((d,f)=>a.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-5",children:[a.jsx(be,{className:"sm:col-span-2",placeholder:n,value:d.k,onChange:h=>{const m=i.slice();m[f]={...m[f],k:h.target.value},u(m)}}),a.jsx(be,{className:"sm:col-span-2",placeholder:r,value:d.v,onChange:h=>{const m=i.slice();m[f]={...m[f],v:h.target.value},u(m)}}),a.jsx(we,{type:"button",variant:"outline",onClick:()=>{const h=i.slice();h.splice(f,1),u(h)},children:"Remove"})]},f)),a.jsx(we,{type:"button",variant:"secondary",onClick:()=>u([...i||[],{k:"",v:""}]),children:"Add mapping"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tip: use templates like ",a.jsx("code",{children:"{{event_metadata.thread_id}}"})," or ",a.jsx("code",{children:"{{actor_user_id}}"}),"."]})]})}function T8({definitionJson:e,onChangeDefinitionJson:t}){const n=x.useMemo(()=>DN(em(e)),[e]),[r,s]=x.useState(n);x.useEffect(()=>{s(n)},[n.start,n.steps.length]);const i=x.useMemo(()=>r.steps.map(h=>h.id),[r.steps]),l=h=>{const m=DN(h);s(m),t(JSON.stringify(m,null,2))},u=h=>{const g=`step_${r.steps.length+1}`,y={id:g,type:h,config:{},next:null,on_true:null,on_false:null};h==="condition"&&(y.config={left:"{{event_name}}",op:"eq",right:"some.event"});const w={...r,steps:[...r.steps,y]};w.start||(w.start=g),l(w)},d=(h,m)=>{const g=r.steps.map(y=>y.id===h?{...y,...m}:y);l({...r,steps:g})},f=h=>{var y;const m=r.steps.filter(w=>w.id!==h),g={...r,steps:m};g.start===h&&(g.start=((y=m[0])==null?void 0:y.id)||null),g.steps=g.steps.map(w=>({...w,next:w.next===h?null:w.next,on_true:w.on_true===h?null:w.on_true,on_false:w.on_false===h?null:w.on_false})),l(g)};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Flow"})}),a.jsxs(Te,{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Start step"}),a.jsxs(ln,{value:r.start||"",onValueChange:h=>l({...r,start:h||null}),children:[a.jsx(nn,{children:a.jsx(rn,{placeholder:"Select start"})}),a.jsx(sn,{children:i.map(h=>a.jsx(qe,{value:h,children:h},h))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Add step"}),a.jsxs(ln,{onValueChange:u,children:[a.jsx(nn,{children:a.jsx(rn,{placeholder:"Choose type"})}),a.jsx(sn,{children:ON.map(h=>a.jsx(qe,{value:h.value,children:h.label},h.value))})]})]})]}),!r.steps.length&&a.jsx("div",{className:"text-sm text-muted-foreground",children:"No steps yet. Add your first step above."}),a.jsx("div",{className:"space-y-4",children:r.steps.map(h=>{var m,g,y,w,b,S;return a.jsxs(Ne,{className:"border-dashed",children:[a.jsx(Oe,{children:a.jsxs(Le,{className:"flex items-center justify-between text-base",children:[a.jsxs("span",{children:[h.id," ",a.jsxs("span",{className:"text-muted-foreground",children:[" ",h.type]})]}),a.jsx("div",{className:"flex gap-2",children:a.jsx(we,{type:"button",variant:"outline",size:"sm",onClick:()=>f(h.id),children:"Delete"})})]})}),a.jsxs(Te,{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium",children:"Step type"}),a.jsxs(ln,{value:h.type,onValueChange:_=>d(h.id,{type:_}),children:[a.jsx(nn,{children:a.jsx(rn,{})}),a.jsx(sn,{children:ON.map(_=>a.jsx(qe,{value:_.value,children:_.label},_.value))})]})]}),h.type!=="condition"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium",children:"Next step"}),a.jsxs(ln,{value:h.next||"",onValueChange:_=>d(h.id,{next:_||null}),children:[a.jsx(nn,{children:a.jsx(rn,{placeholder:"(end)"})}),a.jsxs(sn,{children:[a.jsx(qe,{value:"",children:"(end)"}),i.filter(_=>_!==h.id).map(_=>a.jsx(qe,{value:_,children:_},_))]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium",children:"Required action (optional)"}),a.jsxs(ln,{value:String(((m=h.config)==null?void 0:m.required_action)||""),onValueChange:_=>d(h.id,{config:{...h.config,required_action:_||null}}),children:[a.jsx(nn,{children:a.jsx(rn,{placeholder:"(none)"})}),a.jsx(sn,{children:N8.map(_=>a.jsx(qe,{value:_.value,children:_.label},_.value))})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"If set, the runner denies this step unless the triggering actor has the given permission."})]}),h.type==="condition"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium",children:"Left"}),a.jsx(be,{value:String(((g=h.config)==null?void 0:g.left)||""),onChange:_=>d(h.id,{config:{...h.config,left:_.target.value}}),placeholder:"{{event_metadata.foo}}"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium",children:"Op"}),a.jsxs(ln,{value:String(((y=h.config)==null?void 0:y.op)||"eq"),onValueChange:_=>d(h.id,{config:{...h.config,op:_}}),children:[a.jsx(nn,{children:a.jsx(rn,{})}),a.jsx(sn,{children:k8.map(_=>a.jsx(qe,{value:_.value,children:_.label},_.value))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium",children:"Right"}),a.jsx(be,{value:String(((w=h.config)==null?void 0:w.right)||""),onChange:_=>d(h.id,{config:{...h.config,right:_.target.value}}),placeholder:"some.value"})]})]}),a.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium",children:"On true"}),a.jsxs(ln,{value:h.on_true||"",onValueChange:_=>d(h.id,{on_true:_||null}),children:[a.jsx(nn,{children:a.jsx(rn,{placeholder:"(end)"})}),a.jsxs(sn,{children:[a.jsx(qe,{value:"",children:"(end)"}),i.filter(_=>_!==h.id).map(_=>a.jsx(qe,{value:_,children:_},_))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium",children:"On false"}),a.jsxs(ln,{value:h.on_false||"",onValueChange:_=>d(h.id,{on_false:_||null}),children:[a.jsx(nn,{children:a.jsx(rn,{placeholder:"(end)"})}),a.jsxs(sn,{children:[a.jsx(qe,{value:"",children:"(end)"}),i.filter(_=>_!==h.id).map(_=>a.jsx(qe,{value:_,children:_},_))]})]})]})]})]}),h.type==="create_entity"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-medium",children:"Config (JSON)"}),a.jsx(an,{value:JSON.stringify(h.config||{},null,2),onChange:_=>d(h.id,{config:em(_.target.value)||{}}),rows:6}),a.jsx(MN,{value:((b=h.config)==null?void 0:b.fields)||{},onChange:_=>d(h.id,{config:{...h.config,fields:_}}),placeholderKey:"field",placeholderValue:"value/template"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["For execution, set ",a.jsx("code",{children:"entity"})," and ",a.jsx("code",{children:"fields"}),". Example:"," ",a.jsx("code",{children:'{ "entity": "partner_submissions", "fields": { "status": "pending" } }'})]})]}),h.type==="update_entity"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-medium",children:"Config (JSON)"}),a.jsx(an,{value:JSON.stringify(h.config||{},null,2),onChange:_=>d(h.id,{config:em(_.target.value)||{}}),rows:6}),a.jsx(MN,{value:((S=h.config)==null?void 0:S.patch)||{},onChange:_=>d(h.id,{config:{...h.config,patch:_}}),placeholderKey:"field",placeholderValue:"value/template"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["For execution, set ",a.jsx("code",{children:"entity"}),", ",a.jsx("code",{children:"id"}),", and ",a.jsx("code",{children:"patch"}),". Example:"," ",a.jsx("code",{children:'{ "entity": "partner_submissions", "id": "{{event_metadata.submission_id}}", "patch": { "status": "approved" } }'})]})]}),h.type==="notify"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-medium",children:"Config (JSON)"}),a.jsx(an,{value:JSON.stringify(h.config||{},null,2),onChange:_=>d(h.id,{config:em(_.target.value)||{}}),rows:6}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Notification currently records an analytics event (and can be extended to real in-app notifications)."})]}),h.type==="noop"&&a.jsx("p",{className:"text-xs text-muted-foreground",children:"No-op step. Useful as an explicit branch target."})]})]},h.id)})})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Definition (preview)"})}),a.jsx(Te,{children:a.jsx(an,{value:JSON.stringify(r,null,2),readOnly:!0,rows:10})})]})]})}const Qu={type:"event",event_name:"messaging.message_sent"},Xu={version:2,steps:[]},C8=[{value:"create_entity",label:"Create entity"},{value:"update_entity",label:"Update entity"},{value:"condition",label:"Condition (branch)"},{value:"notify",label:"Notify (in-app)"},{value:"noop",label:"No-op"}];function tm(e,t){try{return JSON.parse(e)??t}catch{return t}}function WR(){var $e;const{data:e}=vr(),t=(e==null?void 0:e.districtId)??null,n=(e==null?void 0:e.schoolId)??null,r=(e==null?void 0:e.role)??null,{data:s,refetch:i}=_t({queryKey:["workflow_definitions",t,n],enabled:!!e,queryFn:async()=>{const ne=`query Workflows($districtId: uuid, $schoolId: uuid) {
        workflow_definitions(
          order_by: { updated_at: desc }
          where: {
            _and: [
              { _or: [ { district_id: { _is_null: true } }, { district_id: { _eq: $districtId } } ] }
              { _or: [ { school_id: { _is_null: true } }, { school_id: { _eq: $schoolId } } ] }
            ]
          }
        ) {
          id
          name
          status
          version
          pinned_version
          published_version
          review_requested_at
          approved_at
          published_at
          trigger
          definition
          created_by
          updated_at
        }
      }`,{data:We,error:Ve}=await Gt.request(ne,{districtId:t,schoolId:n});if(Ve)throw Ve;return We.workflow_definitions}}),[l,u]=x.useState(null),d=x.useMemo(()=>(s==null?void 0:s.find(ne=>ne.id===l))??(s==null?void 0:s[0])??null,[s,l]),{data:f}=_t({queryKey:["workflow_definition_versions",d==null?void 0:d.id],enabled:!!(d!=null&&d.id),queryFn:async()=>{const ne=`query Versions($workflowId: uuid!) {
        workflow_definition_versions(
          where: { workflow_id: { _eq: $workflowId } }
          order_by: { version: desc }
        ) {
          id
          version
          created_at
          created_by
          trigger
          definition
        }
      }`,{data:We,error:Ve}=await Gt.request(ne,{workflowId:d.id});if(Ve)throw Ve;return We.workflow_definition_versions}}),{data:h}=_t({queryKey:["tenant_settings_min_approvals",t,n],enabled:!!e,queryFn:async()=>{const ne=`query TenantSettings($districtId: uuid, $schoolId: uuid) {
        tenant_settings(
          where: {
            _or: [
              { school_id: { _eq: $schoolId } }
              { _and: [ { district_id: { _eq: $districtId } }, { school_id: { _is_null: true } } ] }
            ]
          }
          limit: 5
        ) {
          district_id
          school_id
          settings
        }
      }`,{data:We,error:Ve}=await Gt.request(ne,{districtId:t,schoolId:n});if(Ve)throw Ve;return We.tenant_settings}}),m=x.useMemo(()=>{var Pn;const ne=h??[],We=ne.find(wn=>n&&wn.school_id===n)||ne.find(wn=>t&&wn.district_id===t)||null,Ve=(We==null?void 0:We.settings)||{},Ft=Number(Ve==null?void 0:Ve.workflow_min_approvals);if(Number.isFinite(Ft)&&Ft>=1)return Math.min(5,Math.floor(Ft));const Dt=Number((Pn=Ve==null?void 0:Ve.workflow)==null?void 0:Pn.min_approvals);return Number.isFinite(Dt)&&Dt>=1?Math.min(5,Math.floor(Dt)):1},[h,t,n]),{data:g,refetch:y}=_t({queryKey:["workflow_approvals",d==null?void 0:d.id,d==null?void 0:d.version],enabled:!!(d!=null&&d.id),queryFn:async()=>{const ne=`query Approvals($workflowId: uuid!, $version: Int!) {
        workflow_approvals(
          where: { workflow_id: { _eq: $workflowId }, version: { _eq: $version } }
          order_by: { created_at: desc }
        ) {
          id
          approver_user_id
          reason
          created_at
        }
      }`,{data:We,error:Ve}=await Gt.request(ne,{workflowId:d.id,version:d.version});if(Ve)throw Ve;return We.workflow_approvals}}),w=(g==null?void 0:g.length)??0,{data:b,refetch:S}=_t({queryKey:["workflow_dead_letters",d==null?void 0:d.id],enabled:!!(d!=null&&d.id),queryFn:async()=>{const ne=`query DeadLetters($workflowId: uuid!) {
        workflow_dead_letters(
          where: { workflow_id: { _eq: $workflowId } }
          order_by: { created_at: desc }
          limit: 25
        ) {
          id
          run_id
          step_key
          error
          created_at
          metadata
        }
      }`,{data:We,error:Ve}=await Gt.request(ne,{workflowId:d.id});if(Ve)throw Ve;return We.workflow_dead_letters}}),_=w>=m,k=["admin","system_admin"].includes(String(r)),[N,T]=x.useState(""),[P,R]=x.useState(JSON.stringify(Qu,null,2)),[M,A]=x.useState(JSON.stringify(Xu,null,2)),[W,K]=x.useState(""),[H,z]=x.useState("visual"),[L,B]=x.useState({open:!1,run:null,steps:[]});x.useMemo(()=>{d&&(T(d.name??""),R(JSON.stringify(d.trigger??Qu,null,2)),A(JSON.stringify(d.definition??Xu,null,2)),K(d.pinned_version!=null?String(d.pinned_version):""))},[d==null?void 0:d.id]);const{data:Q,refetch:q}=_t({queryKey:["workflow_publication_audits",d==null?void 0:d.id],enabled:!!(d!=null&&d.id),queryFn:async()=>{const ne=`query Audits($workflowId: uuid!) {
        workflow_publication_audits(
          where: { workflow_id: { _eq: $workflowId } }
          order_by: { created_at: desc }
          limit: 20
        ) {
          id
          action
          from_version
          to_version
          actor_user_id
          signature
          created_at
          metadata
        }
      }`,{data:We,error:Ve}=await Gt.request(ne,{workflowId:d.id});if(Ve)throw Ve;return We.workflow_publication_audits}}),{data:F,refetch:D}=_t({queryKey:["workflow_runs",d==null?void 0:d.id],enabled:!!(d!=null&&d.id),queryFn:async()=>{const ne=`query Runs($workflowId: uuid!) {
        workflow_runs(where: { workflow_id: { _eq: $workflowId } }, order_by: { started_at: desc }, limit: 25) {
          id
          status
          started_at
          finished_at
          input
          output
        }
      }`,{data:We,error:Ve}=await Gt.request(ne,{workflowId:d.id});if(Ve)throw Ve;return We.workflow_runs}}),X=async ne=>{const We=`query RunSteps($runId: uuid!) {
      workflow_run_steps(where: { run_id: { _eq: $runId } }, order_by: { created_at: asc }) {
        id
        step_key
        status
        input
        output
        created_at
      }
    }`,{data:Ve,error:Ft}=await Gt.request(We,{runId:ne.id});if(Ft)throw Ft;B({open:!0,run:ne,steps:Ve.workflow_run_steps||[]})},I=async ne=>{var Ft,Dt;if(!Ba(r,"automation:replay"))return;const We=(Ft=ne==null?void 0:ne.input)==null?void 0:Ft.event_name,Ve=((Dt=ne==null?void 0:ne.input)==null?void 0:Dt.event_metadata)||{};We&&(await rs({eventName:We,metadata:{...Ve,replayed_from_run_id:ne.id,replayed:!0}}),await D())},V=async()=>{if(!(d!=null&&d.id))return;const{error:ne}=await Nt.functions.call("workflow-request-review",{workflowId:d.id});if(ne)throw ne;await rs({eventName:"workflow.request_review",metadata:{workflow_id:d.id}}),await i(),await q()},Z=async()=>{if(!(d!=null&&d.id))return;const{error:ne}=await Nt.functions.call("workflow-approve",{workflowId:d.id});if(ne)throw ne;await rs({eventName:"workflow.approved",metadata:{workflow_id:d.id}}),await i(),await q(),await y()},O=async()=>{if(!(d!=null&&d.id))return;const{error:ne}=await Nt.functions.call("workflow-publish",{workflowId:d.id});if(ne)throw ne;await rs({eventName:"workflow.published",metadata:{workflow_id:d.id}}),await i(),await q()},ce=Tn({mutationFn:async()=>{const ne=tm(P,Qu),We=tm(M,Xu),Ve=W?Number(W):null;if(d!=null&&d.id){const wn=`mutation UpdateWorkflow($id: uuid!, $patch: workflow_definitions_set_input!) {
          update_workflow_definitions_by_pk(pk_columns: { id: $id }, _set: $patch) { id }
        }`,bn=["published","approved","in_review"].includes(String((d==null?void 0:d.status)??"")),Rr={name:N,trigger:ne,definition:We,pinned_version:Ve,status:bn?"draft":d.status,...bn?{review_requested_at:null,review_requested_by:null,approved_at:null,approved_by:null,published_at:null,published_by:null,published_version:null}:{}},{error:Bt}=await Gt.request(wn,{id:d.id,patch:Rr});if(Bt)throw Bt;return await rs({eventName:"workflow.updated",metadata:{workflow_id:d.id}}),d.id}const Ft=`mutation InsertWorkflow($object: workflow_definitions_insert_input!) {
        insert_workflow_definitions_one(object: $object) { id }
      }`,{data:Dt,error:Pn}=await Gt.request(Ft,{object:{name:N||"Untitled workflow",status:"draft",trigger:ne,definition:We,district_id:t,school_id:n,version:1,pinned_version:Ve}});if(Pn)throw Pn;return await rs({eventName:"workflow.created",metadata:{workflow_id:Dt.insert_workflow_definitions_one.id}}),Dt.insert_workflow_definitions_one.id},onSuccess:async ne=>{await i(),u(ne)}}),he=Tn({mutationFn:async ne=>{if(!(d!=null&&d.id))return;const We=`mutation Rollback($id: uuid!, $patch: workflow_definitions_set_input!) {
        update_workflow_definitions_by_pk(pk_columns: { id: $id }, _set: $patch) { id version }
      }`,{error:Ve}=await Gt.request(We,{id:d.id,patch:{trigger:ne.trigger,definition:ne.definition}});if(Ve)throw Ve;await rs({eventName:"workflow.rolled_back",metadata:{workflow_id:d.id,restored_version:ne.version}})},onSuccess:async()=>{await i()}}),me=()=>{u(null),T(""),R(JSON.stringify(Qu,null,2)),A(JSON.stringify(Xu,null,2)),K(""),z("visual")},Ce=ne=>{const We=tm(M,Xu),Ve=Array.isArray(We.steps)?We.steps:[],Dt={id:`step_${Ve.length+1}`,type:ne,config:{}};ne==="condition"&&(Dt.config={left:"{{event_name}}",op:"eq",right:"some.event"},Dt.on_true=null,Dt.on_false=null),Ve.push(Dt),A(JSON.stringify({...We,steps:Ve},null,2))},ge=async()=>{const ne=tm(P,Qu),We=(ne==null?void 0:ne.event_name)||"custom.event";await rs({eventName:We,metadata:{simulated:!0,workflow_editor:!0}})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Workflows"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Event-triggered automation. This build supports real entity ops, branching, version pinning, and replay."})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(we,{variant:"outline",onClick:me,children:"New"}),a.jsx(we,{onClick:()=>ce.mutate(),disabled:ce.isPending||!Ba(r,"automation:manage"),children:"Save"}),a.jsx(we,{variant:"secondary",onClick:ge,disabled:!Ba(r,"automation:manage"),children:"Simulate trigger"})]})]}),a.jsxs("div",{className:"grid gap-4 lg:grid-cols-4",children:[a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Definitions"})}),a.jsx(Te,{children:a.jsxs("div",{className:"space-y-2",children:[(s??[]).map(ne=>a.jsxs("button",{className:`w-full rounded-md border px-3 py-2 text-left text-sm ${(d==null?void 0:d.id)===ne.id?"bg-muted":"hover:bg-muted/50"}`,onClick:()=>u(ne.id),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:ne.name}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["v",ne.version]})]}),a.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:ne.status})]},ne.id)),!(s!=null&&s.length)&&a.jsx("div",{className:"text-sm text-muted-foreground",children:"No workflows yet."})]})})]}),a.jsxs(Ne,{className:"lg:col-span-2",children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Editor"})}),a.jsxs(Te,{children:[a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Name"}),a.jsx(be,{value:N,onChange:ne=>T(ne.target.value),placeholder:"e.g., Auto-create follow-up task"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Lifecycle"}),a.jsxs("div",{className:"rounded-md border px-3 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsx("div",{className:"text-sm font-medium capitalize",children:String((d==null?void 0:d.status)??"draft")}),a.jsx("div",{className:"text-xs text-muted-foreground",children:d!=null&&d.published_version?`published v${d.published_version}`:`current v${(d==null?void 0:d.version)??1}`})]}),a.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[a.jsx(we,{variant:"outline",size:"sm",onClick:V,disabled:!(d!=null&&d.id)||!Ba(r,"automation:request_review")||String(d==null?void 0:d.status)!=="draft",children:"Request review"}),a.jsxs(we,{variant:"outline",size:"sm",onClick:Z,disabled:!(d!=null&&d.id)||!Ba(r,"automation:approve")||!["in_review","approved"].includes(String(d==null?void 0:d.status)),children:["Approve (",w,"/",m,")"]}),a.jsx(we,{size:"sm",onClick:O,disabled:!(d!=null&&d.id)||!Ba(r,"automation:publish")||!k&&(String(d==null?void 0:d.status)!=="approved"||!_),children:"Publish"})]}),a.jsxs("p",{className:"mt-2 text-xs text-muted-foreground",children:["Only ",a.jsx("span",{className:"font-medium",children:"published"})," workflows execute. Editing a published/in-review workflow moves it back to ",a.jsx("span",{className:"font-medium",children:"draft"})," on save."]})]})]})]}),a.jsxs("div",{className:"mt-4 grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Pinned version"}),a.jsxs(ln,{value:W,onValueChange:K,children:[a.jsx(nn,{children:a.jsx(rn,{placeholder:"Use latest"})}),a.jsxs(sn,{children:[a.jsx(qe,{value:"",children:"Use latest"}),(f??[]).map(ne=>a.jsxs(qe,{value:String(ne.version),children:["Pin v",ne.version]},ne.id))]})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Pinning runs the selected historical snapshot (useful for safe rollouts)."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Trigger (JSON)"}),a.jsx(an,{value:P,onChange:ne=>R(ne.target.value),rows:6})]})]}),a.jsx("div",{className:"mt-6",children:a.jsxs(bb,{value:H,onValueChange:z,children:[a.jsxs(_b,{children:[a.jsx(_i,{value:"visual",children:"Visual"}),a.jsx(_i,{value:"json",children:"JSON"})]}),a.jsx(Si,{value:"visual",className:"mt-4",children:a.jsx(T8,{definitionJson:M,onChangeDefinitionJson:A})}),a.jsx(Si,{value:"json",className:"mt-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium",children:"Definition (JSON)"}),a.jsxs(ln,{onValueChange:Ce,children:[a.jsx(nn,{className:"w-[200px]",children:a.jsx(rn,{placeholder:"Quick add"})}),a.jsx(sn,{children:C8.map(ne=>a.jsx(qe,{value:ne.value,children:ne.label},ne.value))})]})]}),a.jsx(an,{value:M,onChange:ne=>A(ne.target.value),rows:14}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["v2 supports condition steps with ",a.jsx("code",{children:"on_true"}),"/",a.jsx("code",{children:"on_false"})," edges. Templates like"," ",a.jsx("code",{children:"{{event_metadata.thread_id}}"})," are resolved at runtime."]})]})})]})})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Versions"})}),a.jsxs(Te,{children:[!(d!=null&&d.id)&&a.jsx("div",{className:"text-sm text-muted-foreground",children:"Select a workflow."}),(d==null?void 0:d.id)&&!(f!=null&&f.length)&&a.jsx("div",{className:"text-sm text-muted-foreground",children:"No versions yet."}),a.jsx("div",{className:"space-y-2",children:(f??[]).slice(0,10).map(ne=>a.jsxs("div",{className:"rounded-md border p-3 text-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"font-medium",children:["v",ne.version]}),a.jsx(we,{size:"sm",variant:"outline",onClick:()=>he.mutate(ne),disabled:he.isPending||!(d!=null&&d.id),children:"Restore"})]}),a.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:ne.created_at?new Date(ne.created_at).toLocaleString():""})]},ne.id))}),a.jsx("p",{className:"mt-4 text-xs text-muted-foreground",children:"Restoring a version updates the live definition and auto-creates a new snapshot (audit-friendly)."})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Publication audit"})}),a.jsxs(Te,{children:[!(d!=null&&d.id)&&a.jsx("div",{className:"text-sm text-muted-foreground",children:"Select a workflow."}),(d==null?void 0:d.id)&&!(Q!=null&&Q.length)&&a.jsx("div",{className:"text-sm text-muted-foreground",children:"No audit events yet."}),a.jsx("div",{className:"space-y-2",children:(Q??[]).map(ne=>a.jsxs("div",{className:"rounded-md border p-3 text-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("div",{className:"font-medium capitalize",children:String(ne.action).replaceAll("_"," ")}),a.jsx("div",{className:"text-xs text-muted-foreground",children:ne.created_at?new Date(ne.created_at).toLocaleString():""})]}),a.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:["v",ne.from_version??"?","  v",ne.to_version??"?"]}),ne.signature&&a.jsxs("div",{className:"mt-2 break-all text-xs text-muted-foreground",children:["sig: ",String(ne.signature).slice(0,24),""]})]},ne.id))})]})]}),a.jsxs(Ne,{className:"lg:col-span-4",children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Dead letters"})}),a.jsxs(Te,{children:[!(d!=null&&d.id)&&a.jsx("div",{className:"text-sm text-muted-foreground",children:"Select a workflow to see dead letters."}),(d==null?void 0:d.id)&&!(b!=null&&b.length)&&a.jsx("div",{className:"text-sm text-muted-foreground",children:"No dead letters."}),a.jsx("div",{className:"space-y-2",children:(b??[]).map(ne=>a.jsxs("div",{className:"rounded-md border p-3 text-sm",children:[a.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:ne.step_key}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[ne.created_at?new Date(ne.created_at).toLocaleString():"",ne.run_id?`  run ${ne.run_id}`:""]})]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:ne.metadata&&ne.metadata.attempts?`attempts: ${ne.metadata.attempts}`:""})]}),ne.error&&a.jsx("div",{className:"mt-2 text-xs",children:ne.error})]},ne.id))})]})]}),a.jsxs(Ne,{className:"lg:col-span-4",children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Recent runs"})}),a.jsxs(Te,{children:[!(d!=null&&d.id)&&a.jsx("div",{className:"text-sm text-muted-foreground",children:"Select a workflow to see runs."}),(d==null?void 0:d.id)&&!(F!=null&&F.length)&&a.jsx("div",{className:"text-sm text-muted-foreground",children:"No runs yet."}),a.jsx("div",{className:"space-y-2",children:(F??[]).map(ne=>a.jsx("div",{className:"rounded-md border p-3 text-sm",children:a.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:ne.status}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[ne.started_at?new Date(ne.started_at).toLocaleString():"",ne.finished_at?`  ${new Date(ne.finished_at).toLocaleString()}`:""]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(we,{size:"sm",variant:"outline",onClick:()=>X(ne),children:"View"}),a.jsx(we,{size:"sm",variant:"secondary",onClick:()=>I(ne),disabled:!Ba(r,"automation:replay"),children:"Replay"})]})]})},ne.id))})]})]})]}),a.jsx(Sb,{open:L.open,onOpenChange:ne=>B(We=>({...We,open:ne})),children:a.jsxs(Gp,{className:"max-w-3xl",children:[a.jsx(jb,{children:a.jsx(Kp,{children:"Workflow run"})}),a.jsxs("div",{className:"space-y-4",children:[L.run&&a.jsxs("div",{className:"rounded-md border p-3 text-sm",children:[a.jsx("div",{className:"font-medium",children:L.run.id}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Status: ",L.run.status]}),a.jsxs("div",{className:"mt-2 grid gap-3 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium mb-1",children:"Input"}),a.jsx(an,{value:JSON.stringify(L.run.input||{},null,2),readOnly:!0,rows:10})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium mb-1",children:"Output"}),a.jsx(an,{value:JSON.stringify(L.run.output||{},null,2),readOnly:!0,rows:10})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Steps"}),!(($e=L.steps)!=null&&$e.length)&&a.jsx("div",{className:"text-sm text-muted-foreground",children:"No step rows."}),a.jsx("div",{className:"space-y-2",children:(L.steps||[]).map(ne=>a.jsxs("div",{className:"rounded-md border p-3 text-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"font-medium",children:ne.step_key}),a.jsx("div",{className:"text-xs text-muted-foreground",children:ne.status})]}),a.jsxs("div",{className:"mt-2 grid gap-3 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium mb-1",children:"Input"}),a.jsx(an,{value:JSON.stringify(ne.input||{},null,2),readOnly:!0,rows:6})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium mb-1",children:"Output"}),a.jsx(an,{value:JSON.stringify(ne.output||{},null,2),readOnly:!0,rows:6})]})]})]},ne.id))})]})]})]})})]})}const P8=Object.freeze(Object.defineProperty({__proto__:null,default:WR},Symbol.toStringTag,{value:"Module"}));function A8(e){try{return e?JSON.parse(e):{}}catch{return{}}}function HR(){const{data:e}=vr(),t=(e==null?void 0:e.districtId)??null,n=(e==null?void 0:e.schoolId)??null,r=_t({queryKey:["tenant_settings",t,n],enabled:!!t,queryFn:async()=>{var M;return((M=(await Gt.request(`query TenantSettings($districtId: uuid!, $schoolId: uuid) {
        tenant_settings(
          where: {
            district_id: { _eq: $districtId },
            _or: [
              { school_id: { _eq: $schoolId } },
              { school_id: { _is_null: true } }
            ]
          },
          order_by: { school_id: desc_nulls_last }
        ) {
          id
          district_id
          school_id
          name
          branding
          settings
          updated_at
        }
      }`,{districtId:t,schoolId:n})).tenant_settings)==null?void 0:M[0])??null}}),[s,i]=x.useState(""),[l,u]=x.useState(""),[d,f]=x.useState("#111827"),[h,m]=x.useState("#3b82f6"),[g,y]=x.useState("{}"),[w,b]=x.useState("365"),[S,_]=x.useState("30"),[k,N]=x.useState(!1);x.useMemo(()=>{var W,K,H;const P=r.data;if(!P)return;i(P.name??""),u(((W=P.branding)==null?void 0:W.logo_url)??""),f(((K=P.branding)==null?void 0:K.primary_color)??"#111827"),m(((H=P.branding)==null?void 0:H.accent_color)??"#3b82f6");const R=P.settings??{},M=R.retention??{};b(String(M.audit_log_days??M.auditLogDays??"365")),_(String(M.dsar_export_days??M.dsarExportDays??"30")),y(JSON.stringify(R,null,2));const A=R.require_sso!==void 0?R.require_sso:R.requireSso!==void 0?R.requireSso:!1;N(!!A)},[r.data]);const T=Tn({mutationFn:async()=>{var M;if(!t)throw new Error("Missing district scope");const P={logo_url:l||null,primary_color:d||null,accent_color:h||null},R=A8(g);R.retention={...R.retention,audit_log_days:Number(w)||365,dsar_export_days:Number(S)||30},R.require_sso=!!k,(M=r.data)!=null&&M.id?await Gt.request(`mutation UpdateTenantSettings($id: uuid!, $changes: tenant_settings_set_input!) {
          update_tenant_settings_by_pk(pk_columns: { id: $id }, _set: $changes) { id updated_at }
        }`,{id:r.data.id,changes:{name:s,branding:P,settings:R}}):await Gt.request(`mutation InsertTenantSettings($object: tenant_settings_insert_input!) {
          insert_tenant_settings_one(object: $object) { id }
        }`,{object:{district_id:t,school_id:n,name:s,branding:P,settings:R}})},onSuccess:()=>r.refetch()});return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Tenant Settings"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure district / school-level branding and settings. Stored in Hasura + enforced with DB RLS."})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Scope"})}),a.jsxs(Te,{className:"text-sm space-y-1",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"District:"})," ",a.jsx("span",{className:"font-mono",children:t??""})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"School:"})," ",a.jsx("span",{className:"font-mono",children:n??""})]})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Branding"})}),a.jsxs(Te,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Tenant name"}),a.jsx(be,{value:s,onChange:P=>i(P.target.value),placeholder:"Paterson Public Schools"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Logo URL"}),a.jsx(be,{value:l,onChange:P=>u(P.target.value),placeholder:"https://.../logo.png"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Primary color"}),a.jsx(be,{value:d,onChange:P=>f(P.target.value)})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Accent color"}),a.jsx(be,{value:h,onChange:P=>m(P.target.value)})]})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Identity & SSO"})}),a.jsxs(Te,{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Xs,{id:"require-sso",checked:k,onCheckedChange:P=>N(P)}),a.jsx("label",{htmlFor:"require-sso",className:"text-sm",children:"Require users to sign in via single sign-on"})]}),a.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"When enabled, all users will be redirected to an enabled SSO provider and email/password login will be disabled."})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Settings JSON"})}),a.jsxs(Te,{children:[a.jsx(an,{value:g,onChange:P=>y(P.target.value),rows:10}),a.jsx("div",{className:"mt-3 flex justify-end",children:a.jsx(we,{onClick:()=>T.mutate(),disabled:T.isLoading||!t,children:T.isLoading?"Saving":"Save"})}),T.error?a.jsx("div",{className:"mt-2 text-sm text-red-600",children:String(T.error)}):null]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Retention Policy"})}),a.jsxs(Te,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Audit log retention (days)"}),a.jsx(be,{type:"number",min:"1",value:w,onChange:P=>b(P.target.value)})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"DSAR export retention (days)"}),a.jsx(be,{type:"number",min:"1",value:S,onChange:P=>_(P.target.value)})]}),a.jsx("p",{className:"text-xs text-muted-foreground md:col-span-2",children:"Retention settings override the JSON payload on save and are used by the automated purge job."})]})]})]})}const R8=Object.freeze(Object.defineProperty({__proto__:null,default:HR},Symbol.toStringTag,{value:"Module"})),GR=["parent","teacher","school_admin","district_admin","system_admin"],I8=`
query ListUserProfiles($where: user_profiles_bool_exp, $limit: Int!, $offset: Int!) {
  user_profiles(where: $where, limit: $limit, offset: $offset, order_by: { created_at: desc }) {
    user_id
    role
    district_id
    school_id
    full_name
    created_at
  }
  user_profiles_aggregate(where: $where) { aggregate { count } }
}
`,O8=`
mutation UpdateUserProfile($userId: uuid!, $changes: user_profiles_set_input!) {
  update_user_profiles_by_pk(pk_columns: { user_id: $userId }, _set: $changes) {
    user_id
    role
    district_id
    school_id
    full_name
  }
}
`;function KR(){var N,T,P,R,M;const{data:e}=vr(),t=(e==null?void 0:e.role)==="system_admin"||(e==null?void 0:e.role)==="admin",n=Gc(),{toast:r}=ds(),s=BR(n,["users:manage"]),i=s,[l,u]=x.useState(""),[d,f]=x.useState("all"),[h,m]=x.useState(0),g=25,y=x.useMemo(()=>{const A=[];return l!=null&&l.trim()&&A.push({full_name:{_ilike:`%${l.trim()}%`}}),d!=="all"&&A.push({role:{_eq:d}}),t||(e!=null&&e.schoolId?A.push({school_id:{_eq:e.schoolId}}):e!=null&&e.districtId&&A.push({district_id:{_eq:e.districtId}})),A.length?{_and:A}:{}},[l,d,t,e==null?void 0:e.districtId,e==null?void 0:e.schoolId]),w=_t({queryKey:["admin_users",y,h],enabled:!!(e!=null&&e.userId),queryFn:async()=>{const A=await Gt(I8,{where:y,limit:g,offset:h*g});if(A.error)throw A.error;return A.data}}),b=Tn({mutationFn:async({userId:A,changes:W})=>{const K=await Gt(O8,{userId:A,changes:W});if(K.error)throw K.error;return K.data},onSuccess:()=>w.refetch()}),S=Tn({mutationFn:async A=>{const W=await Nt.auth.getAccessToken(),K=await fetch("/api/admin/impersonations",{method:"POST",headers:{"Content-Type":"application/json",...W?{Authorization:`Bearer ${W}`}:{}},body:JSON.stringify({userId:A})});if(!K.ok){const H=await K.text();throw new Error(H||"Failed to start impersonation")}return K.json()},onSuccess:A=>{r({title:"Impersonation ready",description:`Token created (expires ${(A==null?void 0:A.expiresAt)||"soon"}).`})},onError:A=>{r({variant:"destructive",title:"Impersonation failed",description:A instanceof Error?A.message:"Unable to start impersonation."})}}),_=((P=(T=(N=w.data)==null?void 0:N.user_profiles_aggregate)==null?void 0:T.aggregate)==null?void 0:P.count)??0,k=Math.max(1,Math.ceil(_/g));return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Users"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Tenant-scoped user profile administration (backed by Hasura GraphQL, enforced by DB RLS)."})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Search & Filter"})}),a.jsxs(Te,{className:"flex flex-col md:flex-row gap-3",children:[a.jsx("div",{className:"flex-1",children:a.jsx(be,{value:l,onChange:A=>u(A.target.value),placeholder:"Search by full name"})}),a.jsx("div",{className:"w-full md:w-56",children:a.jsxs(ln,{value:d,onValueChange:f,children:[a.jsx(nn,{children:a.jsx(rn,{placeholder:"All roles"})}),a.jsxs(sn,{children:[a.jsx(qe,{value:"all",children:"All roles"}),GR.map(A=>a.jsx(qe,{value:A,children:A},A))]})]})})]})]}),a.jsxs(Ne,{children:[a.jsxs(Oe,{className:"flex flex-row items-center justify-between",children:[a.jsx(Le,{children:"User profiles"}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[_," total"]})]}),a.jsxs(Te,{children:[w.isLoading?a.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading users"}):(M=(R=w.data)==null?void 0:R.user_profiles)!=null&&M.length?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b text-left",children:[a.jsx("th",{className:"p-2",children:"Name"}),a.jsx("th",{className:"p-2",children:"User ID"}),a.jsx("th",{className:"p-2",children:"Role"}),a.jsx("th",{className:"p-2",children:"District"}),a.jsx("th",{className:"p-2",children:"School"}),a.jsx("th",{className:"p-2"})]})}),a.jsx("tbody",{children:w.data.user_profiles.map(A=>a.jsx(D8,{user:A,isSystem:t,onSave:W=>b.mutate({userId:A.user_id,changes:W}),onImpersonate:()=>S.mutate(A.user_id),saving:b.isPending,canManageUsers:s,canImpersonate:i},A.user_id))})]})}):a.jsx("div",{className:"text-sm text-muted-foreground",children:"No users match the current filters."}),a.jsxs("div",{className:"flex items-center justify-between mt-4",children:[a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Page ",h+1," of ",k]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(we,{variant:"secondary",size:"sm",disabled:h===0,onClick:()=>m(A=>Math.max(0,A-1)),children:"Prev"}),a.jsx(we,{variant:"secondary",size:"sm",disabled:h+1>=k,onClick:()=>m(A=>Math.min(k-1,A+1)),children:"Next"})]})]})]})]})]})}function D8({user:e,isSystem:t,onSave:n,onImpersonate:r,saving:s,canManageUsers:i,canImpersonate:l}){const[u,d]=x.useState(e.role??"parent"),[f,h]=x.useState(e.district_id??""),[m,g]=x.useState(e.school_id??""),[y,w]=x.useState(e.full_name??""),b=u!==(e.role??"parent")||f!==(e.district_id??"")||m!==(e.school_id??"")||y!==(e.full_name??"");return a.jsxs("tr",{className:"border-b align-top",children:[a.jsx("td",{className:"p-2",children:a.jsx(be,{value:y,onChange:S=>w(S.target.value),disabled:!i})}),a.jsx("td",{className:"p-2 font-mono text-xs whitespace-nowrap",children:e.user_id}),a.jsx("td",{className:"p-2",children:a.jsxs(ln,{value:u,onValueChange:d,disabled:!i,children:[a.jsx(nn,{children:a.jsx(rn,{placeholder:"Role"})}),a.jsx(sn,{children:GR.map(S=>a.jsx(qe,{value:S,children:S},S))})]})}),a.jsx("td",{className:"p-2",children:a.jsx(be,{value:f,onChange:S=>h(S.target.value),disabled:!i||!t&&!!e.district_id,placeholder:"District UUID"})}),a.jsx("td",{className:"p-2",children:a.jsx(be,{value:m,onChange:S=>g(S.target.value),disabled:!i||!t&&!!e.school_id,placeholder:"School UUID"})}),a.jsx("td",{className:"p-2",children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(we,{size:"sm",disabled:!b||s||!i,onClick:()=>n({role:u,district_id:f||null,school_id:m||null,full_name:y||null}),children:"Save"}),l?a.jsx(we,{size:"sm",variant:"secondary",onClick:r,children:"Impersonate"}):null]})})]})}const M8=Object.freeze(Object.defineProperty({__proto__:null,default:KR},Symbol.toStringTag,{value:"Module"}));function gt({children:e,requiredRole:t,allowedRoles:n,requiredActions:r,requiredScopes:s,redirectTo:i="/login",unauthorizedTo:l="/unauthorized",loadingFallback:u,requireAuth:d,requiresAuth:f}){const{isAuthenticated:h,isLoading:m}=ma(),g=si(),y=Gc(),w=oe.useMemo(()=>n!=null&&n.length?n:t?Array.isArray(t)?t:[t]:[],[n,t]),b=oe.useMemo(()=>r?Array.isArray(r)?r:[r]:[],[r]),S=oe.useMemo(()=>d??f??!0,[d,f]);return m?u||a.jsx("div",{className:"p-6 text-center text-sm text-muted-foreground",children:"Loading"}):!h&&S?a.jsx(Qs,{to:i,replace:!0,state:{from:g.pathname}}):w.length&&!ok({role:y,allowedRoles:w,requiredScopes:s})?a.jsx(Qs,{to:l,replace:!0}):s!=null&&s.length&&!ok({role:y,requiredScopes:s})?a.jsx(Qs,{to:l,replace:!0}):b.length&&!BR(y,b)?a.jsx(Qs,{to:l,replace:!0}):a.jsx(a.Fragment,{children:e})}async function Mo(e,t={}){const n=await fetch(e,t);if(!n.ok){const r=await n.text();throw new Error(r||"Request failed")}return n.json()}function YR(){var k,N,T,P,R,M,A,W,K,H,z;const{data:e}=vr(),t=(e==null?void 0:e.organizationId)??null,n=_t({queryKey:["ai-governance-token"],queryFn:async()=>{const L=await Nt.auth.getAccessToken();return{"Content-Type":"application/json",...L?{Authorization:`Bearer ${L}`}:{}}}}),r=_t({queryKey:["ai-policy-docs-admin",t],queryFn:async()=>{const Q=await Gt(`query AIPolicyDocsAdmin($where: ai_policy_docs_bool_exp) {
        ai_policy_docs(where: $where, order_by: { published_at: desc }) {
          id
          title
          summary
          published_at
        }
      }`,{where:t?{_or:[{organization_id:{_eq:t}},{organization_id:{_is_null:!0}}]}:{organization_id:{_is_null:!0}}});return(Q==null?void 0:Q.ai_policy_docs)??[]}}),s=_t({queryKey:["ai-usage-summary"],enabled:!!n.data,queryFn:async()=>Mo(`${vt}/admin/ai/usage-summary`,{headers:n.data})}),i=_t({queryKey:["ai-review-queue-admin"],enabled:!!n.data,queryFn:async()=>Mo(`${vt}/admin/ai/review-queue`,{headers:n.data})}),l=_t({queryKey:["ai-prompt-library-admin"],enabled:!!n.data,queryFn:async()=>Mo(`${vt}/admin/ai/prompts`,{headers:n.data})}),u=_t({queryKey:["ai-budget-admin"],enabled:!!n.data,queryFn:async()=>Mo(`${vt}/admin/ai/budget`,{headers:n.data})}),d=_t({queryKey:["ai-model-policy-admin"],enabled:!!n.data,queryFn:async()=>Mo(`${vt}/admin/ai/model-policy`,{headers:n.data})}),[f,h]=x.useState({monthlyLimitUsd:"",fallbackPolicy:"block"}),[m,g]=x.useState({defaultModel:"gpt-4o-mini",fallbackModel:"gpt-4o-mini",allowedModels:"gpt-4o-mini, gpt-4o",featureFlags:""});x.useMemo(()=>{var L;(L=u.data)!=null&&L.budget&&h({monthlyLimitUsd:u.data.budget.monthly_limit_usd??"",fallbackPolicy:u.data.budget.fallback_policy??"block"})},[u.data]),x.useMemo(()=>{var L;if((L=d.data)!=null&&L.policy){const B=d.data.policy;g({defaultModel:B.default_model??"gpt-4o-mini",fallbackModel:B.fallback_model??"gpt-4o-mini",allowedModels:(B.allowed_models||[]).join(", "),featureFlags:(B.feature_flags||[]).join(", ")})}},[d.data]);const y=Tn({mutationFn:async()=>Mo(`${vt}/admin/ai/budget`,{method:"PUT",headers:n.data,body:JSON.stringify({monthlyLimitUsd:f.monthlyLimitUsd?Number(f.monthlyLimitUsd):null,fallbackPolicy:f.fallbackPolicy})}),onSuccess:()=>u.refetch()}),w=Tn({mutationFn:async()=>Mo(`${vt}/admin/ai/model-policy`,{method:"PUT",headers:n.data,body:JSON.stringify({defaultModel:m.defaultModel,fallbackModel:m.fallbackModel,allowedModels:m.allowedModels.split(",").map(L=>L.trim()).filter(Boolean),featureFlags:m.featureFlags.split(",").map(L=>L.trim()).filter(Boolean)})}),onSuccess:()=>d.refetch()}),b=((N=(k=i.data)==null?void 0:k.queue)==null?void 0:N.length)??0,S=((P=(T=l.data)==null?void 0:T.prompts)==null?void 0:P.length)??0,_=(R=s.data)==null?void 0:R.totals;return a.jsx(gt,{allowedRoles:["system_admin","district_admin","school_admin","admin"],children:a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("header",{className:"space-y-2",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"AI Governance & Transparency"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Track AI model usage, review queue activity, and published transparency briefs for your tenant."})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Review Queue"})}),a.jsxs(Te,{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Pending reviews"}),a.jsx("span",{className:"font-semibold",children:b})]}),a.jsx(as,{className:"text-blue-600 hover:underline",to:"/admin/ai-review-queue",children:"Open AI review queue "})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Usage Logging"})}),a.jsxs(Te,{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Total AI requests logged"}),a.jsx("span",{className:"font-semibold",children:(_==null?void 0:_.calls)??0})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Estimated spend"}),a.jsxs("span",{className:"font-semibold",children:["$",((A=(M=_==null?void 0:_.cost_usd)==null?void 0:M.toFixed)==null?void 0:A.call(M,2))??"0.00"]})]}),a.jsx(as,{className:"text-blue-600 hover:underline",to:"/admin/analytics",children:"Explore analytics "})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Prompt Management"})}),a.jsxs(Te,{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Active prompts"}),a.jsx("span",{className:"font-semibold",children:S})]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Manage versions, approvals, and rollout metadata for AI prompt templates."}),a.jsx(as,{className:"text-blue-600 hover:underline",to:"/admin/ai-prompts",children:"Open prompt library "})]})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"AI Budget & Fallbacks"})}),a.jsxs(Te,{className:"space-y-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Monthly budget (USD)"}),a.jsx(be,{value:f.monthlyLimitUsd,onChange:L=>h(B=>({...B,monthlyLimitUsd:L.target.value})),placeholder:"250"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Fallback policy"}),a.jsxs(ln,{value:f.fallbackPolicy,onValueChange:L=>h(B=>({...B,fallbackPolicy:L})),children:[a.jsx(nn,{children:a.jsx(rn,{placeholder:"Select fallback"})}),a.jsxs(sn,{children:[a.jsx(qe,{value:"block",children:"Block requests"}),a.jsx(qe,{value:"degrade",children:"Degrade model"}),a.jsx(qe,{value:"allow",children:"Allow overage"})]})]})]}),a.jsx(we,{onClick:()=>y.mutate(),disabled:y.isPending,children:y.isPending?"Saving":"Save budget settings"}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Current spend: $",((K=(W=u.data)==null?void 0:W.budget)==null?void 0:K.spent_usd)??0,"  Reset at"," ",(z=(H=u.data)==null?void 0:H.budget)!=null&&z.reset_at?new Date(u.data.budget.reset_at).toLocaleDateString():""]})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Model Policy"})}),a.jsxs(Te,{className:"space-y-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Default model"}),a.jsx(be,{value:m.defaultModel,onChange:L=>g(B=>({...B,defaultModel:L.target.value}))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Fallback model"}),a.jsx(be,{value:m.fallbackModel,onChange:L=>g(B=>({...B,fallbackModel:L.target.value}))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Allowed models (comma-separated)"}),a.jsx(be,{value:m.allowedModels,onChange:L=>g(B=>({...B,allowedModels:L.target.value}))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Required feature flags"}),a.jsx(be,{value:m.featureFlags,onChange:L=>g(B=>({...B,featureFlags:L.target.value})),placeholder:"ENTERPRISE_AI_GOVERNANCE"})]}),a.jsx(we,{onClick:()=>w.mutate(),disabled:w.isPending,children:w.isPending?"Saving":"Save model policy"})]})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Transparency Docs"})}),a.jsxs(Te,{className:"space-y-3 text-sm",children:[(r.data??[]).length===0?a.jsx("p",{className:"text-muted-foreground",children:"No published docs yet. Seeded documents will appear after migration."}):a.jsx("ul",{className:"space-y-2",children:r.data.map(L=>a.jsxs("li",{className:"border rounded-lg p-3",children:[a.jsx("div",{className:"font-medium",children:L.title}),a.jsx("div",{className:"text-xs text-muted-foreground",children:L.summary})]},L.id))}),a.jsx(as,{className:"text-blue-600 hover:underline",to:"/ai/transparency",children:"View public transparency page "})]})]})]})})}const L8=Object.freeze(Object.defineProperty({__proto__:null,default:YR},Symbol.toStringTag,{value:"Module"})),yo=x.forwardRef(({className:e,...t},n)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:n,className:Ot("w-full caption-bottom text-sm",e),...t})}));yo.displayName="Table";const vo=x.forwardRef(({className:e,...t},n)=>a.jsx("thead",{ref:n,className:Ot("[&_tr]:border-b",e),...t}));vo.displayName="TableHeader";const xo=x.forwardRef(({className:e,...t},n)=>a.jsx("tbody",{ref:n,className:Ot("[&_tr:last-child]:border-0",e),...t}));xo.displayName="TableBody";const F8=x.forwardRef(({className:e,...t},n)=>a.jsx("tfoot",{ref:n,className:Ot("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));F8.displayName="TableFooter";const Cn=x.forwardRef(({className:e,...t},n)=>a.jsx("tr",{ref:n,className:Ot("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Cn.displayName="TableRow";const kt=x.forwardRef(({className:e,...t},n)=>a.jsx("th",{ref:n,className:Ot("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));kt.displayName="TableHead";const mt=x.forwardRef(({className:e,...t},n)=>a.jsx("td",{ref:n,className:Ot("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));mt.displayName="TableCell";const $8=x.forwardRef(({className:e,...t},n)=>a.jsx("caption",{ref:n,className:Ot("mt-4 text-sm text-muted-foreground",e),...t}));$8.displayName="TableCaption";async function LN(e,t={}){const n=await fetch(e,t);if(!n.ok){const r=await n.text();throw new Error(r||"Request failed")}return n.json()}function sp(){var l;const e=_t({queryKey:["ai-review-token"],queryFn:async()=>{const u=await Nt.auth.getAccessToken();return{"Content-Type":"application/json",...u?{Authorization:`Bearer ${u}`}:{}}}}),t=_t({queryKey:["ai-review-queue"],enabled:!!e.data,queryFn:async()=>LN(`${vt}/admin/ai/review-queue`,{headers:e.data})}),n=Tn({mutationFn:async({id:u,status:d,reason:f,notes:h})=>LN(`${vt}/admin/ai/review-queue/${u}/decision`,{method:"POST",headers:e.data,body:JSON.stringify({status:d,reason:f,notes:h})}),onSuccess:()=>t.refetch()}),[r,s]=x.useState({}),i=((l=t.data)==null?void 0:l.queue)||[];return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"AI Review Queue"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Approve or reject AI-generated content that requires human moderation."})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Pending Reviews"})}),a.jsx(Te,{children:a.jsxs(yo,{children:[a.jsx(vo,{children:a.jsxs(Cn,{children:[a.jsx(kt,{children:"Created"}),a.jsx(kt,{children:"Model"}),a.jsx(kt,{children:"Risk"}),a.jsx(kt,{children:"Reason"}),a.jsx(kt,{children:"Decision details"}),a.jsx(kt,{children:"Actions"})]})}),a.jsx(xo,{children:i.length===0?a.jsx(Cn,{children:a.jsx(mt,{colSpan:6,className:"text-sm text-muted-foreground",children:"No items awaiting review."})}):i.map(u=>{var d,f;return a.jsxs(Cn,{children:[a.jsx(mt,{children:u.created_at?new Date(u.created_at).toLocaleString():""}),a.jsx(mt,{children:u.model??""}),a.jsx(mt,{children:u.safety_risk_score??""}),a.jsx(mt,{children:u.reason??""}),a.jsx(mt,{children:a.jsxs("div",{className:"space-y-2 min-w-[220px]",children:[a.jsx("label",{className:"block text-xs font-medium text-muted-foreground",htmlFor:`reason-${u.id}`,children:"Decision reason"}),a.jsxs("select",{id:`reason-${u.id}`,value:((d=r[u.id])==null?void 0:d.reason)??"",onChange:h=>{const m=h.target.value;s(g=>({...g,[u.id]:{...g[u.id]||{},reason:m}}))},className:"w-full rounded-md border border-input bg-background px-2 py-1 text-sm",children:[a.jsx("option",{value:"",children:"Select reason"}),a.jsx("option",{value:"accurate",children:"Accurate"}),a.jsx("option",{value:"inaccurate",children:"Inaccurate"}),a.jsx("option",{value:"bias",children:"Bias"}),a.jsx("option",{value:"sensitive",children:"Sensitive content"}),a.jsx("option",{value:"other",children:"Other"})]}),a.jsx(an,{value:((f=r[u.id])==null?void 0:f.notes)??"",onChange:h=>{const m=h.target.value;s(g=>({...g,[u.id]:{...g[u.id]||{},notes:m}}))},placeholder:"Add notes for this decision",className:"min-h-[80px]"})]})}),a.jsxs(mt,{className:"flex gap-2",children:[a.jsx(we,{variant:"secondary",size:"sm",onClick:()=>{var h,m;return n.mutate({id:u.id,status:"approved",reason:((h=r[u.id])==null?void 0:h.reason)??"",notes:((m=r[u.id])==null?void 0:m.notes)??""})},disabled:n.isPending,children:"Approve"}),a.jsx(we,{variant:"destructive",size:"sm",onClick:()=>{var h,m;return n.mutate({id:u.id,status:"rejected",reason:((h=r[u.id])==null?void 0:h.reason)??"",notes:((m=r[u.id])==null?void 0:m.notes)??""})},disabled:n.isPending,children:"Reject"})]})]},u.id)})})]})})]})]})}const V8=Object.freeze(Object.defineProperty({__proto__:null,default:sp},Symbol.toStringTag,{value:"Module"})),z8=Object.freeze(Object.defineProperty({__proto__:null,default:sp},Symbol.toStringTag,{value:"Module"}));function It(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ei(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function U8(e,t){const n=It(e);return isNaN(t)?ei(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function QR(e,t){const n=It(e);if(isNaN(t))return ei(e,NaN);if(!t)return n;const r=n.getDate(),s=ei(e,n.getTime());s.setMonth(n.getMonth()+t+1,0);const i=s.getDate();return r>=i?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const XR=6048e5,B8=864e5,xle=6e4,wle=36e5,nm=43200,FN=1440;let q8={};function Zc(){return q8}function lo(e,t){var u,d,f,h;const n=Zc(),r=(t==null?void 0:t.weekStartsOn)??((d=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??n.weekStartsOn??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??0,s=It(e),i=s.getDay(),l=(i<r?7:0)+i-r;return s.setDate(s.getDate()-l),s.setHours(0,0,0,0),s}function ip(e){return lo(e,{weekStartsOn:1})}function JR(e){const t=It(e),n=t.getFullYear(),r=ei(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=ip(r),i=ei(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=ip(i);return t.getTime()>=s.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1}function ap(e){const t=It(e);return t.setHours(0,0,0,0),t}function op(e){const t=It(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function W8(e,t){const n=ap(e),r=ap(t),s=+n-op(n),i=+r-op(r);return Math.round((s-i)/B8)}function H8(e){const t=JR(e),n=ei(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),ip(n)}function Rm(e,t){const n=It(e),r=It(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function ZR(e){return ei(e,Date.now())}function eI(e,t){const n=ap(e),r=ap(t);return+n==+r}function G8(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function K8(e){if(!G8(e)&&typeof e!="number")return!1;const t=It(e);return!isNaN(Number(t))}function Y8(e,t){const n=It(e),r=It(t),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function Q8(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function X8(e,t){return+It(e)-+It(t)}function J8(e){const t=It(e);return t.setHours(23,59,59,999),t}function tI(e){const t=It(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Z8(e){const t=It(e);return+J8(t)==+tI(t)}function e7(e,t){const n=It(e),r=It(t),s=Rm(n,r),i=Math.abs(Y8(n,r));let l;if(i<1)l=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);let u=Rm(n,r)===-s;Z8(It(e))&&i===1&&Rm(e,r)===1&&(u=!1),l=s*(i-Number(u))}return l===0?0:l}function t7(e,t,n){const r=X8(e,t)/1e3;return Q8(n==null?void 0:n.roundingMethod)(r)}function n7(e){const t=It(e);return t.setDate(1),t.setHours(0,0,0,0),t}function r7(e){const t=It(e),n=ei(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function s7(e,t){var u,d;const n=Zc(),r=n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=It(e),i=s.getDay(),l=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+l),s.setHours(23,59,59,999),s}const i7={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},a7=(e,t,n)=>{let r;const s=i7[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ra(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const o7={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},l7={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},c7={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},u7={date:ra({formats:o7,defaultWidth:"full"}),time:ra({formats:l7,defaultWidth:"full"}),dateTime:ra({formats:c7,defaultWidth:"full"})},d7={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},f7=(e,t,n,r)=>d7[e];function kr(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,u=n!=null&&n.width?String(n.width):l;s=e.formattingValues[u]||e.formattingValues[l]}else{const l=e.defaultWidth,u=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[u]||e.values[l]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const h7={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},m7={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},p7={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},g7={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},y7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},v7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},x7=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},w7={ordinalNumber:x7,era:kr({values:h7,defaultWidth:"wide"}),quarter:kr({values:m7,defaultWidth:"wide",argumentCallback:e=>e-1}),month:kr({values:p7,defaultWidth:"wide"}),day:kr({values:g7,defaultWidth:"wide"}),dayPeriod:kr({values:y7,defaultWidth:"wide",formattingValues:v7,defaultFormattingWidth:"wide"})};function Nr(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const l=i[0],u=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(u)?_7(u,m=>m.test(l)):b7(u,m=>m.test(l));let f;f=e.valueCallback?e.valueCallback(d):d,f=n.valueCallback?n.valueCallback(f):f;const h=t.slice(l.length);return{value:f,rest:h}}}function b7(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function _7(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Eb(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],i=t.match(e.parsePattern);if(!i)return null;let l=e.valueCallback?e.valueCallback(i[0]):i[0];l=n.valueCallback?n.valueCallback(l):l;const u=t.slice(s.length);return{value:l,rest:u}}}const S7=/^(\d+)(th|st|nd|rd)?/i,j7=/\d+/i,E7={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},k7={any:[/^b/i,/^(a|c)/i]},N7={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},T7={any:[/1/i,/2/i,/3/i,/4/i]},C7={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},P7={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},A7={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},R7={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},I7={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},O7={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},D7={ordinalNumber:Eb({matchPattern:S7,parsePattern:j7,valueCallback:e=>parseInt(e,10)}),era:Nr({matchPatterns:E7,defaultMatchWidth:"wide",parsePatterns:k7,defaultParseWidth:"any"}),quarter:Nr({matchPatterns:N7,defaultMatchWidth:"wide",parsePatterns:T7,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Nr({matchPatterns:C7,defaultMatchWidth:"wide",parsePatterns:P7,defaultParseWidth:"any"}),day:Nr({matchPatterns:A7,defaultMatchWidth:"wide",parsePatterns:R7,defaultParseWidth:"any"}),dayPeriod:Nr({matchPatterns:I7,defaultMatchWidth:"any",parsePatterns:O7,defaultParseWidth:"any"})},kb={code:"en-US",formatDistance:a7,formatLong:u7,formatRelative:f7,localize:w7,match:D7,options:{weekStartsOn:0,firstWeekContainsDate:1}};function M7(e){const t=It(e);return W8(t,r7(t))+1}function L7(e){const t=It(e),n=+ip(t)-+H8(t);return Math.round(n/XR)+1}function nI(e,t){var h,m,g,y;const n=It(e),r=n.getFullYear(),s=Zc(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((y=(g=s.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,l=ei(e,0);l.setFullYear(r+1,0,i),l.setHours(0,0,0,0);const u=lo(l,t),d=ei(e,0);d.setFullYear(r,0,i),d.setHours(0,0,0,0);const f=lo(d,t);return n.getTime()>=u.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function F7(e,t){var u,d,f,h;const n=Zc(),r=(t==null?void 0:t.firstWeekContainsDate)??((d=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,s=nI(e,t),i=ei(e,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),lo(i,t)}function $7(e,t){const n=It(e),r=+lo(n,t)-+F7(n,t);return Math.round(r/XR)+1}function Ht(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const $a={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ht(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ht(n+1,2)},d(e,t){return Ht(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ht(e.getHours()%12||12,t.length)},H(e,t){return Ht(e.getHours(),t.length)},m(e,t){return Ht(e.getMinutes(),t.length)},s(e,t){return Ht(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Ht(s,t.length)}},Gl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$N={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return $a.y(e,t)},Y:function(e,t,n,r){const s=nI(e,r),i=s>0?s:1-s;if(t==="YY"){const l=i%100;return Ht(l,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):Ht(i,t.length)},R:function(e,t){const n=JR(e);return Ht(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ht(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ht(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ht(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return $a.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ht(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=$7(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):Ht(s,t.length)},I:function(e,t,n){const r=L7(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Ht(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):$a.d(e,t)},D:function(e,t,n){const r=M7(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ht(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Ht(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Ht(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Ht(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=Gl.noon:r===0?s=Gl.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=Gl.evening:r>=12?s=Gl.afternoon:r>=4?s=Gl.morning:s=Gl.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return $a.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):$a.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ht(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ht(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):$a.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):$a.s(e,t)},S:function(e,t){return $a.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return zN(r);case"XXXX":case"XX":return Fo(r);case"XXXXX":case"XXX":default:return Fo(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return zN(r);case"xxxx":case"xx":return Fo(r);case"xxxxx":case"xxx":default:return Fo(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+VN(r,":");case"OOOO":default:return"GMT"+Fo(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+VN(r,":");case"zzzz":default:return"GMT"+Fo(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Ht(r,t.length)},T:function(e,t,n){const r=e.getTime();return Ht(r,t.length)}};function VN(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+t+Ht(i,2)}function zN(e,t){return e%60===0?(e>0?"-":"+")+Ht(Math.abs(e)/60,2):Fo(e,t)}function Fo(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Ht(Math.trunc(r/60),2),i=Ht(r%60,2);return n+s+t+i}const UN=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},rI=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},V7=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return UN(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",UN(r,t)).replace("{{time}}",rI(s,t))},z7={p:rI,P:V7},U7=/^D+$/,B7=/^Y+$/,q7=["D","DD","YY","YYYY"];function W7(e){return U7.test(e)}function H7(e){return B7.test(e)}function G7(e,t,n){const r=K7(e,t,n);if(console.warn(r),q7.includes(e))throw new RangeError(r)}function K7(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Y7=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Q7=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,X7=/^'([^]*?)'?$/,J7=/''/g,Z7=/[a-zA-Z]/;function ol(e,t,n){var h,m,g,y,w,b,S,_;const r=Zc(),s=(n==null?void 0:n.locale)??r.locale??kb,i=(n==null?void 0:n.firstWeekContainsDate)??((m=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(g=r.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,l=(n==null?void 0:n.weekStartsOn)??((b=(w=n==null?void 0:n.locale)==null?void 0:w.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((_=(S=r.locale)==null?void 0:S.options)==null?void 0:_.weekStartsOn)??0,u=It(e);if(!K8(u))throw new RangeError("Invalid time value");let d=t.match(Q7).map(k=>{const N=k[0];if(N==="p"||N==="P"){const T=z7[N];return T(k,s.formatLong)}return k}).join("").match(Y7).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const N=k[0];if(N==="'")return{isToken:!1,value:eG(k)};if($N[N])return{isToken:!0,value:k};if(N.match(Z7))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:k}});s.localize.preprocessor&&(d=s.localize.preprocessor(u,d));const f={firstWeekContainsDate:i,weekStartsOn:l,locale:s};return d.map(k=>{if(!k.isToken)return k.value;const N=k.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&H7(N)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&W7(N))&&G7(N,t,String(e));const T=$N[N[0]];return T(u,N,s.localize,f)}).join("")}function eG(e){const t=e.match(X7);return t?t[1].replace(J7,"'"):e}function tG(e,t,n){const r=Zc(),s=(n==null?void 0:n.locale)??r.locale??kb,i=2520,l=Rm(e,t);if(isNaN(l))throw new RangeError("Invalid time value");const u=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:l});let d,f;l>0?(d=It(t),f=It(e)):(d=It(e),f=It(t));const h=t7(f,d),m=(op(f)-op(d))/1e3,g=Math.round((h-m)/60);let y;if(g<2)return n!=null&&n.includeSeconds?h<5?s.formatDistance("lessThanXSeconds",5,u):h<10?s.formatDistance("lessThanXSeconds",10,u):h<20?s.formatDistance("lessThanXSeconds",20,u):h<40?s.formatDistance("halfAMinute",0,u):h<60?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",1,u):g===0?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",g,u);if(g<45)return s.formatDistance("xMinutes",g,u);if(g<90)return s.formatDistance("aboutXHours",1,u);if(g<FN){const w=Math.round(g/60);return s.formatDistance("aboutXHours",w,u)}else{if(g<i)return s.formatDistance("xDays",1,u);if(g<nm){const w=Math.round(g/FN);return s.formatDistance("xDays",w,u)}else if(g<nm*2)return y=Math.round(g/nm),s.formatDistance("aboutXMonths",y,u)}if(y=e7(f,d),y<12){const w=Math.round(g/nm);return s.formatDistance("xMonths",w,u)}else{const w=y%12,b=Math.trunc(y/12);return w<3?s.formatDistance("aboutXYears",b,u):w<9?s.formatDistance("overXYears",b,u):s.formatDistance("almostXYears",b+1,u)}}function nG(e,t){return tG(e,ZR(e),t)}function rG(e,t,n){const r=lo(e,n),s=lo(t,n);return+r==+s}function sG(e,t){const n=It(e),r=It(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function iG(e){return eI(e,ZR(e))}function aG(e,t){return QR(e,-1)}const oG=Ii("admin-audit-logs");function sI(){const{data:e}=vr(),t=(e==null?void 0:e.organizationId)??null,n=(e==null?void 0:e.schoolId)??null,[r,s]=x.useState(""),i=_t({queryKey:["audit-log",t,n],enabled:!!t,queryFn:async()=>{const h=await Gt(`query AuditLog($where: audit_log_bool_exp!, $limit: Int!) {
        audit_log(where: $where, order_by: { created_at: desc }, limit: $limit) {
          id
          created_at
          actor_id
          action
          entity_type
          entity_id
          metadata
          organization_id
          school_id
        }
      }`,{where:n?{school_id:{_eq:n}}:{organization_id:{_eq:t}},limit:200});return(h==null?void 0:h.audit_log)??[]}}),l=x.useMemo(()=>{const d=r.trim().toLowerCase();return d?(i.data??[]).filter(f=>{var h,m;return((h=f.action)==null?void 0:h.toLowerCase().includes(d))||((m=f.entity_type)==null?void 0:m.toLowerCase().includes(d))}):i.data??[]},[i.data,r]),u=async()=>{const{res:d,error:f}=await Nt.functions.call("audit-export",{search:r,organizationId:t,schoolId:n});if(f){oG.error("Audit export failed",f);return}const h=await d.blob(),m=URL.createObjectURL(h),g=document.createElement("a");g.href=m,g.download=`audit-logs-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(g),g.click(),g.remove(),URL.revokeObjectURL(m)};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Audit Logs"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"View immutable audit records for security-sensitive activity. Filters apply to your tenant scope."})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Search & Export"})}),a.jsxs(Te,{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[a.jsx(be,{value:r,onChange:d=>s(d.target.value),placeholder:"Filter by action or entity",className:"md:max-w-sm"}),a.jsx(we,{onClick:u,disabled:!t,children:"Export CSV"})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Recent Entries"})}),a.jsx(Te,{children:a.jsxs(yo,{children:[a.jsx(vo,{children:a.jsxs(Cn,{children:[a.jsx(kt,{children:"Date"}),a.jsx(kt,{children:"Action"}),a.jsx(kt,{children:"Entity"}),a.jsx(kt,{children:"Actor"})]})}),a.jsx(xo,{children:l.length===0?a.jsx(Cn,{children:a.jsx(mt,{colSpan:4,className:"text-sm text-muted-foreground",children:"No audit records found."})}):l.map(d=>a.jsxs(Cn,{children:[a.jsx(mt,{className:"whitespace-nowrap",children:d.created_at?ol(new Date(d.created_at),"MMM d, yyyy p"):""}),a.jsx(mt,{children:d.action}),a.jsx(mt,{children:d.entity_type}),a.jsx(mt,{className:"font-mono text-xs",children:d.actor_id??"system"})]},d.id))})]})})]})]})}const lG=Object.freeze(Object.defineProperty({__proto__:null,default:sI},Symbol.toStringTag,{value:"Module"}));async function cG(){const e=await fetch("/api/feature-flags");if(!e.ok)throw new Error("Failed to load feature flags");return e.json()}async function uG(e){const t=new URLSearchParams;e.organizationId&&t.set("organizationId",e.organizationId),e.schoolId&&t.set("schoolId",e.schoolId);const n=await fetch(`/api/admin/feature-flags?${t.toString()}`);if(!n.ok)throw new Error("Failed to load admin feature flags");return n.json()}async function dG(e){const t=await fetch(`/api/admin/feature-flags/${encodeURIComponent(e.key)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update feature flag");return t.json()}function BN(e){return(e??[]).join(", ")}function qN(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}const fG=[];function Pv(e){return{enabled:!!(e.enabled??e.defaultEnabled??!1),description:e.description??"",rolloutPercentage:e.rolloutPercentage??"",canaryPercentage:e.canaryPercentage??"",allowlistText:BN(e.allowlist),denylistText:BN(e.denylist)}}function iI(){const{data:e}=vr(),t=(e==null?void 0:e.organizationId)??null,n=(e==null?void 0:e.schoolId)??null,[r,s]=x.useState(""),[i,l]=x.useState(""),[u,d]=x.useState({}),f=_t({queryKey:["feature-flags-admin",t,n],enabled:!!t,queryFn:()=>uG({organizationId:t,schoolId:n})}),h=Tn({mutationFn:dG,onSuccess:()=>f.refetch()});x.useEffect(()=>{var b;(b=f.data)!=null&&b.flags&&d(()=>{const S={};return f.data.flags.forEach(_=>{S[_.key]=Pv(_)}),S})},[f.data]);const m=x.useMemo(()=>{var b;return((b=f.data)==null?void 0:b.flags)??fG},[f.data]),g=(b,S,_)=>{d(k=>({...k,[b]:{...k[b]??Pv(m.find(N=>N.key===b)||{}),[S]:_}}))},y=b=>{var _;const S=u[b];S&&h.mutate({key:b,organizationId:t,schoolId:n,enabled:!!S.enabled,description:((_=S.description)==null?void 0:_.trim())||null,rolloutPercentage:S.rolloutPercentage===""?null:Number(S.rolloutPercentage),canaryPercentage:S.canaryPercentage===""?null:Number(S.canaryPercentage),allowlist:qN(S.allowlistText||""),denylist:qN(S.denylistText||"")})},w=()=>{r.trim()&&(h.mutate({key:r.trim(),organizationId:t,schoolId:n,description:i.trim()||null,enabled:!1,rolloutPercentage:null,canaryPercentage:null,allowlist:[],denylist:[]}),s(""),l(""))};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Feature Flags"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Toggle enterprise capabilities per tenant. Percentage rollouts apply to user-based hashing, with allowlists and denylists overriding staged rollouts. Updates are audited in the backend."})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Create Flag"})}),a.jsxs(Te,{className:"grid gap-4 md:grid-cols-[2fr,3fr,auto]",children:[a.jsx(be,{value:r,onChange:b=>s(b.target.value),placeholder:"ENTERPRISE_SSO"}),a.jsx(be,{value:i,onChange:b=>l(b.target.value),placeholder:"Description"}),a.jsx(we,{onClick:w,disabled:!r.trim()||h.isLoading||!t,children:"Add"})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Flags"})}),a.jsx(Te,{className:"space-y-4",children:a.jsxs(yo,{children:[a.jsx(vo,{children:a.jsxs(Cn,{children:[a.jsx(kt,{children:"Key"}),a.jsx(kt,{children:"Description"}),a.jsx(kt,{children:"Default"}),a.jsx(kt,{children:"Enabled"}),a.jsx(kt,{children:"Rollout %"}),a.jsx(kt,{children:"Canary %"}),a.jsx(kt,{children:"Allowlist"}),a.jsx(kt,{children:"Denylist"}),a.jsx(kt,{children:"Scope"}),a.jsx(kt,{children:"Actions"})]})}),a.jsx(xo,{children:m.length===0?a.jsx(Cn,{children:a.jsx(mt,{colSpan:10,className:"text-sm text-muted-foreground",children:"No flags configured."})}):m.map(b=>{const S=u[b.key]??Pv(b);return a.jsxs(Cn,{children:[a.jsx(mt,{className:"font-mono text-xs",children:b.key}),a.jsx(mt,{children:a.jsx(be,{value:S.description,onChange:_=>g(b.key,"description",_.target.value)})}),a.jsx(mt,{children:b.defaultEnabled?"On":"Off"}),a.jsx(mt,{children:a.jsx(Xs,{checked:!!S.enabled,onCheckedChange:_=>g(b.key,"enabled",_),"aria-label":`Toggle ${b.key}`})}),a.jsx(mt,{children:a.jsx(be,{type:"number",min:"0",max:"100",value:S.rolloutPercentage,onChange:_=>g(b.key,"rolloutPercentage",_.target.value),placeholder:"0-100"})}),a.jsx(mt,{children:a.jsx(be,{type:"number",min:"0",max:"100",value:S.canaryPercentage,onChange:_=>g(b.key,"canaryPercentage",_.target.value),placeholder:"0-100"})}),a.jsx(mt,{children:a.jsx(be,{value:S.allowlistText,onChange:_=>g(b.key,"allowlistText",_.target.value),placeholder:"tenant ids"})}),a.jsx(mt,{children:a.jsx(be,{value:S.denylistText,onChange:_=>g(b.key,"denylistText",_.target.value),placeholder:"tenant ids"})}),a.jsx(mt,{children:b.scope??(n?"school":"organization")}),a.jsx(mt,{children:a.jsx(we,{variant:"outline",onClick:()=>y(b.key),disabled:h.isLoading||!t,children:"Save"})})]},b.key)})})]})})]})]})}const hG=Object.freeze(Object.defineProperty({__proto__:null,default:iI},Symbol.toStringTag,{value:"Module"}));function aI(){const{data:e}=vr(),t=(e==null?void 0:e.organizationId)??null,n=(e==null?void 0:e.schoolId)??null,[r,s]=x.useState(null),[i,l]=x.useState("users"),[u,d]=x.useState("csv"),f=_t({queryKey:["sis-import-jobs",t,n],enabled:!!t,queryFn:async()=>{const y=await Gt(`query SisImportJobs($where: sis_import_jobs_bool_exp!) {
        sis_import_jobs(where: $where, order_by: { created_at: desc }, limit: 50) {
          id
          roster_type
          source
          status
          created_at
        }
      }`,{where:n?{school_id:{_eq:n}}:{organization_id:{_eq:t}}});return(y==null?void 0:y.sis_import_jobs)??[]}}),h=async()=>{if(!r||!t)return;const m=await r.text(),{error:g}=await Nt.functions.call("sis-roster-import",{csvText:m,rosterType:i,source:u,schoolId:n,fileName:r.name,fileSize:r.size});if(g){console.error(g);return}s(null),f.refetch()};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"SIS Roster Import"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload OneRoster-formatted CSV data to synchronize read-only roster records."})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Import CSV"})}),a.jsxs(Te,{className:"grid gap-4 md:grid-cols-[1fr,1fr,1fr,auto]",children:[a.jsx(be,{value:i,onChange:m=>l(m.target.value),placeholder:"users | classes | enrollments"}),a.jsx(be,{value:u,onChange:m=>d(m.target.value),placeholder:"csv | clever | classlink"}),a.jsx(be,{type:"file",accept:".csv",onChange:m=>{var g;return s(((g=m.target.files)==null?void 0:g[0])??null)}}),a.jsx(we,{onClick:h,disabled:!r||!t,children:"Upload"})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Recent Imports"})}),a.jsx(Te,{children:a.jsxs(yo,{children:[a.jsx(vo,{children:a.jsxs(Cn,{children:[a.jsx(kt,{children:"Type"}),a.jsx(kt,{children:"Source"}),a.jsx(kt,{children:"Status"}),a.jsx(kt,{children:"Imported"})]})}),a.jsx(xo,{children:(f.data??[]).length===0?a.jsx(Cn,{children:a.jsx(mt,{colSpan:4,className:"text-sm text-muted-foreground",children:"No roster records found."})}):(f.data??[]).map(m=>a.jsxs(Cn,{children:[a.jsx(mt,{className:"font-mono text-xs",children:m.roster_type}),a.jsx(mt,{children:m.source}),a.jsx(mt,{className:"capitalize",children:m.status}),a.jsx(mt,{children:m.created_at?new Date(m.created_at).toLocaleString():""})]},m.id))})]})})]})]})}const mG=Object.freeze(Object.defineProperty({__proto__:null,default:aI},Symbol.toStringTag,{value:"Module"}));async function Av(e,t={}){const n=await fetch(`${vt}${e}`,{headers:{"Content-Type":"application/json",...t.headers||{}},...t}),r=await n.json().catch(()=>({}));if(!n.ok)throw new Error((r==null?void 0:r.error)||"Request failed");return r}function Rv(e){if(!e)return"";try{return new Date(e).toLocaleString()}catch{return e}}function oI(){var k,N,T;const[e,t]=x.useState([]),[n,r]=x.useState(""),[s,i]=x.useState(null),[l,u]=x.useState(!1),[d,f]=x.useState(!1),[h,m]=x.useState(""),[g,y]=x.useState(""),w=x.useMemo(()=>e.find(P=>P.id===n),[e,n]),b=x.useCallback(async()=>{u(!0),m(""),y("");try{const P=await Av("/integrations/roster/alerts");t(P),P.length&&!n&&r(P[0].id)}catch(P){m((P==null?void 0:P.message)||"Failed to load alerts.")}finally{u(!1)}},[n]),S=x.useCallback(async P=>{if(P){f(!0),m("");try{const R=await Av(`/integrations/roster/runs/${P}`);i(R)}catch(R){m((R==null?void 0:R.message)||"Failed to load run.")}finally{f(!1)}}},[]),_=x.useCallback(async()=>{if(w!=null&&w.runId){f(!0),m(""),y("");try{const P=await Av(`/integrations/roster/runs/${w.runId}/retry`,{method:"POST"});i(P),y("Retry started."),await b()}catch(P){m((P==null?void 0:P.message)||"Retry failed.")}finally{f(!1)}}},[w,b]);return x.useEffect(()=>{b()},[b]),x.useEffect(()=>{w!=null&&w.runId?S(w.runId):i(null)},[w,S]),a.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[a.jsxs("header",{className:"space-y-2",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Integration Sync Health"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Monitor SIS/LMS sync alerts, diagnostics, and remediation actions."})]}),h&&a.jsx("div",{className:"bg-red-50 text-red-700 border border-red-200 p-3 rounded",children:h}),g&&a.jsx("div",{className:"bg-green-50 text-green-700 border border-green-200 p-3 rounded",children:g}),a.jsxs("div",{className:"grid md:grid-cols-[1.2fr_1.8fr] gap-6",children:[a.jsxs("section",{className:"border rounded-lg p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Active alerts"}),a.jsx("button",{type:"button",onClick:b,className:"text-sm text-blue-600 hover:underline disabled:opacity-50",disabled:l,children:l?"Refreshing":"Refresh"})]}),e.length===0&&!l&&a.jsx("p",{className:"text-sm text-gray-500",children:"No alerts right now."}),a.jsx("ul",{className:"space-y-2",children:e.map(P=>a.jsx("li",{children:a.jsxs("button",{type:"button",onClick:()=>r(P.id),className:`w-full text-left border rounded p-3 space-y-1 ${n===P.id?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-sm",children:P.message}),a.jsx("span",{className:"text-xs uppercase tracking-wide text-gray-500",children:P.severity})]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Created ",Rv(P.createdAt)]}),P.runId&&a.jsxs("div",{className:"text-xs text-gray-500",children:["Run ID: ",P.runId]})]})},P.id))})]}),a.jsxs("section",{className:"border rounded-lg p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-medium",children:"Diagnostics"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Review failed sync details and retry."})]}),a.jsx("button",{type:"button",onClick:_,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50",disabled:!(w!=null&&w.runId)||d,children:d?"Retrying":"Retry sync"})]}),!w&&a.jsx("p",{className:"text-sm text-gray-500",children:"Select an alert to view details."}),w&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded p-3 text-sm",children:[a.jsx("div",{className:"font-medium",children:"Alert details"}),a.jsxs("div",{className:"text-gray-600",children:["Severity: ",w.severity]}),a.jsxs("div",{className:"text-gray-600",children:["Source ID: ",w.sourceId||""]}),a.jsxs("div",{className:"text-gray-600",children:["Run ID: ",w.runId||""]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded p-3 space-y-2 text-sm",children:[a.jsx("div",{className:"font-medium",children:"Run diagnostics"}),s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-gray-600",children:["Status: ",s.status]}),a.jsxs("div",{className:"text-gray-600",children:["Started: ",Rv(s.startedAt)]}),a.jsxs("div",{className:"text-gray-600",children:["Finished: ",Rv(s.finishedAt)]}),a.jsxs("div",{className:"text-gray-600",children:["Invalid: ",((k=s.stats)==null?void 0:k.invalid)??0]}),a.jsxs("div",{className:"text-gray-600",children:["Deactivated: ",((N=s.stats)==null?void 0:N.deactivated)??0]}),a.jsxs("div",{className:"text-gray-600",children:["Triggered by: ",s.triggeredBy]}),((T=s.errors)==null?void 0:T.length)>0&&a.jsx("div",{className:"text-red-600 text-xs",children:s.errors.map((P,R)=>a.jsxs("div",{children:[" ",P.message]},`${P.message}-${R}`))}),s.diagnostics&&a.jsx("pre",{className:"text-xs bg-slate-50 border border-slate-200 rounded p-2 overflow-auto",children:JSON.stringify(s.diagnostics,null,2)})]}):a.jsx("p",{className:"text-sm text-gray-500",children:"Loading run details"})]})]})]})]})]})}const pG=Object.freeze(Object.defineProperty({__proto__:null,default:oI},Symbol.toStringTag,{value:"Module"})),WN=[{id:"google",label:"Google Workspace"},{id:"azuread",label:"Azure AD"},{id:"clever",label:"Clever"},{id:"classlink",label:"ClassLink"},{id:"okta",label:"Okta"},{id:"saml",label:"SAML"}];function gG(e){try{return e?JSON.parse(e):{}}catch{return{}}}function lI(){const{data:e}=vr(),t=(e==null?void 0:e.organizationId)??null,n=_t({queryKey:["tenant-domains",t],enabled:!!t,queryFn:async()=>{const b=await Gt(`query TenantDomains($organizationId: uuid!) {
        tenant_domains(where: { organization_id: { _eq: $organizationId } }, order_by: { domain: asc }) {
          id
          domain
          is_primary
          verified_at
        }
      }`,{organizationId:t});return(b==null?void 0:b.tenant_domains)??[]}}),r=_t({queryKey:["enterprise-sso-settings",t],enabled:!!t,queryFn:async()=>{const b=await Gt(`query EnterpriseSsoSettings($organizationId: uuid!) {
        enterprise_sso_settings(where: { organization_id: { _eq: $organizationId } }, order_by: { provider: asc }) {
          id
          provider
          client_id
          client_secret
          issuer
          metadata
          is_enabled
        }
      }`,{organizationId:t});return(b==null?void 0:b.enterprise_sso_settings)??[]}}),[s,i]=x.useState(""),[l,u]=x.useState({});x.useEffect(()=>{const w={};WN.forEach(b=>{var _;const S=(_=r.data)==null?void 0:_.find(k=>k.provider===b.id);w[b.id]={id:(S==null?void 0:S.id)??null,provider:b.id,client_id:(S==null?void 0:S.client_id)??"",client_secret:(S==null?void 0:S.client_secret)??"",issuer:(S==null?void 0:S.issuer)??"",metadata:JSON.stringify((S==null?void 0:S.metadata)??{},null,2),is_enabled:!!(S!=null&&S.is_enabled)}}),u(w)},[r.data]);const d=(w,b)=>{u(S=>({...S,[w]:{...S[w],...b}}))},f=Tn({mutationFn:async()=>{if(!t)throw new Error("Missing organization scope");await Gt(`mutation InsertDomain($object: tenant_domains_insert_input!) {
        insert_tenant_domains_one(object: $object) { id }
      }`,{object:{organization_id:t,domain:s.trim().toLowerCase(),is_primary:!1}})},onSuccess:()=>{i(""),n.refetch()}}),h=Tn({mutationFn:async({id:w})=>{await Gt(`mutation SetPrimary($organizationId: uuid!, $id: uuid!) {
        update_tenant_domains(where: { organization_id: { _eq: $organizationId } }, _set: { is_primary: false }) {
          affected_rows
        }
        update_tenant_domains_by_pk(pk_columns: { id: $id }, _set: { is_primary: true }) { id }
      }`,{organizationId:t,id:w})},onSuccess:()=>n.refetch()}),m=Tn({mutationFn:async({id:w})=>{await Gt(`mutation DeleteDomain($id: uuid!) {
        delete_tenant_domains_by_pk(id: $id) { id }
      }`,{id:w})},onSuccess:()=>n.refetch()}),g=Tn({mutationFn:async({providerId:w})=>{if(!t)throw new Error("Missing organization scope");const b=l[w];await Gt(`mutation UpsertSso($object: enterprise_sso_settings_insert_input!) {
        insert_enterprise_sso_settings_one(
          object: $object,
          on_conflict: {
            constraint: enterprise_sso_settings_organization_id_provider_key,
            update_columns: [client_id, client_secret, issuer, metadata, is_enabled]
          }
        ) { id }
      }`,{object:{organization_id:t,provider:w,client_id:b.client_id||null,client_secret:b.client_secret||null,issuer:b.issuer||null,metadata:gG(b.metadata),is_enabled:!!b.is_enabled}})},onSuccess:()=>r.refetch()}),y=x.useMemo(()=>n.data??[],[n.data]);return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"SSO Policy"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage tenant domains and configure enterprise SSO providers for your organization."})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Tenant Domains"})}),a.jsxs(Te,{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:[a.jsx(be,{value:s,onChange:w=>i(w.target.value),placeholder:"district.edu",className:"md:max-w-sm"}),a.jsx(we,{onClick:()=>f.mutate(),disabled:!s.trim()||f.isLoading||!t,children:"Add domain"})]}),a.jsxs(yo,{children:[a.jsx(vo,{children:a.jsxs(Cn,{children:[a.jsx(kt,{children:"Domain"}),a.jsx(kt,{children:"Status"}),a.jsx(kt,{children:"Primary"}),a.jsx(kt,{})]})}),a.jsx(xo,{children:y.length===0?a.jsx(Cn,{children:a.jsx(mt,{colSpan:4,className:"text-sm text-muted-foreground",children:"No tenant domains configured yet."})}):y.map(w=>a.jsxs(Cn,{children:[a.jsx(mt,{className:"font-mono text-xs",children:w.domain}),a.jsx(mt,{children:w.verified_at?"Verified":"Pending"}),a.jsx(mt,{children:a.jsx(il,{checked:w.is_primary,onCheckedChange:()=>h.mutate({id:w.id}),"aria-label":`Set ${w.domain} primary`})}),a.jsx(mt,{className:"text-right",children:a.jsx(we,{variant:"ghost",size:"sm",onClick:()=>m.mutate({id:w.id}),children:"Remove"})})]},w.id))})]})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"SSO Providers"})}),a.jsx(Te,{className:"space-y-6",children:WN.map(w=>{const b=l[w.id]??{};return a.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold",children:w.label}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Provider key: ",w.id]})]}),a.jsx(il,{checked:!!b.is_enabled,onCheckedChange:S=>d(w.id,{is_enabled:S}),"aria-label":`Enable ${w.label}`})]}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsx(be,{value:b.client_id??"",onChange:S=>d(w.id,{client_id:S.target.value}),placeholder:"Client ID"}),a.jsx(be,{value:b.client_secret??"",onChange:S=>d(w.id,{client_secret:S.target.value}),placeholder:"Client Secret",type:"password"}),a.jsx(be,{value:b.issuer??"",onChange:S=>d(w.id,{issuer:S.target.value}),placeholder:"Issuer / Metadata URL"})]}),a.jsx(an,{value:b.metadata??"",onChange:S=>d(w.id,{metadata:S.target.value}),rows:4,placeholder:'{"scopes": ["openid", "profile"]}'}),a.jsx("div",{className:"flex justify-end",children:a.jsx(we,{onClick:()=>g.mutate({providerId:w.id}),disabled:g.isLoading||!t,children:g.isLoading?"Saving":"Save provider"})})]},w.id)})})]})]})}const yG=Object.freeze(Object.defineProperty({__proto__:null,default:lI},Symbol.toStringTag,{value:"Module"}));function cI(){const{data:e}=vr(),t=(e==null?void 0:e.organizationId)??null,[n,r]=x.useState(""),s=_t({queryKey:["tenant-domains",t],enabled:!!t,queryFn:async()=>{const h=await Hr({query:`query TenantDomains($organizationId: uuid!) {
        tenant_domains(where: { organization_id: { _eq: $organizationId } }, order_by: { domain: asc }) {
          id
          domain
          is_primary
          verified_at
        }
      }`,variables:{organizationId:t}});return(h==null?void 0:h.tenant_domains)??[]}}),i=Tn({mutationFn:async()=>{if(!t)throw new Error("Missing organization scope");await Hr({query:`mutation AddTenantDomain($object: tenant_domains_insert_input!) {
        insert_tenant_domains_one(object: $object) { id }
      }`,variables:{object:{organization_id:t,domain:n.trim().toLowerCase(),is_primary:!1}}})},onSuccess:()=>{r(""),s.refetch()}}),l=Tn({mutationFn:async({id:f})=>{await Hr({query:`mutation SetPrimaryDomain($organizationId: uuid!, $id: uuid!) {
        update_tenant_domains(where: { organization_id: { _eq: $organizationId } }, _set: { is_primary: false }) {
          affected_rows
        }
        update_tenant_domains_by_pk(pk_columns: { id: $id }, _set: { is_primary: true }) { id }
      }`,variables:{organizationId:t,id:f}})},onSuccess:()=>s.refetch()}),u=Tn({mutationFn:async({id:f})=>{await Hr({query:`mutation RemoveTenantDomain($id: uuid!) {
        delete_tenant_domains_by_pk(id: $id) { id }
      }`,variables:{id:f}})},onSuccess:()=>s.refetch()}),d=x.useMemo(()=>s.data??[],[s.data]);return a.jsx(gt,{allowedRoles:["system_admin","district_admin","school_admin","admin"],children:a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("header",{className:"space-y-2",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Tenant Domains"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage allowed email domains for single sign-on."})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Add Domain"})}),a.jsx(Te,{children:a.jsxs("form",{onSubmit:f=>{f.preventDefault(),n.trim()&&i.mutate()},className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(be,{type:"text",placeholder:"example.com",value:n,onChange:f=>r(f.target.value)}),a.jsx(we,{type:"submit",variant:"default",disabled:i.isLoading||!n.trim(),children:"Add"})]})})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Domains"})}),a.jsx(Te,{children:a.jsxs(yo,{children:[a.jsx(vo,{children:a.jsxs(Cn,{children:[a.jsx(kt,{children:"Domain"}),a.jsx(kt,{children:"Status"}),a.jsx(kt,{children:"Primary"}),a.jsx(kt,{children:"Actions"})]})}),a.jsx(xo,{children:d.length===0?a.jsx(Cn,{children:a.jsx(mt,{colSpan:4,className:"text-sm text-muted-foreground",children:"No domains configured yet."})}):d.map(f=>a.jsxs(Cn,{children:[a.jsx(mt,{className:"font-mono text-xs",children:f.domain}),a.jsx(mt,{children:f.verified_at?"Verified":"Pending"}),a.jsx(mt,{children:f.is_primary?"Yes":"No"}),a.jsxs(mt,{className:"flex gap-2",children:[a.jsx(we,{variant:"secondary",size:"sm",onClick:()=>l.mutate({id:f.id}),disabled:f.is_primary,children:"Set primary"}),a.jsx(we,{variant:"ghost",size:"sm",onClick:()=>u.mutate({id:f.id}),children:"Remove"})]})]},f.id))})]})})]})]})})}const vG=Object.freeze(Object.defineProperty({__proto__:null,default:cI},Symbol.toStringTag,{value:"Module"}));function xG(){return a.jsx(gt,{allowedRoles:["system_admin"],children:a.jsxs("div",{className:"p-4",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"AI Fine-Tuning Management"}),a.jsx("p",{className:"mb-6 text-gray-700",children:"Configure and deploy custom fine-tuned models. These models allow Teachmo to better serve specific curricula, cultural contexts, or enterprise-specific requirements while maintaining safety and reliability."}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:"Fine-Tuned Models"}),a.jsx(Te,{children:a.jsx("p",{className:"text-gray-600",children:"A list of custom models will appear here with status (draft, training, live, archived) and usage metrics. You can select a model to view details or decommission it."})})]}),a.jsxs(Ne,{className:"mt-4",children:[a.jsx(Oe,{children:"Create New Model"}),a.jsx(Te,{children:a.jsx("p",{className:"text-gray-600",children:"Upload training datasets and configure hyperparameters to initiate a fine-tuning job. A wizard will guide you through selecting the base model, specifying epochs, and estimating compute costs."})})]})]})})}async function Ju(e,t={}){const n=await fetch(e,t);if(!n.ok){const r=await n.text();throw new Error(r||"Request failed")}return n.json()}function uI(){var b,S;const[e,t]=x.useState(null),[n,r]=x.useState({name:"",description:"",content:""}),[s,i]=x.useState(""),[l,u]=x.useState({name:"",description:"",isArchived:!1}),d=_t({queryKey:["ai-prompts-token"],queryFn:async()=>{const _=await Nt.auth.getAccessToken();return{"Content-Type":"application/json",..._?{Authorization:`Bearer ${_}`}:{}}}}),f=_t({queryKey:["ai-prompts-admin"],enabled:!!d.data,queryFn:async()=>Ju(`${vt}/admin/ai/prompts`,{headers:d.data})}),h=_t({queryKey:["ai-prompts-versions",e],enabled:!!(d.data&&e),queryFn:async()=>Ju(`${vt}/admin/ai/prompts/${e}/versions`,{headers:d.data}),onSuccess:_=>{_!=null&&_.prompt&&u({name:_.prompt.name||"",description:_.prompt.description||"",isArchived:!!_.prompt.is_archived});const k=((_==null?void 0:_.versions)||[]).find(N=>N.is_active);i((k==null?void 0:k.content)||"")}}),m=Tn({mutationFn:async()=>Ju(`${vt}/admin/ai/prompts`,{method:"POST",headers:d.data,body:JSON.stringify({name:n.name,description:n.description,content:n.content})}),onSuccess:_=>{f.refetch(),t((_==null?void 0:_.id)||null),r({name:"",description:"",content:""})}}),g=Tn({mutationFn:async()=>Ju(`${vt}/admin/ai/prompts/${e}`,{method:"PUT",headers:d.data,body:JSON.stringify({name:l.name,description:l.description,isArchived:l.isArchived})}),onSuccess:()=>{f.refetch(),h.refetch()}}),y=Tn({mutationFn:async()=>Ju(`${vt}/admin/ai/prompts/${e}/versions`,{method:"POST",headers:d.data,body:JSON.stringify({content:s,setActive:!0})}),onSuccess:()=>{h.refetch(),f.refetch()}}),w=x.useMemo(()=>{var _;return((_=f.data)==null?void 0:_.prompts)||[]},[f.data]);return a.jsx(gt,{allowedRoles:["system_admin","admin"],children:a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("header",{className:"space-y-2",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"AI Prompt Library"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Create, version, and manage prompts used across Teachmo's AI features. Active versions can be promoted instantly for tenant-safe rollouts."})]}),a.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.2fr_2fr]",children:[a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Prompt Catalog"})}),a.jsx(Te,{className:"space-y-3",children:w.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:"No prompts yet. Create the first prompt to get started."}):a.jsx("ul",{className:"space-y-2",children:w.map(_=>a.jsx("li",{children:a.jsx("button",{type:"button",onClick:()=>t(_.id),className:`w-full text-left border rounded-lg p-3 transition ${e===_.id?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:_.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:_.description||"No description"})]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["v",_.version??""," ",_.is_archived?" Archived":""]})]})})},_.id))})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Create New Prompt"})}),a.jsxs(Te,{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Name"}),a.jsx(be,{value:n.name,onChange:_=>r(k=>({...k,name:_.target.value})),placeholder:"e.g., Attendance summary"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Description"}),a.jsx(be,{value:n.description,onChange:_=>r(k=>({...k,description:_.target.value})),placeholder:"Short description for admins"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Prompt content"}),a.jsx(an,{value:n.content,onChange:_=>r(k=>({...k,content:_.target.value})),rows:6,placeholder:"You are a helpful assistant..."})]}),a.jsx(we,{onClick:()=>m.mutate(),disabled:!n.name||!n.content||m.isPending,children:m.isPending?"Creating":"Create prompt"})]})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{children:"Selected Prompt"})}),a.jsx(Te,{className:"space-y-4",children:e?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Name"}),a.jsx(be,{value:l.name,onChange:_=>u(k=>({...k,name:_.target.value}))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Description"}),a.jsx(be,{value:l.description,onChange:_=>u(k=>({...k,description:_.target.value}))})]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:l.isArchived,onChange:_=>u(k=>({...k,isArchived:_.target.checked}))}),"Archive prompt"]}),a.jsx(we,{variant:"secondary",onClick:()=>g.mutate(),disabled:g.isPending,children:g.isPending?"Saving":"Save details"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"New version content"}),a.jsx(an,{value:s,onChange:_=>i(_.target.value),rows:8}),a.jsx("div",{className:"mt-2 flex justify-end",children:a.jsx(we,{onClick:()=>y.mutate(),disabled:!s||y.isPending,children:y.isPending?"Publishing":"Publish new version"})})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Version history"}),(S=(b=h.data)==null?void 0:b.versions)!=null&&S.length?a.jsx("ul",{className:"space-y-2 text-sm",children:h.data.versions.map(_=>a.jsx("li",{className:"border rounded-lg p-2",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{children:["v",_.version]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[_.is_active?"Active":"Archived"," "," ",_.created_at?new Date(_.created_at).toLocaleString():""]})]})},_.id))}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No versions recorded yet."})]})]}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a prompt to edit or add versions."})})]})]})]})]})})}const wG=Object.freeze(Object.defineProperty({__proto__:null,default:uI},Symbol.toStringTag,{value:"Module"}));function bG(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const _G=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,SG=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,jG={};function HN(e,t){return(jG.jsx?SG:_G).test(e)}const EG=/[ \t\n\f\r]/g;function kG(e){return typeof e=="object"?e.type==="text"?GN(e.value):!1:GN(e)}function GN(e){return e.replace(EG,"")===""}class xf{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}xf.prototype.normal={};xf.prototype.property={};xf.prototype.space=void 0;function dI(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new xf(n,r,t)}function Ew(e){return e.toLowerCase()}class Qr{constructor(t,n){this.attribute=n,this.property=t}}Qr.prototype.attribute="";Qr.prototype.booleanish=!1;Qr.prototype.boolean=!1;Qr.prototype.commaOrSpaceSeparated=!1;Qr.prototype.commaSeparated=!1;Qr.prototype.defined=!1;Qr.prototype.mustUseProperty=!1;Qr.prototype.number=!1;Qr.prototype.overloadedBoolean=!1;Qr.prototype.property="";Qr.prototype.spaceSeparated=!1;Qr.prototype.space=void 0;let NG=0;const yt=yl(),Mn=yl(),kw=yl(),Se=yl(),Xt=yl(),mc=yl(),ns=yl();function yl(){return 2**++NG}const Nw=Object.freeze(Object.defineProperty({__proto__:null,boolean:yt,booleanish:Mn,commaOrSpaceSeparated:ns,commaSeparated:mc,number:Se,overloadedBoolean:kw,spaceSeparated:Xt},Symbol.toStringTag,{value:"Module"})),Iv=Object.keys(Nw);class Nb extends Qr{constructor(t,n,r,s){let i=-1;if(super(t,n),KN(this,"space",s),typeof r=="number")for(;++i<Iv.length;){const l=Iv[i];KN(this,Iv[i],(r&Nw[l])===Nw[l])}}}Nb.prototype.defined=!0;function KN(e,t,n){n&&(e[t]=n)}function eu(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const i=new Nb(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[Ew(r)]=r,n[Ew(i.attribute)]=r}return new xf(t,n,e.space)}const fI=eu({properties:{ariaActiveDescendant:null,ariaAtomic:Mn,ariaAutoComplete:null,ariaBusy:Mn,ariaChecked:Mn,ariaColCount:Se,ariaColIndex:Se,ariaColSpan:Se,ariaControls:Xt,ariaCurrent:null,ariaDescribedBy:Xt,ariaDetails:null,ariaDisabled:Mn,ariaDropEffect:Xt,ariaErrorMessage:null,ariaExpanded:Mn,ariaFlowTo:Xt,ariaGrabbed:Mn,ariaHasPopup:null,ariaHidden:Mn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Xt,ariaLevel:Se,ariaLive:null,ariaModal:Mn,ariaMultiLine:Mn,ariaMultiSelectable:Mn,ariaOrientation:null,ariaOwns:Xt,ariaPlaceholder:null,ariaPosInSet:Se,ariaPressed:Mn,ariaReadOnly:Mn,ariaRelevant:null,ariaRequired:Mn,ariaRoleDescription:Xt,ariaRowCount:Se,ariaRowIndex:Se,ariaRowSpan:Se,ariaSelected:Mn,ariaSetSize:Se,ariaSort:null,ariaValueMax:Se,ariaValueMin:Se,ariaValueNow:Se,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function hI(e,t){return t in e?e[t]:t}function mI(e,t){return hI(e,t.toLowerCase())}const TG=eu({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:mc,acceptCharset:Xt,accessKey:Xt,action:null,allow:null,allowFullScreen:yt,allowPaymentRequest:yt,allowUserMedia:yt,alt:null,as:null,async:yt,autoCapitalize:null,autoComplete:Xt,autoFocus:yt,autoPlay:yt,blocking:Xt,capture:null,charSet:null,checked:yt,cite:null,className:Xt,cols:Se,colSpan:null,content:null,contentEditable:Mn,controls:yt,controlsList:Xt,coords:Se|mc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:yt,defer:yt,dir:null,dirName:null,disabled:yt,download:kw,draggable:Mn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:yt,formTarget:null,headers:Xt,height:Se,hidden:kw,high:Se,href:null,hrefLang:null,htmlFor:Xt,httpEquiv:Xt,id:null,imageSizes:null,imageSrcSet:null,inert:yt,inputMode:null,integrity:null,is:null,isMap:yt,itemId:null,itemProp:Xt,itemRef:Xt,itemScope:yt,itemType:Xt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:yt,low:Se,manifest:null,max:null,maxLength:Se,media:null,method:null,min:null,minLength:Se,multiple:yt,muted:yt,name:null,nonce:null,noModule:yt,noValidate:yt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:yt,optimum:Se,pattern:null,ping:Xt,placeholder:null,playsInline:yt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:yt,referrerPolicy:null,rel:Xt,required:yt,reversed:yt,rows:Se,rowSpan:Se,sandbox:Xt,scope:null,scoped:yt,seamless:yt,selected:yt,shadowRootClonable:yt,shadowRootDelegatesFocus:yt,shadowRootMode:null,shape:null,size:Se,sizes:null,slot:null,span:Se,spellCheck:Mn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Se,step:null,style:null,tabIndex:Se,target:null,title:null,translate:null,type:null,typeMustMatch:yt,useMap:null,value:Mn,width:Se,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Xt,axis:null,background:null,bgColor:null,border:Se,borderColor:null,bottomMargin:Se,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:yt,declare:yt,event:null,face:null,frame:null,frameBorder:null,hSpace:Se,leftMargin:Se,link:null,longDesc:null,lowSrc:null,marginHeight:Se,marginWidth:Se,noResize:yt,noHref:yt,noShade:yt,noWrap:yt,object:null,profile:null,prompt:null,rev:null,rightMargin:Se,rules:null,scheme:null,scrolling:Mn,standby:null,summary:null,text:null,topMargin:Se,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Se,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:yt,disableRemotePlayback:yt,prefix:null,property:null,results:Se,security:null,unselectable:null},space:"html",transform:mI}),CG=eu({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ns,accentHeight:Se,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Se,amplitude:Se,arabicForm:null,ascent:Se,attributeName:null,attributeType:null,azimuth:Se,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Se,by:null,calcMode:null,capHeight:Se,className:Xt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Se,diffuseConstant:Se,direction:null,display:null,dur:null,divisor:Se,dominantBaseline:null,download:yt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Se,enableBackground:null,end:null,event:null,exponent:Se,externalResourcesRequired:null,fill:null,fillOpacity:Se,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:mc,g2:mc,glyphName:mc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Se,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Se,horizOriginX:Se,horizOriginY:Se,id:null,ideographic:Se,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Se,k:Se,k1:Se,k2:Se,k3:Se,k4:Se,kernelMatrix:ns,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Se,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Se,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Se,overlineThickness:Se,paintOrder:null,panose1:null,path:null,pathLength:Se,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Xt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Se,pointsAtY:Se,pointsAtZ:Se,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ns,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ns,rev:ns,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ns,requiredFeatures:ns,requiredFonts:ns,requiredFormats:ns,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Se,specularExponent:Se,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Se,strikethroughThickness:Se,string:null,stroke:null,strokeDashArray:ns,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Se,strokeOpacity:Se,strokeWidth:null,style:null,surfaceScale:Se,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ns,tabIndex:Se,tableValues:null,target:null,targetX:Se,targetY:Se,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ns,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Se,underlineThickness:Se,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Se,values:null,vAlphabetic:Se,vMathematical:Se,vectorEffect:null,vHanging:Se,vIdeographic:Se,version:null,vertAdvY:Se,vertOriginX:Se,vertOriginY:Se,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Se,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:hI}),pI=eu({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),gI=eu({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:mI}),yI=eu({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),PG={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},AG=/[A-Z]/g,YN=/-[a-z]/g,RG=/^data[-\w.:]+$/i;function IG(e,t){const n=Ew(t);let r=t,s=Qr;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&RG.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(YN,DG);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!YN.test(i)){let l=i.replace(AG,OG);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}s=Nb}return new s(r,t)}function OG(e){return"-"+e.toLowerCase()}function DG(e){return e.charAt(1).toUpperCase()}const MG=dI([fI,TG,pI,gI,yI],"html"),Tb=dI([fI,CG,pI,gI,yI],"svg");function LG(e){return e.join(" ").trim()}var Kl={},Ov,QN;function FG(){if(QN)return Ov;QN=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,d=`
`,f="/",h="*",m="",g="comment",y="declaration";function w(S,_){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];_=_||{};var k=1,N=1;function T(B){var Q=B.match(t);Q&&(k+=Q.length);var q=B.lastIndexOf(d);N=~q?B.length-q:N+B.length}function P(){var B={line:k,column:N};return function(Q){return Q.position=new R(B),W(),Q}}function R(B){this.start=B,this.end={line:k,column:N},this.source=_.source}R.prototype.content=S;function M(B){var Q=new Error(_.source+":"+k+":"+N+": "+B);if(Q.reason=B,Q.filename=_.source,Q.line=k,Q.column=N,Q.source=S,!_.silent)throw Q}function A(B){var Q=B.exec(S);if(Q){var q=Q[0];return T(q),S=S.slice(q.length),Q}}function W(){A(n)}function K(B){var Q;for(B=B||[];Q=H();)Q!==!1&&B.push(Q);return B}function H(){var B=P();if(!(f!=S.charAt(0)||h!=S.charAt(1))){for(var Q=2;m!=S.charAt(Q)&&(h!=S.charAt(Q)||f!=S.charAt(Q+1));)++Q;if(Q+=2,m===S.charAt(Q-1))return M("End of comment missing");var q=S.slice(2,Q-2);return N+=2,T(q),S=S.slice(Q),N+=2,B({type:g,comment:q})}}function z(){var B=P(),Q=A(r);if(Q){if(H(),!A(s))return M("property missing ':'");var q=A(i),F=B({type:y,property:b(Q[0].replace(e,m)),value:q?b(q[0].replace(e,m)):m});return A(l),F}}function L(){var B=[];K(B);for(var Q;Q=z();)Q!==!1&&(B.push(Q),K(B));return B}return W(),L()}function b(S){return S?S.replace(u,m):m}return Ov=w,Ov}var XN;function $G(){if(XN)return Kl;XN=1;var e=Kl&&Kl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.default=n;const t=e(FG());function n(r,s){let i=null;if(!r||typeof r!="string")return i;const l=(0,t.default)(r),u=typeof s=="function";return l.forEach(d=>{if(d.type!=="declaration")return;const{property:f,value:h}=d;u?s(f,h,d):h&&(i=i||{},i[f]=h)}),i}return Kl}var Zu={},JN;function VG(){if(JN)return Zu;JN=1,Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,i=function(f){return!f||n.test(f)||e.test(f)},l=function(f,h){return h.toUpperCase()},u=function(f,h){return"".concat(h,"-")},d=function(f,h){return h===void 0&&(h={}),i(f)?f:(f=f.toLowerCase(),h.reactCompat?f=f.replace(s,u):f=f.replace(r,u),f.replace(t,l))};return Zu.camelCase=d,Zu}var ed,ZN;function zG(){if(ZN)return ed;ZN=1;var e=ed&&ed.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},t=e($G()),n=VG();function r(s,i){var l={};return!s||typeof s!="string"||(0,t.default)(s,function(u,d){u&&d&&(l[(0,n.camelCase)(u,i)]=d)}),l}return r.default=r,ed=r,ed}var UG=zG();const BG=ho(UG),vI=xI("end"),Cb=xI("start");function xI(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function qG(e){const t=Cb(e),n=vI(e);if(t&&n)return{start:t,end:n}}function Sd(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?e1(e.position):"start"in e||"end"in e?e1(e):"line"in e||"column"in e?Tw(e):""}function Tw(e){return t1(e&&e.line)+":"+t1(e&&e.column)}function e1(e){return Tw(e&&e.start)+"-"+Tw(e&&e.end)}function t1(e){return e&&typeof e=="number"?e:1}class xr extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",i={},l=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?s=t:!i.cause&&t&&(l=!0,s=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof r=="string"){const d=r.indexOf(":");d===-1?i.ruleId=r:(i.source=r.slice(0,d),i.ruleId=r.slice(d+1))}if(!i.place&&i.ancestors&&i.ancestors){const d=i.ancestors[i.ancestors.length-1];d&&(i.place=d.position)}const u=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=u?u.line:void 0,this.name=Sd(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=l&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}xr.prototype.file="";xr.prototype.name="";xr.prototype.reason="";xr.prototype.message="";xr.prototype.stack="";xr.prototype.column=void 0;xr.prototype.line=void 0;xr.prototype.ancestors=void 0;xr.prototype.cause=void 0;xr.prototype.fatal=void 0;xr.prototype.place=void 0;xr.prototype.ruleId=void 0;xr.prototype.source=void 0;const Pb={}.hasOwnProperty,WG=new Map,HG=/[A-Z]/g,GG=new Set(["table","tbody","thead","tfoot","tr"]),KG=new Set(["td","th"]),wI="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function YG(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=rK(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=nK(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Tb:MG,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=bI(s,e,void 0);return i&&typeof i!="string"?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function bI(e,t,n){if(t.type==="element")return QG(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return XG(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return ZG(e,t,n);if(t.type==="mdxjsEsm")return JG(e,t);if(t.type==="root")return eK(e,t,n);if(t.type==="text")return tK(e,t)}function QG(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Tb,e.schema=s),e.ancestors.push(t);const i=SI(e,t.tagName,!1),l=sK(e,t);let u=Rb(e,t);return GG.has(t.tagName)&&(u=u.filter(function(d){return typeof d=="string"?!kG(d):!0})),_I(e,l,i,t),Ab(l,u),e.ancestors.pop(),e.schema=r,e.create(t,i,l,n)}function XG(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Hd(e,t.position)}function JG(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Hd(e,t.position)}function ZG(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=Tb,e.schema=s),e.ancestors.push(t);const i=t.name===null?e.Fragment:SI(e,t.name,!0),l=iK(e,t),u=Rb(e,t);return _I(e,l,i,t),Ab(l,u),e.ancestors.pop(),e.schema=r,e.create(t,i,l,n)}function eK(e,t,n){const r={};return Ab(r,Rb(e,t)),e.create(t,e.Fragment,r,n)}function tK(e,t){return t.value}function _I(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Ab(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function nK(e,t,n){return r;function r(s,i,l,u){const f=Array.isArray(l.children)?n:t;return u?f(i,l,u):f(i,l)}}function rK(e,t){return n;function n(r,s,i,l){const u=Array.isArray(i.children),d=Cb(r);return t(s,i,l,u,{columnNumber:d?d.column-1:void 0,fileName:e,lineNumber:d?d.line:void 0},void 0)}}function sK(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&Pb.call(t.properties,s)){const i=aK(e,s,t.properties[s]);if(i){const[l,u]=i;e.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&KG.has(t.tagName)?r=u:n[l]=u}}if(r){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function iK(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const i=r.data.estree.body[0];i.type;const l=i.expression;l.type;const u=l.properties[0];u.type,Object.assign(n,e.evaluater.evaluateExpression(u.argument))}else Hd(e,t.position);else{const s=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const u=r.value.data.estree.body[0];u.type,i=e.evaluater.evaluateExpression(u.expression)}else Hd(e,t.position);else i=r.value===null?!0:r.value;n[s]=i}return n}function Rb(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:WG;for(;++r<t.children.length;){const i=t.children[r];let l;if(e.passKeys){const d=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(d){const f=s.get(d)||0;l=d+"-"+f,s.set(d,f+1)}}const u=bI(e,i,l);u!==void 0&&n.push(u)}return n}function aK(e,t,n){const r=IG(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?bG(n):LG(n)),r.property==="style"){let s=typeof n=="object"?n:oK(e,String(n));return e.stylePropertyNameCase==="css"&&(s=lK(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?PG[r.property]||r.property:r.attribute,n]}}function oK(e,t){try{return BG(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new xr("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=wI+"#cannot-parse-style-attribute",s}}function SI(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let i=-1,l;for(;++i<s.length;){const u=HN(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(i&&u.type==="Literal"),optional:!1}:u}r=l}else r=HN(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return Pb.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);Hd(e)}function Hd(e,t){const n=new xr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=wI+"#cannot-handle-mdx-estrees-without-createevaluater",n}function lK(e){const t={};let n;for(n in e)Pb.call(e,n)&&(t[cK(n)]=e[n]);return t}function cK(e){let t=e.replace(HG,uK);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function uK(e){return"-"+e.toLowerCase()}const Dv={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},dK={};function fK(e,t){const n=dK,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return jI(e,r,s)}function jI(e,t,n){if(hK(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return n1(e.children,t,n)}return Array.isArray(e)?n1(e,t,n):""}function n1(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=jI(e[s],t,n);return r.join("")}function hK(e){return!!(e&&typeof e=="object")}const r1=document.createElement("i");function Ib(e){const t="&"+e+";";r1.innerHTML=t;const n=r1.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Pi(e,t,n,r){const s=e.length;let i=0,l;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(t,n),e.splice(...l);else for(n&&e.splice(t,n);i<r.length;)l=r.slice(i,i+1e4),l.unshift(t,0),e.splice(...l),i+=1e4,t+=1e4}function Es(e,t){return e.length>0?(Pi(e,e.length,0,t),e):t}const s1={}.hasOwnProperty;function mK(e){const t={};let n=-1;for(;++n<e.length;)pK(t,e[n]);return t}function pK(e,t){let n;for(n in t){const s=(s1.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let l;if(i)for(l in i){s1.call(s,l)||(s[l]=[]);const u=i[l];gK(s[l],Array.isArray(u)?u:u?[u]:[])}}}function gK(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Pi(e,0,0,r)}function EI(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function pc(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const xi=wo(/[A-Za-z]/),os=wo(/[\dA-Za-z]/),yK=wo(/[#-'*+\--9=?A-Z^-~]/);function Cw(e){return e!==null&&(e<32||e===127)}const Pw=wo(/\d/),vK=wo(/[\dA-Fa-f]/),xK=wo(/[!-/:-@[-`{-~]/);function ot(e){return e!==null&&e<-2}function Kr(e){return e!==null&&(e<0||e===32)}function Vt(e){return e===-2||e===-1||e===32}const wK=wo(new RegExp("\\p{P}|\\p{S}","u")),bK=wo(/\s/);function wo(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function tu(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let l="";if(i===37&&os(e.charCodeAt(n+1))&&os(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(l=String.fromCharCode(i));else if(i>55295&&i<57344){const u=e.charCodeAt(n+1);i<56320&&u>56319&&u<57344?(l=String.fromCharCode(i,u),s=1):l=""}else l=String.fromCharCode(i);l&&(t.push(e.slice(r,n),encodeURIComponent(l)),r=n+s+1,l=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function Jt(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return l;function l(d){return Vt(d)?(e.enter(n),u(d)):t(d)}function u(d){return Vt(d)&&i++<s?(e.consume(d),u):(e.exit(n),t(d))}}const _K={tokenize:SK};function SK(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),Jt(e,t,"linePrefix")}function s(u){return e.enter("paragraph"),i(u)}function i(u){const d=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=d),n=d,l(u)}function l(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return ot(u)?(e.consume(u),e.exit("chunkText"),i):(e.consume(u),l)}}const jK={tokenize:EK},i1={tokenize:kK};function EK(e){const t=this,n=[];let r=0,s,i,l;return u;function u(N){if(r<n.length){const T=n[r];return t.containerState=T[1],e.attempt(T[0].continuation,d,f)(N)}return f(N)}function d(N){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&k();const T=t.events.length;let P=T,R;for(;P--;)if(t.events[P][0]==="exit"&&t.events[P][1].type==="chunkFlow"){R=t.events[P][1].end;break}_(r);let M=T;for(;M<t.events.length;)t.events[M][1].end={...R},M++;return Pi(t.events,P+1,0,t.events.slice(T)),t.events.length=M,f(N)}return u(N)}function f(N){if(r===n.length){if(!s)return g(N);if(s.currentConstruct&&s.currentConstruct.concrete)return w(N);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(i1,h,m)(N)}function h(N){return s&&k(),_(r),g(N)}function m(N){return t.parser.lazy[t.now().line]=r!==n.length,l=t.now().offset,w(N)}function g(N){return t.containerState={},e.attempt(i1,y,w)(N)}function y(N){return r++,n.push([t.currentConstruct,t.containerState]),g(N)}function w(N){if(N===null){s&&k(),_(0),e.consume(N);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),b(N)}function b(N){if(N===null){S(e.exit("chunkFlow"),!0),_(0),e.consume(N);return}return ot(N)?(e.consume(N),S(e.exit("chunkFlow")),r=0,t.interrupt=void 0,u):(e.consume(N),b)}function S(N,T){const P=t.sliceStream(N);if(T&&P.push(null),N.previous=i,i&&(i.next=N),i=N,s.defineSkip(N.start),s.write(P),t.parser.lazy[N.start.line]){let R=s.events.length;for(;R--;)if(s.events[R][1].start.offset<l&&(!s.events[R][1].end||s.events[R][1].end.offset>l))return;const M=t.events.length;let A=M,W,K;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(W){K=t.events[A][1].end;break}W=!0}for(_(r),R=M;R<t.events.length;)t.events[R][1].end={...K},R++;Pi(t.events,A+1,0,t.events.slice(M)),t.events.length=R}}function _(N){let T=n.length;for(;T-- >N;){const P=n[T];t.containerState=P[1],P[0].exit.call(t,e)}n.length=N}function k(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function kK(e,t,n){return Jt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function a1(e){if(e===null||Kr(e)||bK(e))return 1;if(wK(e))return 2}function Ob(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const Aw={name:"attention",resolveAll:NK,tokenize:TK};function NK(e,t){let n=-1,r,s,i,l,u,d,f,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;d=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const m={...e[r][1].end},g={...e[n][1].start};o1(m,-d),o1(g,d),l={type:d>1?"strongSequence":"emphasisSequence",start:m,end:{...e[r][1].end}},u={type:d>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:g},i={type:d>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:d>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},e[r][1].end={...l.start},e[n][1].start={...u.end},f=[],e[r][1].end.offset-e[r][1].start.offset&&(f=Es(f,[["enter",e[r][1],t],["exit",e[r][1],t]])),f=Es(f,[["enter",s,t],["enter",l,t],["exit",l,t],["enter",i,t]]),f=Es(f,Ob(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),f=Es(f,[["exit",i,t],["enter",u,t],["exit",u,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,f=Es(f,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,Pi(e,r-1,n-r+3,f),n=r+f.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function TK(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=a1(r);let i;return l;function l(d){return i=d,e.enter("attentionSequence"),u(d)}function u(d){if(d===i)return e.consume(d),u;const f=e.exit("attentionSequence"),h=a1(d),m=!h||h===2&&s||n.includes(d),g=!s||s===2&&h||n.includes(r);return f._open=!!(i===42?m:m&&(s||!g)),f._close=!!(i===42?g:g&&(h||!m)),t(d)}}function o1(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const CK={name:"autolink",tokenize:PK};function PK(e,t,n){let r=0;return s;function s(y){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(y){return xi(y)?(e.consume(y),l):y===64?n(y):f(y)}function l(y){return y===43||y===45||y===46||os(y)?(r=1,u(y)):f(y)}function u(y){return y===58?(e.consume(y),r=0,d):(y===43||y===45||y===46||os(y))&&r++<32?(e.consume(y),u):(r=0,f(y))}function d(y){return y===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.exit("autolink"),t):y===null||y===32||y===60||Cw(y)?n(y):(e.consume(y),d)}function f(y){return y===64?(e.consume(y),h):yK(y)?(e.consume(y),f):n(y)}function h(y){return os(y)?m(y):n(y)}function m(y){return y===46?(e.consume(y),r=0,h):y===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.exit("autolink"),t):g(y)}function g(y){if((y===45||os(y))&&r++<63){const w=y===45?g:m;return e.consume(y),w}return n(y)}}const Yp={partial:!0,tokenize:AK};function AK(e,t,n){return r;function r(i){return Vt(i)?Jt(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||ot(i)?t(i):n(i)}}const kI={continuation:{tokenize:IK},exit:OK,name:"blockQuote",tokenize:RK};function RK(e,t,n){const r=this;return s;function s(l){if(l===62){const u=r.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),i}return n(l)}function i(l){return Vt(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(l))}}function IK(e,t,n){const r=this;return s;function s(l){return Vt(l)?Jt(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):i(l)}function i(l){return e.attempt(kI,t,n)(l)}}function OK(e){e.exit("blockQuote")}const NI={name:"characterEscape",tokenize:DK};function DK(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return xK(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const TI={name:"characterReference",tokenize:MK};function MK(e,t,n){const r=this;let s=0,i,l;return u;function u(m){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),d}function d(m){return m===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(m),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),i=31,l=os,h(m))}function f(m){return m===88||m===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(m),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,l=vK,h):(e.enter("characterReferenceValue"),i=7,l=Pw,h(m))}function h(m){if(m===59&&s){const g=e.exit("characterReferenceValue");return l===os&&!Ib(r.sliceSerialize(g))?n(m):(e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return l(m)&&s++<i?(e.consume(m),h):n(m)}}const l1={partial:!0,tokenize:FK},c1={concrete:!0,name:"codeFenced",tokenize:LK};function LK(e,t,n){const r=this,s={partial:!0,tokenize:P};let i=0,l=0,u;return d;function d(R){return f(R)}function f(R){const M=r.events[r.events.length-1];return i=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,u=R,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(R)}function h(R){return R===u?(l++,e.consume(R),h):l<3?n(R):(e.exit("codeFencedFenceSequence"),Vt(R)?Jt(e,m,"whitespace")(R):m(R))}function m(R){return R===null||ot(R)?(e.exit("codeFencedFence"),r.interrupt?t(R):e.check(l1,b,T)(R)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(R))}function g(R){return R===null||ot(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),m(R)):Vt(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Jt(e,y,"whitespace")(R)):R===96&&R===u?n(R):(e.consume(R),g)}function y(R){return R===null||ot(R)?m(R):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),w(R))}function w(R){return R===null||ot(R)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(R)):R===96&&R===u?n(R):(e.consume(R),w)}function b(R){return e.attempt(s,T,S)(R)}function S(R){return e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),_}function _(R){return i>0&&Vt(R)?Jt(e,k,"linePrefix",i+1)(R):k(R)}function k(R){return R===null||ot(R)?e.check(l1,b,T)(R):(e.enter("codeFlowValue"),N(R))}function N(R){return R===null||ot(R)?(e.exit("codeFlowValue"),k(R)):(e.consume(R),N)}function T(R){return e.exit("codeFenced"),t(R)}function P(R,M,A){let W=0;return K;function K(Q){return R.enter("lineEnding"),R.consume(Q),R.exit("lineEnding"),H}function H(Q){return R.enter("codeFencedFence"),Vt(Q)?Jt(R,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Q):z(Q)}function z(Q){return Q===u?(R.enter("codeFencedFenceSequence"),L(Q)):A(Q)}function L(Q){return Q===u?(W++,R.consume(Q),L):W>=l?(R.exit("codeFencedFenceSequence"),Vt(Q)?Jt(R,B,"whitespace")(Q):B(Q)):A(Q)}function B(Q){return Q===null||ot(Q)?(R.exit("codeFencedFence"),M(Q)):A(Q)}}}function FK(e,t,n){const r=this;return s;function s(l){return l===null?n(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),i)}function i(l){return r.parser.lazy[r.now().line]?n(l):t(l)}}const Mv={name:"codeIndented",tokenize:VK},$K={partial:!0,tokenize:zK};function VK(e,t,n){const r=this;return s;function s(f){return e.enter("codeIndented"),Jt(e,i,"linePrefix",5)(f)}function i(f){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?l(f):n(f)}function l(f){return f===null?d(f):ot(f)?e.attempt($K,l,d)(f):(e.enter("codeFlowValue"),u(f))}function u(f){return f===null||ot(f)?(e.exit("codeFlowValue"),l(f)):(e.consume(f),u)}function d(f){return e.exit("codeIndented"),t(f)}}function zK(e,t,n){const r=this;return s;function s(l){return r.parser.lazy[r.now().line]?n(l):ot(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),s):Jt(e,i,"linePrefix",5)(l)}function i(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):ot(l)?s(l):n(l)}}const UK={name:"codeText",previous:qK,resolve:BK,tokenize:WK};function BK(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function qK(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function WK(e,t,n){let r=0,s,i;return l;function l(m){return e.enter("codeText"),e.enter("codeTextSequence"),u(m)}function u(m){return m===96?(e.consume(m),r++,u):(e.exit("codeTextSequence"),d(m))}function d(m){return m===null?n(m):m===32?(e.enter("space"),e.consume(m),e.exit("space"),d):m===96?(i=e.enter("codeTextSequence"),s=0,h(m)):ot(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):(e.enter("codeTextData"),f(m))}function f(m){return m===null||m===32||m===96||ot(m)?(e.exit("codeTextData"),d(m)):(e.consume(m),f)}function h(m){return m===96?(e.consume(m),s++,h):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(m)):(i.type="codeTextData",f(m))}}class HK{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&td(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),td(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),td(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);td(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);td(this.left,n.reverse())}}}function td(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function CI(e){const t={};let n=-1,r,s,i,l,u,d,f;const h=new HK(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(d=r[1]._tokenizer.events,i=0,i<d.length&&d[i][1].type==="lineEndingBlank"&&(i+=2),i<d.length&&d[i][1].type==="content"))for(;++i<d.length&&d[i][1].type!=="content";)d[i][1].type==="chunkText"&&(d[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,GK(h,n)),n=t[n],f=!0);else if(r[1]._container){for(i=n,s=void 0;i--;)if(l=h.get(i),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(h.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=i);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(r[1].end={...h.get(s)[1].start},u=h.slice(s,n),u.unshift(r),h.splice(s,n-s+1,u))}}return Pi(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!f}function GK(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const i=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,d=[],f={};let h,m,g=-1,y=n,w=0,b=0;const S=[b];for(;y;){for(;e.get(++s)[1]!==y;);i.push(s),y._tokenizer||(h=r.sliceStream(y),y.next||h.push(null),m&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(h),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),m=y,y=y.next}for(y=n;++g<u.length;)u[g][0]==="exit"&&u[g-1][0]==="enter"&&u[g][1].type===u[g-1][1].type&&u[g][1].start.line!==u[g][1].end.line&&(b=g+1,S.push(b),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):S.pop(),g=S.length;g--;){const _=u.slice(S[g],S[g+1]),k=i.pop();d.push([k,k+_.length-1]),e.splice(k,2,_)}for(d.reverse(),g=-1;++g<d.length;)f[w+d[g][0]]=w+d[g][1],w+=d[g][1]-d[g][0]-1;return f}const KK={resolve:QK,tokenize:XK},YK={partial:!0,tokenize:JK};function QK(e){return CI(e),e}function XK(e,t){let n;return r;function r(u){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(u)}function s(u){return u===null?i(u):ot(u)?e.check(YK,l,i)(u):(e.consume(u),s)}function i(u){return e.exit("chunkContent"),e.exit("content"),t(u)}function l(u){return e.consume(u),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function JK(e,t,n){const r=this;return s;function s(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Jt(e,i,"linePrefix")}function i(l){if(l===null||ot(l))return n(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):e.interrupt(r.parser.constructs.flow,n,t)(l)}}function PI(e,t,n,r,s,i,l,u,d){const f=d||Number.POSITIVE_INFINITY;let h=0;return m;function m(_){return _===60?(e.enter(r),e.enter(s),e.enter(i),e.consume(_),e.exit(i),g):_===null||_===32||_===41||Cw(_)?n(_):(e.enter(r),e.enter(l),e.enter(u),e.enter("chunkString",{contentType:"string"}),b(_))}function g(_){return _===62?(e.enter(i),e.consume(_),e.exit(i),e.exit(s),e.exit(r),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),y(_))}function y(_){return _===62?(e.exit("chunkString"),e.exit(u),g(_)):_===null||_===60||ot(_)?n(_):(e.consume(_),_===92?w:y)}function w(_){return _===60||_===62||_===92?(e.consume(_),y):y(_)}function b(_){return!h&&(_===null||_===41||Kr(_))?(e.exit("chunkString"),e.exit(u),e.exit(l),e.exit(r),t(_)):h<f&&_===40?(e.consume(_),h++,b):_===41?(e.consume(_),h--,b):_===null||_===32||_===40||Cw(_)?n(_):(e.consume(_),_===92?S:b)}function S(_){return _===40||_===41||_===92?(e.consume(_),b):b(_)}}function AI(e,t,n,r,s,i){const l=this;let u=0,d;return f;function f(y){return e.enter(r),e.enter(s),e.consume(y),e.exit(s),e.enter(i),h}function h(y){return u>999||y===null||y===91||y===93&&!d||y===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(e.exit(i),e.enter(s),e.consume(y),e.exit(s),e.exit(r),t):ot(y)?(e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===null||y===91||y===93||ot(y)||u++>999?(e.exit("chunkString"),h(y)):(e.consume(y),d||(d=!Vt(y)),y===92?g:m)}function g(y){return y===91||y===92||y===93?(e.consume(y),u++,m):m(y)}}function RI(e,t,n,r,s,i){let l;return u;function u(g){return g===34||g===39||g===40?(e.enter(r),e.enter(s),e.consume(g),e.exit(s),l=g===40?41:g,d):n(g)}function d(g){return g===l?(e.enter(s),e.consume(g),e.exit(s),e.exit(r),t):(e.enter(i),f(g))}function f(g){return g===l?(e.exit(i),d(l)):g===null?n(g):ot(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),Jt(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(g))}function h(g){return g===l||g===null||ot(g)?(e.exit("chunkString"),f(g)):(e.consume(g),g===92?m:h)}function m(g){return g===l||g===92?(e.consume(g),h):h(g)}}function jd(e,t){let n;return r;function r(s){return ot(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):Vt(s)?Jt(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const ZK={name:"definition",tokenize:tY},eY={partial:!0,tokenize:nY};function tY(e,t,n){const r=this;let s;return i;function i(y){return e.enter("definition"),l(y)}function l(y){return AI.call(r,e,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function u(y){return s=pc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),d):n(y)}function d(y){return Kr(y)?jd(e,f)(y):f(y)}function f(y){return PI(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function h(y){return e.attempt(eY,m,m)(y)}function m(y){return Vt(y)?Jt(e,g,"whitespace")(y):g(y)}function g(y){return y===null||ot(y)?(e.exit("definition"),r.parser.defined.push(s),t(y)):n(y)}}function nY(e,t,n){return r;function r(u){return Kr(u)?jd(e,s)(u):n(u)}function s(u){return RI(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function i(u){return Vt(u)?Jt(e,l,"whitespace")(u):l(u)}function l(u){return u===null||ot(u)?t(u):n(u)}}const rY={name:"hardBreakEscape",tokenize:sY};function sY(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return ot(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const iY={name:"headingAtx",resolve:aY,tokenize:oY};function aY(e,t){let n=e.length-2,r=3,s,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Pi(e,r,n-r+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function oY(e,t,n){let r=0;return s;function s(h){return e.enter("atxHeading"),i(h)}function i(h){return e.enter("atxHeadingSequence"),l(h)}function l(h){return h===35&&r++<6?(e.consume(h),l):h===null||Kr(h)?(e.exit("atxHeadingSequence"),u(h)):n(h)}function u(h){return h===35?(e.enter("atxHeadingSequence"),d(h)):h===null||ot(h)?(e.exit("atxHeading"),t(h)):Vt(h)?Jt(e,u,"whitespace")(h):(e.enter("atxHeadingText"),f(h))}function d(h){return h===35?(e.consume(h),d):(e.exit("atxHeadingSequence"),u(h))}function f(h){return h===null||h===35||Kr(h)?(e.exit("atxHeadingText"),u(h)):(e.consume(h),f)}}const lY=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],u1=["pre","script","style","textarea"],cY={concrete:!0,name:"htmlFlow",resolveTo:fY,tokenize:hY},uY={partial:!0,tokenize:pY},dY={partial:!0,tokenize:mY};function fY(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function hY(e,t,n){const r=this;let s,i,l,u,d;return f;function f(O){return h(O)}function h(O){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(O),m}function m(O){return O===33?(e.consume(O),g):O===47?(e.consume(O),i=!0,b):O===63?(e.consume(O),s=3,r.interrupt?t:I):xi(O)?(e.consume(O),l=String.fromCharCode(O),S):n(O)}function g(O){return O===45?(e.consume(O),s=2,y):O===91?(e.consume(O),s=5,u=0,w):xi(O)?(e.consume(O),s=4,r.interrupt?t:I):n(O)}function y(O){return O===45?(e.consume(O),r.interrupt?t:I):n(O)}function w(O){const ce="CDATA[";return O===ce.charCodeAt(u++)?(e.consume(O),u===ce.length?r.interrupt?t:z:w):n(O)}function b(O){return xi(O)?(e.consume(O),l=String.fromCharCode(O),S):n(O)}function S(O){if(O===null||O===47||O===62||Kr(O)){const ce=O===47,he=l.toLowerCase();return!ce&&!i&&u1.includes(he)?(s=1,r.interrupt?t(O):z(O)):lY.includes(l.toLowerCase())?(s=6,ce?(e.consume(O),_):r.interrupt?t(O):z(O)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(O):i?k(O):N(O))}return O===45||os(O)?(e.consume(O),l+=String.fromCharCode(O),S):n(O)}function _(O){return O===62?(e.consume(O),r.interrupt?t:z):n(O)}function k(O){return Vt(O)?(e.consume(O),k):K(O)}function N(O){return O===47?(e.consume(O),K):O===58||O===95||xi(O)?(e.consume(O),T):Vt(O)?(e.consume(O),N):K(O)}function T(O){return O===45||O===46||O===58||O===95||os(O)?(e.consume(O),T):P(O)}function P(O){return O===61?(e.consume(O),R):Vt(O)?(e.consume(O),P):N(O)}function R(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(e.consume(O),d=O,M):Vt(O)?(e.consume(O),R):A(O)}function M(O){return O===d?(e.consume(O),d=null,W):O===null||ot(O)?n(O):(e.consume(O),M)}function A(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||Kr(O)?P(O):(e.consume(O),A)}function W(O){return O===47||O===62||Vt(O)?N(O):n(O)}function K(O){return O===62?(e.consume(O),H):n(O)}function H(O){return O===null||ot(O)?z(O):Vt(O)?(e.consume(O),H):n(O)}function z(O){return O===45&&s===2?(e.consume(O),q):O===60&&s===1?(e.consume(O),F):O===62&&s===4?(e.consume(O),V):O===63&&s===3?(e.consume(O),I):O===93&&s===5?(e.consume(O),X):ot(O)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(uY,Z,L)(O)):O===null||ot(O)?(e.exit("htmlFlowData"),L(O)):(e.consume(O),z)}function L(O){return e.check(dY,B,Z)(O)}function B(O){return e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),Q}function Q(O){return O===null||ot(O)?L(O):(e.enter("htmlFlowData"),z(O))}function q(O){return O===45?(e.consume(O),I):z(O)}function F(O){return O===47?(e.consume(O),l="",D):z(O)}function D(O){if(O===62){const ce=l.toLowerCase();return u1.includes(ce)?(e.consume(O),V):z(O)}return xi(O)&&l.length<8?(e.consume(O),l+=String.fromCharCode(O),D):z(O)}function X(O){return O===93?(e.consume(O),I):z(O)}function I(O){return O===62?(e.consume(O),V):O===45&&s===2?(e.consume(O),I):z(O)}function V(O){return O===null||ot(O)?(e.exit("htmlFlowData"),Z(O)):(e.consume(O),V)}function Z(O){return e.exit("htmlFlow"),t(O)}}function mY(e,t,n){const r=this;return s;function s(l){return ot(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),i):n(l)}function i(l){return r.parser.lazy[r.now().line]?n(l):t(l)}}function pY(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Yp,t,n)}}const gY={name:"htmlText",tokenize:yY};function yY(e,t,n){const r=this;let s,i,l;return u;function u(I){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(I),d}function d(I){return I===33?(e.consume(I),f):I===47?(e.consume(I),P):I===63?(e.consume(I),N):xi(I)?(e.consume(I),A):n(I)}function f(I){return I===45?(e.consume(I),h):I===91?(e.consume(I),i=0,w):xi(I)?(e.consume(I),k):n(I)}function h(I){return I===45?(e.consume(I),y):n(I)}function m(I){return I===null?n(I):I===45?(e.consume(I),g):ot(I)?(l=m,F(I)):(e.consume(I),m)}function g(I){return I===45?(e.consume(I),y):m(I)}function y(I){return I===62?q(I):I===45?g(I):m(I)}function w(I){const V="CDATA[";return I===V.charCodeAt(i++)?(e.consume(I),i===V.length?b:w):n(I)}function b(I){return I===null?n(I):I===93?(e.consume(I),S):ot(I)?(l=b,F(I)):(e.consume(I),b)}function S(I){return I===93?(e.consume(I),_):b(I)}function _(I){return I===62?q(I):I===93?(e.consume(I),_):b(I)}function k(I){return I===null||I===62?q(I):ot(I)?(l=k,F(I)):(e.consume(I),k)}function N(I){return I===null?n(I):I===63?(e.consume(I),T):ot(I)?(l=N,F(I)):(e.consume(I),N)}function T(I){return I===62?q(I):N(I)}function P(I){return xi(I)?(e.consume(I),R):n(I)}function R(I){return I===45||os(I)?(e.consume(I),R):M(I)}function M(I){return ot(I)?(l=M,F(I)):Vt(I)?(e.consume(I),M):q(I)}function A(I){return I===45||os(I)?(e.consume(I),A):I===47||I===62||Kr(I)?W(I):n(I)}function W(I){return I===47?(e.consume(I),q):I===58||I===95||xi(I)?(e.consume(I),K):ot(I)?(l=W,F(I)):Vt(I)?(e.consume(I),W):q(I)}function K(I){return I===45||I===46||I===58||I===95||os(I)?(e.consume(I),K):H(I)}function H(I){return I===61?(e.consume(I),z):ot(I)?(l=H,F(I)):Vt(I)?(e.consume(I),H):W(I)}function z(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(e.consume(I),s=I,L):ot(I)?(l=z,F(I)):Vt(I)?(e.consume(I),z):(e.consume(I),B)}function L(I){return I===s?(e.consume(I),s=void 0,Q):I===null?n(I):ot(I)?(l=L,F(I)):(e.consume(I),L)}function B(I){return I===null||I===34||I===39||I===60||I===61||I===96?n(I):I===47||I===62||Kr(I)?W(I):(e.consume(I),B)}function Q(I){return I===47||I===62||Kr(I)?W(I):n(I)}function q(I){return I===62?(e.consume(I),e.exit("htmlTextData"),e.exit("htmlText"),t):n(I)}function F(I){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),D}function D(I){return Vt(I)?Jt(e,X,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):X(I)}function X(I){return e.enter("htmlTextData"),l(I)}}const Db={name:"labelEnd",resolveAll:bY,resolveTo:_Y,tokenize:SY},vY={tokenize:jY},xY={tokenize:EY},wY={tokenize:kY};function bY(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&Pi(e,0,e.length,n),e}function _Y(e,t){let n=e.length,r=0,s,i,l,u;for(;n--;)if(s=e[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(l=n);const d={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},f={type:"label",start:{...e[i][1].start},end:{...e[l][1].end}},h={type:"labelText",start:{...e[i+r+2][1].end},end:{...e[l-2][1].start}};return u=[["enter",d,t],["enter",f,t]],u=Es(u,e.slice(i+1,i+r+3)),u=Es(u,[["enter",h,t]]),u=Es(u,Ob(t.parser.constructs.insideSpan.null,e.slice(i+r+4,l-3),t)),u=Es(u,[["exit",h,t],e[l-2],e[l-1],["exit",f,t]]),u=Es(u,e.slice(l+1)),u=Es(u,[["exit",d,t]]),Pi(e,i,e.length,u),e}function SY(e,t,n){const r=this;let s=r.events.length,i,l;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return u;function u(g){return i?i._inactive?m(g):(l=r.parser.defined.includes(pc(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),d):n(g)}function d(g){return g===40?e.attempt(vY,h,l?h:m)(g):g===91?e.attempt(xY,h,l?f:m)(g):l?h(g):m(g)}function f(g){return e.attempt(wY,h,m)(g)}function h(g){return t(g)}function m(g){return i._balanced=!0,n(g)}}function jY(e,t,n){return r;function r(m){return e.enter("resource"),e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),s}function s(m){return Kr(m)?jd(e,i)(m):i(m)}function i(m){return m===41?h(m):PI(e,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function l(m){return Kr(m)?jd(e,d)(m):h(m)}function u(m){return n(m)}function d(m){return m===34||m===39||m===40?RI(e,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):h(m)}function f(m){return Kr(m)?jd(e,h)(m):h(m)}function h(m){return m===41?(e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),e.exit("resource"),t):n(m)}}function EY(e,t,n){const r=this;return s;function s(u){return AI.call(r,e,i,l,"reference","referenceMarker","referenceString")(u)}function i(u){return r.parser.defined.includes(pc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(u):n(u)}function l(u){return n(u)}}function kY(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const NY={name:"labelStartImage",resolveAll:Db.resolveAll,tokenize:TY};function TY(e,t,n){const r=this;return s;function s(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),i}function i(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),l):n(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):t(u)}}const CY={name:"labelStartLink",resolveAll:Db.resolveAll,tokenize:PY};function PY(e,t,n){const r=this;return s;function s(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),i}function i(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const Lv={name:"lineEnding",tokenize:AY};function AY(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Jt(e,t,"linePrefix")}}const Im={name:"thematicBreak",tokenize:RY};function RY(e,t,n){let r=0,s;return i;function i(f){return e.enter("thematicBreak"),l(f)}function l(f){return s=f,u(f)}function u(f){return f===s?(e.enter("thematicBreakSequence"),d(f)):r>=3&&(f===null||ot(f))?(e.exit("thematicBreak"),t(f)):n(f)}function d(f){return f===s?(e.consume(f),r++,d):(e.exit("thematicBreakSequence"),Vt(f)?Jt(e,u,"whitespace")(f):u(f))}}const zr={continuation:{tokenize:MY},exit:FY,name:"list",tokenize:DY},IY={partial:!0,tokenize:$Y},OY={partial:!0,tokenize:LY};function DY(e,t,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return u;function u(y){const w=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:Pw(y)){if(r.containerState.type||(r.containerState.type=w,e.enter(w,{_container:!0})),w==="listUnordered")return e.enter("listItemPrefix"),y===42||y===45?e.check(Im,n,f)(y):f(y);if(!r.interrupt||y===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(y)}return n(y)}function d(y){return Pw(y)&&++l<10?(e.consume(y),d):(!r.interrupt||l<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(e.exit("listItemValue"),f(y)):n(y)}function f(y){return e.enter("listItemMarker"),e.consume(y),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,e.check(Yp,r.interrupt?n:h,e.attempt(IY,g,m))}function h(y){return r.containerState.initialBlankLine=!0,i++,g(y)}function m(y){return Vt(y)?(e.enter("listItemPrefixWhitespace"),e.consume(y),e.exit("listItemPrefixWhitespace"),g):n(y)}function g(y){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(y)}}function MY(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Yp,s,i);function s(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Jt(e,t,"listItemIndent",r.containerState.size+1)(u)}function i(u){return r.containerState.furtherBlankLines||!Vt(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(OY,t,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,Jt(e,e.attempt(zr,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function LY(e,t,n){const r=this;return Jt(e,s,"listItemIndent",r.containerState.size+1);function s(i){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?t(i):n(i)}}function FY(e){e.exit(this.containerState.type)}function $Y(e,t,n){const r=this;return Jt(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const l=r.events[r.events.length-1];return!Vt(i)&&l&&l[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const d1={name:"setextUnderline",resolveTo:VY,tokenize:zY};function VY(e,t){let n=e.length,r,s,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const l={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",l,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end={...e[i][1].end}):e[r][1]=l,e.push(["exit",l,t]),e}function zY(e,t,n){const r=this;let s;return i;function i(f){let h=r.events.length,m;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){m=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||m)?(e.enter("setextHeadingLine"),s=f,l(f)):n(f)}function l(f){return e.enter("setextHeadingLineSequence"),u(f)}function u(f){return f===s?(e.consume(f),u):(e.exit("setextHeadingLineSequence"),Vt(f)?Jt(e,d,"lineSuffix")(f):d(f))}function d(f){return f===null||ot(f)?(e.exit("setextHeadingLine"),t(f)):n(f)}}const UY={tokenize:BY};function BY(e){const t=this,n=e.attempt(Yp,r,e.attempt(this.parser.constructs.flowInitial,s,Jt(e,e.attempt(this.parser.constructs.flow,s,e.attempt(KK,s)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const qY={resolveAll:OI()},WY=II("string"),HY=II("text");function II(e){return{resolveAll:OI(e==="text"?GY:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],i=n.attempt(s,l,u);return l;function l(h){return f(h)?i(h):u(h)}function u(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),d}function d(h){return f(h)?(n.exit("data"),i(h)):(n.consume(h),d)}function f(h){if(h===null)return!0;const m=s[h];let g=-1;if(m)for(;++g<m.length;){const y=m[g];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function OI(e){return t;function t(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(n,r):n}}function GY(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let i=s.length,l=-1,u=0,d;for(;i--;){const f=s[i];if(typeof f=="string"){for(l=f.length;f.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(f===-2)d=!0,u++;else if(f!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(u=0),u){const f={type:n===e.length||d||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?l:r.start._bufferIndex+l,_index:r.start._index+i,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(e.splice(n,0,["enter",f,t],["exit",f,t]),n+=2)}n++}return e}const KY={42:zr,43:zr,45:zr,48:zr,49:zr,50:zr,51:zr,52:zr,53:zr,54:zr,55:zr,56:zr,57:zr,62:kI},YY={91:ZK},QY={[-2]:Mv,[-1]:Mv,32:Mv},XY={35:iY,42:Im,45:[d1,Im],60:cY,61:d1,95:Im,96:c1,126:c1},JY={38:TI,92:NI},ZY={[-5]:Lv,[-4]:Lv,[-3]:Lv,33:NY,38:TI,42:Aw,60:[CK,gY],91:CY,92:[rY,NI],93:Db,95:Aw,96:UK},eQ={null:[Aw,qY]},tQ={null:[42,95]},nQ={null:[]},rQ=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:tQ,contentInitial:YY,disable:nQ,document:KY,flow:XY,flowInitial:QY,insideSpan:eQ,string:JY,text:ZY},Symbol.toStringTag,{value:"Module"}));function sQ(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let l=[],u=[];const d={attempt:M(P),check:M(R),consume:k,enter:N,exit:T,interrupt:M(R,{interrupt:!0})},f={code:null,containerState:{},defineSkip:b,events:[],now:w,parser:e,previous:null,sliceSerialize:g,sliceStream:y,write:m};let h=t.tokenize.call(f,d);return t.resolveAll&&i.push(t),f;function m(H){return l=Es(l,H),S(),l[l.length-1]!==null?[]:(A(t,0),f.events=Ob(i,f.events,f),f.events)}function g(H,z){return aQ(y(H),z)}function y(H){return iQ(l,H)}function w(){const{_bufferIndex:H,_index:z,line:L,column:B,offset:Q}=r;return{_bufferIndex:H,_index:z,line:L,column:B,offset:Q}}function b(H){s[H.line]=H.column,K()}function S(){let H;for(;r._index<l.length;){const z=l[r._index];if(typeof z=="string")for(H=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===H&&r._bufferIndex<z.length;)_(z.charCodeAt(r._bufferIndex));else _(z)}}function _(H){h=h(H)}function k(H){ot(H)?(r.line++,r.column=1,r.offset+=H===-3?2:1,K()):H!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=H}function N(H,z){const L=z||{};return L.type=H,L.start=w(),f.events.push(["enter",L,f]),u.push(L),L}function T(H){const z=u.pop();return z.end=w(),f.events.push(["exit",z,f]),z}function P(H,z){A(H,z.from)}function R(H,z){z.restore()}function M(H,z){return L;function L(B,Q,q){let F,D,X,I;return Array.isArray(B)?Z(B):"tokenize"in B?Z([B]):V(B);function V(me){return Ce;function Ce(ge){const $e=ge!==null&&me[ge],ne=ge!==null&&me.null,We=[...Array.isArray($e)?$e:$e?[$e]:[],...Array.isArray(ne)?ne:ne?[ne]:[]];return Z(We)(ge)}}function Z(me){return F=me,D=0,me.length===0?q:O(me[D])}function O(me){return Ce;function Ce(ge){return I=W(),X=me,me.partial||(f.currentConstruct=me),me.name&&f.parser.constructs.disable.null.includes(me.name)?he():me.tokenize.call(z?Object.assign(Object.create(f),z):f,d,ce,he)(ge)}}function ce(me){return H(X,I),Q}function he(me){return I.restore(),++D<F.length?O(F[D]):q}}}function A(H,z){H.resolveAll&&!i.includes(H)&&i.push(H),H.resolve&&Pi(f.events,z,f.events.length-z,H.resolve(f.events.slice(z),f)),H.resolveTo&&(f.events=H.resolveTo(f.events,f))}function W(){const H=w(),z=f.previous,L=f.currentConstruct,B=f.events.length,Q=Array.from(u);return{from:B,restore:q};function q(){r=H,f.previous=z,f.currentConstruct=L,f.events.length=B,u=Q,K()}}function K(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function iQ(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let l;if(n===s)l=[e[n].slice(r,i)];else{if(l=e.slice(n,s),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}i>0&&l.push(e[s].slice(0,i))}return l}function aQ(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const i=e[n];let l;if(typeof i=="string")l=i;else switch(i){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&s)continue;l=" ";break}default:l=String.fromCharCode(i)}s=i===-2,r.push(l)}return r.join("")}function oQ(e){const r={constructs:mK([rQ,...(e||{}).extensions||[]]),content:s(_K),defined:[],document:s(jK),flow:s(UY),lazy:{},string:s(WY),text:s(HY)};return r;function s(i){return l;function l(u){return sQ(r,i,u)}}}function lQ(e){for(;!CI(e););return e}const f1=/[\0\t\n\r]/g;function cQ(){let e=1,t="",n=!0,r;return s;function s(i,l,u){const d=[];let f,h,m,g,y;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(l||void 0).decode(i)),m=0,t="",n&&(i.charCodeAt(0)===65279&&m++,n=void 0);m<i.length;){if(f1.lastIndex=m,f=f1.exec(i),g=f&&f.index!==void 0?f.index:i.length,y=i.charCodeAt(g),!f){t=i.slice(m);break}if(y===10&&m===g&&r)d.push(-3),r=void 0;else switch(r&&(d.push(-5),r=void 0),m<g&&(d.push(i.slice(m,g)),e+=g-m),y){case 0:{d.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,d.push(-2);e++<h;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:r=!0,e=1}m=g+1}return u&&(r&&d.push(-5),t&&d.push(t),d.push(null)),d}}const uQ=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function dQ(e){return e.replace(uQ,fQ)}function fQ(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return EI(n.slice(i?2:1),i?16:10)}return Ib(n)||e}const DI={}.hasOwnProperty;function hQ(e,t,n){return typeof t!="string"&&(n=t,t=void 0),mQ(n)(lQ(oQ(n).document().write(cQ()(e,t,!0))))}function mQ(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Bt),autolinkProtocol:W,autolinkEmail:W,atxHeading:i(Pn),blockQuote:i(ne),characterEscape:W,characterReference:W,codeFenced:i(We),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:i(We,l),codeText:i(Ve,l),codeTextData:W,data:W,codeFlowValue:W,definition:i(Ft),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:i(Dt),hardBreakEscape:i(wn),hardBreakTrailing:i(wn),htmlFlow:i(bn,l),htmlFlowData:W,htmlText:i(bn,l),htmlTextData:W,image:i(Rr),label:l,link:i(Bt),listItem:i(te),listItemValue:g,listOrdered:i($,m),listUnordered:i($),paragraph:i(se),reference:O,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:i(Pn),strong:i(ke),thematicBreak:i(xe)},exit:{atxHeading:d(),atxHeadingSequence:P,autolink:d(),autolinkEmail:$e,autolinkProtocol:ge,blockQuote:d(),characterEscapeValue:K,characterReferenceMarkerHexadecimal:he,characterReferenceMarkerNumeric:he,characterReferenceValue:me,characterReference:Ce,codeFenced:d(S),codeFencedFence:b,codeFencedFenceInfo:y,codeFencedFenceMeta:w,codeFlowValue:K,codeIndented:d(_),codeText:d(Q),codeTextData:K,data:K,definition:d(),definitionDestinationString:T,definitionLabelString:k,definitionTitleString:N,emphasis:d(),hardBreakEscape:d(z),hardBreakTrailing:d(z),htmlFlow:d(L),htmlFlowData:K,htmlText:d(B),htmlTextData:K,image:d(F),label:X,labelText:D,lineEnding:H,link:d(q),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:ce,resourceDestinationString:I,resourceTitleString:V,resource:Z,setextHeading:d(A),setextHeadingLineSequence:M,setextHeadingText:R,strong:d(),thematicBreak:d()}};MI(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ee){let de={type:"root",children:[]};const Pe={stack:[de],tokenStack:[],config:t,enter:u,exit:f,buffer:l,resume:h,data:n},et=[];let dt=-1;for(;++dt<ee.length;)if(ee[dt][1].type==="listOrdered"||ee[dt][1].type==="listUnordered")if(ee[dt][0]==="enter")et.push(dt);else{const qt=et.pop();dt=s(ee,qt,dt)}for(dt=-1;++dt<ee.length;){const qt=t[ee[dt][0]];DI.call(qt,ee[dt][1].type)&&qt[ee[dt][1].type].call(Object.assign({sliceSerialize:ee[dt][2].sliceSerialize},Pe),ee[dt][1])}if(Pe.tokenStack.length>0){const qt=Pe.tokenStack[Pe.tokenStack.length-1];(qt[1]||h1).call(Pe,void 0,qt[0])}for(de.position={start:Va(ee.length>0?ee[0][1].start:{line:1,column:1,offset:0}),end:Va(ee.length>0?ee[ee.length-2][1].end:{line:1,column:1,offset:0})},dt=-1;++dt<t.transforms.length;)de=t.transforms[dt](de)||de;return de}function s(ee,de,Pe){let et=de-1,dt=-1,qt=!1,Yn,Qn,Ir,fs;for(;++et<=Pe;){const dn=ee[et];switch(dn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{dn[0]==="enter"?dt++:dt--,fs=void 0;break}case"lineEndingBlank":{dn[0]==="enter"&&(Yn&&!fs&&!dt&&!Ir&&(Ir=et),fs=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:fs=void 0}if(!dt&&dn[0]==="enter"&&dn[1].type==="listItemPrefix"||dt===-1&&dn[0]==="exit"&&(dn[1].type==="listUnordered"||dn[1].type==="listOrdered")){if(Yn){let Or=et;for(Qn=void 0;Or--;){const An=ee[Or];if(An[1].type==="lineEnding"||An[1].type==="lineEndingBlank"){if(An[0]==="exit")continue;Qn&&(ee[Qn][1].type="lineEndingBlank",qt=!0),An[1].type="lineEnding",Qn=Or}else if(!(An[1].type==="linePrefix"||An[1].type==="blockQuotePrefix"||An[1].type==="blockQuotePrefixWhitespace"||An[1].type==="blockQuoteMarker"||An[1].type==="listItemIndent"))break}Ir&&(!Qn||Ir<Qn)&&(Yn._spread=!0),Yn.end=Object.assign({},Qn?ee[Qn][1].start:dn[1].end),ee.splice(Qn||et,0,["exit",Yn,dn[2]]),et++,Pe++}if(dn[1].type==="listItemPrefix"){const Or={type:"listItem",_spread:!1,start:Object.assign({},dn[1].start),end:void 0};Yn=Or,ee.splice(et,0,["enter",Or,dn[2]]),et++,Pe++,Ir=void 0,fs=!0}}}return ee[de][1]._spread=qt,Pe}function i(ee,de){return Pe;function Pe(et){u.call(this,ee(et),et),de&&de.call(this,et)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(ee,de,Pe){this.stack[this.stack.length-1].children.push(ee),this.stack.push(ee),this.tokenStack.push([de,Pe||void 0]),ee.position={start:Va(de.start),end:void 0}}function d(ee){return de;function de(Pe){ee&&ee.call(this,Pe),f.call(this,Pe)}}function f(ee,de){const Pe=this.stack.pop(),et=this.tokenStack.pop();if(et)et[0].type!==ee.type&&(de?de.call(this,ee,et[0]):(et[1]||h1).call(this,ee,et[0]));else throw new Error("Cannot close `"+ee.type+"` ("+Sd({start:ee.start,end:ee.end})+"): its not open");Pe.position.end=Va(ee.end)}function h(){return fK(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function g(ee){if(this.data.expectingFirstListItemValue){const de=this.stack[this.stack.length-2];de.start=Number.parseInt(this.sliceSerialize(ee),10),this.data.expectingFirstListItemValue=void 0}}function y(){const ee=this.resume(),de=this.stack[this.stack.length-1];de.lang=ee}function w(){const ee=this.resume(),de=this.stack[this.stack.length-1];de.meta=ee}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const ee=this.resume(),de=this.stack[this.stack.length-1];de.value=ee.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const ee=this.resume(),de=this.stack[this.stack.length-1];de.value=ee.replace(/(\r?\n|\r)$/g,"")}function k(ee){const de=this.resume(),Pe=this.stack[this.stack.length-1];Pe.label=de,Pe.identifier=pc(this.sliceSerialize(ee)).toLowerCase()}function N(){const ee=this.resume(),de=this.stack[this.stack.length-1];de.title=ee}function T(){const ee=this.resume(),de=this.stack[this.stack.length-1];de.url=ee}function P(ee){const de=this.stack[this.stack.length-1];if(!de.depth){const Pe=this.sliceSerialize(ee).length;de.depth=Pe}}function R(){this.data.setextHeadingSlurpLineEnding=!0}function M(ee){const de=this.stack[this.stack.length-1];de.depth=this.sliceSerialize(ee).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function W(ee){const Pe=this.stack[this.stack.length-1].children;let et=Pe[Pe.length-1];(!et||et.type!=="text")&&(et=_e(),et.position={start:Va(ee.start),end:void 0},Pe.push(et)),this.stack.push(et)}function K(ee){const de=this.stack.pop();de.value+=this.sliceSerialize(ee),de.position.end=Va(ee.end)}function H(ee){const de=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Pe=de.children[de.children.length-1];Pe.position.end=Va(ee.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(de.type)&&(W.call(this,ee),K.call(this,ee))}function z(){this.data.atHardBreak=!0}function L(){const ee=this.resume(),de=this.stack[this.stack.length-1];de.value=ee}function B(){const ee=this.resume(),de=this.stack[this.stack.length-1];de.value=ee}function Q(){const ee=this.resume(),de=this.stack[this.stack.length-1];de.value=ee}function q(){const ee=this.stack[this.stack.length-1];if(this.data.inReference){const de=this.data.referenceType||"shortcut";ee.type+="Reference",ee.referenceType=de,delete ee.url,delete ee.title}else delete ee.identifier,delete ee.label;this.data.referenceType=void 0}function F(){const ee=this.stack[this.stack.length-1];if(this.data.inReference){const de=this.data.referenceType||"shortcut";ee.type+="Reference",ee.referenceType=de,delete ee.url,delete ee.title}else delete ee.identifier,delete ee.label;this.data.referenceType=void 0}function D(ee){const de=this.sliceSerialize(ee),Pe=this.stack[this.stack.length-2];Pe.label=dQ(de),Pe.identifier=pc(de).toLowerCase()}function X(){const ee=this.stack[this.stack.length-1],de=this.resume(),Pe=this.stack[this.stack.length-1];if(this.data.inReference=!0,Pe.type==="link"){const et=ee.children;Pe.children=et}else Pe.alt=de}function I(){const ee=this.resume(),de=this.stack[this.stack.length-1];de.url=ee}function V(){const ee=this.resume(),de=this.stack[this.stack.length-1];de.title=ee}function Z(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function ce(ee){const de=this.resume(),Pe=this.stack[this.stack.length-1];Pe.label=de,Pe.identifier=pc(this.sliceSerialize(ee)).toLowerCase(),this.data.referenceType="full"}function he(ee){this.data.characterReferenceType=ee.type}function me(ee){const de=this.sliceSerialize(ee),Pe=this.data.characterReferenceType;let et;Pe?(et=EI(de,Pe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):et=Ib(de);const dt=this.stack[this.stack.length-1];dt.value+=et}function Ce(ee){const de=this.stack.pop();de.position.end=Va(ee.end)}function ge(ee){K.call(this,ee);const de=this.stack[this.stack.length-1];de.url=this.sliceSerialize(ee)}function $e(ee){K.call(this,ee);const de=this.stack[this.stack.length-1];de.url="mailto:"+this.sliceSerialize(ee)}function ne(){return{type:"blockquote",children:[]}}function We(){return{type:"code",lang:null,meta:null,value:""}}function Ve(){return{type:"inlineCode",value:""}}function Ft(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Dt(){return{type:"emphasis",children:[]}}function Pn(){return{type:"heading",depth:0,children:[]}}function wn(){return{type:"break"}}function bn(){return{type:"html",value:""}}function Rr(){return{type:"image",title:null,url:"",alt:null}}function Bt(){return{type:"link",title:null,url:"",children:[]}}function $(ee){return{type:"list",ordered:ee.type==="listOrdered",start:null,spread:ee._spread,children:[]}}function te(ee){return{type:"listItem",spread:ee._spread,checked:null,children:[]}}function se(){return{type:"paragraph",children:[]}}function ke(){return{type:"strong",children:[]}}function _e(){return{type:"text",value:""}}function xe(){return{type:"thematicBreak"}}}function Va(e){return{line:e.line,column:e.column,offset:e.offset}}function MI(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?MI(e,r):pQ(e,r)}}function pQ(e,t){let n;for(n in t)if(DI.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function h1(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Sd({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Sd({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Sd({start:t.start,end:t.end})+") is still open")}function gQ(e){const t=this;t.parser=n;function n(r){return hQ(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function yQ(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function vQ(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function xQ(e,t){const n=t.value?t.value+`
`:"",r={},s=t.lang?t.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function wQ(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function bQ(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function _Q(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=tu(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let l,u=e.footnoteCounts.get(r);u===void 0?(u=0,e.footnoteOrder.push(r),l=e.footnoteOrder.length):l=i+1,u+=1,e.footnoteCounts.set(r,u);const d={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,d);const f={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(t,f),e.applyData(t,f)}function SQ(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function jQ(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function LI(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=r:s.push({type:"text",value:r}),s}function EQ(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return LI(e,t);const s={src:tu(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)}function kQ(e,t){const n={src:tu(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function NQ(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function TQ(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return LI(e,t);const s={href:tu(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function CQ(e,t){const n={href:tu(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function PQ(e,t,n){const r=e.all(t),s=n?AQ(n):FI(t),i={},l=[];if(typeof t.checked=="boolean"){const h=r[0];let m;h&&h.type==="element"&&h.tagName==="p"?m=h:(m={type:"element",tagName:"p",properties:{},children:[]},r.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const h=r[u];(s||u!==0||h.type!=="element"||h.tagName!=="p")&&l.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!s?l.push(...h.children):l.push(h)}const d=r[r.length-1];d&&(s||d.type!=="element"||d.tagName!=="p")&&l.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:i,children:l};return e.patch(t,f),e.applyData(t,f)}function AQ(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=FI(n[r])}return t}function FI(e){const t=e.spread;return t??e.children.length>1}function RQ(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const l=r[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)}function IQ(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function OQ(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function DQ(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function MQ(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],l),s.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},u=Cb(t.children[1]),d=vI(t.children[t.children.length-1]);u&&d&&(l.position={start:u,end:d}),s.push(l)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function LQ(e,t,n){const r=n?n.children:void 0,i=(r?r.indexOf(t):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,u=l?l.length:t.children.length;let d=-1;const f=[];for(;++d<u;){const m=t.children[d],g={},y=l?l[d]:void 0;y&&(g.align=y);let w={type:"element",tagName:i,properties:g,children:[]};m&&(w.children=e.all(m),e.patch(m,w),w=e.applyData(m,w)),f.push(w)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(f,!0)};return e.patch(t,h),e.applyData(t,h)}function FQ(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const m1=9,p1=32;function $Q(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const i=[];for(;r;)i.push(g1(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return i.push(g1(t.slice(s),s>0,!1)),i.join("")}function g1(e,t,n){let r=0,s=e.length;if(t){let i=e.codePointAt(r);for(;i===m1||i===p1;)r++,i=e.codePointAt(r)}if(n){let i=e.codePointAt(s-1);for(;i===m1||i===p1;)s--,i=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function VQ(e,t){const n={type:"text",value:$Q(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function zQ(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const UQ={blockquote:yQ,break:vQ,code:xQ,delete:wQ,emphasis:bQ,footnoteReference:_Q,heading:SQ,html:jQ,imageReference:EQ,image:kQ,inlineCode:NQ,linkReference:TQ,link:CQ,listItem:PQ,list:RQ,paragraph:IQ,root:OQ,strong:DQ,table:MQ,tableCell:FQ,tableRow:LQ,text:VQ,thematicBreak:zQ,toml:rm,yaml:rm,definition:rm,footnoteDefinition:rm};function rm(){}const $I=-1,Qp=0,Ed=1,lp=2,Mb=3,Lb=4,Fb=5,$b=6,VI=7,zI=8,y1=typeof self=="object"?self:globalThis,BQ=(e,t)=>{const n=(s,i)=>(e.set(i,s),s),r=s=>{if(e.has(s))return e.get(s);const[i,l]=t[s];switch(i){case Qp:case $I:return n(l,s);case Ed:{const u=n([],s);for(const d of l)u.push(r(d));return u}case lp:{const u=n({},s);for(const[d,f]of l)u[r(d)]=r(f);return u}case Mb:return n(new Date(l),s);case Lb:{const{source:u,flags:d}=l;return n(new RegExp(u,d),s)}case Fb:{const u=n(new Map,s);for(const[d,f]of l)u.set(r(d),r(f));return u}case $b:{const u=n(new Set,s);for(const d of l)u.add(r(d));return u}case VI:{const{name:u,message:d}=l;return n(new y1[u](d),s)}case zI:return n(BigInt(l),s);case"BigInt":return n(Object(BigInt(l)),s);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new y1[i](l),s)};return r},v1=e=>BQ(new Map,e)(0),Yl="",{toString:qQ}={},{keys:WQ}=Object,nd=e=>{const t=typeof e;if(t!=="object"||!e)return[Qp,t];const n=qQ.call(e).slice(8,-1);switch(n){case"Array":return[Ed,Yl];case"Object":return[lp,Yl];case"Date":return[Mb,Yl];case"RegExp":return[Lb,Yl];case"Map":return[Fb,Yl];case"Set":return[$b,Yl];case"DataView":return[Ed,n]}return n.includes("Array")?[Ed,n]:n.includes("Error")?[VI,n]:[lp,n]},sm=([e,t])=>e===Qp&&(t==="function"||t==="symbol"),HQ=(e,t,n,r)=>{const s=(l,u)=>{const d=r.push(l)-1;return n.set(u,d),d},i=l=>{if(n.has(l))return n.get(l);let[u,d]=nd(l);switch(u){case Qp:{let h=l;switch(d){case"bigint":u=zI,h=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);h=null;break;case"undefined":return s([$I],l)}return s([u,h],l)}case Ed:{if(d){let g=l;return d==="DataView"?g=new Uint8Array(l.buffer):d==="ArrayBuffer"&&(g=new Uint8Array(l)),s([d,[...g]],l)}const h=[],m=s([u,h],l);for(const g of l)h.push(i(g));return m}case lp:{if(d)switch(d){case"BigInt":return s([d,l.toString()],l);case"Boolean":case"Number":case"String":return s([d,l.valueOf()],l)}if(t&&"toJSON"in l)return i(l.toJSON());const h=[],m=s([u,h],l);for(const g of WQ(l))(e||!sm(nd(l[g])))&&h.push([i(g),i(l[g])]);return m}case Mb:return s([u,l.toISOString()],l);case Lb:{const{source:h,flags:m}=l;return s([u,{source:h,flags:m}],l)}case Fb:{const h=[],m=s([u,h],l);for(const[g,y]of l)(e||!(sm(nd(g))||sm(nd(y))))&&h.push([i(g),i(y)]);return m}case $b:{const h=[],m=s([u,h],l);for(const g of l)(e||!sm(nd(g)))&&h.push(i(g));return m}}const{message:f}=l;return s([u,{name:d,message:f}],l)};return i},x1=(e,{json:t,lossy:n}={})=>{const r=[];return HQ(!(t||n),!!t,new Map,r)(e),r},cp=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?v1(x1(e,t)):structuredClone(e):(e,t)=>v1(x1(e,t));function GQ(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function KQ(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function YQ(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||GQ,r=e.options.footnoteBackLabel||KQ,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let d=-1;for(;++d<e.footnoteOrder.length;){const f=e.footnoteById.get(e.footnoteOrder[d]);if(!f)continue;const h=e.all(f),m=String(f.identifier).toUpperCase(),g=tu(m.toLowerCase());let y=0;const w=[],b=e.footnoteCounts.get(m);for(;b!==void 0&&++y<=b;){w.length>0&&w.push({type:"text",value:" "});let k=typeof n=="string"?n:n(d,y);typeof k=="string"&&(k={type:"text",value:k}),w.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+g+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(d,y),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const S=h[h.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const k=S.children[S.children.length-1];k&&k.type==="text"?k.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...w)}else h.push(...w);const _={type:"element",tagName:"li",properties:{id:t+"fn-"+g},children:e.wrap(h,!0)};e.patch(f,_),u.push(_)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...cp(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(u,!0)},{type:"text",value:`
`}]}}const UI=(function(e){if(e==null)return ZQ;if(typeof e=="function")return Xp(e);if(typeof e=="object")return Array.isArray(e)?QQ(e):XQ(e);if(typeof e=="string")return JQ(e);throw new Error("Expected function, string, or object as test")});function QQ(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=UI(e[n]);return Xp(r);function r(...s){let i=-1;for(;++i<t.length;)if(t[i].apply(this,s))return!0;return!1}}function XQ(e){const t=e;return Xp(n);function n(r){const s=r;let i;for(i in e)if(s[i]!==t[i])return!1;return!0}}function JQ(e){return Xp(t);function t(n){return n&&n.type===e}}function Xp(e){return t;function t(n,r,s){return!!(eX(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function ZQ(){return!0}function eX(e){return e!==null&&typeof e=="object"&&"type"in e}const BI=[],tX=!0,w1=!1,nX="skip";function rX(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const i=UI(s),l=r?-1:1;u(e,void 0,[])();function u(d,f,h){const m=d&&typeof d=="object"?d:{};if(typeof m.type=="string"){const y=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(d.type+(y?"<"+y+">":""))+")"})}return g;function g(){let y=BI,w,b,S;if((!t||i(d,f,h[h.length-1]||void 0))&&(y=sX(n(d,h)),y[0]===w1))return y;if("children"in d&&d.children){const _=d;if(_.children&&y[0]!==nX)for(b=(r?_.children.length:-1)+l,S=h.concat(_);b>-1&&b<_.children.length;){const k=_.children[b];if(w=u(k,b,S)(),w[0]===w1)return w;b=typeof w[1]=="number"?w[1]:b+l}}return y}}}function sX(e){return Array.isArray(e)?e:typeof e=="number"?[tX,e]:e==null?BI:[e]}function qI(e,t,n,r){let s,i,l;typeof t=="function"&&typeof n!="function"?(i=void 0,l=t,s=n):(i=t,l=n,s=r),rX(e,i,u,s);function u(d,f){const h=f[f.length-1],m=h?h.children.indexOf(d):void 0;return l(d,m,h)}}const Rw={}.hasOwnProperty,iX={};function aX(e,t){const n=t||iX,r=new Map,s=new Map,i=new Map,l={...UQ,...n.handlers},u={all:f,applyData:lX,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:l,one:d,options:n,patch:oX,wrap:uX};return qI(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const m=h.type==="definition"?r:s,g=String(h.identifier).toUpperCase();m.has(g)||m.set(g,h)}}),u;function d(h,m){const g=h.type,y=u.handlers[g];if(Rw.call(u.handlers,g)&&y)return y(u,h,m);if(u.options.passThrough&&u.options.passThrough.includes(g)){if("children"in h){const{children:b,...S}=h,_=cp(S);return _.children=u.all(h),_}return cp(h)}return(u.options.unknownHandler||cX)(u,h,m)}function f(h){const m=[];if("children"in h){const g=h.children;let y=-1;for(;++y<g.length;){const w=u.one(g[y],h);if(w){if(y&&g[y-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=b1(w.value)),!Array.isArray(w)&&w.type==="element")){const b=w.children[0];b&&b.type==="text"&&(b.value=b1(b.value))}Array.isArray(w)?m.push(...w):m.push(w)}}}return m}}function oX(e,t){e.position&&(t.position=qG(e))}function lX(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,i=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&i&&Object.assign(n.properties,cp(i)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function cX(e,t){const n=t.data||{},r="value"in t&&!(Rw.call(n,"hProperties")||Rw.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function uX(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function b1(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function _1(e,t){const n=aX(e,t),r=n.one(e,void 0),s=YQ(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function dX(e,t){return e&&"run"in e?async function(n,r){const s=_1(n,{file:r,...t});await e.run(s,r)}:function(n,r){return _1(n,{file:r,...e||t})}}function S1(e){if(e)throw e}var Fv,j1;function fX(){if(j1)return Fv;j1=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(f){return typeof Array.isArray=="function"?Array.isArray(f):t.call(f)==="[object Array]"},i=function(f){if(!f||t.call(f)!=="[object Object]")return!1;var h=e.call(f,"constructor"),m=f.constructor&&f.constructor.prototype&&e.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!h&&!m)return!1;var g;for(g in f);return typeof g>"u"||e.call(f,g)},l=function(f,h){n&&h.name==="__proto__"?n(f,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):f[h.name]=h.newValue},u=function(f,h){if(h==="__proto__")if(e.call(f,h)){if(r)return r(f,h).value}else return;return f[h]};return Fv=function d(){var f,h,m,g,y,w,b=arguments[0],S=1,_=arguments.length,k=!1;for(typeof b=="boolean"&&(k=b,b=arguments[1]||{},S=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});S<_;++S)if(f=arguments[S],f!=null)for(h in f)m=u(b,h),g=u(f,h),b!==g&&(k&&g&&(i(g)||(y=s(g)))?(y?(y=!1,w=m&&s(m)?m:[]):w=m&&i(m)?m:{},l(b,{name:h,newValue:d(k,w,g)})):typeof g<"u"&&l(b,{name:h,newValue:g}));return b},Fv}var hX=fX();const $v=ho(hX);function Iw(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function mX(){const e=[],t={run:n,use:r};return t;function n(...s){let i=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...s);function u(d,...f){const h=e[++i];let m=-1;if(d){l(d);return}for(;++m<s.length;)(f[m]===null||f[m]===void 0)&&(f[m]=s[m]);s=f,h?pX(h,u)(...f):l(null,...f)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function pX(e,t){let n;return r;function r(...l){const u=e.length>l.length;let d;u&&l.push(s);try{d=e.apply(this,l)}catch(f){const h=f;if(u&&n)throw h;return s(h)}u||(d&&d.then&&typeof d.then=="function"?d.then(i,s):d instanceof Error?s(d):i(d))}function s(l,...u){n||(n=!0,t(l,...u))}function i(l){s(null,l)}}const di={basename:gX,dirname:yX,extname:vX,join:xX,sep:"/"};function gX(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');wf(e);let n=0,r=-1,s=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let l=-1,u=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else l<0&&(i=!0,l=s+1),u>-1&&(e.codePointAt(s)===t.codePointAt(u--)?u<0&&(r=s):(u=-1,r=l));return n===r?r=l:r<0&&(r=e.length),e.slice(n,r)}function yX(e){if(wf(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function vX(e){wf(e);let t=e.length,n=-1,r=0,s=-1,i=0,l;for(;t--;){const u=e.codePointAt(t);if(u===47){if(l){r=t+1;break}continue}n<0&&(l=!0,n=t+1),u===46?s<0?s=t:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function xX(...e){let t=-1,n;for(;++t<e.length;)wf(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":wX(n)}function wX(e){wf(e);const t=e.codePointAt(0)===47;let n=bX(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function bX(e,t){let n="",r=0,s=-1,i=0,l=-1,u,d;for(;++l<=e.length;){if(l<e.length)u=e.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(s===l-1||i===1))if(s!==l-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(d=n.lastIndexOf("/"),d!==n.length-1){d<0?(n="",r=0):(n=n.slice(0,d),r=n.length-1-n.lastIndexOf("/")),s=l,i=0;continue}}else if(n.length>0){n="",r=0,s=l,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,l):n=e.slice(s+1,l),r=l-s-1;s=l,i=0}else u===46&&i>-1?i++:i=-1}return n}function wf(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const _X={cwd:SX};function SX(){return"/"}function Ow(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function jX(e){if(typeof e=="string")e=new URL(e);else if(!Ow(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return EX(e)}function EX(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Vv=["history","path","basename","stem","extname","dirname"];class WI{constructor(t){let n;t?Ow(t)?n={path:t}:typeof t=="string"||kX(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":_X.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Vv.length;){const i=Vv[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)Vv.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?di.basename(this.path):void 0}set basename(t){Uv(t,"basename"),zv(t,"basename"),this.path=di.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?di.dirname(this.path):void 0}set dirname(t){E1(this.basename,"dirname"),this.path=di.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?di.extname(this.path):void 0}set extname(t){if(zv(t,"extname"),E1(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=di.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Ow(t)&&(t=jX(t)),Uv(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?di.basename(this.path,this.extname):void 0}set stem(t){Uv(t,"stem"),zv(t,"stem"),this.path=di.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new xr(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function zv(e,t){if(e&&e.includes(di.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+di.sep+"`")}function Uv(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function E1(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function kX(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const NX=(function(e){const r=this.constructor.prototype,s=r[e],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,r),i}),TX={}.hasOwnProperty;class Vb extends NX{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=mX()}copy(){const t=new Vb;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data($v(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Wv("data",this.frozen),this.namespace[t]=n,this):TX.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Wv("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=im(t),r=this.parser||this.Parser;return Bv("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Bv("process",this.parser||this.Parser),qv("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(i,l){const u=im(t),d=r.parse(u);r.run(d,u,function(h,m,g){if(h||!m||!g)return f(h);const y=m,w=r.stringify(y,g);AX(w)?g.value=w:g.result=w,f(h,g)});function f(h,m){h||!m?l(h):i?i(m):n(void 0,m)}}}processSync(t){let n=!1,r;return this.freeze(),Bv("processSync",this.parser||this.Parser),qv("processSync",this.compiler||this.Compiler),this.process(t,s),N1("processSync","process",n),r;function s(i,l){n=!0,S1(i),r=l}}run(t,n,r){k1(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(l,u){const d=im(n);s.run(t,d,f);function f(h,m,g){const y=m||t;h?u(h):l?l(y):r(void 0,y,g)}}}runSync(t,n){let r=!1,s;return this.run(t,n,i),N1("runSync","run",r),s;function i(l,u){S1(l),s=u,r=!0}}stringify(t,n){this.freeze();const r=im(n),s=this.compiler||this.Compiler;return qv("stringify",s),k1(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(Wv("use",this.frozen),t!=null)if(typeof t=="function")d(t,n);else if(typeof t=="object")Array.isArray(t)?u(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(f){if(typeof f=="function")d(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[h,...m]=f;d(h,m)}else l(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function l(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(f.plugins),f.settings&&(s.settings=$v(!0,s.settings,f.settings))}function u(f){let h=-1;if(f!=null)if(Array.isArray(f))for(;++h<f.length;){const m=f[h];i(m)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function d(f,h){let m=-1,g=-1;for(;++m<r.length;)if(r[m][0]===f){g=m;break}if(g===-1)r.push([f,...h]);else if(h.length>0){let[y,...w]=h;const b=r[g][1];Iw(b)&&Iw(y)&&(y=$v(!0,b,y)),r[g]=[f,y,...w]}}}}const CX=new Vb().freeze();function Bv(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function qv(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Wv(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function k1(e){if(!Iw(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function N1(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function im(e){return PX(e)?e:new WI(e)}function PX(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function AX(e){return typeof e=="string"||RX(e)}function RX(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const IX="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",T1=[],C1={allowDangerousHtml:!0},OX=/^(https?|ircs?|mailto|xmpp)$/i,DX=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function MX(e){const t=LX(e),n=FX(e);return $X(t.runSync(t.parse(n),n),e)}function LX(e){const t=e.rehypePlugins||T1,n=e.remarkPlugins||T1,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...C1}:C1;return CX().use(gQ).use(n).use(dX,r).use(t)}function FX(e){const t=e.children||"",n=new WI;return typeof t=="string"&&(n.value=t),n}function $X(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,i=t.disallowedElements,l=t.skipHtml,u=t.unwrapDisallowed,d=t.urlTransform||VX;for(const h of DX)Object.hasOwn(t,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+IX+h.id,void 0);return qI(e,f),YG(e,{Fragment:a.Fragment,components:s,ignoreInvalidStyle:!0,jsx:a.jsx,jsxs:a.jsxs,passKeys:!0,passNode:!0});function f(h,m,g){if(h.type==="raw"&&g&&typeof m=="number")return l?g.children.splice(m,1):g.children[m]={type:"text",value:h.value},m;if(h.type==="element"){let y;for(y in Dv)if(Object.hasOwn(Dv,y)&&Object.hasOwn(h.properties,y)){const w=h.properties[y],b=Dv[y];(b===null||b.includes(h.tagName))&&(h.properties[y]=d(String(w||""),y,h))}}if(h.type==="element"){let y=n?!n.includes(h.tagName):i?i.includes(h.tagName):!1;if(!y&&r&&typeof m=="number"&&(y=!r(h,m,g)),y&&g&&typeof m=="number")return u&&h.children?g.children.splice(m,1,...h.children):g.children.splice(m,1),m}}}function VX(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||OX.test(e.slice(0,t))?e:""}function HI(){const e=_t({queryKey:["ai-policy-docs"],queryFn:async()=>{const n=await Hr({query:`query AIPolicyDocs {
        ai_policy_docs(where: { organization_id: { _is_null: true } }, order_by: { published_at: desc }) {
          id
          slug
          title
          summary
          body_markdown
          links
          published_at
        }
      }`});return(n==null?void 0:n.ai_policy_docs)??[]}});return a.jsx("div",{className:"min-h-screen bg-slate-50",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-10 space-y-8",children:[a.jsxs("header",{className:"space-y-3",children:[a.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"AI Transparency"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Learn how Teachmo uses AI responsibly. These transparency briefs explain our data flow, ethics, and human-in-the-loop safeguards."}),a.jsx("a",{href:"mailto:ai-governance@teachmo.com",className:"inline-flex text-sm font-medium text-blue-700 hover:text-blue-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500",children:"Contact the AI governance team"})]}),a.jsx("section",{className:"grid gap-6",children:(e.data??[]).length===0?a.jsx(Ne,{children:a.jsx(Te,{className:"py-8 text-sm text-slate-600",children:"Transparency documents are being published. Please check back soon."})}):e.data.map(t=>a.jsxs(Ne,{children:[a.jsxs(Oe,{children:[a.jsx(Le,{children:t.title}),t.summary?a.jsx("p",{className:"text-sm text-muted-foreground",children:t.summary}):null]}),a.jsxs(Te,{className:"space-y-4",children:[a.jsx(MX,{className:"prose prose-sm max-w-none text-slate-700",children:t.body_markdown}),Array.isArray(t.links)&&t.links.length>0?a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"References"}),a.jsx("ul",{className:"list-disc pl-4 text-sm text-blue-700",children:t.links.map(n=>a.jsx("li",{children:a.jsx("a",{href:n,className:"hover:underline focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500",children:n})},n))})]}):null]})]},t.id))})]})})}const zX=Object.freeze(Object.defineProperty({__proto__:null,default:HI},Symbol.toStringTag,{value:"Module"}));function GI(){const[e,t]=x.useState({submissions:0,enrollments:0,applications:0,contracts:0}),[n,r]=x.useState([]),s=uf(),{data:i}=vr(),l=s,u=x.useMemo(()=>{const d={};return s&&(d["x-user-id"]=s),i!=null&&i.districtId&&(d["x-district-id"]=i.districtId),i!=null&&i.schoolId&&(d["x-school-id"]=i.schoolId),d},[s,i==null?void 0:i.districtId,i==null?void 0:i.schoolId]);return x.useEffect(()=>{async function d(){const f=async b=>b.ok?b.json():[],[h,m,g,y,w]=await Promise.all([fetch(`${vt}/submissions`,{headers:u}).then(f),l?fetch(`${vt}/courses/enrollments/${l}`,{headers:u}).then(f):Promise.resolve([]),l?fetch(`${vt}/incentives/applications/${l}`,{headers:u}).then(f):Promise.resolve([]),fetch(`${vt}/contracts?partnerId=${l??""}`,{headers:u}).then(f),fetch(`${vt}/admin/audits`,{headers:u}).then(f)]);t({submissions:h.length,enrollments:m.length,applications:g.length,contracts:y.length}),r(w.slice(-5).reverse())}d()},[l,u]),a.jsxs("div",{children:[a.jsx("h1",{children:"Partner portal"}),a.jsx("p",{children:"Review your submissions and activity."}),a.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[a.jsxs("div",{children:[a.jsx("strong",{children:e.submissions})," submissions"]}),a.jsxs("div",{children:[a.jsx("strong",{children:e.enrollments})," enrollments"]}),a.jsxs("div",{children:[a.jsx("strong",{children:e.applications})," incentives"]}),a.jsxs("div",{children:[a.jsx("strong",{children:e.contracts})," contracts"]})]}),a.jsx("h2",{children:"Recent activity"}),a.jsx("ul",{children:n.map(d=>a.jsxs("li",{children:[d.event_type," - ",d.summary]},d.id))}),a.jsx("div",{style:{marginTop:"1rem"},children:a.jsx(as,{to:"/partner/submissions",children:"View submissions"})})]})}const UX=Object.freeze(Object.defineProperty({__proto__:null,default:GI},Symbol.toStringTag,{value:"Module"})),BX=["event","resource","offer"];function KI(){const[e,t]=x.useState([]),[n,r]=x.useState("event"),[s,i]=x.useState({title:"",description:""}),l=uf(),{data:u}=vr(),d=x.useMemo(()=>{const g={};return l&&(g["x-user-id"]=l),u!=null&&u.districtId&&(g["x-district-id"]=u.districtId),u!=null&&u.schoolId&&(g["x-school-id"]=u.schoolId),g},[l,u==null?void 0:u.districtId,u==null?void 0:u.schoolId]),f=async()=>{const g=await fetch(`${vt}/submissions`,{headers:d}).then(y=>y.json());t(g)};x.useEffect(()=>{f()},[d]);const h=async g=>{g.preventDefault(),(await fetch(`${vt}/submissions`,{method:"POST",headers:{"Content-Type":"application/json",...d},body:JSON.stringify({...s,type:n})})).ok&&(i({title:"",description:""}),f())},m=async g=>{const y=window.prompt("Update submission title");y&&(await fetch(`${vt}/submissions/${g}`,{method:"PUT",headers:{"Content-Type":"application/json",...d},body:JSON.stringify({title:y})}),f())};return a.jsxs("div",{children:[a.jsx("h1",{children:"Submissions"}),a.jsx("div",{style:{marginBottom:"1rem"},children:BX.map(g=>a.jsx("button",{onClick:()=>r(g),style:{marginRight:"0.5rem",fontWeight:n===g?700:400},children:g},g))}),a.jsxs("form",{onSubmit:h,style:{marginBottom:"1rem"},children:[a.jsx("input",{placeholder:"Title",value:s.title,onChange:g=>i({...s,title:g.target.value})}),a.jsx("input",{placeholder:"Description",value:s.description,onChange:g=>i({...s,description:g.target.value})}),a.jsx("button",{type:"submit",children:"Submit"})]}),a.jsx("ul",{children:e.map(g=>a.jsxs("li",{children:[g.title," (",g.type,")",a.jsx("button",{onClick:()=>m(g.id),style:{marginLeft:"0.5rem"},children:"Edit"})]},g.id))})]})}const qX=Object.freeze(Object.defineProperty({__proto__:null,default:KI},Symbol.toStringTag,{value:"Module"}));async function am(e,t={},n){const r=await Nt.auth.getAccessToken(),s={"content-type":"application/json",...t.headers||{}};r&&(s.authorization=`Bearer ${r}`),n!=null&&n.organizationId&&(s["x-teachmo-org-id"]=n.organizationId),n!=null&&n.schoolId&&(s["x-teachmo-school-id"]=String(n.schoolId));const i=await fetch(`${RP()}${e}`,{...t,headers:s});if(!i.ok)throw new Error(`HTTP ${i.status}`);return t.method==="HEAD"?{}:i.json()}function YI(){const e=gl(),[t,n]=x.useState([]),[r,s]=x.useState([]),i=async()=>{if(!e.organizationId)return;const[f,h]=await Promise.all([am("/courses",{method:"GET"},e),am("/courses/enrollments/me",{method:"GET"},e)]);n(f),s(h)};x.useEffect(()=>{i()},[e.organizationId]);const l=async f=>{await am(`/courses/${f}/enroll`,{method:"POST"},e),i()},u=async(f,h)=>{await am(`/courses/${f}/modules/${h}/complete`,{method:"POST"},e),i()},d=Object.fromEntries(r.map(f=>[f.courseId,f]));return a.jsxs("div",{children:[a.jsx("h1",{children:"Training Courses"}),t.map(f=>{const h=d[f.id],m=h?h.completedModules.length:0;return a.jsxs("div",{style:{border:"1px solid #ccc",margin:"1rem",padding:"1rem"},children:[a.jsx("h2",{children:f.title}),a.jsx("p",{children:f.description}),!h&&a.jsx("button",{onClick:()=>l(f.id),children:"Enroll"}),h&&a.jsxs("div",{children:[a.jsxs("p",{children:["Progress: ",m,"/",f.modules.length]}),f.modules.map(g=>a.jsxs("div",{children:[g.title," ",!h.completedModules.includes(g.id)&&a.jsx("button",{onClick:()=>u(f.id,g.id),children:"Complete"})]},g.id))]})]},f.id)})]})}const WX=Object.freeze(Object.defineProperty({__proto__:null,default:YI},Symbol.toStringTag,{value:"Module"})),sr=oe.forwardRef(({className:e,variant:t="default",...n},r)=>{const s={default:"bg-primary text-primary-foreground hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"};return a.jsx("div",{ref:r,className:Ot("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",s[t],e),...n})});sr.displayName="Badge";var Hv={exports:{}},Gv,P1;function HX(){if(P1)return Gv;P1=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Gv=e,Gv}var Kv,A1;function GX(){if(A1)return Kv;A1=1;var e=HX();function t(){}function n(){}return n.resetWarningCache=t,Kv=function(){function r(l,u,d,f,h,m){if(m!==e){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function s(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i},Kv}var R1;function KX(){return R1||(R1=1,Hv.exports=GX()()),Hv.exports}var YX=KX();const Ln=ho(YX);function QX(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const XX=e=>{switch(e){case"success":return eJ;case"info":return nJ;case"warning":return tJ;case"error":return rJ;default:return null}},JX=Array(12).fill(0),ZX=({visible:e,className:t})=>oe.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},oe.createElement("div",{className:"sonner-spinner"},JX.map((n,r)=>oe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),eJ=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),tJ=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),nJ=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),rJ=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),sJ=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},oe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),oe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),iJ=()=>{const[e,t]=oe.useState(document.hidden);return oe.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let Dw=1;class aJ{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...s}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:Dw++,l=this.toasts.find(d=>d.id===i),u=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),l?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...t,id:i,title:r}),{...d,...t,id:i,dismissible:u,title:r}):d):this.addToast({title:r,...s,dismissible:u,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,l;const u=s.then(async f=>{if(l=["resolve",f],oe.isValidElement(f))i=!1,this.create({id:r,type:"default",message:f});else if(lJ(f)&&!f.ok){i=!1;const m=typeof n.error=="function"?await n.error(`HTTP error! status: ${f.status}`):n.error,g=typeof n.description=="function"?await n.description(`HTTP error! status: ${f.status}`):n.description,w=typeof m=="object"&&!oe.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:g,...w})}else if(f instanceof Error){i=!1;const m=typeof n.error=="function"?await n.error(f):n.error,g=typeof n.description=="function"?await n.description(f):n.description,w=typeof m=="object"&&!oe.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:g,...w})}else if(n.success!==void 0){i=!1;const m=typeof n.success=="function"?await n.success(f):n.success,g=typeof n.description=="function"?await n.description(f):n.description,w=typeof m=="object"&&!oe.isValidElement(m)?m:{message:m};this.create({id:r,type:"success",description:g,...w})}}).catch(async f=>{if(l=["reject",f],n.error!==void 0){i=!1;const h=typeof n.error=="function"?await n.error(f):n.error,m=typeof n.description=="function"?await n.description(f):n.description,y=typeof h=="object"&&!oe.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...y})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),d=()=>new Promise((f,h)=>u.then(()=>l[0]==="reject"?h(l[1]):f(l[1])).catch(h));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||Dw++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const qr=new aJ,oJ=(e,t)=>{const n=(t==null?void 0:t.id)||Dw++;return qr.addToast({title:e,...t,id:n}),n},lJ=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",cJ=oJ,uJ=()=>qr.toasts,dJ=()=>qr.getActiveToasts(),Om=Object.assign(cJ,{success:qr.success,info:qr.info,warning:qr.warning,error:qr.error,custom:qr.custom,message:qr.message,promise:qr.promise,dismiss:qr.dismiss,loading:qr.loading},{getHistory:uJ,getToasts:dJ});QX("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function om(e){return e.label!==void 0}const fJ=3,hJ="24px",mJ="16px",I1=4e3,pJ=356,gJ=14,yJ=45,vJ=200;function ui(...e){return e.filter(Boolean).join(" ")}function xJ(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const wJ=e=>{var t,n,r,s,i,l,u,d,f;const{invert:h,toast:m,unstyled:g,interacting:y,setHeights:w,visibleToasts:b,heights:S,index:_,toasts:k,expanded:N,removeToast:T,defaultRichColors:P,closeButton:R,style:M,cancelButtonStyle:A,actionButtonStyle:W,className:K="",descriptionClassName:H="",duration:z,position:L,gap:B,expandByDefault:Q,classNames:q,icons:F,closeButtonAriaLabel:D="Close toast"}=e,[X,I]=oe.useState(null),[V,Z]=oe.useState(null),[O,ce]=oe.useState(!1),[he,me]=oe.useState(!1),[Ce,ge]=oe.useState(!1),[$e,ne]=oe.useState(!1),[We,Ve]=oe.useState(!1),[Ft,Dt]=oe.useState(0),[Pn,wn]=oe.useState(0),bn=oe.useRef(m.duration||z||I1),Rr=oe.useRef(null),Bt=oe.useRef(null),$=_===0,te=_+1<=b,se=m.type,ke=m.dismissible!==!1,_e=m.className||"",xe=m.descriptionClassName||"",ee=oe.useMemo(()=>S.findIndex(ft=>ft.toastId===m.id)||0,[S,m.id]),de=oe.useMemo(()=>{var ft;return(ft=m.closeButton)!=null?ft:R},[m.closeButton,R]),Pe=oe.useMemo(()=>m.duration||z||I1,[m.duration,z]),et=oe.useRef(0),dt=oe.useRef(0),qt=oe.useRef(0),Yn=oe.useRef(null),[Qn,Ir]=L.split("-"),fs=oe.useMemo(()=>S.reduce((ft,_n,zn)=>zn>=ee?ft:ft+_n.height,0),[S,ee]),dn=iJ(),Or=m.invert||h,An=se==="loading";dt.current=oe.useMemo(()=>ee*B+fs,[ee,fs]),oe.useEffect(()=>{bn.current=Pe},[Pe]),oe.useEffect(()=>{ce(!0)},[]),oe.useEffect(()=>{const ft=Bt.current;if(ft){const _n=ft.getBoundingClientRect().height;return wn(_n),w(zn=>[{toastId:m.id,height:_n,position:m.position},...zn]),()=>w(zn=>zn.filter(ur=>ur.toastId!==m.id))}},[w,m.id]),oe.useLayoutEffect(()=>{if(!O)return;const ft=Bt.current,_n=ft.style.height;ft.style.height="auto";const zn=ft.getBoundingClientRect().height;ft.style.height=_n,wn(zn),w(ur=>ur.find(Rn=>Rn.toastId===m.id)?ur.map(Rn=>Rn.toastId===m.id?{...Rn,height:zn}:Rn):[{toastId:m.id,height:zn,position:m.position},...ur])},[O,m.title,m.description,w,m.id,m.jsx,m.action,m.cancel]);const hs=oe.useCallback(()=>{me(!0),Dt(dt.current),w(ft=>ft.filter(_n=>_n.toastId!==m.id)),setTimeout(()=>{T(m)},vJ)},[m,T,w,dt]);oe.useEffect(()=>{if(m.promise&&se==="loading"||m.duration===1/0||m.type==="loading")return;let ft;return N||y||dn?(()=>{if(qt.current<et.current){const ur=new Date().getTime()-et.current;bn.current=bn.current-ur}qt.current=new Date().getTime()})():(()=>{bn.current!==1/0&&(et.current=new Date().getTime(),ft=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),hs()},bn.current))})(),()=>clearTimeout(ft)},[N,y,m,se,dn,hs]),oe.useEffect(()=>{m.delete&&(hs(),m.onDismiss==null||m.onDismiss.call(m,m))},[hs,m.delete]);function ou(){var ft;if(F!=null&&F.loading){var _n;return oe.createElement("div",{className:ui(q==null?void 0:q.loader,m==null||(_n=m.classNames)==null?void 0:_n.loader,"sonner-loader"),"data-visible":se==="loading"},F.loading)}return oe.createElement(ZX,{className:ui(q==null?void 0:q.loader,m==null||(ft=m.classNames)==null?void 0:ft.loader),visible:se==="loading"})}const pa=m.icon||(F==null?void 0:F[se])||XX(se);var Mi,lu;return oe.createElement("li",{tabIndex:0,ref:Bt,className:ui(K,_e,q==null?void 0:q.toast,m==null||(t=m.classNames)==null?void 0:t.toast,q==null?void 0:q.default,q==null?void 0:q[se],m==null||(n=m.classNames)==null?void 0:n[se]),"data-sonner-toast":"","data-rich-colors":(Mi=m.richColors)!=null?Mi:P,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":O,"data-promise":!!m.promise,"data-swiped":We,"data-removed":he,"data-visible":te,"data-y-position":Qn,"data-x-position":Ir,"data-index":_,"data-front":$,"data-swiping":Ce,"data-dismissible":ke,"data-type":se,"data-invert":Or,"data-swipe-out":$e,"data-swipe-direction":V,"data-expanded":!!(N||Q&&O),"data-testid":m.testId,style:{"--index":_,"--toasts-before":_,"--z-index":k.length-_,"--offset":`${he?Ft:dt.current}px`,"--initial-height":Q?"auto":`${Pn}px`,...M,...m.style},onDragEnd:()=>{ge(!1),I(null),Yn.current=null},onPointerDown:ft=>{ft.button!==2&&(An||!ke||(Rr.current=new Date,Dt(dt.current),ft.target.setPointerCapture(ft.pointerId),ft.target.tagName!=="BUTTON"&&(ge(!0),Yn.current={x:ft.clientX,y:ft.clientY})))},onPointerUp:()=>{var ft,_n,zn;if($e||!ke)return;Yn.current=null;const ur=Number(((ft=Bt.current)==null?void 0:ft.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ga=Number(((_n=Bt.current)==null?void 0:_n.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Rn=new Date().getTime()-((zn=Rr.current)==null?void 0:zn.getTime()),Xn=X==="x"?ur:ga,ya=Math.abs(Xn)/Rn;if(Math.abs(Xn)>=yJ||ya>.11){Dt(dt.current),m.onDismiss==null||m.onDismiss.call(m,m),Z(X==="x"?ur>0?"right":"left":ga>0?"down":"up"),hs(),ne(!0);return}else{var ir,Xr;(ir=Bt.current)==null||ir.style.setProperty("--swipe-amount-x","0px"),(Xr=Bt.current)==null||Xr.style.setProperty("--swipe-amount-y","0px")}Ve(!1),ge(!1),I(null)},onPointerMove:ft=>{var _n,zn,ur;if(!Yn.current||!ke||((_n=window.getSelection())==null?void 0:_n.toString().length)>0)return;const Rn=ft.clientY-Yn.current.y,Xn=ft.clientX-Yn.current.x;var ya;const ir=(ya=e.swipeDirections)!=null?ya:xJ(L);!X&&(Math.abs(Xn)>1||Math.abs(Rn)>1)&&I(Math.abs(Xn)>Math.abs(Rn)?"x":"y");let Xr={x:0,y:0};const va=ms=>1/(1.5+Math.abs(ms)/20);if(X==="y"){if(ir.includes("top")||ir.includes("bottom"))if(ir.includes("top")&&Rn<0||ir.includes("bottom")&&Rn>0)Xr.y=Rn;else{const ms=Rn*va(Rn);Xr.y=Math.abs(ms)<Math.abs(Rn)?ms:Rn}}else if(X==="x"&&(ir.includes("left")||ir.includes("right")))if(ir.includes("left")&&Xn<0||ir.includes("right")&&Xn>0)Xr.x=Xn;else{const ms=Xn*va(Xn);Xr.x=Math.abs(ms)<Math.abs(Xn)?ms:Xn}(Math.abs(Xr.x)>0||Math.abs(Xr.y)>0)&&Ve(!0),(zn=Bt.current)==null||zn.style.setProperty("--swipe-amount-x",`${Xr.x}px`),(ur=Bt.current)==null||ur.style.setProperty("--swipe-amount-y",`${Xr.y}px`)}},de&&!m.jsx&&se!=="loading"?oe.createElement("button",{"aria-label":D,"data-disabled":An,"data-close-button":!0,onClick:An||!ke?()=>{}:()=>{hs(),m.onDismiss==null||m.onDismiss.call(m,m)},className:ui(q==null?void 0:q.closeButton,m==null||(r=m.classNames)==null?void 0:r.closeButton)},(lu=F==null?void 0:F.close)!=null?lu:sJ):null,(se||m.icon||m.promise)&&m.icon!==null&&((F==null?void 0:F[se])!==null||m.icon)?oe.createElement("div",{"data-icon":"",className:ui(q==null?void 0:q.icon,m==null||(s=m.classNames)==null?void 0:s.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||ou():null,m.type!=="loading"?pa:null):null,oe.createElement("div",{"data-content":"",className:ui(q==null?void 0:q.content,m==null||(i=m.classNames)==null?void 0:i.content)},oe.createElement("div",{"data-title":"",className:ui(q==null?void 0:q.title,m==null||(l=m.classNames)==null?void 0:l.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?oe.createElement("div",{"data-description":"",className:ui(H,xe,q==null?void 0:q.description,m==null||(u=m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),oe.isValidElement(m.cancel)?m.cancel:m.cancel&&om(m.cancel)?oe.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||A,onClick:ft=>{om(m.cancel)&&ke&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,ft),hs())},className:ui(q==null?void 0:q.cancelButton,m==null||(d=m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,oe.isValidElement(m.action)?m.action:m.action&&om(m.action)?oe.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||W,onClick:ft=>{om(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,ft),!ft.defaultPrevented&&hs())},className:ui(q==null?void 0:q.actionButton,m==null||(f=m.classNames)==null?void 0:f.actionButton)},m.action.label):null)};function O1(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function bJ(e,t){const n={};return[e,t].forEach((r,s)=>{const i=s===1,l=i?"--mobile-offset":"--offset",u=i?mJ:hJ;function d(f){["top","right","bottom","left"].forEach(h=>{n[`${l}-${h}`]=typeof f=="number"?`${f}px`:f})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(f=>{r[f]===void 0?n[`${l}-${f}`]=u:n[`${l}-${f}`]=typeof r[f]=="number"?`${r[f]}px`:r[f]}):d(u)}),n}const _J=oe.forwardRef(function(t,n){const{id:r,invert:s,position:i="bottom-right",hotkey:l=["altKey","KeyT"],expand:u,closeButton:d,className:f,offset:h,mobileOffset:m,theme:g="light",richColors:y,duration:w,style:b,visibleToasts:S=fJ,toastOptions:_,dir:k=O1(),gap:N=gJ,icons:T,containerAriaLabel:P="Notifications"}=t,[R,M]=oe.useState([]),A=oe.useMemo(()=>r?R.filter(O=>O.toasterId===r):R.filter(O=>!O.toasterId),[R,r]),W=oe.useMemo(()=>Array.from(new Set([i].concat(A.filter(O=>O.position).map(O=>O.position)))),[A,i]),[K,H]=oe.useState([]),[z,L]=oe.useState(!1),[B,Q]=oe.useState(!1),[q,F]=oe.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=oe.useRef(null),X=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=oe.useRef(null),V=oe.useRef(!1),Z=oe.useCallback(O=>{M(ce=>{var he;return(he=ce.find(me=>me.id===O.id))!=null&&he.delete||qr.dismiss(O.id),ce.filter(({id:me})=>me!==O.id)})},[]);return oe.useEffect(()=>qr.subscribe(O=>{if(O.dismiss){requestAnimationFrame(()=>{M(ce=>ce.map(he=>he.id===O.id?{...he,delete:!0}:he))});return}setTimeout(()=>{AP.flushSync(()=>{M(ce=>{const he=ce.findIndex(me=>me.id===O.id);return he!==-1?[...ce.slice(0,he),{...ce[he],...O},...ce.slice(he+1)]:[O,...ce]})})})}),[R]),oe.useEffect(()=>{if(g!=="system"){F(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window>"u")return;const O=window.matchMedia("(prefers-color-scheme: dark)");try{O.addEventListener("change",({matches:ce})=>{F(ce?"dark":"light")})}catch{O.addListener(({matches:he})=>{try{F(he?"dark":"light")}catch(me){console.error(me)}})}},[g]),oe.useEffect(()=>{R.length<=1&&L(!1)},[R]),oe.useEffect(()=>{const O=ce=>{var he;if(l.every(ge=>ce[ge]||ce.code===ge)){var Ce;L(!0),(Ce=D.current)==null||Ce.focus()}ce.code==="Escape"&&(document.activeElement===D.current||(he=D.current)!=null&&he.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[l]),oe.useEffect(()=>{if(D.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,V.current=!1)}},[D.current]),oe.createElement("section",{ref:n,"aria-label":`${P} ${X}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},W.map((O,ce)=>{var he;const[me,Ce]=O.split("-");return A.length?oe.createElement("ol",{key:O,dir:k==="auto"?O1():k,tabIndex:-1,ref:D,className:f,"data-sonner-toaster":!0,"data-sonner-theme":q,"data-y-position":me,"data-x-position":Ce,style:{"--front-toast-height":`${((he=K[0])==null?void 0:he.height)||0}px`,"--width":`${pJ}px`,"--gap":`${N}px`,...b,...bJ(h,m)},onBlur:ge=>{V.current&&!ge.currentTarget.contains(ge.relatedTarget)&&(V.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:ge=>{ge.target instanceof HTMLElement&&ge.target.dataset.dismissible==="false"||V.current||(V.current=!0,I.current=ge.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{B||L(!1)},onDragEnd:()=>L(!1),onPointerDown:ge=>{ge.target instanceof HTMLElement&&ge.target.dataset.dismissible==="false"||Q(!0)},onPointerUp:()=>Q(!1)},A.filter(ge=>!ge.position&&ce===0||ge.position===O).map((ge,$e)=>{var ne,We;return oe.createElement(wJ,{key:ge.id,icons:T,index:$e,toast:ge,defaultRichColors:y,duration:(ne=_==null?void 0:_.duration)!=null?ne:w,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:s,visibleToasts:S,closeButton:(We=_==null?void 0:_.closeButton)!=null?We:d,interacting:B,position:O,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,closeButtonAriaLabel:_==null?void 0:_.closeButtonAriaLabel,removeToast:Z,toasts:A.filter(Ve=>Ve.position==ge.position),heights:K.filter(Ve=>Ve.position==ge.position),setHeights:H,expandByDefault:u,gap:N,expanded:z,swipeDirections:t.swipeDirections})})):null}))});function QI(e){return a.jsx(_J,{position:"top-right",closeButton:!0,richColors:!0,...e})}QI.propTypes={position:Ln.string};function up(e,t){return Om(e,t)}const gc={show:up,success:(e,t)=>Om.success(e,t),error:(e,t)=>Om.error(e,t),promise:Om.promise};function SJ(){const[e,t]=x.useState([]),[n,r]=x.useState([]),s=uf(),{data:i}=vr(),l=s,u=x.useMemo(()=>{const y={};return s&&(y["x-user-id"]=s),i!=null&&i.districtId&&(y["x-district-id"]=i.districtId),i!=null&&i.schoolId&&(y["x-school-id"]=i.schoolId),y},[s,i==null?void 0:i.districtId,i==null?void 0:i.schoolId]),d=async()=>{try{const[y,w]=await Promise.all([fetch(`${vt}/incentives`,{headers:u}).then(b=>b.json()),l?fetch(`${vt}/incentives/applications/${l}`,{headers:u}).then(b=>b.json()):Promise.resolve([])]);t(y||[]),r(w||[])}catch(y){console.error("Failed to load incentives:",y),gc.error("Unable to load incentives."),t([]),r([])}};x.useEffect(()=>{d()},[u,l]);const f=async y=>{try{await fetch(`${vt}/incentives/${y}/apply`,{method:"POST",headers:{"Content-Type":"application/json",...u},body:JSON.stringify({partnerId:l})}),d()}catch(w){console.error("Failed to apply for incentive:",w),gc.error("Unable to apply for this incentive.")}},h=async y=>{try{await fetch(`${vt}/incentives/${y}/claim`,{method:"POST",headers:{"Content-Type":"application/json",...u},body:JSON.stringify({partnerId:l})}),d()}catch(w){console.error("Failed to claim incentive:",w),gc.error("Unable to claim this incentive.")}},m=Object.fromEntries(n.map(y=>[y.incentive_id,y])),g=y=>y?y.status==="earned"?{label:"Earned",variant:"default"}:y.status==="approved"?{label:"Approved",variant:"default"}:y.status==="rejected"?{label:"Rejected",variant:"destructive"}:{label:y.status||"Pending",variant:"secondary"}:{label:"Not Applied",variant:"secondary"};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6",children:a.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[a.jsxs("header",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Incentives"}),a.jsx("p",{className:"text-gray-600",children:"Track incentive programs, claim earned rewards, and monitor payout status."})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{className:"text-xl",children:"Available programs"})}),a.jsx(Te,{children:e.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:"No incentive programs available yet."}):a.jsxs(yo,{children:[a.jsx(vo,{children:a.jsxs(Cn,{children:[a.jsx(kt,{children:"Program"}),a.jsx(kt,{children:"Description"}),a.jsx(kt,{children:"Value"}),a.jsx(kt,{children:"Status"}),a.jsx(kt,{className:"text-right",children:"Action"})]})}),a.jsx(xo,{children:e.map(y=>{const w=m[y.id],b=g(w),S=y.value?`$${y.value}`:"",_=(w==null?void 0:w.status)==="earned";return a.jsxs(Cn,{children:[a.jsx(mt,{className:"font-medium",children:y.title}),a.jsx(mt,{className:"text-muted-foreground",children:y.description}),a.jsx(mt,{children:S}),a.jsx(mt,{children:a.jsx(sr,{variant:b.variant,children:b.label})}),a.jsxs(mt,{className:"text-right",children:[!w&&a.jsx(we,{size:"sm",onClick:()=>f(y.id),children:"Apply"}),_&&a.jsx(we,{size:"sm",onClick:()=>h(y.id),children:"Claim"}),w&&!_&&a.jsx("span",{className:"text-xs text-muted-foreground",children:""})]})]},y.id)})})]})})]})]})})}function XI(){return a.jsx(gt,{allowedRoles:["partner","admin","system_admin"],requireAuth:!0,children:a.jsx(SJ,{})})}const jJ=Object.freeze(Object.defineProperty({__proto__:null,default:XI},Symbol.toStringTag,{value:"Module"}));function EJ(e){var n,r,s,i;if(!e)return null;const t=((n=e==null?void 0:e.metadata)==null?void 0:n.role)||((r=e==null?void 0:e.roles)==null?void 0:r[0])||(e==null?void 0:e.defaultRole)||"parent";return{...e,role:t,preferred_active_role:((s=e==null?void 0:e.metadata)==null?void 0:s.preferred_active_role)||t,full_name:(e==null?void 0:e.displayName)||((i=e==null?void 0:e.metadata)==null?void 0:i.full_name)||(e==null?void 0:e.email)}}function kJ(){const e={list:async()=>[],filter:async()=>[],get:async()=>null,create:async()=>{throw new Error("Entities backend not wired yet (stub).")},update:async()=>{throw new Error("Entities backend not wired yet (stub).")},delete:async()=>{throw new Error("Entities backend not wired yet (stub).")}};return new Proxy({},{get:()=>e})}function NJ(){return{auth:{me:async()=>{const e=typeof Nt.auth.getUser=="function"?Nt.auth.getUser():null;return EJ(e)},logout:async()=>{if(typeof Nt.auth.signOut=="function"){const e=await Nt.auth.signOut();if(e!=null&&e.error)throw e.error}},updateMe:async()=>{throw new Error("updateMe not implemented for Nhost-backed compat client yet.")}},entities:kJ(),functions:{invoke:async(e,t={})=>{var r;if(!((r=Nt.functions)!=null&&r.call))throw new Error("Nhost functions not configured.");const n=await Nt.functions.call(e,t);if(n!=null&&n.error)throw n.error;return n==null?void 0:n.data}}}}const le=NJ();le.entities.AIConversation;le.entities.AIUsageLog;le.entities.AccessibilityPreference;le.entities.AccountDeactivationRequest;le.entities.Achievement;const ble=le.entities.Activity;le.entities.Announcement;le.entities.Assignment;le.entities.AssignmentTopic;le.entities.AuditLog;le.entities.Behavior;const _le=le.entities.CalendarEvent;le.entities.Challenge;le.entities.ChallengeParticipation;le.entities.Child;le.entities.ChildSkillTrack;le.entities.Class;le.entities.ClassLinkAudit;const TJ=le.entities.Comment;le.entities.CommunityGuideline;const hd=le.entities.CommunityVisibility;le.entities.ContactImport;const CJ=le.entities.Conversation;le.entities.ConversationMember;const Sle=le.entities.Course;le.entities.CurriculumStandard;le.entities.District;const jle=le.entities.Enrollment;le.entities.Entitlement;le.entities.Event;le.entities.EventAttendance;le.entities.EventFeedback;le.entities.EventRSVP;le.entities.FeatureFlag;le.entities.Follow;le.entities.ImportLog;le.entities.InAppNotification;le.entities.IntegrationAudit;le.entities.Invitation;le.entities.JoinRequest;le.entities.JournalEntry;const Yv=le.entities.Kudo;le.entities.Leaderboard;le.entities.LearningSummary;le.entities.LessonPlan;le.entities.LibraryResource;le.entities.LicenseAllocation;const PJ=le.entities.Like;le.entities.LocalEvent;le.entities.MentorProfile;le.entities.Mentorship;const D1=le.entities.Message;le.entities.MessageReaction;le.entities.ModerationAction;le.entities.ModerationReport;le.entities.Notification;le.entities.OfficeHours;le.entities.PTADocument;le.entities.PageVisit;le.entities.ParentingTip;le.entities.Partner;le.entities.PartnerEvent;const kd=le.entities.PartnerOffer;le.entities.PartnerResource;le.entities.Permission;const AJ=le.entities.Pod;le.entities.PodChallenge;const RJ=le.entities.PodMember;le.entities.PointTransaction;const IJ=le.entities.Poll;le.entities.PollVote;const Mw=le.entities.Post;le.entities.PrivacyRequest;le.entities.Product;le.entities.Referral;const M1=le.entities.ReferralCode;le.entities.Report;le.entities.Resource;le.entities.RewardItem;le.entities.Routine;le.entities.RoutineInstance;le.entities.School;le.entities.SchoolAdmin;le.entities.SchoolDirectory;le.entities.SchoolDirectoryMonitoring;le.entities.SchoolDirectoryVersion;le.entities.SchoolEvent;le.entities.SchoolIntegration;le.entities.SchoolParticipationRequest;le.entities.SchoolRequest;le.entities.SchoolResource;le.entities.Short;le.entities.ShortExposure;le.entities.ShortFeedback;le.entities.ShortFormVideo;le.entities.ShortRenderJob;le.entities.ShortScene;le.entities.ShortTemplate;le.entities.ShortWatchEvent;le.entities.SkillTrack;le.entities.Sponsorship;const Qv=le.entities.SponsorshipPartner;le.entities.Story;le.entities.Student;le.entities.StudentParentLink;le.entities.Subscription;le.entities.SubscriptionPlan;le.entities.Survey;const OJ=le.entities.Task;le.entities.TeacherClassAssignment;le.entities.TeacherFeedback;le.entities.Translation;const dp=le.entities.User;le.entities.UserAchievement;le.entities.UserActivity;le.entities.UserBookmark;le.entities.UserContent;le.entities.UserConversation;le.entities.UserFeedback;le.entities.UserLicense;le.entities.UserMessage;le.entities.UserNotificationSetting;le.entities.UserOfferSave;le.entities.UserProfile;le.entities.UserRedemption;le.entities.UxAnalytic;le.entities.Workshop;le.entities.WorkshopRegistration;const DJ=le,ye=DJ;ye.entities.Child;ye.entities.ParentingTip;ye.entities.Activity;ye.entities.LocalEvent;ye.entities.LibraryResource;ye.entities.UserBookmark;ye.entities.UserActivity;ye.entities.Achievement;ye.entities.UserAchievement;ye.entities.Product;ye.entities.Post;ye.entities.Comment;ye.entities.Like;ye.entities.Follow;ye.entities.Pod;ye.entities.PodMember;ye.entities.Invitation;ye.entities.EventFeedback;ye.entities.EventAttendance;ye.entities.Kudo;ye.entities.CalendarEvent;ye.entities.PollVote;ye.entities.PodChallenge;ye.entities.ContactImport;ye.entities.SkillTrack;ye.entities.ChildSkillTrack;ye.entities.JoinRequest;ye.entities.JournalEntry;ye.entities.UserMessage;ye.entities.UserConversation;ye.entities.Student;ye.entities.Course;ye.entities.Enrollment;ye.entities.Assignment;ye.entities.School;ye.entities.District;ye.entities.StudentParentLink;ye.entities.TeacherClassAssignment;ye.entities.Announcement;ye.entities.SchoolEvent;ye.entities.EventRSVP;ye.entities.Notification;ye.entities.InAppNotification;ye.entities.CommunityVisibility;ye.entities.UserProfile;ye.entities.SchoolDirectory;ye.entities.SchoolParticipationRequest;ye.entities.Partner;ye.entities.PartnerEvent;ye.entities.PartnerResource;ye.entities.PartnerOffer;ye.entities.UserOfferSave;ye.entities.ModerationReport;ye.entities.CommunityGuideline;ye.entities.ModerationAction;ye.entities.Conversation;ye.entities.ConversationMember;ye.entities.Message;ye.entities.MessageReaction;ye.entities.Translation;ye.entities.Poll;ye.entities.Task;ye.entities.FeatureFlag;ye.entities.AIConversation;ye.entities.AccessibilityPreference;ye.entities.PTADocument;ye.entities.SponsorshipPartner;ye.entities.ReferralCode;ye.entities.PrivacyRequest;ye.entities.AssignmentTopic;ye.entities.Short;ye.entities.ShortExposure;ye.entities.ShortTemplate;ye.entities.ShortScene;ye.entities.ShortRenderJob;ye.entities.ShortFeedback;ye.entities.ShortWatchEvent;ye.entities.SchoolResource;ye.entities.ImportLog;ye.entities.CurriculumStandard;ye.entities.UserContent;ye.entities.Mentorship;ye.entities.MentorProfile;ye.entities.Challenge;ye.entities.ChallengeParticipation;ye.entities.Workshop;ye.entities.WorkshopRegistration;ye.entities.LicenseAllocation;ye.entities.UserLicense;ye.entities.UserFeedback;ye.entities.PageVisit;ye.entities.UserNotificationSetting;ye.entities.PointTransaction;ye.entities.RewardItem;ye.entities.UserRedemption;ye.entities.Leaderboard;ye.entities.AuditLog;const MJ=ye.entities.WeeklyBrief,LJ={WeeklyBrief:MJ},Xv={};var Jv={};const FJ=()=>{if(typeof import.meta<"u"){const e=Xv==null?void 0:Xv.VITE_NHOST_FUNCTIONS_URL;if(e)return e}if(typeof process<"u"){const e=Jv==null?void 0:Jv.VITE_NHOST_FUNCTIONS_URL;if(e)return e}return"/v1/functions"},$J=FJ(),VJ=async(e,t={},n={})=>{const{method:r="POST",headers:s={},...i}=n,l={"Content-Type":"application/json",...s},u={method:r,headers:l,...i};t instanceof FormData?(u.body=t,delete l["Content-Type"]):t&&Object.keys(t).length>0&&(u.body=JSON.stringify(t));const d=await fetch(`${$J}/${e}`,u);if(!d.ok){const h=await d.text().catch(()=>d.statusText);throw new Error(`Nhost function ${e} failed (${d.status}): ${h}`)}return d.status===204?null:(d.headers.get("content-type")||"").includes("application/json")?d.json():d.text()},st=(e,t={})=>(n,r={})=>VJ(e,n,{...t,...r}),JI=st("googleClassroomSync"),ZI=st("googleAuth"),eO=st("syncSISData"),tO=st("bulkUserManagement"),nO=st("assignDefaultPermissions"),rO=st("getGoogleAuthUrl"),sO=st("calendarSync"),iO=st("notificationSettings"),aO=st("aiActivitySuggestions"),oO=st("getAdminAnalytics"),lO=st("priorityNotifications"),cO=st("eventSubscriptions"),uO=st("realEventSearch"),dO=st("getSchoolIntegrationStatus"),fO=st("submitSchoolParticipationRequest"),hO=st("manageSchoolRequests"),mO=st("populateSchoolDirectory"),pO=st("createStripeCheckout"),gO=st("stripeWebhook"),yO=st("intelligentNotifications"),vO=st("schoolDirectoryETL"),xO=st("searchSchools"),wO=st("schoolDirectoryMonitoring"),bO=st("handleGoogleDisconnect"),_O=st("moderateContent"),SO=st("submitReport"),jO=st("invokeAdvancedAI"),EO=st("translateMessage"),kO=st("awardPodChallengePoints"),NO=st("applyReferralCode"),TO=st("manageSponsorships"),CO=st("submitPrivacyRequest"),PO=st("shortsGeneration"),AO=st("shortsAdmin"),RO=st("shortsTelemetry"),IO=st("shortsRecommendations"),OO=st("takeModerationAction"),DO=st("advancedAIHomeworkHelper"),MO=st("generateCurriculumAlignedActivities"),LO=st("manageUserContentReview"),FO=st("getUXAnalytics"),$O=st("gamificationEngine"),VO=st("enterpriseAuditLogger"),zO=st("enterpriseDataExport"),UO=st("systemHealthMonitor"),BO=st("logAuditEvent"),qO=st("performanceMonitoring"),WO=st("weeklyBriefSummarize"),HO=st("weeklyBriefGenerate"),zJ=Object.freeze(Object.defineProperty({__proto__:null,advancedAIHomeworkHelper:DO,aiActivitySuggestions:aO,applyReferralCode:NO,assignDefaultPermissions:nO,awardPodChallengePoints:kO,bulkUserManagement:tO,calendarSync:sO,createStripeCheckout:pO,enterpriseAuditLogger:VO,enterpriseDataExport:zO,eventSubscriptions:cO,gamificationEngine:$O,generateCurriculumAlignedActivities:MO,getAdminAnalytics:oO,getGoogleAuthUrl:rO,getSchoolIntegrationStatus:dO,getUXAnalytics:FO,googleAuth:ZI,googleClassroomSync:JI,handleGoogleDisconnect:bO,intelligentNotifications:yO,invokeAdvancedAI:jO,logAuditEvent:BO,manageSchoolRequests:hO,manageSponsorships:TO,manageUserContentReview:LO,moderateContent:_O,notificationSettings:iO,performanceMonitoring:qO,populateSchoolDirectory:mO,priorityNotifications:lO,realEventSearch:uO,schoolDirectoryETL:vO,schoolDirectoryMonitoring:wO,searchSchools:xO,shortsAdmin:AO,shortsGeneration:PO,shortsRecommendations:IO,shortsTelemetry:RO,stripeWebhook:gO,submitPrivacyRequest:CO,submitReport:SO,submitSchoolParticipationRequest:fO,syncSISData:eO,systemHealthMonitor:UO,takeModerationAction:OO,translateMessage:EO,weeklyBriefGenerate:HO,weeklyBriefSummarize:WO},Symbol.toStringTag,{value:"Module"})),Gd={...zJ},UJ=Object.freeze(Object.defineProperty({__proto__:null,advancedAIHomeworkHelper:DO,aiActivitySuggestions:aO,applyReferralCode:NO,assignDefaultPermissions:nO,awardPodChallengePoints:kO,base44FunctionsMap:Gd,bulkUserManagement:tO,calendarSync:sO,createStripeCheckout:pO,default:Gd,enterpriseAuditLogger:VO,enterpriseDataExport:zO,eventSubscriptions:cO,gamificationEngine:$O,generateCurriculumAlignedActivities:MO,getAdminAnalytics:oO,getGoogleAuthUrl:rO,getSchoolIntegrationStatus:dO,getUXAnalytics:FO,googleAuth:ZI,googleClassroomSync:JI,handleGoogleDisconnect:bO,intelligentNotifications:yO,invokeAdvancedAI:jO,logAuditEvent:BO,manageSchoolRequests:hO,manageSponsorships:TO,manageUserContentReview:LO,moderateContent:_O,notificationSettings:iO,performanceMonitoring:qO,populateSchoolDirectory:mO,priorityNotifications:lO,realEventSearch:uO,schoolDirectoryETL:vO,schoolDirectoryMonitoring:wO,searchSchools:xO,shortsAdmin:AO,shortsGeneration:PO,shortsRecommendations:IO,shortsTelemetry:RO,stripeWebhook:gO,submitPrivacyRequest:CO,submitReport:SO,submitSchoolParticipationRequest:fO,syncSISData:eO,systemHealthMonitor:UO,takeModerationAction:OO,translateMessage:EO,weeklyBriefGenerate:HO,weeklyBriefSummarize:WO},Symbol.toStringTag,{value:"Module"})),{searchSchools:Ele,getSchoolIntegrationStatus:kle,populateSchoolDirectory:Nle,manageSchoolRequests:Tle}=Gd,{googleClassroomSync:Cle,googleAuth:Ple,getGoogleAuthUrl:Ale,syncSISData:Rle}=Gd,{translateMessage:Ile}=Gd;function BJ({partner:e,offers:t=[],onUpdate:n}){const[r,s]=x.useState(!1),[i,l]=x.useState(null),[u,d]=x.useState(!1),{toast:f}=ds(),[h,m]=x.useState({title:"",description:"",offer_type:"",discount_value:"",original_price:"",discounted_price:"",promo_code:"",redemption_url:"",terms_conditions:"",start_date:"",end_date:"",max_redemptions:"",category:"",min_age:"",max_age:"",image_url:"",tags:[]}),g=()=>{m({title:"",description:"",offer_type:"",discount_value:"",original_price:"",discounted_price:"",promo_code:"",redemption_url:"",terms_conditions:"",start_date:"",end_date:"",max_redemptions:"",category:"",min_age:"",max_age:"",image_url:"",tags:[]}),l(null)},y=S=>{var _,k;m({...S,start_date:S.start_date?new Date(S.start_date).toISOString().slice(0,16):"",end_date:S.end_date?new Date(S.end_date).toISOString().slice(0,16):"",min_age:((_=S.age_range)==null?void 0:_.min_age)||"",max_age:((k=S.age_range)==null?void 0:k.max_age)||"",max_redemptions:S.max_redemptions||"",tags:S.tags||[]}),l(S),s(!0)},w=async S=>{S.preventDefault(),d(!0);try{const _={partner_id:e.id,...h,age_range:h.min_age&&h.max_age?{min_age:parseInt(h.min_age),max_age:parseInt(h.max_age)}:null,max_redemptions:h.max_redemptions?parseInt(h.max_redemptions):null,status:"pending_review"};i?(await kd.update(i.id,_),f({title:"Offer Updated",description:"Your offer has been updated and is pending review."})):(await kd.create(_),f({title:"Offer Submitted",description:"Your offer has been submitted for review."})),s(!1),g(),n()}catch(_){console.error("Failed to save offer:",_),f({variant:"destructive",title:"Error",description:"Failed to save offer. Please try again."})}finally{d(!1)}},b=async S=>{if(confirm("Are you sure you want to delete this offer?"))try{await kd.delete(S),f({title:"Offer Deleted",description:"Offer has been removed."}),n()}catch{f({variant:"destructive",title:"Error",description:"Failed to delete offer."})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Deals & Offers"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Create special deals and discounts for families"})]}),a.jsxs(Sb,{open:r,onOpenChange:s,children:[a.jsx(E8,{asChild:!0,children:a.jsxs(we,{disabled:e.status!=="approved",onClick:()=>{g(),s(!0)},children:[a.jsx(sl,{className:"w-4 h-4 mr-2"}),"Create Offer"]})}),a.jsxs(Gp,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx(jb,{children:a.jsx(Kp,{children:i?"Edit Offer":"Create New Offer"})}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx(De,{htmlFor:"title",children:"Offer Title *"}),a.jsx(be,{id:"title",value:h.title,onChange:S=>m(_=>({..._,title:S.target.value})),placeholder:"e.g., 20% off Summer Camp Registration",required:!0})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx(De,{htmlFor:"description",children:"Description *"}),a.jsx(an,{id:"description",value:h.description,onChange:S=>m(_=>({..._,description:S.target.value})),rows:3,placeholder:"Describe what makes this offer special...",required:!0})]}),a.jsxs("div",{children:[a.jsx(De,{children:"Offer Type *"}),a.jsxs(ln,{value:h.offer_type,onValueChange:S=>m(_=>({..._,offer_type:S})),children:[a.jsx(nn,{children:a.jsx(rn,{placeholder:"Select offer type"})}),a.jsxs(sn,{children:[a.jsx(qe,{value:"percentage_discount",children:"Percentage Discount"}),a.jsx(qe,{value:"fixed_amount",children:"Fixed Amount Off"}),a.jsx(qe,{value:"bogo",children:"Buy One Get One"}),a.jsx(qe,{value:"free_trial",children:"Free Trial"}),a.jsx(qe,{value:"bundle_deal",children:"Bundle Deal"}),a.jsx(qe,{value:"other",children:"Other"})]})]})]}),a.jsxs("div",{children:[a.jsx(De,{htmlFor:"discount_value",children:"Discount Value *"}),a.jsx(be,{id:"discount_value",value:h.discount_value,onChange:S=>m(_=>({..._,discount_value:S.target.value})),placeholder:"e.g., 20%, $10 off, BOGO",required:!0})]}),a.jsxs("div",{children:[a.jsx(De,{htmlFor:"original_price",children:"Original Price"}),a.jsx(be,{id:"original_price",value:h.original_price,onChange:S=>m(_=>({..._,original_price:S.target.value})),placeholder:"e.g., $50"})]}),a.jsxs("div",{children:[a.jsx(De,{htmlFor:"discounted_price",children:"Discounted Price"}),a.jsx(be,{id:"discounted_price",value:h.discounted_price,onChange:S=>m(_=>({..._,discounted_price:S.target.value})),placeholder:"e.g., $40"})]}),a.jsxs("div",{children:[a.jsx(De,{htmlFor:"promo_code",children:"Promo Code"}),a.jsx(be,{id:"promo_code",value:h.promo_code,onChange:S=>m(_=>({..._,promo_code:S.target.value})),placeholder:"e.g., SAVE20"})]}),a.jsxs("div",{children:[a.jsx(De,{children:"Category *"}),a.jsxs(ln,{value:h.category,onValueChange:S=>m(_=>({..._,category:S})),children:[a.jsx(nn,{children:a.jsx(rn,{placeholder:"Select category"})}),a.jsxs(sn,{children:[a.jsx(qe,{value:"educational",children:"Educational"}),a.jsx(qe,{value:"recreational",children:"Recreational"}),a.jsx(qe,{value:"health",children:"Health & Wellness"}),a.jsx(qe,{value:"arts",children:"Arts & Crafts"}),a.jsx(qe,{value:"sports",children:"Sports"}),a.jsx(qe,{value:"community",children:"Community"}),a.jsx(qe,{value:"products",children:"Products"}),a.jsx(qe,{value:"services",children:"Services"}),a.jsx(qe,{value:"other",children:"Other"})]})]})]}),a.jsxs("div",{children:[a.jsx(De,{htmlFor:"start_date",children:"Start Date"}),a.jsx(be,{id:"start_date",type:"datetime-local",value:h.start_date,onChange:S=>m(_=>({..._,start_date:S.target.value}))})]}),a.jsxs("div",{children:[a.jsx(De,{htmlFor:"end_date",children:"End Date *"}),a.jsx(be,{id:"end_date",type:"datetime-local",value:h.end_date,onChange:S=>m(_=>({..._,end_date:S.target.value})),required:!0})]}),a.jsxs("div",{children:[a.jsx(De,{htmlFor:"min_age",children:"Min Age"}),a.jsx(be,{id:"min_age",type:"number",min:"0",max:"18",value:h.min_age,onChange:S=>m(_=>({..._,min_age:S.target.value}))})]}),a.jsxs("div",{children:[a.jsx(De,{htmlFor:"max_age",children:"Max Age"}),a.jsx(be,{id:"max_age",type:"number",min:"0",max:"18",value:h.max_age,onChange:S=>m(_=>({..._,max_age:S.target.value}))})]}),a.jsxs("div",{children:[a.jsx(De,{htmlFor:"max_redemptions",children:"Max Redemptions"}),a.jsx(be,{id:"max_redemptions",type:"number",min:"1",value:h.max_redemptions,onChange:S=>m(_=>({..._,max_redemptions:S.target.value})),placeholder:"Leave blank for unlimited"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx(De,{htmlFor:"redemption_url",children:"Redemption URL"}),a.jsx(be,{id:"redemption_url",type:"url",value:h.redemption_url,onChange:S=>m(_=>({..._,redemption_url:S.target.value})),placeholder:"https://yoursite.com/offer"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx(De,{htmlFor:"image_url",children:"Promotional Image URL"}),a.jsx(be,{id:"image_url",type:"url",value:h.image_url,onChange:S=>m(_=>({..._,image_url:S.target.value})),placeholder:"https://..."})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx(De,{htmlFor:"terms_conditions",children:"Terms & Conditions"}),a.jsx(an,{id:"terms_conditions",value:h.terms_conditions,onChange:S=>m(_=>({..._,terms_conditions:S.target.value})),rows:3,placeholder:"Enter any terms, restrictions, or conditions..."})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(we,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),a.jsxs(we,{type:"submit",disabled:u,children:[u&&a.jsx(Mc,{className:"w-4 h-4 animate-spin mr-2"}),i?"Update Offer":"Submit Offer"]})]})]})]})]})]}),a.jsxs("div",{className:"grid gap-4",children:[t.map(S=>a.jsx(Ne,{children:a.jsx(Te,{className:"pt-6",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h3",{className:"font-semibold text-lg",children:S.title}),a.jsx(sr,{className:S.status==="published"?"bg-green-100 text-green-800":S.status==="approved"?"bg-blue-100 text-blue-800":S.status==="pending_review"?"bg-yellow-100 text-yellow-800":S.status==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800",children:S.status.replace("_"," ")}),a.jsxs(sr,{variant:"outline",className:"bg-purple-50 text-purple-700",children:[a.jsx(AN,{className:"w-3 h-3 mr-1"}),S.discount_value]})]}),a.jsx("p",{className:"text-gray-600 mb-2",children:S.description}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-gray-600",children:[a.jsxs("div",{children:["Category: ",S.category]}),a.jsxs("div",{children:["Expires: ",new Date(S.end_date).toLocaleDateString()]}),S.impressions>0&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(RH,{className:"w-4 h-4"}),S.impressions," views"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(KH,{className:"w-4 h-4"}),S.clicks," clicks  ",S.saves," saves"]})]})]}),S.status==="rejected"&&S.rejection_reason&&a.jsxs("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-800",children:[a.jsx("strong",{children:"Rejection Reason:"})," ",S.rejection_reason]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(we,{size:"sm",variant:"outline",onClick:()=>y(S),children:a.jsx(l8,{className:"w-4 h-4"})}),a.jsx(we,{size:"sm",variant:"outline",onClick:()=>b(S.id),children:a.jsx(d8,{className:"w-4 h-4"})})]})]})})},S.id)),t.length===0&&a.jsx(Ne,{children:a.jsxs(Te,{className:"pt-6 text-center",children:[a.jsx(AN,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-600",children:"No offers yet. Create your first deal to get started!"})]})})]})]})}function lm({className:e,...t}){const n=["animate-pulse rounded-md bg-gray-200/80",e].filter(Boolean).join(" ");return a.jsx("div",{className:n,...t})}const qJ=x.forwardRef(({className:e,variant:t,...n},r)=>a.jsx("div",{ref:r,role:"alert",className:Ot("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{"bg-background text-foreground":!t,"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive":t==="destructive"},e),...n}));qJ.displayName="Alert";const WJ=x.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:Ot("text-sm [&_p]:leading-relaxed",e),...t}));WJ.displayName="AlertDescription";const HJ=x.forwardRef(({className:e,...t},n)=>a.jsx("h5",{ref:n,className:Ot("mb-1 font-medium leading-none tracking-tight",e),...t}));HJ.displayName="AlertTitle";function Nd({size:e="default",text:t,message:n,className:r=""}){const s={sm:"w-4 h-4",default:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},i=t??n??"Loading...";return a.jsxs("div",{className:`flex items-center justify-center gap-2 ${r}`,children:[a.jsx(Mc,{className:`${s[e]} animate-spin text-blue-600`}),i&&a.jsx("span",{className:"text-sm text-gray-600 animate-pulse",children:i})]})}function Lw({title:e="No items found",description:t="Get started by adding your first item.",action:n=null,icon:r=null,className:s=""}){return a.jsxs("div",{className:`text-center space-y-4 p-8 ${s}`,children:[r&&a.jsx("div",{className:"flex justify-center",children:a.jsx(r,{className:"w-12 h-12 text-gray-400"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e}),a.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:t})]}),n]})}Ln.number;function GO({label:e="Loading"}){return a.jsx("div",{className:"min-h-[40vh] flex items-center justify-center",children:a.jsx(Nd,{message:e})})}GO.propTypes={label:Ln.string};const L1=Ii("partner-offers");function GJ(){const[e,t]=x.useState(!0),[n,r]=x.useState(null),[s,i]=x.useState([]);x.useEffect(()=>{(async()=>{try{t(!0);const d=await le.auth.me(),f=await le.entities.Partner.filter({}),h=(f||[]).find(m=>m.owner_id?m.owner_id===d.id:m.user_id===d.id)||(f||[])[0];if(r(h||null),h){const m=await kd.filter({partner_id:h.id});i(m||[])}}catch(d){L1.error("Failed to load offers data",d),gc.error("Failed to load offers")}finally{t(!1)}})()},[]);const l=async()=>{if(n)try{const u=await kd.filter({partner_id:n.id});i(u||[])}catch(u){L1.error("Failed to refresh offers",u),gc.error("Failed to refresh offers")}};return e?a.jsx(GO,{label:"Loading offers..."}):n?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6",children:a.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Manage Your Offers"}),a.jsx("p",{className:"text-gray-600",children:"Create, edit and manage special offers, discounts and promotions for Teachmo families. Use clear descriptions and appropriate terms to attract the right audience."})]}),a.jsx(Ne,{children:a.jsx(Te,{className:"p-6",children:a.jsx(BJ,{partner:n,offers:s,onUpdate:l})})})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:a.jsxs(Ne,{className:"max-w-md text-center",children:[a.jsx(Oe,{children:a.jsx(Le,{className:"text-xl font-semibold",children:"Become a Teachmo Partner"})}),a.jsxs(Te,{children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"To manage offers and discounts, you'll need to submit a partner application and be approved by an administrator. Please visit the Partner Portal to start your submission."}),a.jsx("a",{href:"/partners",className:"inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Go to Partner Portal"})]})]})})}function KO(){return a.jsx(gt,{allowedRoles:["partner","admin","system_admin"],requireAuth:!0,children:a.jsx(GJ,{})})}const KJ=Object.freeze(Object.defineProperty({__proto__:null,default:KO},Symbol.toStringTag,{value:"Module"}));function YJ(){return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsxs("header",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Billing & Payouts"}),a.jsx("p",{className:"text-gray-600",children:"Track payout history, manage payout preferences, and review billing details for your partner account."})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsx(Le,{className:"text-xl",children:"Payout settings (coming soon)"})}),a.jsxs(Te,{className:"space-y-3 text-sm text-gray-600",children:[a.jsx("p",{children:"We're preparing integrations with payment processors so you can choose how and when payouts are issued. You'll be able to connect bank accounts, see payout schedules, and download invoices here."}),a.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[a.jsx("li",{children:"Configure payout schedules and payment methods."}),a.jsx("li",{children:"Download monthly payout statements."}),a.jsx("li",{children:"Review invoices and tax documentation."})]})]})]})]})})}function YO(){return a.jsx(gt,{allowedRoles:["partner","admin","system_admin"],requireAuth:!0,children:a.jsx(YJ,{})})}const QJ=Object.freeze(Object.defineProperty({__proto__:null,default:YO},Symbol.toStringTag,{value:"Module"}));function XJ({onSave:e,onCancel:t}){const[n,r]=x.useState({name:"",contact_name:"",contact_email:"",benefit_type:"discount_percentage",benefit_value:"",licenses_allocated:"",start_date:"",end_date:"",is_active:!0}),[s,i]=x.useState({}),[l,u]=x.useState(!1),d=(m,g)=>{r(y=>({...y,[m]:g})),s[m]&&i(y=>({...y,[m]:null}))},f=()=>{const m={};return n.name.trim()||(m.name="Organization name is required"),n.contact_name.trim()||(m.contact_name="Contact name is required"),n.contact_email.trim()?/\S+@\S+\.\S+/.test(n.contact_email)||(m.contact_email="Invalid email format"):m.contact_email="Contact email is required",n.benefit_type==="discount_percentage"&&(!n.benefit_value||n.benefit_value<1||n.benefit_value>100)&&(m.benefit_value="Discount must be between 1% and 100%"),(!n.licenses_allocated||n.licenses_allocated<1)&&(m.licenses_allocated="Must allocate at least 1 license"),n.start_date||(m.start_date="Start date is required"),n.end_date||(m.end_date="End date is required"),n.start_date&&n.end_date&&new Date(n.start_date)>=new Date(n.end_date)&&(m.end_date="End date must be after start date"),i(m),Object.keys(m).length===0},h=async m=>{if(m.preventDefault(),!!f()){u(!0);try{const g={...n,benefit_value:n.benefit_type==="full_premium"?null:parseInt(n.benefit_value),licenses_allocated:parseInt(n.licenses_allocated)};await e(g)}catch(g){console.error("Error creating partner:",g)}finally{u(!1)}}};return a.jsx(Bp,{children:a.jsx(Cs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:a.jsx(Cs.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:m=>m.stopPropagation(),className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs(Ne,{className:"shadow-2xl",children:[a.jsxs(Oe,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsx(RR,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx(Le,{children:"Create Sponsorship Partner"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Add a new corporate partner with benefits"})]})]}),a.jsx(we,{variant:"ghost",size:"sm",onClick:t,children:a.jsx(Wd,{className:"w-4 h-4"})})]}),a.jsx(Te,{children:a.jsxs("form",{onSubmit:h,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Organization Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(De,{htmlFor:"name",children:"Organization Name *"}),a.jsx(be,{id:"name",value:n.name,onChange:m=>d("name",m.target.value),className:s.name?"border-red-500":"",placeholder:"Google, Microsoft, etc."}),s.name&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.name})]}),a.jsxs("div",{children:[a.jsx(De,{htmlFor:"contact_name",children:"Contact Person *"}),a.jsx(be,{id:"contact_name",value:n.contact_name,onChange:m=>d("contact_name",m.target.value),className:s.contact_name?"border-red-500":"",placeholder:"John Smith"}),s.contact_name&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.contact_name})]})]}),a.jsxs("div",{children:[a.jsx(De,{htmlFor:"contact_email",children:"Contact Email *"}),a.jsx(be,{id:"contact_email",type:"email",value:n.contact_email,onChange:m=>d("contact_email",m.target.value),className:s.contact_email?"border-red-500":"",placeholder:"partner@company.com"}),s.contact_email&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.contact_email})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Benefit Configuration"}),a.jsxs("div",{children:[a.jsx(De,{children:"Benefit Type *"}),a.jsxs(ln,{value:n.benefit_type,onValueChange:m=>d("benefit_type",m),children:[a.jsx(nn,{className:"mt-2",children:a.jsx(rn,{placeholder:"Select benefit type"})}),a.jsxs(sn,{children:[a.jsx(qe,{value:"full_premium",children:"Full Premium Access"}),a.jsx(qe,{value:"discount_percentage",children:"Percentage Discount"})]})]})]}),n.benefit_type==="discount_percentage"&&a.jsxs("div",{children:[a.jsx(De,{htmlFor:"benefit_value",children:"Discount Percentage *"}),a.jsxs("div",{className:"relative mt-2",children:[a.jsx(be,{id:"benefit_value",type:"number",min:"1",max:"100",value:n.benefit_value,onChange:m=>d("benefit_value",m.target.value),className:s.benefit_value?"border-red-500 pr-8":"pr-8",placeholder:"50"}),a.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:a.jsx("span",{className:"text-gray-500",children:"%"})})]}),s.benefit_value&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.benefit_value})]}),a.jsxs("div",{children:[a.jsx(De,{htmlFor:"licenses_allocated",children:"Licenses Allocated *"}),a.jsx(be,{id:"licenses_allocated",type:"number",min:"1",value:n.licenses_allocated,onChange:m=>d("licenses_allocated",m.target.value),className:s.licenses_allocated?"border-red-500":"",placeholder:"100"}),s.licenses_allocated&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.licenses_allocated}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total number of users who can redeem codes from this partner"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Partnership Period"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(De,{htmlFor:"start_date",children:"Start Date *"}),a.jsx(be,{id:"start_date",type:"date",value:n.start_date,onChange:m=>d("start_date",m.target.value),className:s.start_date?"border-red-500":""}),s.start_date&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.start_date})]}),a.jsxs("div",{children:[a.jsx(De,{htmlFor:"end_date",children:"End Date *"}),a.jsx(be,{id:"end_date",type:"date",value:n.end_date,onChange:m=>d("end_date",m.target.value),className:s.end_date?"border-red-500":""}),s.end_date&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.end_date})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(we,{type:"button",variant:"outline",onClick:t,disabled:l,children:"Cancel"}),a.jsx(we,{type:"submit",disabled:l,children:l?"Creating...":"Create Partner"})]})]})})]})})})})}function JJ({partner:e,onSave:t,onCancel:n}){const[r,s]=x.useState({code_string:"",redemption_limit:"",expiration_date:"",is_active:!0}),[i,l]=x.useState({}),[u,d]=x.useState(!1),f=()=>{const w=e.name.toUpperCase().replace(/[^A-Z]/g,"").substring(0,4),b=Math.random().toString(36).substring(2,8).toUpperCase(),S=`${w}${b}`;s(_=>({..._,code_string:S}))};oe.useEffect(()=>{r.code_string||f()},[]);const h=(w,b)=>{s(S=>({...S,[w]:b})),i[w]&&l(S=>({...S,[w]:null}))},m=()=>{const w={};return r.code_string.trim()?r.code_string.length<4?w.code_string="Code must be at least 4 characters":/^[A-Z0-9]+$/.test(r.code_string)||(w.code_string="Code must contain only uppercase letters and numbers"):w.code_string="Code string is required",r.redemption_limit&&r.redemption_limit<1&&(w.redemption_limit="Redemption limit must be at least 1"),r.expiration_date&&new Date(r.expiration_date)<=new Date&&(w.expiration_date="Expiration date must be in the future"),l(w),Object.keys(w).length===0},g=async w=>{if(w.preventDefault(),!!m()){d(!0);try{const b={...r,partner_id:e.id,redemption_limit:r.redemption_limit?parseInt(r.redemption_limit):null};await t(b)}catch(b){console.error("Error generating code:",b)}finally{d(!1)}}},y=(e.licenses_allocated||0)-(e.licenses_redeemed||0);return a.jsx(Bp,{children:a.jsx(Cs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:a.jsx(Cs.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:w=>w.stopPropagation(),className:"max-w-md w-full",children:a.jsxs(Ne,{className:"shadow-2xl",children:[a.jsxs(Oe,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx(LH,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx(Le,{children:"Generate Referral Code"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Create a new code for ",e.name]})]})]}),a.jsx(we,{variant:"ghost",size:"sm",onClick:n,children:a.jsx(Wd,{className:"w-4 h-4"})})]}),a.jsxs(Te,{children:[a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg mb-6",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:e.name}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Benefit:"})," ",e.benefit_type==="full_premium"?"Full Premium Access":`${e.benefit_value}% Discount`]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Remaining Licenses:"})," ",y," / ",e.licenses_allocated]})]})]}),a.jsxs("form",{onSubmit:g,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(De,{htmlFor:"code_string",children:"Referral Code *"}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsx(be,{id:"code_string",value:r.code_string,onChange:w=>h("code_string",w.target.value.toUpperCase()),className:i.code_string?"border-red-500":"",placeholder:"COMPANY2024"}),a.jsx(we,{type:"button",variant:"outline",onClick:f,children:"Generate"})]}),i.code_string&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.code_string})]}),a.jsxs("div",{children:[a.jsx(De,{htmlFor:"redemption_limit",children:"Redemption Limit (Optional)"}),a.jsx(be,{id:"redemption_limit",type:"number",min:"1",max:y,value:r.redemption_limit,onChange:w=>h("redemption_limit",w.target.value),className:i.redemption_limit?"border-red-500":"",placeholder:"Leave empty for unlimited"}),i.redemption_limit&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.redemption_limit}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum number of times this code can be redeemed"})]}),a.jsxs("div",{children:[a.jsx(De,{htmlFor:"expiration_date",children:"Expiration Date (Optional)"}),a.jsx(be,{id:"expiration_date",type:"date",value:r.expiration_date,onChange:w=>h("expiration_date",w.target.value),className:i.expiration_date?"border-red-500":"",min:new Date().toISOString().split("T")[0]}),i.expiration_date&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.expiration_date})]}),a.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Code Preview"}),a.jsx("code",{className:"text-lg font-mono bg-white px-3 py-2 rounded border block text-center",children:r.code_string||"PREVIEW"}),a.jsxs("div",{className:"text-sm text-blue-800 mt-2 space-y-1",children:[a.jsxs("p",{children:[" ",e.benefit_type==="full_premium"?"Grants full premium access":`${e.benefit_value}% discount on subscription`]}),r.redemption_limit&&a.jsxs("p",{children:[" Can be used ",r.redemption_limit," times"]}),r.expiration_date&&a.jsxs("p",{children:[" Expires on ",new Date(r.expiration_date).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(we,{type:"button",variant:"outline",onClick:n,disabled:u,children:"Cancel"}),a.jsx(we,{type:"submit",disabled:u,children:u?"Generating...":"Generate Code"})]})]})]})]})})})})}const F1=e=>{if(!e)return"No expiration";const t=new Date(e);return Number.isNaN(t.getTime())?"No expiration":t.toLocaleDateString()},ZJ=e=>e.benefit_type==="full_premium"?"Full Premium Access":e.benefit_value?`${e.benefit_value}% Discount`:"Custom Benefit";function Fw(){const[e,t]=x.useState([]),[n,r]=x.useState([]),[s,i]=x.useState(""),[l,u]=x.useState(!0),[d,f]=x.useState(""),[h,m]=x.useState(!1),[g,y]=x.useState(null),[w,b]=x.useState(null),S=async()=>{u(!0),f("");try{const[A,W]=await Promise.all([Qv.list(),M1.list()]);t(A||[]),r(W||[])}catch(A){console.error("Failed to load partner portal data:",A),t([]),r([]),f("Unable to load sponsorship data. Please try again.")}finally{u(!1)}};x.useEffect(()=>{S()},[]);const _=x.useMemo(()=>{const A=e.length,W=e.filter(H=>H.is_active).length,K=e.reduce((H,z)=>H+(z.licenses_allocated||0),0);return{totalPartners:A,activePartners:W,totalLicenses:K,referralCodes:n.length}},[e,n]),k=x.useMemo(()=>new Map(e.map(A=>[A.id,A])),[e]),N=x.useMemo(()=>{const A=s.trim().toLowerCase();return A?e.filter(W=>[W.name,W.contact_name,W.contact_email].filter(Boolean).map(H=>H.toLowerCase()).some(H=>H.includes(A))):e},[e,s]),T=async A=>{await Qv.create(A),m(!1),await S()},P=async A=>{await M1.create(A),y(null),await S()},R=async A=>{if(!(A!=null&&A.id))return;const W=!A.is_active;b(A.id);try{await Qv.update(A.id,{is_active:W}),t(K=>K.map(H=>H.id===A.id?{...H,is_active:W}:H))}catch(K){console.error("Failed to update partner status:",K)}finally{b(null)}},M=()=>{if(!n.length){gc.show("No referral codes to export.");return}const A=Q=>{if(Q==null)return"";const q=String(Q);return/[",\n]/.test(q)?`"${q.replace(/"/g,'""')}"`:q},K=[["Code","Partner","Active","Redemption Limit","Expires","Redeemed Count"],...n.map(Q=>{const q=k.get(Q.partner_id);return[Q.code_string,(q==null?void 0:q.name)||"Unknown",Q.is_active?"Active":"Inactive",Q.redemption_limit??"Unlimited",F1(Q.expiration_date),Q.redeemed_count||0]})].map(Q=>Q.map(A).join(",")).join(`
`),H=new Blob([K],{type:"text/csv;charset=utf-8;"}),z=URL.createObjectURL(H),L=document.createElement("a"),B=new Date().toISOString().split("T")[0];L.href=z,L.download=`referral-codes-${B}.csv`,document.body.appendChild(L),L.click(),L.remove(),URL.revokeObjectURL(z)};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("header",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-semibold",children:"Partner Portal"}),a.jsx("p",{className:"text-gray-600",children:"Manage sponsorship partners, referral codes, and upcoming CRM integrations."})]}),a.jsxs("section",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[a.jsxs(Ne,{children:[a.jsxs(Oe,{className:"pb-2",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total partners"}),a.jsx(Le,{className:"text-2xl",children:_.totalPartners})]}),a.jsx(Te,{className:"text-sm text-muted-foreground",children:"All sponsorship organizations on file."})]}),a.jsxs(Ne,{children:[a.jsxs(Oe,{className:"pb-2",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Active partners"}),a.jsx(Le,{className:"text-2xl",children:_.activePartners})]}),a.jsx(Te,{className:"text-sm text-muted-foreground",children:"Currently eligible to distribute licenses."})]}),a.jsxs(Ne,{children:[a.jsxs(Oe,{className:"pb-2",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Licenses allocated"}),a.jsx(Le,{className:"text-2xl",children:_.totalLicenses})]}),a.jsx(Te,{className:"text-sm text-muted-foreground",children:"Combined licenses committed across partners."})]}),a.jsxs(Ne,{children:[a.jsxs(Oe,{className:"pb-2",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Referral codes"}),a.jsx(Le,{className:"text-2xl",children:_.referralCodes})]}),a.jsx(Te,{className:"text-sm text-muted-foreground",children:"Active codes available for distribution."})]})]}),d&&a.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:d}),a.jsxs(bb,{defaultValue:"partners",className:"space-y-4",children:[a.jsxs(_b,{children:[a.jsx(_i,{value:"partners",className:"data-[state=active]:bg-white",children:"Partners"}),a.jsx(_i,{value:"codes",className:"data-[state=active]:bg-white",children:"Referral Codes"}),a.jsx(_i,{value:"leads",className:"data-[state=active]:bg-white",children:"Leads"}),a.jsx(_i,{value:"campaigns",className:"data-[state=active]:bg-white",children:"Campaigns"})]}),a.jsx(Si,{value:"partners",children:a.jsxs(Ne,{children:[a.jsxs(Oe,{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx(Le,{className:"text-xl",children:"Sponsorship partners"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Search, activate, and issue referral codes for partners."})]}),a.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[a.jsx(be,{value:s,onChange:A=>i(A.target.value),placeholder:"Search partners...",className:"sm:w-64"}),a.jsx(we,{onClick:()=>m(!0),children:"New Partner"})]})]}),a.jsx(Te,{className:"space-y-4",children:l?a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading partners..."}):N.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:"No partners match this search."}):a.jsx("div",{className:"space-y-3",children:N.map(A=>a.jsxs("div",{className:"flex flex-col gap-4 rounded-lg border p-4 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("h3",{className:"text-lg font-semibold",children:A.name}),a.jsx(sr,{variant:A.is_active?"default":"secondary",children:A.is_active?"Active":"Inactive"})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[A.contact_name,"  ",A.contact_email]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Benefit: ",ZJ(A)]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Licenses: ",A.licenses_redeemed||0," redeemed / ",A.licenses_allocated||0," allocated"]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Xs,{checked:!!A.is_active,onCheckedChange:()=>R(A),disabled:w===A.id}),a.jsx("span",{className:"text-sm text-muted-foreground",children:A.is_active?"Active":"Inactive"})]}),a.jsx(we,{variant:"outline",onClick:()=>y(A),children:"Generate Code"})]})]},A.id))})})]})}),a.jsx(Si,{value:"codes",children:a.jsxs(Ne,{children:[a.jsxs(Oe,{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx(Le,{className:"text-xl",children:"Referral codes"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Track code limits, expirations, and activation status."})]}),a.jsx(we,{variant:"outline",onClick:M,children:"Export CSV"})]}),a.jsx(Te,{children:l?a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading referral codes..."}):n.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:"No referral codes created yet."}):a.jsx("div",{className:"space-y-3",children:n.map(A=>{const W=k.get(A.partner_id);return a.jsxs("div",{className:"flex flex-col gap-3 rounded-lg border p-4 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("h3",{className:"text-lg font-semibold",children:A.code_string}),a.jsx(sr,{variant:A.is_active?"default":"secondary",children:A.is_active?"Active":"Inactive"})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Partner: ",(W==null?void 0:W.name)||"Unknown"]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Redemption limit: ",A.redemption_limit?`${A.redemption_limit} uses`:"Unlimited"]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expires: ",F1(A.expiration_date)]})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Redeemed: ",A.redeemed_count||0]})]},A.id)})})})]})}),a.jsx(Si,{value:"leads",children:a.jsxs(Ne,{children:[a.jsxs(Oe,{children:[a.jsx(Le,{className:"text-xl",children:"Leads"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Coming soon: sync partner leads from HubSpot or CRM tools."})]}),a.jsx(Te,{children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"We will surface lead status, owner assignments, and conversion metrics here."})})]})}),a.jsx(Si,{value:"campaigns",children:a.jsxs(Ne,{children:[a.jsxs(Oe,{children:[a.jsx(Le,{className:"text-xl",children:"Campaigns"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Coming soon: manage outreach and referral campaigns end-to-end."})]}),a.jsx(Te,{children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Future integrations will track partner engagement, email performance, and activation flows."})})]})})]}),h&&a.jsx(XJ,{onSave:T,onCancel:()=>m(!1)}),g&&a.jsx(JJ,{partner:g,onSave:P,onCancel:()=>y(null)})]})}const $1=Object.freeze(Object.defineProperty({__proto__:null,default:Fw},Symbol.toStringTag,{value:"Module"}));async function eZ(e={}){const t=e&&typeof e=="object"&&!Array.isArray(e)?e:{schoolId:e},n=t.schoolId??t.school_id??null,r=t.limit??50,s=t.offset??0,i=!!n,l=`query Events(${i?"$schoolId: uuid!, ":""}$limit: Int, $offset: Int) {
    events(
      ${i?"where: { school_id: { _eq: $schoolId } },":""}
      order_by: { starts_at: asc }
      limit: $limit
      offset: $offset
    ) {
      id
      title
      description
      starts_at
      ends_at
      classroom_id
      school_id
    }
  }`,u={limit:r,offset:s,...i?{schoolId:n}:{}},d=await Hr({query:l,variables:u});return(d==null?void 0:d.events)||[]}const tZ=`
  id
  title
  description
  subject
  grade_level
  category
  status
  duration
  materials_needed
  why_it_matters
  teachmo_tip
  learning_objectives
  created_at
`;function nZ(e={}){if(!e||typeof e!="object")return{where:void 0,limit:void 0,offset:void 0,order_by:[{created_at:"desc"}]};const{where:t,filter:n,order_by:r,orderBy:s,limit:i,offset:l}=e,u={...e};return delete u.where,delete u.filter,delete u.order_by,delete u.orderBy,delete u.limit,delete u.offset,{where:t??n??(Object.keys(u).length?u:void 0),limit:typeof i=="number"?i:void 0,offset:typeof l=="number"?l:void 0,order_by:rZ(r??s)??[{created_at:"desc"}]}}function rZ(e){if(e){if(Array.isArray(e))return e;if(typeof e=="string"){const t=e.trim();if(!t)return;const n=t.startsWith("-"),r=n?t.slice(1):t;return r?[{[r]:n?"desc":"asc"}]:void 0}if(typeof e=="object")return[e]}}async function sZ(e={}){const{where:t,limit:n,offset:r,order_by:s}=nZ(e),i=`query Activities($where: activities_bool_exp, $limit: Int, $offset: Int, $order_by: [activities_order_by!]) {
    activities(where: $where, limit: $limit, offset: $offset, order_by: $order_by) {
      ${tZ}
    }
  }`,l={where:t&&Object.keys(t).length?t:void 0,limit:n,offset:r,order_by:s},u=await Hr({query:i,variables:l});return(u==null?void 0:u.activities)||[]}async function iZ(e){var r;const n=await Hr({query:`query Threads($profileId: uuid!) {
    thread_participants(where: { profile_id: { _eq: $profileId } }) {
      thread {
        id
        subject
        updated_at
        messages(order_by: { sent_at: desc }, limit: 1) {
          content
          sent_at
        }
      }
    }
  }`,variables:{profileId:e}});return((r=n==null?void 0:n.thread_participants)==null?void 0:r.map(s=>s.thread))||[]}const{WeeklyBrief:En}=LJ;function aZ({weekStart:e}={}){return e?{week_start:e}:{}}const oZ={entity:En,async list({weekStart:e}={}){const t=aZ({weekStart:e}),n=Object.keys(t).length>0;return!(En!=null&&En.filter)||!(En!=null&&En.list)?[]:n?En.filter(t,"-published_at"):En.list("-published_at")},async get(e){return En!=null&&En.get?En.get(e):null},async logView(e,t="dashboard"){if(!(En!=null&&En.update)||!(En!=null&&En.get))return null;const n=await En.get(e),r=Number((n==null?void 0:n.open_count)||0)+1,s=(n==null?void 0:n.opened_at)||new Date().toISOString();return En.update(e,{open_count:r,opened_at:s,last_opened_at:new Date().toISOString(),last_opened_source:t})}};function lZ(e=new Date){const t=new Date(e),n=t.getDay(),r=(n===0?-6:1)-n;return t.setDate(t.getDate()+r),t.setHours(0,0,0,0),t.toISOString().slice(0,10)}function cZ(e){try{return new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric"})}catch{return e}}function uZ(){var u;const[e,t]=x.useState(!0),[n,r]=x.useState(""),[s,i]=x.useState(null),l=x.useMemo(()=>lZ(new Date),[]);return x.useEffect(()=>{let d=!0;return(async()=>{t(!0),r("");try{const h=await oZ.list({weekStart:l});if(!d)return;const m=h.filter(y=>y.status==="PUBLISHED"),g=(m.length>0?m:h).slice().sort((y,w)=>(w.published_at||"").localeCompare(y.published_at||""))[0]||null;i(g)}catch(h){if(!d)return;r((h==null?void 0:h.message)||"Unable to load weekly brief")}finally{if(!d)return;t(!1)}})(),()=>{d=!1}},[l]),a.jsxs("div",{className:"bg-white shadow rounded p-4",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"font-medium",children:"This Week at School"}),a.jsx("p",{className:"text-sm text-gray-500",children:(u=s==null?void 0:s.brief_content)!=null&&u.weekOf?`Week of ${cZ(s.brief_content.weekOf)}`:"Your weekly summary"})]}),(s==null?void 0:s.id)&&a.jsx(as,{className:"text-sm font-medium text-indigo-600 hover:text-indigo-700",to:`/briefs/${s.id}`,children:"Show everything"})]}),e&&a.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Loading"}),!e&&n&&a.jsx("p",{className:"mt-3 text-sm text-red-600",children:n}),!e&&!n&&!s&&a.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"No weekly brief yet. Once your school posts updates, Teachmo will summarize them here."}),!e&&!n&&s&&a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"What matters most"}),a.jsxs("ul",{className:"mt-2 space-y-2 text-sm",children:[(s.brief_content.whatMattersMost||[]).slice(0,3).map((d,f)=>a.jsxs("li",{className:"border-b pb-2 last:border-0 last:pb-0",children:[a.jsx("p",{className:"font-semibold",children:d.text}),a.jsxs("div",{className:"text-gray-500 flex flex-wrap gap-x-2",children:[d.etaMinutes?a.jsxs("span",{children:["~",d.etaMinutes," min"]}):null,d.why?a.jsxs("span",{children:[" ",d.why]}):null]})]},`${s.id}-core-${f}`)),(s.brief_content.whatMattersMost||[]).length===0&&a.jsx("li",{className:"text-gray-500",children:"No core items detected for this week."})]})]}),(s.brief_content.goodToKnow||[]).length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Good to know"}),a.jsx("ul",{className:"mt-2 space-y-1 text-sm text-gray-700",children:(s.brief_content.goodToKnow||[]).slice(0,3).map((d,f)=>a.jsxs("li",{children:[" ",d.text]},`${s.id}-gtk-${f}`))})]}),s.mediation_level!=="HIGH"&&(s.brief_content.optionalIfYouHaveTime||[]).length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Optional if you have time"}),a.jsx("ul",{className:"mt-2 space-y-1 text-sm text-gray-700",children:(s.brief_content.optionalIfYouHaveTime||[]).slice(0,2).map((d,f)=>a.jsxs("li",{children:[" ",d.text]},`${s.id}-opt-${f}`))})]}),s.brief_content.teachmoNote?a.jsx("p",{className:"text-sm text-gray-600 italic",children:s.brief_content.teachmoNote}):null,(s==null?void 0:s.id)&&a.jsx("div",{children:a.jsx(as,{className:"inline-flex items-center text-sm font-medium text-indigo-600 hover:text-indigo-700",to:`/briefs/${s.id}`,children:"Open brief"})})]})]})}function QO(){const e=Oi(),[t,n]=x.useState([]),[r,s]=x.useState([]),[i,l]=x.useState([]);return x.useEffect(()=>{(async()=>{if(!e)return;const[d,f,h]=await Promise.all([eZ(e.default_school_id||null).catch(()=>[]),sZ().catch(()=>[]),iZ(e.profile_id||e.id).catch(()=>[])]);n(d),s(f),l(h)})()},[e]),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("header",{children:[a.jsx("h1",{className:"text-3xl font-semibold",children:"Parent dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Keep up with events, activities, and conversations."})]}),a.jsxs("section",{className:"grid md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"md:col-span-3",children:a.jsx(uZ,{})}),a.jsxs("div",{className:"bg-white shadow rounded p-4",children:[a.jsx("h2",{className:"font-medium mb-2",children:"Upcoming events"}),a.jsxs("ul",{className:"space-y-2 text-sm",children:[t.map(u=>a.jsxs("li",{className:"border-b pb-2 last:border-0",children:[a.jsx("p",{className:"font-semibold",children:u.title}),a.jsx("p",{className:"text-gray-500",children:new Date(u.starts_at).toLocaleString()})]},u.id)),t.length===0&&a.jsx("p",{className:"text-gray-500",children:"No events scheduled."})]})]}),a.jsxs("div",{className:"bg-white shadow rounded p-4",children:[a.jsx("h2",{className:"font-medium mb-2",children:"Activities & library"}),a.jsxs("ul",{className:"space-y-2 text-sm",children:[r.map(u=>a.jsxs("li",{className:"border-b pb-2 last:border-0",children:[a.jsx("p",{className:"font-semibold",children:u.title}),a.jsxs("p",{className:"text-gray-500",children:[u.subject,"  ",u.grade_level]})]},u.id)),r.length===0&&a.jsx("p",{className:"text-gray-500",children:"Browse curated activities once your library is loaded."})]})]}),a.jsxs("div",{className:"bg-white shadow rounded p-4",children:[a.jsx("h2",{className:"font-medium mb-2",children:"Messages"}),a.jsxs("ul",{className:"space-y-2 text-sm",children:[i.map(u=>{var d;return a.jsxs("li",{className:"border-b pb-2 last:border-0",children:[a.jsx("p",{className:"font-semibold",children:u.subject||"Conversation"}),((d=u.messages)==null?void 0:d[0])&&a.jsx("p",{className:"text-gray-500 truncate",children:u.messages[0].content})]},u.id)}),i.length===0&&a.jsx("p",{className:"text-gray-500",children:"Start a message thread from the Messages section."})]})]})]})]})}const dZ=Object.freeze(Object.defineProperty({__proto__:null,default:QO},Symbol.toStringTag,{value:"Module"}));function XO(){const{isAuthenticated:e}=ma(),t=gl(),[n,r]=x.useState(!0),[s,i]=x.useState([]),[l,u]=x.useState([]),[d,f]=x.useState(null);x.useEffect(()=>{if(!e||t.loading||!t.organizationId)return;(async()=>{r(!0);try{const g=await Nt.auth.getAccessToken(),y={};g&&(y.authorization=`Bearer ${g}`),y["x-teachmo-org-id"]=t.organizationId,t.schoolId&&(y["x-teachmo-school-id"]=t.schoolId);const[w,b]=await Promise.all([fetch(`${vt}/courses`,{headers:y}).then(S=>S.json()),fetch(`${vt}/courses/enrollments/me`,{headers:y}).then(S=>S.json())]);i(w),u(b),f(null)}catch(g){f(g)}finally{r(!1)}})()},[e,t.loading,t.organizationId,t.schoolId]);const h=x.useMemo(()=>Object.fromEntries(l.map(m=>[m.courseId,m])),[l]);return e?a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("header",{children:[a.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Teacher dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Track training modules, class enrollments, and completions."})]}),n&&a.jsx("p",{className:"text-gray-600",children:"Loading courses"}),d&&a.jsxs("p",{className:"text-red-600",role:"alert",children:["Unable to load teacher data. ",d.message]}),!n&&!d&&a.jsxs("div",{className:"space-y-4",children:[s.map(m=>{var b,S,_;const g=h[m.id],y=((b=g==null?void 0:g.completedModules)==null?void 0:b.length)||0,w=((S=m.modules)==null?void 0:S.length)||0;return a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:m.title}),a.jsx("p",{className:"text-sm text-gray-600",children:m.description})]}),a.jsxs("span",{className:"rounded-full bg-indigo-50 px-3 py-1 text-xs font-semibold text-indigo-700",children:[y,"/",w," modules complete"]})]}),a.jsxs("div",{className:"mt-4 space-y-2",children:[(_=m.modules)==null?void 0:_.map(k=>{var N;return a.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-gray-100 bg-slate-50 px-3 py-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:k.title}),a.jsx("p",{className:"text-xs text-gray-600",children:k.content})]}),(N=g==null?void 0:g.completedModules)!=null&&N.includes(k.id)?a.jsx("span",{className:"text-green-700 text-sm font-semibold",children:"Completed"}):a.jsx("span",{className:"text-gray-500 text-sm",children:"Pending"})]},k.id)}),(!m.modules||m.modules.length===0)&&a.jsx("p",{className:"text-sm text-gray-500",children:"No modules are available for this course yet."})]})]},m.id)}),s.length===0&&a.jsx("p",{className:"text-sm text-gray-500",children:"No teacher training courses found."})]})]}):a.jsx(Qs,{to:"/",replace:!0})}const fZ=Object.freeze(Object.defineProperty({__proto__:null,default:XO},Symbol.toStringTag,{value:"Module"})),Kd={google:"Continue with Google",azuread:"Continue with Microsoft",microsoft:"Continue with Microsoft",okta:"Continue with Okta",classlink:"Continue with ClassLink",clever:"Continue with Clever",github:"Continue with GitHub",facebook:"Continue with Facebook",saml:"Continue with SAML"},V1=[{id:"google",label:Kd.google},{id:"azuread",label:Kd.azuread}],hZ=[{id:"github",label:Kd.github},{id:"facebook",label:Kd.facebook}];function JO({onError:e,includeOptional:t=!1,providers:n=null}){const[r,s]=x.useState(null),i=async u=>{s(u);try{await Nt.auth.signIn({provider:u,options:{redirectTo:`${window.location.origin}/auth/callback`}})}catch(d){console.error("OAuth login failed",d),e==null||e(d),s(null)}};let l;return Array.isArray(n)&&n.length>0?l=n.map(u=>({id:u,label:Kd[u]||`Continue with ${u}`})):l=t?[...V1,...hZ]:V1,a.jsx("div",{className:"space-y-3",children:l.map(({id:u,label:d})=>a.jsx("button",{type:"button",onClick:()=>i(u),"aria-label":d,className:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm font-semibold text-gray-700 transition hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",disabled:!!r,children:r===u?"Redirecting":d},u))})}function ZO(){const{isAuthenticated:e}=ma(),t=Gc(),[n,r]=x.useState(null);return e?a.jsx(Qs,{to:zp(t),replace:!0}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-sage-50 to-white flex items-center justify-center px-4",children:a.jsxs("div",{className:"max-w-3xl w-full space-y-8",children:[a.jsxs("div",{className:"text-center space-y-3",children:[a.jsx("p",{className:"text-sm font-semibold tracking-wide text-sage-600",children:"Teachmo"}),a.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"Welcome back"}),a.jsx("p",{className:"text-lg text-gray-600",children:"Sign in with your district or social account to continue."})]}),a.jsxs("div",{className:"bg-white shadow-lg rounded-xl p-8 space-y-6",children:[a.jsx(JO,{onError:r}),n&&a.jsx("p",{className:"text-sm text-red-600",role:"alert",children:n.message||"Something went wrong while connecting to your provider."}),a.jsx("p",{className:"text-xs text-gray-500 text-center",children:"By signing in you agree to the Teachmo privacy policy and acceptable use guidelines."})]})]})})}const mZ=Object.freeze(Object.defineProperty({__proto__:null,default:ZO},Symbol.toStringTag,{value:"Module"}));function pZ(){const{data:e}=vr(),t=(e==null?void 0:e.organizationId)??(e==null?void 0:e.districtId)??null;return _t({queryKey:["tenant-sso-settings",t],enabled:!!t,queryFn:async()=>{var u,d,f;const r=await Hr(`
        query TenantSSOSettings($organizationId: uuid!) {
          enterprise_sso_settings(where: { organization_id: { _eq: $organizationId }, is_enabled: { _eq: true } }) {
            provider
          }
          tenant_settings(where: { district_id: { _eq: $organizationId }, school_id: { _is_null: true } }, limit: 1) {
            settings
          }
        }
      `),s=((u=r==null?void 0:r.enterprise_sso_settings)==null?void 0:u.map(h=>h.provider).filter(Boolean))??[];let i=!1;const l=((f=(d=r==null?void 0:r.tenant_settings)==null?void 0:d[0])==null?void 0:f.settings)??{};return l&&(typeof l.require_sso=="boolean"?i=l.require_sso:typeof l.requireSso=="boolean"&&(i=l.requireSso)),{providers:s,requireSso:i}}})}const eD=Ii("login");function tD(){const[e,t]=x.useState(""),[n,r]=x.useState(""),[s,i]=x.useState(null),[l,u]=x.useState(!1),{data:d}=pZ(),f=(d==null?void 0:d.requireSso)||!1,h=(d==null?void 0:d.providers)||[],m=async g=>{g.preventDefault(),i(null);try{await Nt.auth.signIn({email:e,password:n})}catch(y){eD.error("Email login failed",y),i((y==null?void 0:y.message)||"Login failed")}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Sign in to Teachmo"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Use your school account to continue"})]}),s&&a.jsx("p",{role:"alert",className:"text-red-600 text-sm text-center",children:s}),f&&h.length===1&&a.jsx(gZ,{provider:h[0],onError:g=>i((g==null?void 0:g.message)||"Login failed"),onStart:()=>u(!0)}),(!f||h.length!==1)&&a.jsx(JO,{onError:g=>i((g==null?void 0:g.message)||"Login failed"),providers:h.length?h:null}),l&&a.jsx("p",{className:"text-center text-sm text-gray-500",children:"Redirecting to your single sign-on provider"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:a.jsx("div",{className:"w-full border-t border-gray-200"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"bg-gray-50 px-2 text-gray-500",children:"or"})})]}),!f&&a.jsxs("form",{className:"mt-8 space-y-4",onSubmit:m,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),a.jsx("input",{id:"email",name:"email",type:"email",required:!0,placeholder:"Email address",value:e,onChange:g=>t(g.target.value),className:"block w-full rounded-md border border-gray-300 px-3 py-2 text-sm placeholder-gray-400 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),a.jsx("input",{id:"password",name:"password",type:"password",required:!0,placeholder:"Password",value:n,onChange:g=>r(g.target.value),className:"block w-full rounded-md border border-gray-300 px-3 py-2 text-sm placeholder-gray-400 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),a.jsx("button",{type:"submit",className:"w-full flex justify-center rounded-md bg-emerald-600 py-2 px-4 text-sm font-semibold text-white hover:bg-emerald-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500",children:"Sign in"})]})]})})}function gZ({provider:e,onStart:t,onError:n}){return x.useEffect(()=>{async function r(){try{t==null||t(),await Nt.auth.signIn({provider:e,options:{redirectTo:`${window.location.origin}/auth/callback`}})}catch(s){eD.error("SSO redirect failed",s),n==null||n(s)}}e&&r()},[n,t,e]),null}const yZ=Object.freeze(Object.defineProperty({__proto__:null,default:tD},Symbol.toStringTag,{value:"Module"}));function nD(){const{isAuthenticated:e}=ma(),t=Oi(),[n,r]=x.useState({fullName:"",appRole:"parent",organizationName:"Demo District",schoolName:"Demo School"}),[s,i]=x.useState(""),[l,u]=x.useState("");if(!e)return a.jsx("p",{className:"p-6",children:"Please sign in to start onboarding."});const d=h=>{r({...n,[h.target.name]:h.target.value})},f=async h=>{var m,g,y,w;h.preventDefault(),i("Setting up your organization"),u(""),rs({eventName:"onboarding.started",entityType:"user",entityId:t==null?void 0:t.id,metadata:{role:n.appRole,organizationName:n.organizationName,schoolName:n.schoolName}});try{const b=await VR({organizationName:n.organizationName,schoolName:n.schoolName});i("Creating your profile"),await y8({userId:t==null?void 0:t.id,fullName:n.fullName,appRole:n.appRole,organizationId:(m=b==null?void 0:b.organization)==null?void 0:m.id,schoolId:(g=b==null?void 0:b.school)==null?void 0:g.id}),rs({eventName:"onboarding.completed",entityType:"user",entityId:t==null?void 0:t.id,metadata:{role:n.appRole,organizationId:((y=b==null?void 0:b.organization)==null?void 0:y.id)??null,schoolId:((w=b==null?void 0:b.school)==null?void 0:w.id)??null}}),i("Onboarding complete! You can continue to your dashboard.")}catch(b){console.error(b),u(b.message),i(""),rs({eventName:"onboarding.failed",entityType:"user",entityId:t==null?void 0:t.id,metadata:{message:(b==null?void 0:b.message)||"unknown"}})}};return a.jsxs("div",{className:"max-w-2xl mx-auto p-8",children:[a.jsx("h1",{className:"text-3xl font-semibold mb-4",children:"Welcome to Teachmo"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Tell us about yourself so we can set up your workspace."}),a.jsxs("form",{onSubmit:f,className:"space-y-4 bg-white shadow rounded p-6",children:[a.jsxs("label",{className:"block",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Full name"}),a.jsx("input",{name:"fullName",value:n.fullName,onChange:d,className:"mt-1 w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("label",{className:"block",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Role"}),a.jsxs("select",{name:"appRole",value:n.appRole,onChange:d,className:"mt-1 w-full border rounded px-3 py-2",children:[a.jsx("option",{value:"parent",children:"Parent"}),a.jsx("option",{value:"teacher",children:"Teacher"}),a.jsx("option",{value:"partner",children:"Partner"}),a.jsx("option",{value:"system_admin",children:"System Admin"})]})]}),a.jsxs("label",{className:"block",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Organization"}),a.jsx("input",{name:"organizationName",value:n.organizationName,onChange:d,className:"mt-1 w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("label",{className:"block",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"School"}),a.jsx("input",{name:"schoolName",value:n.schoolName,onChange:d,className:"mt-1 w-full border rounded px-3 py-2",required:!0})]}),a.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Complete onboarding"}),s&&a.jsx("p",{className:"text-sm text-green-700",children:s}),l&&a.jsx("p",{className:"text-sm text-red-700",children:l})]})]})}const vZ=Object.freeze(Object.defineProperty({__proto__:null,default:nD},Symbol.toStringTag,{value:"Module"}));function rD(){const{isAuthenticated:e,isLoading:t,error:n}=ma(),r=Oi(),s=gl(),i=Gc(),l=x.useRef(!1);return x.useEffect(()=>{Nt.auth.refreshSession()},[]),x.useEffect(()=>{l.current||!e||s.loading||!s.organizationId||!(r!=null&&r.id)||(l.current=!0,zR({organizationId:s.organizationId,schoolId:s.schoolId},{eventName:"auth_login",actorId:r.id,actorRole:i||void 0}).catch(()=>{}))},[e,s.loading,s.organizationId,s.schoolId,r==null?void 0:r.id,i]),e?a.jsx(Qs,{to:zp(i),replace:!0}):a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"space-y-2 text-center",children:[a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Completing sign-in"}),t&&a.jsx("p",{className:"text-gray-600",children:"We are finalizing your Nhost session."}),n&&a.jsx("p",{className:"text-red-600",children:n.message})]})})}const xZ=Object.freeze(Object.defineProperty({__proto__:null,default:rD},Symbol.toStringTag,{value:"Module"}));var bf=e=>e.type==="checkbox",Bo=e=>e instanceof Date,Wr=e=>e==null;const sD=e=>typeof e=="object";var Vn=e=>!Wr(e)&&!Array.isArray(e)&&sD(e)&&!Bo(e),wZ=e=>Vn(e)&&e.target?bf(e.target)?e.target.checked:e.target.value:e,bZ=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,_Z=(e,t)=>e.has(bZ(t)),SZ=e=>{const t=e.constructor&&e.constructor.prototype;return Vn(t)&&t.hasOwnProperty("isPrototypeOf")},zb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function tr(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(zb&&(e instanceof Blob||r))&&(n||Vn(e)))if(t=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!SZ(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=tr(e[s]));else return e;return t}var Jp=e=>/^\w*$/.test(e),Nn=e=>e===void 0,Ub=e=>Array.isArray(e)?e.filter(Boolean):[],Bb=e=>Ub(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ye=(e,t,n)=>{if(!t||!Vn(e))return n;const r=(Jp(t)?[t]:Bb(t)).reduce((s,i)=>Wr(s)?s:s[i],e);return Nn(r)||r===e?Nn(e[t])?n:e[t]:r},mi=e=>typeof e=="boolean",Yt=(e,t,n)=>{let r=-1;const s=Jp(t)?[t]:Bb(t),i=s.length,l=i-1;for(;++r<i;){const u=s[r];let d=n;if(r!==l){const f=e[u];d=Vn(f)||Array.isArray(f)?f:isNaN(+s[r+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}};const z1={BLUR:"blur",FOCUS_OUT:"focusout"},Ks={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Gi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},jZ=oe.createContext(null);jZ.displayName="HookFormContext";var EZ=(e,t,n,r=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const l=i;return t._proxyFormState[l]!==Ks.all&&(t._proxyFormState[l]=!r||Ks.all),e[l]}});return s};const kZ=typeof window<"u"?oe.useLayoutEffect:oe.useEffect;var is=e=>typeof e=="string",NZ=(e,t,n,r,s)=>is(e)?(r&&t.watch.add(e),Ye(n,e,s)):Array.isArray(e)?e.map(i=>(r&&t.watch.add(i),Ye(n,i))):(r&&(t.watchAll=!0),n),$w=e=>Wr(e)||!sD(e);function Ya(e,t,n=new WeakSet){if($w(e)||$w(t))return Object.is(e,t);if(Bo(e)&&Bo(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const i of r){const l=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const u=t[i];if(Bo(l)&&Bo(u)||Vn(l)&&Vn(u)||Array.isArray(l)&&Array.isArray(u)?!Ya(l,u,n):!Object.is(l,u))return!1}}return!0}var iD=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},Td=e=>Array.isArray(e)?e:[e],U1=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}};function aD(e,t){const n={};for(const r in e)if(e.hasOwnProperty(r)){const s=e[r],i=t[r];if(s&&Vn(s)&&i){const l=aD(s,i);Vn(l)&&(n[r]=l)}else e[r]&&(n[r]=i)}return n}var jr=e=>Vn(e)&&!Object.keys(e).length,qb=e=>e.type==="file",Ys=e=>typeof e=="function",fp=e=>{if(!zb)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},oD=e=>e.type==="select-multiple",Wb=e=>e.type==="radio",TZ=e=>Wb(e)||bf(e),Zv=e=>fp(e)&&e.isConnected;function CZ(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Nn(e)?r++:e[t[r++]];return e}function PZ(e){for(const t in e)if(e.hasOwnProperty(t)&&!Nn(e[t]))return!1;return!0}function On(e,t){const n=Array.isArray(t)?t:Jp(t)?[t]:Bb(t),r=n.length===1?e:CZ(e,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(Vn(r)&&jr(r)||Array.isArray(r)&&PZ(r))&&On(e,n.slice(0,-1)),e}var AZ=e=>{for(const t in e)if(Ys(e[t]))return!0;return!1};function lD(e){return Array.isArray(e)||Vn(e)&&!AZ(e)}function Vw(e,t={}){for(const n in e){const r=e[n];lD(r)?(t[n]=Array.isArray(r)?[]:{},Vw(r,t[n])):Nn(r)||(t[n]=!0)}return t}function nc(e,t,n){n||(n=Vw(t));for(const r in e){const s=e[r];if(lD(s))Nn(t)||$w(n[r])?n[r]=Vw(s,Array.isArray(s)?[]:{}):nc(s,Wr(t)?{}:t[r],n[r]);else{const i=t[r];n[r]=!Ya(s,i)}}return n}const B1={value:!1,isValid:!1},q1={value:!0,isValid:!0};var cD=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Nn(e[0].attributes.value)?Nn(e[0].value)||e[0].value===""?q1:{value:e[0].value,isValid:!0}:q1:B1}return B1},uD=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>Nn(e)?e:t?e===""?NaN:e&&+e:n&&is(e)?new Date(e):r?r(e):e;const W1={isValid:!1,value:null};var dD=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,W1):W1;function H1(e){const t=e.ref;return qb(t)?t.files:Wb(t)?dD(e.refs).value:oD(t)?[...t.selectedOptions].map(({value:n})=>n):bf(t)?cD(e.refs).value:uD(Nn(t.value)?e.ref.value:t.value,e)}var RZ=(e,t,n,r)=>{const s={};for(const i of e){const l=Ye(t,i);l&&Yt(s,i,l._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}},hp=e=>e instanceof RegExp,rd=e=>Nn(e)?e:hp(e)?e.source:Vn(e)?hp(e.value)?e.value.source:e.value:e,G1=e=>({isOnSubmit:!e||e===Ks.onSubmit,isOnBlur:e===Ks.onBlur,isOnChange:e===Ks.onChange,isOnAll:e===Ks.all,isOnTouch:e===Ks.onTouched});const K1="AsyncFunction";var IZ=e=>!!e&&!!e.validate&&!!(Ys(e.validate)&&e.validate.constructor.name===K1||Vn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===K1)),OZ=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Y1=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Cd=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const i=Ye(e,s);if(i){const{_f:l,...u}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!r)return!0;if(l.ref&&t(l.ref,l.name)&&!r)return!0;if(Cd(u,t))break}else if(Vn(u)&&Cd(u,t))break}}};function Q1(e,t,n){const r=Ye(e,n);if(r||Jp(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),l=Ye(t,i),u=Ye(e,i);if(l&&!Array.isArray(l)&&n!==i)return{name:n};if(u&&u.type)return{name:i,error:u};if(u&&u.root&&u.root.type)return{name:`${i}.root`,error:u.root};s.pop()}return{name:n}}var DZ=(e,t,n,r)=>{n(e);const{name:s,...i}=e;return jr(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!r||Ks.all))},MZ=(e,t,n)=>!e||!t||e===t||Td(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),LZ=(e,t,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:(n?r.isOnChange:s.isOnChange)?e:!0,FZ=(e,t)=>!Ub(Ye(e,t)).length&&On(e,t),$Z=(e,t,n)=>{const r=Td(Ye(e,n));return Yt(r,"root",t[n]),Yt(e,n,r),e};function X1(e,t,n="validate"){if(is(e)||Array.isArray(e)&&e.every(is)||mi(e)&&!e)return{type:n,message:is(e)?e:"",ref:t}}var Ql=e=>Vn(e)&&!hp(e)?e:{value:e,message:""},J1=async(e,t,n,r,s,i)=>{const{ref:l,refs:u,required:d,maxLength:f,minLength:h,min:m,max:g,pattern:y,validate:w,name:b,valueAsNumber:S,mount:_}=e._f,k=Ye(n,b);if(!_||t.has(b))return{};const N=u?u[0]:l,T=z=>{s&&N.reportValidity&&(N.setCustomValidity(mi(z)?"":z||""),N.reportValidity())},P={},R=Wb(l),M=bf(l),A=R||M,W=(S||qb(l))&&Nn(l.value)&&Nn(k)||fp(l)&&l.value===""||k===""||Array.isArray(k)&&!k.length,K=iD.bind(null,b,r,P),H=(z,L,B,Q=Gi.maxLength,q=Gi.minLength)=>{const F=z?L:B;P[b]={type:z?Q:q,message:F,ref:l,...K(z?Q:q,F)}};if(i?!Array.isArray(k)||!k.length:d&&(!A&&(W||Wr(k))||mi(k)&&!k||M&&!cD(u).isValid||R&&!dD(u).isValid)){const{value:z,message:L}=is(d)?{value:!!d,message:d}:Ql(d);if(z&&(P[b]={type:Gi.required,message:L,ref:N,...K(Gi.required,L)},!r))return T(L),P}if(!W&&(!Wr(m)||!Wr(g))){let z,L;const B=Ql(g),Q=Ql(m);if(!Wr(k)&&!isNaN(k)){const q=l.valueAsNumber||k&&+k;Wr(B.value)||(z=q>B.value),Wr(Q.value)||(L=q<Q.value)}else{const q=l.valueAsDate||new Date(k),F=I=>new Date(new Date().toDateString()+" "+I),D=l.type=="time",X=l.type=="week";is(B.value)&&k&&(z=D?F(k)>F(B.value):X?k>B.value:q>new Date(B.value)),is(Q.value)&&k&&(L=D?F(k)<F(Q.value):X?k<Q.value:q<new Date(Q.value))}if((z||L)&&(H(!!z,B.message,Q.message,Gi.max,Gi.min),!r))return T(P[b].message),P}if((f||h)&&!W&&(is(k)||i&&Array.isArray(k))){const z=Ql(f),L=Ql(h),B=!Wr(z.value)&&k.length>+z.value,Q=!Wr(L.value)&&k.length<+L.value;if((B||Q)&&(H(B,z.message,L.message),!r))return T(P[b].message),P}if(y&&!W&&is(k)){const{value:z,message:L}=Ql(y);if(hp(z)&&!k.match(z)&&(P[b]={type:Gi.pattern,message:L,ref:l,...K(Gi.pattern,L)},!r))return T(L),P}if(w){if(Ys(w)){const z=await w(k,n),L=X1(z,N);if(L&&(P[b]={...L,...K(Gi.validate,L.message)},!r))return T(L.message),P}else if(Vn(w)){let z={};for(const L in w){if(!jr(z)&&!r)break;const B=X1(await w[L](k,n),N,L);B&&(z={...B,...K(L,B.message)},T(B.message),r&&(P[b]=z))}if(!jr(z)&&(P[b]={ref:N,...z},!r))return P}}return T(!0),P};const VZ={mode:Ks.onSubmit,reValidateMode:Ks.onChange,shouldFocusError:!0};function zZ(e={}){let t={...VZ,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ys(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},s=Vn(t.defaultValues)||Vn(t.values)?tr(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:tr(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,f=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...h};const g={array:U1(),state:U1()},y=t.criteriaMode===Ks.all,w=$=>te=>{clearTimeout(f),f=setTimeout($,te)},b=async $=>{if(!t.disabled&&(h.isValid||m.isValid||$)){const te=t.resolver?jr((await M()).errors):await W(r,!0);te!==n.isValid&&g.state.next({isValid:te})}},S=($,te)=>{!t.disabled&&(h.isValidating||h.validatingFields||m.isValidating||m.validatingFields)&&(($||Array.from(u.mount)).forEach(se=>{se&&(te?Yt(n.validatingFields,se,te):On(n.validatingFields,se))}),g.state.next({validatingFields:n.validatingFields,isValidating:!jr(n.validatingFields)}))},_=($,te=[],se,ke,_e=!0,xe=!0)=>{if(ke&&se&&!t.disabled){if(l.action=!0,xe&&Array.isArray(Ye(r,$))){const ee=se(Ye(r,$),ke.argA,ke.argB);_e&&Yt(r,$,ee)}if(xe&&Array.isArray(Ye(n.errors,$))){const ee=se(Ye(n.errors,$),ke.argA,ke.argB);_e&&Yt(n.errors,$,ee),FZ(n.errors,$)}if((h.touchedFields||m.touchedFields)&&xe&&Array.isArray(Ye(n.touchedFields,$))){const ee=se(Ye(n.touchedFields,$),ke.argA,ke.argB);_e&&Yt(n.touchedFields,$,ee)}(h.dirtyFields||m.dirtyFields)&&(n.dirtyFields=nc(s,i)),g.state.next({name:$,isDirty:H($,te),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Yt(i,$,te)},k=($,te)=>{Yt(n.errors,$,te),g.state.next({errors:n.errors})},N=$=>{n.errors=$,g.state.next({errors:n.errors,isValid:!1})},T=($,te,se,ke)=>{const _e=Ye(r,$);if(_e){const xe=Ye(i,$,Nn(se)?Ye(s,$):se);Nn(xe)||ke&&ke.defaultChecked||te?Yt(i,$,te?xe:H1(_e._f)):B($,xe),l.mount&&!l.action&&b()}},P=($,te,se,ke,_e)=>{let xe=!1,ee=!1;const de={name:$};if(!t.disabled){if(!se||ke){(h.isDirty||m.isDirty)&&(ee=n.isDirty,n.isDirty=de.isDirty=H(),xe=ee!==de.isDirty);const Pe=Ya(Ye(s,$),te);ee=!!Ye(n.dirtyFields,$),Pe?On(n.dirtyFields,$):Yt(n.dirtyFields,$,!0),de.dirtyFields=n.dirtyFields,xe=xe||(h.dirtyFields||m.dirtyFields)&&ee!==!Pe}if(se){const Pe=Ye(n.touchedFields,$);Pe||(Yt(n.touchedFields,$,se),de.touchedFields=n.touchedFields,xe=xe||(h.touchedFields||m.touchedFields)&&Pe!==se)}xe&&_e&&g.state.next(de)}return xe?de:{}},R=($,te,se,ke)=>{const _e=Ye(n.errors,$),xe=(h.isValid||m.isValid)&&mi(te)&&n.isValid!==te;if(t.delayError&&se?(d=w(()=>k($,se)),d(t.delayError)):(clearTimeout(f),d=null,se?Yt(n.errors,$,se):On(n.errors,$)),(se?!Ya(_e,se):_e)||!jr(ke)||xe){const ee={...ke,...xe&&mi(te)?{isValid:te}:{},errors:n.errors,name:$};n={...n,...ee},g.state.next(ee)}},M=async $=>{S($,!0);const te=await t.resolver(i,t.context,RZ($||u.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return S($),te},A=async $=>{const{errors:te}=await M($);if($)for(const se of $){const ke=Ye(te,se);ke?Yt(n.errors,se,ke):On(n.errors,se)}else n.errors=te;return te},W=async($,te,se={valid:!0})=>{for(const ke in $){const _e=$[ke];if(_e){const{_f:xe,...ee}=_e;if(xe){const de=u.array.has(xe.name),Pe=_e._f&&IZ(_e._f);Pe&&h.validatingFields&&S([xe.name],!0);const et=await J1(_e,u.disabled,i,y,t.shouldUseNativeValidation&&!te,de);if(Pe&&h.validatingFields&&S([xe.name]),et[xe.name]&&(se.valid=!1,te))break;!te&&(Ye(et,xe.name)?de?$Z(n.errors,et,xe.name):Yt(n.errors,xe.name,et[xe.name]):On(n.errors,xe.name))}!jr(ee)&&await W(ee,te,se)}}return se.valid},K=()=>{for(const $ of u.unMount){const te=Ye(r,$);te&&(te._f.refs?te._f.refs.every(se=>!Zv(se)):!Zv(te._f.ref))&&Ce($)}u.unMount=new Set},H=($,te)=>!t.disabled&&($&&te&&Yt(i,$,te),!Ya(I(),s)),z=($,te,se)=>NZ($,u,{...l.mount?i:Nn(te)?s:is($)?{[$]:te}:te},se,te),L=$=>Ub(Ye(l.mount?i:s,$,t.shouldUnregister?Ye(s,$,[]):[])),B=($,te,se={})=>{const ke=Ye(r,$);let _e=te;if(ke){const xe=ke._f;xe&&(!xe.disabled&&Yt(i,$,uD(te,xe)),_e=fp(xe.ref)&&Wr(te)?"":te,oD(xe.ref)?[...xe.ref.options].forEach(ee=>ee.selected=_e.includes(ee.value)):xe.refs?bf(xe.ref)?xe.refs.forEach(ee=>{(!ee.defaultChecked||!ee.disabled)&&(Array.isArray(_e)?ee.checked=!!_e.find(de=>de===ee.value):ee.checked=_e===ee.value||!!_e)}):xe.refs.forEach(ee=>ee.checked=ee.value===_e):qb(xe.ref)?xe.ref.value="":(xe.ref.value=_e,xe.ref.type||g.state.next({name:$,values:tr(i)})))}(se.shouldDirty||se.shouldTouch)&&P($,_e,se.shouldTouch,se.shouldDirty,!0),se.shouldValidate&&X($)},Q=($,te,se)=>{for(const ke in te){if(!te.hasOwnProperty(ke))return;const _e=te[ke],xe=$+"."+ke,ee=Ye(r,xe);(u.array.has($)||Vn(_e)||ee&&!ee._f)&&!Bo(_e)?Q(xe,_e,se):B(xe,_e,se)}},q=($,te,se={})=>{const ke=Ye(r,$),_e=u.array.has($),xe=tr(te);Yt(i,$,xe),_e?(g.array.next({name:$,values:tr(i)}),(h.isDirty||h.dirtyFields||m.isDirty||m.dirtyFields)&&se.shouldDirty&&g.state.next({name:$,dirtyFields:nc(s,i),isDirty:H($,xe)})):ke&&!ke._f&&!Wr(xe)?Q($,xe,se):B($,xe,se),Y1($,u)&&g.state.next({...n,name:$}),g.state.next({name:l.mount?$:void 0,values:tr(i)})},F=async $=>{l.mount=!0;const te=$.target;let se=te.name,ke=!0;const _e=Ye(r,se),xe=Pe=>{ke=Number.isNaN(Pe)||Bo(Pe)&&isNaN(Pe.getTime())||Ya(Pe,Ye(i,se,Pe))},ee=G1(t.mode),de=G1(t.reValidateMode);if(_e){let Pe,et;const dt=te.type?H1(_e._f):wZ($),qt=$.type===z1.BLUR||$.type===z1.FOCUS_OUT,Yn=!OZ(_e._f)&&!t.resolver&&!Ye(n.errors,se)&&!_e._f.deps||LZ(qt,Ye(n.touchedFields,se),n.isSubmitted,de,ee),Qn=Y1(se,u,qt);Yt(i,se,dt),qt?(!te||!te.readOnly)&&(_e._f.onBlur&&_e._f.onBlur($),d&&d(0)):_e._f.onChange&&_e._f.onChange($);const Ir=P(se,dt,qt),fs=!jr(Ir)||Qn;if(!qt&&g.state.next({name:se,type:$.type,values:tr(i)}),Yn)return(h.isValid||m.isValid)&&(t.mode==="onBlur"?qt&&b():qt||b()),fs&&g.state.next({name:se,...Qn?{}:Ir});if(!qt&&Qn&&g.state.next({...n}),t.resolver){const{errors:dn}=await M([se]);if(xe(dt),ke){const Or=Q1(n.errors,r,se),An=Q1(dn,r,Or.name||se);Pe=An.error,se=An.name,et=jr(dn)}}else S([se],!0),Pe=(await J1(_e,u.disabled,i,y,t.shouldUseNativeValidation))[se],S([se]),xe(dt),ke&&(Pe?et=!1:(h.isValid||m.isValid)&&(et=await W(r,!0)));ke&&(_e._f.deps&&(!Array.isArray(_e._f.deps)||_e._f.deps.length>0)&&X(_e._f.deps),R(se,et,Pe,Ir))}},D=($,te)=>{if(Ye(n.errors,te)&&$.focus)return $.focus(),1},X=async($,te={})=>{let se,ke;const _e=Td($);if(t.resolver){const xe=await A(Nn($)?$:_e);se=jr(xe),ke=$?!_e.some(ee=>Ye(xe,ee)):se}else $?(ke=(await Promise.all(_e.map(async xe=>{const ee=Ye(r,xe);return await W(ee&&ee._f?{[xe]:ee}:ee)}))).every(Boolean),!(!ke&&!n.isValid)&&b()):ke=se=await W(r);return g.state.next({...!is($)||(h.isValid||m.isValid)&&se!==n.isValid?{}:{name:$},...t.resolver||!$?{isValid:se}:{},errors:n.errors}),te.shouldFocus&&!ke&&Cd(r,D,$?_e:u.mount),ke},I=($,te)=>{let se={...l.mount?i:s};return te&&(se=aD(te.dirtyFields?n.dirtyFields:n.touchedFields,se)),Nn($)?se:is($)?Ye(se,$):$.map(ke=>Ye(se,ke))},V=($,te)=>({invalid:!!Ye((te||n).errors,$),isDirty:!!Ye((te||n).dirtyFields,$),error:Ye((te||n).errors,$),isValidating:!!Ye(n.validatingFields,$),isTouched:!!Ye((te||n).touchedFields,$)}),Z=$=>{$&&Td($).forEach(te=>On(n.errors,te)),g.state.next({errors:$?n.errors:{}})},O=($,te,se)=>{const ke=(Ye(r,$,{_f:{}})._f||{}).ref,_e=Ye(n.errors,$)||{},{ref:xe,message:ee,type:de,...Pe}=_e;Yt(n.errors,$,{...Pe,...te,ref:ke}),g.state.next({name:$,errors:n.errors,isValid:!1}),se&&se.shouldFocus&&ke&&ke.focus&&ke.focus()},ce=($,te)=>Ys($)?g.state.subscribe({next:se=>"values"in se&&$(z(void 0,te),se)}):z($,te,!0),he=$=>g.state.subscribe({next:te=>{MZ($.name,te.name,$.exact)&&DZ(te,$.formState||h,bn,$.reRenderRoot)&&$.callback({values:{...i},...n,...te,defaultValues:s})}}).unsubscribe,me=$=>(l.mount=!0,m={...m,...$.formState},he({...$,formState:m})),Ce=($,te={})=>{for(const se of $?Td($):u.mount)u.mount.delete(se),u.array.delete(se),te.keepValue||(On(r,se),On(i,se)),!te.keepError&&On(n.errors,se),!te.keepDirty&&On(n.dirtyFields,se),!te.keepTouched&&On(n.touchedFields,se),!te.keepIsValidating&&On(n.validatingFields,se),!t.shouldUnregister&&!te.keepDefaultValue&&On(s,se);g.state.next({values:tr(i)}),g.state.next({...n,...te.keepDirty?{isDirty:H()}:{}}),!te.keepIsValid&&b()},ge=({disabled:$,name:te})=>{(mi($)&&l.mount||$||u.disabled.has(te))&&($?u.disabled.add(te):u.disabled.delete(te))},$e=($,te={})=>{let se=Ye(r,$);const ke=mi(te.disabled)||mi(t.disabled);return Yt(r,$,{...se||{},_f:{...se&&se._f?se._f:{ref:{name:$}},name:$,mount:!0,...te}}),u.mount.add($),se?ge({disabled:mi(te.disabled)?te.disabled:t.disabled,name:$}):T($,!0,te.value),{...ke?{disabled:te.disabled||t.disabled}:{},...t.progressive?{required:!!te.required,min:rd(te.min),max:rd(te.max),minLength:rd(te.minLength),maxLength:rd(te.maxLength),pattern:rd(te.pattern)}:{},name:$,onChange:F,onBlur:F,ref:_e=>{if(_e){$e($,te),se=Ye(r,$);const xe=Nn(_e.value)&&_e.querySelectorAll&&_e.querySelectorAll("input,select,textarea")[0]||_e,ee=TZ(xe),de=se._f.refs||[];if(ee?de.find(Pe=>Pe===xe):xe===se._f.ref)return;Yt(r,$,{_f:{...se._f,...ee?{refs:[...de.filter(Zv),xe,...Array.isArray(Ye(s,$))?[{}]:[]],ref:{type:xe.type,name:$}}:{ref:xe}}}),T($,!1,void 0,xe)}else se=Ye(r,$,{}),se._f&&(se._f.mount=!1),(t.shouldUnregister||te.shouldUnregister)&&!(_Z(u.array,$)&&l.action)&&u.unMount.add($)}}},ne=()=>t.shouldFocusError&&Cd(r,D,u.mount),We=$=>{mi($)&&(g.state.next({disabled:$}),Cd(r,(te,se)=>{const ke=Ye(r,se);ke&&(te.disabled=ke._f.disabled||$,Array.isArray(ke._f.refs)&&ke._f.refs.forEach(_e=>{_e.disabled=ke._f.disabled||$}))},0,!1))},Ve=($,te)=>async se=>{let ke;se&&(se.preventDefault&&se.preventDefault(),se.persist&&se.persist());let _e=tr(i);if(g.state.next({isSubmitting:!0}),t.resolver){const{errors:xe,values:ee}=await M();n.errors=xe,_e=tr(ee)}else await W(r);if(u.disabled.size)for(const xe of u.disabled)On(_e,xe);if(On(n.errors,"root"),jr(n.errors)){g.state.next({errors:{}});try{await $(_e,se)}catch(xe){ke=xe}}else te&&await te({...n.errors},se),ne(),setTimeout(ne);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:jr(n.errors)&&!ke,submitCount:n.submitCount+1,errors:n.errors}),ke)throw ke},Ft=($,te={})=>{Ye(r,$)&&(Nn(te.defaultValue)?q($,tr(Ye(s,$))):(q($,te.defaultValue),Yt(s,$,tr(te.defaultValue))),te.keepTouched||On(n.touchedFields,$),te.keepDirty||(On(n.dirtyFields,$),n.isDirty=te.defaultValue?H($,tr(Ye(s,$))):H()),te.keepError||(On(n.errors,$),h.isValid&&b()),g.state.next({...n}))},Dt=($,te={})=>{const se=$?tr($):s,ke=tr(se),_e=jr($),xe=_e?s:ke;if(te.keepDefaultValues||(s=se),!te.keepValues){if(te.keepDirtyValues){const ee=new Set([...u.mount,...Object.keys(nc(s,i))]);for(const de of Array.from(ee))Ye(n.dirtyFields,de)?Yt(xe,de,Ye(i,de)):q(de,Ye(xe,de))}else{if(zb&&Nn($))for(const ee of u.mount){const de=Ye(r,ee);if(de&&de._f){const Pe=Array.isArray(de._f.refs)?de._f.refs[0]:de._f.ref;if(fp(Pe)){const et=Pe.closest("form");if(et){et.reset();break}}}}if(te.keepFieldsRef)for(const ee of u.mount)q(ee,Ye(xe,ee));else r={}}i=t.shouldUnregister?te.keepDefaultValues?tr(s):{}:tr(xe),g.array.next({values:{...xe}}),g.state.next({values:{...xe}})}u={mount:te.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!h.isValid||!!te.keepIsValid||!!te.keepDirtyValues||!t.shouldUnregister&&!jr(xe),l.watch=!!t.shouldUnregister,l.action=!1,te.keepErrors||(n.errors={}),g.state.next({submitCount:te.keepSubmitCount?n.submitCount:0,isDirty:_e?!1:te.keepDirty?n.isDirty:!!(te.keepDefaultValues&&!Ya($,s)),isSubmitted:te.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:_e?{}:te.keepDirtyValues?te.keepDefaultValues&&i?nc(s,i):n.dirtyFields:te.keepDefaultValues&&$?nc(s,$):te.keepDirty?n.dirtyFields:{},touchedFields:te.keepTouched?n.touchedFields:{},errors:te.keepErrors?n.errors:{},isSubmitSuccessful:te.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},Pn=($,te)=>Dt(Ys($)?$(i):$,te),wn=($,te={})=>{const se=Ye(r,$),ke=se&&se._f;if(ke){const _e=ke.refs?ke.refs[0]:ke.ref;_e.focus&&(_e.focus(),te.shouldSelect&&Ys(_e.select)&&_e.select())}},bn=$=>{n={...n,...$}},Bt={control:{register:$e,unregister:Ce,getFieldState:V,handleSubmit:Ve,setError:O,_subscribe:he,_runSchema:M,_focusError:ne,_getWatch:z,_getDirty:H,_setValid:b,_setFieldArray:_,_setDisabledField:ge,_setErrors:N,_getFieldArray:L,_reset:Dt,_resetDefaultValues:()=>Ys(t.defaultValues)&&t.defaultValues().then($=>{Pn($,t.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:K,_disableForm:We,_subjects:g,_proxyFormState:h,get _fields(){return r},get _formValues(){return i},get _state(){return l},set _state($){l=$},get _defaultValues(){return s},get _names(){return u},set _names($){u=$},get _formState(){return n},get _options(){return t},set _options($){t={...t,...$}}},subscribe:me,trigger:X,register:$e,handleSubmit:Ve,watch:ce,setValue:q,getValues:I,reset:Pn,resetField:Ft,clearErrors:Z,unregister:Ce,setError:O,setFocus:wn,getFieldState:V};return{...Bt,formControl:Bt}}function fD(e={}){const t=oe.useRef(void 0),n=oe.useRef(void 0),[r,s]=oe.useState({isDirty:!1,isValidating:!1,isLoading:Ys(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ys(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!Ys(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...u}=zZ(e);t.current={...u,formState:r}}const i=t.current.control;return i._options=e,kZ(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(u=>({...u,isReady:!0})),i._formState.isReady=!0,l},[i]),oe.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),oe.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),oe.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),oe.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),oe.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==r.isDirty&&i._subjects.state.next({isDirty:l})}},[i,r.isDirty]),oe.useEffect(()=>{var l;e.values&&!Ya(e.values,n.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((l=i._options.resetOptions)===null||l===void 0)&&l.keepIsValid||i._setValid(),n.current=e.values,s(u=>({...u}))):i._resetDefaultValues()},[i,e.values]),oe.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=EZ(r,i),t.current}var Rt;(function(e){e.assertEqual=s=>{};function t(s){}e.assertIs=t;function n(s){throw new Error}e.assertNever=n,e.arrayToEnum=s=>{const i={};for(const l of s)i[l]=l;return i},e.getValidEnumValues=s=>{const i=e.objectKeys(s).filter(u=>typeof s[s[u]]!="number"),l={};for(const u of i)l[u]=s[u];return e.objectValues(l)},e.objectValues=s=>e.objectKeys(s).map(function(i){return s[i]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const l in s)Object.prototype.hasOwnProperty.call(s,l)&&i.push(l);return i},e.find=(s,i)=>{for(const l of s)if(i(l))return l},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(l=>typeof l=="string"?`'${l}'`:l).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Rt||(Rt={}));var Z1;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(Z1||(Z1={}));const Ue=Rt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Wa=e=>{switch(typeof e){case"undefined":return Ue.undefined;case"string":return Ue.string;case"number":return Number.isNaN(e)?Ue.nan:Ue.number;case"boolean":return Ue.boolean;case"function":return Ue.function;case"bigint":return Ue.bigint;case"symbol":return Ue.symbol;case"object":return Array.isArray(e)?Ue.array:e===null?Ue.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Ue.promise:typeof Map<"u"&&e instanceof Map?Ue.map:typeof Set<"u"&&e instanceof Set?Ue.set:typeof Date<"u"&&e instanceof Date?Ue.date:Ue.object;default:return Ue.unknown}},je=Rt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ua extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},s=i=>{for(const l of i.issues)if(l.code==="invalid_union")l.unionErrors.map(s);else if(l.code==="invalid_return_type")s(l.returnTypeError);else if(l.code==="invalid_arguments")s(l.argumentsError);else if(l.path.length===0)r._errors.push(n(l));else{let u=r,d=0;for(;d<l.path.length;){const f=l.path[d];d===l.path.length-1?(u[f]=u[f]||{_errors:[]},u[f]._errors.push(n(l))):u[f]=u[f]||{_errors:[]},u=u[f],d++}}};return s(this),r}static assert(t){if(!(t instanceof ua))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Rt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(t(s))}else r.push(t(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ua.create=e=>new ua(e);const zw=(e,t)=>{let n;switch(e.code){case je.invalid_type:e.received===Ue.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case je.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Rt.jsonStringifyReplacer)}`;break;case je.unrecognized_keys:n=`Unrecognized key(s) in object: ${Rt.joinValues(e.keys,", ")}`;break;case je.invalid_union:n="Invalid input";break;case je.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Rt.joinValues(e.options)}`;break;case je.invalid_enum_value:n=`Invalid enum value. Expected ${Rt.joinValues(e.options)}, received '${e.received}'`;break;case je.invalid_arguments:n="Invalid function arguments";break;case je.invalid_return_type:n="Invalid function return type";break;case je.invalid_date:n="Invalid date";break;case je.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Rt.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case je.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case je.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case je.custom:n="Invalid input";break;case je.invalid_intersection_types:n="Intersection results could not be merged";break;case je.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case je.not_finite:n="Number must be finite";break;default:n=t.defaultError,Rt.assertNever(e)}return{message:n}};let UZ=zw;function BZ(){return UZ}const qZ=e=>{const{data:t,path:n,errorMaps:r,issueData:s}=e,i=[...n,...s.path||[]],l={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let u="";const d=r.filter(f=>!!f).slice().reverse();for(const f of d)u=f(l,{data:t,defaultError:u}).message;return{...s,path:i,message:u}};function Ie(e,t){const n=BZ(),r=qZ({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===zw?void 0:zw].filter(s=>!!s)});e.common.issues.push(r)}class Pr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const s of n){if(s.status==="aborted")return lt;s.status==="dirty"&&t.dirty(),r.push(s.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const s of n){const i=await s.key,l=await s.value;r.push({key:i,value:l})}return Pr.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const s of n){const{key:i,value:l}=s;if(i.status==="aborted"||l.status==="aborted")return lt;i.status==="dirty"&&t.dirty(),l.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof l.value<"u"||s.alwaysSet)&&(r[i.value]=l.value)}return{status:t.value,value:r}}}const lt=Object.freeze({status:"aborted"}),md=e=>({status:"dirty",value:e}),As=e=>({status:"valid",value:e}),eT=e=>e.status==="aborted",tT=e=>e.status==="dirty",Lc=e=>e.status==="valid",mp=e=>typeof Promise<"u"&&e instanceof Promise;var Je;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Je||(Je={}));class Ai{constructor(t,n,r,s){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const nT=(e,t)=>{if(Lc(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ua(e.common.issues);return this._error=n,this._error}}};function xt(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:s}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(l,u)=>{const{message:d}=e;return l.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:d??r??u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:d??n??u.defaultError}},description:s}}class Tt{get description(){return this._def.description}_getType(t){return Wa(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Wa(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Pr,ctx:{common:t.parent.common,data:t.data,parsedType:Wa(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(mp(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Wa(t)},s=this._parseSync({data:t,path:r.path,parent:r});return nT(r,s)}"~validate"(t){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Wa(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:n});return Lc(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(i=>Lc(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Wa(t)},s=this._parse({data:t,path:r.path,parent:r}),i=await(mp(s)?s:Promise.resolve(s));return nT(r,i)}refine(t,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const l=t(s),u=()=>i.addIssue({code:je.custom,...r(s)});return typeof Promise<"u"&&l instanceof Promise?l.then(d=>d?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(t,n){return this._refinement((r,s)=>t(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(t){return new fl({schema:this,typeName:ct.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return sa.create(this,this._def)}nullable(){return hl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ti.create(this)}promise(){return wp.create(this,this._def)}or(t){return gp.create([this,t],this._def)}and(t){return yp.create(this,t,this._def)}transform(t){return new fl({...xt(this._def),schema:this,typeName:ct.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new bp({...xt(this._def),innerType:this,defaultValue:n,typeName:ct.ZodDefault})}brand(){return new gD({typeName:ct.ZodBranded,type:this,...xt(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new _p({...xt(this._def),innerType:this,catchValue:n,typeName:ct.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return Gb.create(this,t)}readonly(){return Sp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const WZ=/^c[^\s-]{8,}$/i,HZ=/^[0-9a-z]+$/,GZ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,KZ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,YZ=/^[a-z0-9_-]{21}$/i,QZ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,XZ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,JZ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ZZ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ex;const eee=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,tee=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,nee=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ree=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,see=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,iee=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,hD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",aee=new RegExp(`^${hD}$`);function mD(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function oee(e){return new RegExp(`^${mD(e)}$`)}function lee(e){let t=`${hD}T${mD(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function cee(e,t){return!!((t==="v4"||!t)&&eee.test(e)||(t==="v6"||!t)&&nee.test(e))}function uee(e,t){if(!QZ.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&s.alg!==t)}catch{return!1}}function dee(e,t){return!!((t==="v4"||!t)&&tee.test(e)||(t==="v6"||!t)&&ree.test(e))}class ji extends Tt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Ue.string){const i=this._getOrReturnCtx(t);return Ie(i,{code:je.invalid_type,expected:Ue.string,received:i.parsedType}),lt}const r=new Pr;let s;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(s=this._getOrReturnCtx(t,s),Ie(s,{code:je.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(s=this._getOrReturnCtx(t,s),Ie(s,{code:je.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const l=t.data.length>i.value,u=t.data.length<i.value;(l||u)&&(s=this._getOrReturnCtx(t,s),l?Ie(s,{code:je.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):u&&Ie(s,{code:je.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")JZ.test(t.data)||(s=this._getOrReturnCtx(t,s),Ie(s,{validation:"email",code:je.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")ex||(ex=new RegExp(ZZ,"u")),ex.test(t.data)||(s=this._getOrReturnCtx(t,s),Ie(s,{validation:"emoji",code:je.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")KZ.test(t.data)||(s=this._getOrReturnCtx(t,s),Ie(s,{validation:"uuid",code:je.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")YZ.test(t.data)||(s=this._getOrReturnCtx(t,s),Ie(s,{validation:"nanoid",code:je.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")WZ.test(t.data)||(s=this._getOrReturnCtx(t,s),Ie(s,{validation:"cuid",code:je.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")HZ.test(t.data)||(s=this._getOrReturnCtx(t,s),Ie(s,{validation:"cuid2",code:je.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")GZ.test(t.data)||(s=this._getOrReturnCtx(t,s),Ie(s,{validation:"ulid",code:je.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),Ie(s,{validation:"url",code:je.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),Ie(s,{validation:"regex",code:je.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(t,s),Ie(s,{code:je.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(s=this._getOrReturnCtx(t,s),Ie(s,{code:je.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(s=this._getOrReturnCtx(t,s),Ie(s,{code:je.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?lee(i).test(t.data)||(s=this._getOrReturnCtx(t,s),Ie(s,{code:je.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?aee.test(t.data)||(s=this._getOrReturnCtx(t,s),Ie(s,{code:je.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?oee(i).test(t.data)||(s=this._getOrReturnCtx(t,s),Ie(s,{code:je.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?XZ.test(t.data)||(s=this._getOrReturnCtx(t,s),Ie(s,{validation:"duration",code:je.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?cee(t.data,i.version)||(s=this._getOrReturnCtx(t,s),Ie(s,{validation:"ip",code:je.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?uee(t.data,i.alg)||(s=this._getOrReturnCtx(t,s),Ie(s,{validation:"jwt",code:je.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?dee(t.data,i.version)||(s=this._getOrReturnCtx(t,s),Ie(s,{validation:"cidr",code:je.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?see.test(t.data)||(s=this._getOrReturnCtx(t,s),Ie(s,{validation:"base64",code:je.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?iee.test(t.data)||(s=this._getOrReturnCtx(t,s),Ie(s,{validation:"base64url",code:je.invalid_string,message:i.message}),r.dirty()):Rt.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(s=>t.test(s),{validation:n,code:je.invalid_string,...Je.errToObj(r)})}_addCheck(t){return new ji({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Je.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Je.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Je.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Je.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Je.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Je.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Je.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Je.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Je.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Je.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Je.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Je.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Je.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Je.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Je.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Je.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...Je.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...Je.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...Je.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...Je.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...Je.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...Je.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...Je.errToObj(n)})}nonempty(t){return this.min(1,Je.errToObj(t))}trim(){return new ji({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ji({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ji({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ji.create=e=>new ji({checks:[],typeName:ct.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...xt(e)});function fee(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(e.toFixed(s).replace(".","")),l=Number.parseInt(t.toFixed(s).replace(".",""));return i%l/10**s}class ll extends Tt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Ue.number){const i=this._getOrReturnCtx(t);return Ie(i,{code:je.invalid_type,expected:Ue.number,received:i.parsedType}),lt}let r;const s=new Pr;for(const i of this._def.checks)i.kind==="int"?Rt.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Ie(r,{code:je.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Ie(r,{code:je.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Ie(r,{code:je.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?fee(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),Ie(r,{code:je.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Ie(r,{code:je.not_finite,message:i.message}),s.dirty()):Rt.assertNever(i);return{status:s.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Je.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Je.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Je.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Je.toString(n))}setLimit(t,n,r,s){return new ll({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Je.toString(s)}]})}_addCheck(t){return new ll({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Je.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Je.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Je.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Je.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Je.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Je.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:Je.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Je.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Je.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Rt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}ll.create=e=>new ll({checks:[],typeName:ct.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...xt(e)});class cl extends Tt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Ue.bigint)return this._getInvalidInput(t);let r;const s=new Pr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Ie(r,{code:je.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Ie(r,{code:je.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Ie(r,{code:je.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Rt.assertNever(i);return{status:s.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Ie(n,{code:je.invalid_type,expected:Ue.bigint,received:n.parsedType}),lt}gte(t,n){return this.setLimit("min",t,!0,Je.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Je.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Je.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Je.toString(n))}setLimit(t,n,r,s){return new cl({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Je.toString(s)}]})}_addCheck(t){return new cl({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Je.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Je.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Je.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Je.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Je.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}cl.create=e=>new cl({checks:[],typeName:ct.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...xt(e)});class pp extends Tt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Ue.boolean){const r=this._getOrReturnCtx(t);return Ie(r,{code:je.invalid_type,expected:Ue.boolean,received:r.parsedType}),lt}return As(t.data)}}pp.create=e=>new pp({typeName:ct.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...xt(e)});class Fc extends Tt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Ue.date){const i=this._getOrReturnCtx(t);return Ie(i,{code:je.invalid_type,expected:Ue.date,received:i.parsedType}),lt}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Ie(i,{code:je.invalid_date}),lt}const r=new Pr;let s;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(s=this._getOrReturnCtx(t,s),Ie(s,{code:je.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(s=this._getOrReturnCtx(t,s),Ie(s,{code:je.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Rt.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Fc({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:Je.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:Je.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Fc.create=e=>new Fc({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ct.ZodDate,...xt(e)});class rT extends Tt{_parse(t){if(this._getType(t)!==Ue.symbol){const r=this._getOrReturnCtx(t);return Ie(r,{code:je.invalid_type,expected:Ue.symbol,received:r.parsedType}),lt}return As(t.data)}}rT.create=e=>new rT({typeName:ct.ZodSymbol,...xt(e)});class Uw extends Tt{_parse(t){if(this._getType(t)!==Ue.undefined){const r=this._getOrReturnCtx(t);return Ie(r,{code:je.invalid_type,expected:Ue.undefined,received:r.parsedType}),lt}return As(t.data)}}Uw.create=e=>new Uw({typeName:ct.ZodUndefined,...xt(e)});class Bw extends Tt{_parse(t){if(this._getType(t)!==Ue.null){const r=this._getOrReturnCtx(t);return Ie(r,{code:je.invalid_type,expected:Ue.null,received:r.parsedType}),lt}return As(t.data)}}Bw.create=e=>new Bw({typeName:ct.ZodNull,...xt(e)});class sT extends Tt{constructor(){super(...arguments),this._any=!0}_parse(t){return As(t.data)}}sT.create=e=>new sT({typeName:ct.ZodAny,...xt(e)});class qw extends Tt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return As(t.data)}}qw.create=e=>new qw({typeName:ct.ZodUnknown,...xt(e)});class co extends Tt{_parse(t){const n=this._getOrReturnCtx(t);return Ie(n,{code:je.invalid_type,expected:Ue.never,received:n.parsedType}),lt}}co.create=e=>new co({typeName:ct.ZodNever,...xt(e)});class iT extends Tt{_parse(t){if(this._getType(t)!==Ue.undefined){const r=this._getOrReturnCtx(t);return Ie(r,{code:je.invalid_type,expected:Ue.void,received:r.parsedType}),lt}return As(t.data)}}iT.create=e=>new iT({typeName:ct.ZodVoid,...xt(e)});class Ti extends Tt{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),s=this._def;if(n.parsedType!==Ue.array)return Ie(n,{code:je.invalid_type,expected:Ue.array,received:n.parsedType}),lt;if(s.exactLength!==null){const l=n.data.length>s.exactLength.value,u=n.data.length<s.exactLength.value;(l||u)&&(Ie(n,{code:l?je.too_big:je.too_small,minimum:u?s.exactLength.value:void 0,maximum:l?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ie(n,{code:je.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ie(n,{code:je.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((l,u)=>s.type._parseAsync(new Ai(n,l,n.path,u)))).then(l=>Pr.mergeArray(r,l));const i=[...n.data].map((l,u)=>s.type._parseSync(new Ai(n,l,n.path,u)));return Pr.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new Ti({...this._def,minLength:{value:t,message:Je.toString(n)}})}max(t,n){return new Ti({...this._def,maxLength:{value:t,message:Je.toString(n)}})}length(t,n){return new Ti({...this._def,exactLength:{value:t,message:Je.toString(n)}})}nonempty(t){return this.min(1,t)}}Ti.create=(e,t)=>new Ti({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ct.ZodArray,...xt(t)});function rc(e){if(e instanceof $n){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=sa.create(rc(r))}return new $n({...e._def,shape:()=>t})}else return e instanceof Ti?new Ti({...e._def,type:rc(e.element)}):e instanceof sa?sa.create(rc(e.unwrap())):e instanceof hl?hl.create(rc(e.unwrap())):e instanceof ul?ul.create(e.items.map(t=>rc(t))):e}class $n extends Tt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Rt.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==Ue.object){const f=this._getOrReturnCtx(t);return Ie(f,{code:je.invalid_type,expected:Ue.object,received:f.parsedType}),lt}const{status:r,ctx:s}=this._processInputParams(t),{shape:i,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof co&&this._def.unknownKeys==="strip"))for(const f in s.data)l.includes(f)||u.push(f);const d=[];for(const f of l){const h=i[f],m=s.data[f];d.push({key:{status:"valid",value:f},value:h._parse(new Ai(s,m,s.path,f)),alwaysSet:f in s.data})}if(this._def.catchall instanceof co){const f=this._def.unknownKeys;if(f==="passthrough")for(const h of u)d.push({key:{status:"valid",value:h},value:{status:"valid",value:s.data[h]}});else if(f==="strict")u.length>0&&(Ie(s,{code:je.unrecognized_keys,keys:u}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const h of u){const m=s.data[h];d.push({key:{status:"valid",value:h},value:f._parse(new Ai(s,m,s.path,h)),alwaysSet:h in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const f=[];for(const h of d){const m=await h.key,g=await h.value;f.push({key:m,value:g,alwaysSet:h.alwaysSet})}return f}).then(f=>Pr.mergeObjectSync(r,f)):Pr.mergeObjectSync(r,d)}get shape(){return this._def.shape()}strict(t){return Je.errToObj,new $n({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,l;const s=((l=(i=this._def).errorMap)==null?void 0:l.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Je.errToObj(t).message??s}:{message:s}}}:{}})}strip(){return new $n({...this._def,unknownKeys:"strip"})}passthrough(){return new $n({...this._def,unknownKeys:"passthrough"})}extend(t){return new $n({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new $n({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ct.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new $n({...this._def,catchall:t})}pick(t){const n={};for(const r of Rt.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new $n({...this._def,shape:()=>n})}omit(t){const n={};for(const r of Rt.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new $n({...this._def,shape:()=>n})}deepPartial(){return rc(this)}partial(t){const n={};for(const r of Rt.objectKeys(this.shape)){const s=this.shape[r];t&&!t[r]?n[r]=s:n[r]=s.optional()}return new $n({...this._def,shape:()=>n})}required(t){const n={};for(const r of Rt.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof sa;)i=i._def.innerType;n[r]=i}return new $n({...this._def,shape:()=>n})}keyof(){return pD(Rt.objectKeys(this.shape))}}$n.create=(e,t)=>new $n({shape:()=>e,unknownKeys:"strip",catchall:co.create(),typeName:ct.ZodObject,...xt(t)});$n.strictCreate=(e,t)=>new $n({shape:()=>e,unknownKeys:"strict",catchall:co.create(),typeName:ct.ZodObject,...xt(t)});$n.lazycreate=(e,t)=>new $n({shape:e,unknownKeys:"strip",catchall:co.create(),typeName:ct.ZodObject,...xt(t)});class gp extends Tt{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function s(i){for(const u of i)if(u.result.status==="valid")return u.result;for(const u of i)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;const l=i.map(u=>new ua(u.ctx.common.issues));return Ie(n,{code:je.invalid_union,unionErrors:l}),lt}if(n.common.async)return Promise.all(r.map(async i=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(s);{let i;const l=[];for(const d of r){const f={...n,common:{...n.common,issues:[]},parent:null},h=d._parseSync({data:n.data,path:n.path,parent:f});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:f}),f.common.issues.length&&l.push(f.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const u=l.map(d=>new ua(d));return Ie(n,{code:je.invalid_union,unionErrors:u}),lt}}get options(){return this._def.options}}gp.create=(e,t)=>new gp({options:e,typeName:ct.ZodUnion,...xt(t)});const Qi=e=>e instanceof Hw?Qi(e.schema):e instanceof fl?Qi(e.innerType()):e instanceof xp?[e.value]:e instanceof dl?e.options:e instanceof Gw?Rt.objectValues(e.enum):e instanceof bp?Qi(e._def.innerType):e instanceof Uw?[void 0]:e instanceof Bw?[null]:e instanceof sa?[void 0,...Qi(e.unwrap())]:e instanceof hl?[null,...Qi(e.unwrap())]:e instanceof gD||e instanceof Sp?Qi(e.unwrap()):e instanceof _p?Qi(e._def.innerType):[];class Hb extends Tt{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Ue.object)return Ie(n,{code:je.invalid_type,expected:Ue.object,received:n.parsedType}),lt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Ie(n,{code:je.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),lt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const s=new Map;for(const i of n){const l=Qi(i.shape[t]);if(!l.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const u of l){if(s.has(u))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(u)}`);s.set(u,i)}}return new Hb({typeName:ct.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:s,...xt(r)})}}function Ww(e,t){const n=Wa(e),r=Wa(t);if(e===t)return{valid:!0,data:e};if(n===Ue.object&&r===Ue.object){const s=Rt.objectKeys(t),i=Rt.objectKeys(e).filter(u=>s.indexOf(u)!==-1),l={...e,...t};for(const u of i){const d=Ww(e[u],t[u]);if(!d.valid)return{valid:!1};l[u]=d.data}return{valid:!0,data:l}}else if(n===Ue.array&&r===Ue.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let i=0;i<e.length;i++){const l=e[i],u=t[i],d=Ww(l,u);if(!d.valid)return{valid:!1};s.push(d.data)}return{valid:!0,data:s}}else return n===Ue.date&&r===Ue.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class yp extends Tt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=(i,l)=>{if(eT(i)||eT(l))return lt;const u=Ww(i.value,l.value);return u.valid?((tT(i)||tT(l))&&n.dirty(),{status:n.value,value:u.data}):(Ie(r,{code:je.invalid_intersection_types}),lt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,l])=>s(i,l)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}yp.create=(e,t,n)=>new yp({left:e,right:t,typeName:ct.ZodIntersection,...xt(n)});class ul extends Tt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ue.array)return Ie(r,{code:je.invalid_type,expected:Ue.array,received:r.parsedType}),lt;if(r.data.length<this._def.items.length)return Ie(r,{code:je.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),lt;!this._def.rest&&r.data.length>this._def.items.length&&(Ie(r,{code:je.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((l,u)=>{const d=this._def.items[u]||this._def.rest;return d?d._parse(new Ai(r,l,r.path,u)):null}).filter(l=>!!l);return r.common.async?Promise.all(i).then(l=>Pr.mergeArray(n,l)):Pr.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new ul({...this._def,rest:t})}}ul.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ul({items:e,typeName:ct.ZodTuple,rest:null,...xt(t)})};class vp extends Tt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ue.object)return Ie(r,{code:je.invalid_type,expected:Ue.object,received:r.parsedType}),lt;const s=[],i=this._def.keyType,l=this._def.valueType;for(const u in r.data)s.push({key:i._parse(new Ai(r,u,r.path,u)),value:l._parse(new Ai(r,r.data[u],r.path,u)),alwaysSet:u in r.data});return r.common.async?Pr.mergeObjectAsync(n,s):Pr.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Tt?new vp({keyType:t,valueType:n,typeName:ct.ZodRecord,...xt(r)}):new vp({keyType:ji.create(),valueType:t,typeName:ct.ZodRecord,...xt(n)})}}class aT extends Tt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ue.map)return Ie(r,{code:je.invalid_type,expected:Ue.map,received:r.parsedType}),lt;const s=this._def.keyType,i=this._def.valueType,l=[...r.data.entries()].map(([u,d],f)=>({key:s._parse(new Ai(r,u,r.path,[f,"key"])),value:i._parse(new Ai(r,d,r.path,[f,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const d of l){const f=await d.key,h=await d.value;if(f.status==="aborted"||h.status==="aborted")return lt;(f.status==="dirty"||h.status==="dirty")&&n.dirty(),u.set(f.value,h.value)}return{status:n.value,value:u}})}else{const u=new Map;for(const d of l){const f=d.key,h=d.value;if(f.status==="aborted"||h.status==="aborted")return lt;(f.status==="dirty"||h.status==="dirty")&&n.dirty(),u.set(f.value,h.value)}return{status:n.value,value:u}}}}aT.create=(e,t,n)=>new aT({valueType:t,keyType:e,typeName:ct.ZodMap,...xt(n)});class Yd extends Tt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ue.set)return Ie(r,{code:je.invalid_type,expected:Ue.set,received:r.parsedType}),lt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ie(r,{code:je.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ie(r,{code:je.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function l(d){const f=new Set;for(const h of d){if(h.status==="aborted")return lt;h.status==="dirty"&&n.dirty(),f.add(h.value)}return{status:n.value,value:f}}const u=[...r.data.values()].map((d,f)=>i._parse(new Ai(r,d,r.path,f)));return r.common.async?Promise.all(u).then(d=>l(d)):l(u)}min(t,n){return new Yd({...this._def,minSize:{value:t,message:Je.toString(n)}})}max(t,n){return new Yd({...this._def,maxSize:{value:t,message:Je.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Yd.create=(e,t)=>new Yd({valueType:e,minSize:null,maxSize:null,typeName:ct.ZodSet,...xt(t)});class Hw extends Tt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Hw.create=(e,t)=>new Hw({getter:e,typeName:ct.ZodLazy,...xt(t)});class xp extends Tt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Ie(n,{received:n.data,code:je.invalid_literal,expected:this._def.value}),lt}return{status:"valid",value:t.data}}get value(){return this._def.value}}xp.create=(e,t)=>new xp({value:e,typeName:ct.ZodLiteral,...xt(t)});function pD(e,t){return new dl({values:e,typeName:ct.ZodEnum,...xt(t)})}class dl extends Tt{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Ie(n,{expected:Rt.joinValues(r),received:n.parsedType,code:je.invalid_type}),lt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Ie(n,{received:n.data,code:je.invalid_enum_value,options:r}),lt}return As(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return dl.create(t,{...this._def,...n})}exclude(t,n=this._def){return dl.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}dl.create=pD;class Gw extends Tt{_parse(t){const n=Rt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Ue.string&&r.parsedType!==Ue.number){const s=Rt.objectValues(n);return Ie(r,{expected:Rt.joinValues(s),received:r.parsedType,code:je.invalid_type}),lt}if(this._cache||(this._cache=new Set(Rt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const s=Rt.objectValues(n);return Ie(r,{received:r.data,code:je.invalid_enum_value,options:s}),lt}return As(t.data)}get enum(){return this._def.values}}Gw.create=(e,t)=>new Gw({values:e,typeName:ct.ZodNativeEnum,...xt(t)});class wp extends Tt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Ue.promise&&n.common.async===!1)return Ie(n,{code:je.invalid_type,expected:Ue.promise,received:n.parsedType}),lt;const r=n.parsedType===Ue.promise?n.data:Promise.resolve(n.data);return As(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}wp.create=(e,t)=>new wp({type:e,typeName:ct.ZodPromise,...xt(t)});class fl extends Tt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ct.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=this._def.effect||null,i={addIssue:l=>{Ie(r,l),l.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const l=s.transform(r.data,i);if(r.common.async)return Promise.resolve(l).then(async u=>{if(n.value==="aborted")return lt;const d=await this._def.schema._parseAsync({data:u,path:r.path,parent:r});return d.status==="aborted"?lt:d.status==="dirty"||n.value==="dirty"?md(d.value):d});{if(n.value==="aborted")return lt;const u=this._def.schema._parseSync({data:l,path:r.path,parent:r});return u.status==="aborted"?lt:u.status==="dirty"||n.value==="dirty"?md(u.value):u}}if(s.type==="refinement"){const l=u=>{const d=s.refinement(u,i);if(r.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?lt:(u.status==="dirty"&&n.dirty(),l(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?lt:(u.status==="dirty"&&n.dirty(),l(u.value).then(()=>({status:n.value,value:u.value}))))}if(s.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Lc(l))return lt;const u=s.transform(l.value,i);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>Lc(l)?Promise.resolve(s.transform(l.value,i)).then(u=>({status:n.value,value:u})):lt);Rt.assertNever(s)}}fl.create=(e,t,n)=>new fl({schema:e,typeName:ct.ZodEffects,effect:t,...xt(n)});fl.createWithPreprocess=(e,t,n)=>new fl({schema:t,effect:{type:"preprocess",transform:e},typeName:ct.ZodEffects,...xt(n)});class sa extends Tt{_parse(t){return this._getType(t)===Ue.undefined?As(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}sa.create=(e,t)=>new sa({innerType:e,typeName:ct.ZodOptional,...xt(t)});class hl extends Tt{_parse(t){return this._getType(t)===Ue.null?As(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}hl.create=(e,t)=>new hl({innerType:e,typeName:ct.ZodNullable,...xt(t)});class bp extends Tt{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===Ue.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}bp.create=(e,t)=>new bp({innerType:e,typeName:ct.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...xt(t)});class _p extends Tt{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return mp(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ua(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ua(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}_p.create=(e,t)=>new _p({innerType:e,typeName:ct.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...xt(t)});class oT extends Tt{_parse(t){if(this._getType(t)!==Ue.nan){const r=this._getOrReturnCtx(t);return Ie(r,{code:je.invalid_type,expected:Ue.nan,received:r.parsedType}),lt}return{status:"valid",value:t.data}}}oT.create=e=>new oT({typeName:ct.ZodNaN,...xt(e)});class gD extends Tt{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Gb extends Tt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?lt:i.status==="dirty"?(n.dirty(),md(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?lt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(t,n){return new Gb({in:t,out:n,typeName:ct.ZodPipeline})}}class Sp extends Tt{_parse(t){const n=this._def.innerType._parse(t),r=s=>(Lc(s)&&(s.value=Object.freeze(s.value)),s);return mp(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}Sp.create=(e,t)=>new Sp({innerType:e,typeName:ct.ZodReadonly,...xt(t)});var ct;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ct||(ct={}));const Et=ji.create,hee=ll.create;cl.create;const mee=pp.create;Fc.create;const pee=qw.create;co.create;const Zp=Ti.create,Tr=$n.create;gp.create;const gee=Hb.create;yp.create;ul.create;const yee=vp.create,lT=xp.create,eg=dl.create;wp.create;sa.create;hl.create;const vee={string:(e=>ji.create({...e,coerce:!0})),number:(e=>ll.create({...e,coerce:!0})),boolean:(e=>pp.create({...e,coerce:!0})),bigint:(e=>cl.create({...e,coerce:!0})),date:(e=>Fc.create({...e,coerce:!0}))},cT=(e,t,n)=>{if(e&&"reportValidity"in e){const r=Ye(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},yD=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?cT(r.ref,n,e):r&&r.refs&&r.refs.forEach(s=>cT(s,n,e))}},xee=(e,t)=>{t.shouldUseNativeValidation&&yD(e,t);const n={};for(const r in e){const s=Ye(t.fields,r),i=Object.assign(e[r]||{},{ref:s&&s.ref});if(wee(t.names||Object.keys(e),r)){const l=Object.assign({},Ye(n,r));Yt(l,"root",i),Yt(n,r,l)}else Yt(n,r,i)}return n},wee=(e,t)=>{const n=uT(t);return e.some(r=>uT(r).match(`^${n}\\.\\d+`))};function uT(e){return e.replace(/\]|\[/g,"")}function bee(e,t){for(var n={};e.length;){var r=e[0],s=r.code,i=r.message,l=r.path.join(".");if(!n[l])if("unionErrors"in r){var u=r.unionErrors[0].errors[0];n[l]={message:u.message,type:u.code}}else n[l]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(h){return h.errors.forEach(function(m){return e.push(m)})}),t){var d=n[l].types,f=d&&d[r.code];n[l]=iD(l,t,n,s,f?[].concat(f,r.message):r.message)}e.shift()}return n}function vD(e,t,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve((function(l,u){try{var d=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(f){return i.shouldUseNativeValidation&&yD({},i),{errors:{},values:n.raw?Object.assign({},r):f}})}catch(f){return u(f)}return d&&d.then?d.then(void 0,u):d})(0,function(l){if((function(u){return Array.isArray(u==null?void 0:u.errors)})(l))return{values:{},errors:xee(bee(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}}}const _ee=Tr({firstName:Et().min(2,"First name is required"),lastName:Et().min(2,"Last name is required"),phone:Et().min(7,"Enter a valid phone number").regex(/^[0-9+\-() ]+$/,"Phone number can only include digits and basic symbols"),city:Et().min(2,"City is required"),schoolId:Et().min(2,"School ID is required"),childrenCount:vee.number().int().min(1,"At least one child is required"),notes:Et().optional()}),See=`
  mutation CreateParentProfile($input: user_profiles_insert_input!) {
    insert_user_profiles_one(object: $input) {
      user_id
    }
  }
`,jee=`
  mutation LinkParentSchool($parentId: uuid!, $schoolId: uuid!) {
    insert_parent_school_links_one(object: { parent_id: $parentId, school_id: $schoolId }) {
      id
    }
  }
`,Eee=`
  mutation AssignParentRole($userId: uuid!) {
    insert_user_roles_one(object: { user_id: $userId, role: "parent" }) {
      id
      role
    }
  }
`;function xD(){const e=Oi(),t=pl(),{toast:n}=ds(),r=x.useMemo(()=>{var f,h;return{firstName:((f=e==null?void 0:e.displayName)==null?void 0:f.split(" ")[0])||"",lastName:((h=e==null?void 0:e.displayName)==null?void 0:h.split(" ").slice(1).join(" "))||"",phone:"",city:"",schoolId:"",childrenCount:1,notes:""}},[e]),{register:s,handleSubmit:i,formState:{errors:l,isSubmitting:u}}=fD({resolver:vD(_ee),defaultValues:r}),d=async f=>{var S;if(!(e!=null&&e.id)){n({variant:"destructive",title:"You need to be signed in to continue",description:"Please log in again and restart onboarding."});return}const h={user_id:e.id,first_name:f.firstName,last_name:f.lastName,phone:f.phone,city:f.city,role:"parent",notes:f.notes,children_count:f.childrenCount,school_id:f.schoolId},{error:m,data:g}=await Nt.graphql.request(See,{input:h});if(m||!((S=g==null?void 0:g.insert_user_profiles_one)!=null&&S.user_id)){console.error("Failed to create parent profile",m),n({variant:"destructive",title:"Could not save your profile",description:"Please check your details and try again."});return}const y=g.insert_user_profiles_one.user_id,{error:w}=await Nt.graphql.request(jee,{parentId:y,schoolId:f.schoolId});if(w){console.error("Failed to link school",w),n({variant:"destructive",title:"School connection failed",description:"We saved your profile, but could not connect your school. Please try again."});return}const{error:b}=await Nt.graphql.request(Eee,{userId:e.id});if(b){console.error("Failed to assign parent role",b),n({variant:"destructive",title:"Role assignment failed",description:"Your profile is saved but we could not finalize your access. Contact support if this continues."});return}n({title:"Welcome to Teachmo!",description:"Your profile is set up and connected to your school."}),t("/dashboard")};return a.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:a.jsxs("div",{className:"max-w-3xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"mb-8 text-center",children:[a.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Parent onboarding"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-900 mt-2",children:"Tell us about your family"}),a.jsx("p",{className:"text-slate-600 mt-3 max-w-2xl mx-auto",children:"We use these details to personalize recommendations, connect you with your school, and set up the right parent experience."})]}),a.jsxs(Ne,{className:"shadow-lg border-slate-200",children:[a.jsxs(Oe,{children:[a.jsx(Le,{children:"Parent details"}),a.jsx(Bd,{children:"Share a few details so we can tailor Teachmo to your family."})]}),a.jsx(Te,{children:a.jsxs("form",{className:"space-y-6",onSubmit:i(d),children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"firstName",children:"First name"}),a.jsx(be,{id:"firstName",autoComplete:"given-name",...s("firstName")}),l.firstName&&a.jsx("p",{className:"text-sm text-red-600",children:l.firstName.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"lastName",children:"Last name"}),a.jsx(be,{id:"lastName",autoComplete:"family-name",...s("lastName")}),l.lastName&&a.jsx("p",{className:"text-sm text-red-600",children:l.lastName.message})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"phone",children:"Mobile number"}),a.jsx(be,{id:"phone",placeholder:"(555) 123-4567",...s("phone")}),l.phone&&a.jsx("p",{className:"text-sm text-red-600",children:l.phone.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"city",children:"City"}),a.jsx(be,{id:"city",autoComplete:"address-level2",placeholder:"City",...s("city")}),l.city&&a.jsx("p",{className:"text-sm text-red-600",children:l.city.message})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"schoolId",children:"School ID"}),a.jsx(be,{id:"schoolId",placeholder:"Enter your school's ID",...s("schoolId")}),l.schoolId&&a.jsx("p",{className:"text-sm text-red-600",children:l.schoolId.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"childrenCount",children:"Number of children"}),a.jsx(be,{id:"childrenCount",type:"number",min:1,...s("childrenCount")}),l.childrenCount&&a.jsx("p",{className:"text-sm text-red-600",children:l.childrenCount.message})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"notes",children:"What should we know?"}),a.jsx(an,{id:"notes",placeholder:"Tell us about your child's interests, learning goals, or support needs",rows:4,...s("notes")}),l.notes&&a.jsx("p",{className:"text-sm text-red-600",children:l.notes.message})]}),a.jsx(we,{className:"w-full md:w-auto",type:"submit",disabled:u,children:u?"Saving...":"Complete setup"})]})})]})]})})}const kee=Object.freeze(Object.defineProperty({__proto__:null,default:xD},Symbol.toStringTag,{value:"Module"})),Nee=Tr({firstName:Et().min(2,"First name is required"),lastName:Et().min(2,"Last name is required"),phone:Et().min(7,"Enter a valid phone number").regex(/^[0-9+\-() ]+$/,"Phone number can only include digits and basic symbols"),schoolId:Et().min(2,"School ID is required"),subjects:Et().min(2,"Please tell us what you teach"),grades:Et().min(1,"List at least one grade level"),teachingFocus:Et().optional()}),Tee=`
  mutation CreateTeacherProfile($input: user_profiles_insert_input!) {
    insert_user_profiles_one(object: $input) {
      user_id
    }
  }
`,Cee=`
  mutation AssignTeacherRole($userId: uuid!) {
    insert_user_roles_one(object: { user_id: $userId, role: "teacher" }) {
      id
      role
    }
  }
`,Pee=`
  mutation ConnectTeacherSchool($teacherId: uuid!, $schoolId: uuid!) {
    insert_teacher_school_links_one(object: { teacher_id: $teacherId, school_id: $schoolId }) {
      id
    }
  }
`;function wD(){const e=Oi(),t=pl(),{toast:n}=ds(),r=x.useMemo(()=>{var f,h;return{firstName:((f=e==null?void 0:e.displayName)==null?void 0:f.split(" ")[0])||"",lastName:((h=e==null?void 0:e.displayName)==null?void 0:h.split(" ").slice(1).join(" "))||"",phone:"",schoolId:"",subjects:"",grades:"",bio:""}},[e]),{register:s,handleSubmit:i,formState:{errors:l,isSubmitting:u}}=fD({resolver:vD(Nee),defaultValues:r}),d=async f=>{var S;if(!(e!=null&&e.id)){n({variant:"destructive",title:"You need to be signed in to continue",description:"Please log in again and restart onboarding."});return}const h={user_id:e.id,first_name:f.firstName,last_name:f.lastName,phone:f.phone,school_id:f.schoolId,subjects:f.subjects,grades:f.grades,bio:f.bio,role:"teacher"},{error:m,data:g}=await Nt.graphql.request(Tee,{input:h});if(m||!((S=g==null?void 0:g.insert_user_profiles_one)!=null&&S.user_id)){console.error("Failed to create teacher profile",m),n({variant:"destructive",title:"Could not save your profile",description:"Please verify the details and try again."});return}const y=g.insert_user_profiles_one.user_id,{error:w}=await Nt.graphql.request(Pee,{teacherId:y,schoolId:f.schoolId});if(w){console.error("Failed to connect teacher to school",w),n({variant:"destructive",title:"School connection failed",description:"Your profile is saved but we could not connect to your school. Please try again."});return}const{error:b}=await Nt.graphql.request(Cee,{userId:e.id});if(b){console.error("Failed to assign teacher role",b),n({variant:"destructive",title:"Role assignment failed",description:"Your profile is saved but we could not finalize your access. Contact support if this continues."});return}n({title:"Welcome to Teachmo!",description:"Your classroom profile is ready. We connected you to your school and saved your teaching details."}),t("/teacher/dashboard")};return a.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-50 to-white",children:a.jsxs("div",{className:"max-w-3xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"mb-8 text-center",children:[a.jsx("p",{className:"text-sm font-medium text-indigo-600",children:"Teacher onboarding"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-900 mt-2",children:"Set up your classroom profile"}),a.jsx("p",{className:"text-slate-600 mt-3 max-w-2xl mx-auto",children:"Add your teaching details so we can personalize resources, connect you with parents, and assign the right role."})]}),a.jsxs(Ne,{className:"shadow-lg border-slate-200",children:[a.jsxs(Oe,{children:[a.jsx(Le,{children:"Teacher details"}),a.jsx(Bd,{children:"Share the basics of your classroom so we can get everything ready."})]}),a.jsx(Te,{children:a.jsxs("form",{className:"space-y-6",onSubmit:i(d),children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"firstName",children:"First name"}),a.jsx(be,{id:"firstName",autoComplete:"given-name",...s("firstName")}),l.firstName&&a.jsx("p",{className:"text-sm text-red-600",children:l.firstName.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"lastName",children:"Last name"}),a.jsx(be,{id:"lastName",autoComplete:"family-name",...s("lastName")}),l.lastName&&a.jsx("p",{className:"text-sm text-red-600",children:l.lastName.message})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"phone",children:"Mobile number"}),a.jsx(be,{id:"phone",placeholder:"(555) 123-4567",...s("phone")}),l.phone&&a.jsx("p",{className:"text-sm text-red-600",children:l.phone.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"schoolId",children:"School ID"}),a.jsx(be,{id:"schoolId",placeholder:"Enter your school's ID",...s("schoolId")}),l.schoolId&&a.jsx("p",{className:"text-sm text-red-600",children:l.schoolId.message})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"subjects",children:"Subjects"}),a.jsx(be,{id:"subjects",placeholder:"e.g., Math, Science",...s("subjects")}),l.subjects&&a.jsx("p",{className:"text-sm text-red-600",children:l.subjects.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"grades",children:"Grade levels"}),a.jsx(be,{id:"grades",placeholder:"e.g., 3rd-5th",...s("grades")}),l.grades&&a.jsx("p",{className:"text-sm text-red-600",children:l.grades.message})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"bio",children:"Teaching focus"}),a.jsx(an,{id:"bio",placeholder:"Share your teaching philosophy, classroom goals, or experience",rows:4,...s("bio")}),l.bio&&a.jsx("p",{className:"text-sm text-red-600",children:l.bio.message})]}),a.jsx(we,{className:"w-full md:w-auto",type:"submit",disabled:u,children:u?"Saving...":"Complete setup"})]})})]})]})})}const Aee=Object.freeze(Object.defineProperty({__proto__:null,default:wD},Symbol.toStringTag,{value:"Module"})),Ree=[{name:"Landing",path:"/",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>mZ),[])),isPublic:!0},{name:"Login",path:"/login",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>yZ),void 0)),isPublic:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading login..."})},{name:"Onboarding",path:"/onboarding",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>vZ),void 0)),isPublic:!0},{name:"AuthCallback",path:"/auth/callback",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>xZ),void 0)),isPublic:!0},{name:"UnifiedDiscover",path:"/discover",Component:x.lazy(()=>Be(()=>import("./Discover-8Ail9Kf2.js"),[])),requiresAuth:!0,allowedRoles:["parent","teacher"],requiredScopes:["content:read"],feature:"DISCOVER",fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading discover..."})},{name:"UnifiedCommunity",path:"/community",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>ile),void 0)),requiresAuth:!0,allowedRoles:["parent","teacher"],requiredScopes:["content:read"],feature:"COMMUNITY",fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading community..."})},{name:"Calendar",path:"/calendar",Component:x.lazy(()=>Be(()=>import("./Calendar-B25mHK3h.js"),__vite__mapDeps([0,1]))),requiresAuth:!0,allowedRoles:["parent","teacher"],requiredScopes:["content:read"],feature:"CALENDAR",fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading calendar..."})},{name:"Messages",path:"/messages",Component:x.lazy(()=>Be(()=>import("./Messages-DkmP-e9W.js"),[])),requiresAuth:!0,allowedRoles:["parent","teacher"],requiredScopes:["content:read"],feature:"MESSAGING",fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading messages..."})},{name:"MessagingRequests",path:"/messages/requests",Component:x.lazy(()=>Be(()=>import("./MessagingRequests-B_p45ZOt.js"),__vite__mapDeps([2,3]))),requiresAuth:!0,allowedRoles:["teacher","school_admin","district_admin","admin","system_admin"],requiredScopes:["content:read"],feature:"MESSAGING",fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading messaging requests..."})},{name:"AIAssistant",path:"/ai-assistant",Component:x.lazy(()=>Be(()=>import("./AIAssistant-3xuyhxMl.js"),__vite__mapDeps([4,5,6]))),requiresAuth:!0,allowedRoles:["parent","teacher","school_admin","district_admin","system_admin"],requiredScopes:["core:dashboard"],feature:"AI_ASSISTANT",fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading AI assistant..."})},{name:"AIExplainability",path:"/ai/explainability/:id",Component:x.lazy(()=>Be(()=>import("./AIExplainability-Bwhvcw5v.js"),__vite__mapDeps([7,5]))),requiresAuth:!0,allowedRoles:["parent","teacher","school_admin","district_admin","admin","system_admin"],requiredScopes:["core:dashboard"],feature:"AI_ASSISTANT",fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading AI explainability..."})},{name:"Settings",path:"/settings",Component:x.lazy(()=>Be(()=>import("./Settings-BSdk_sqB.js"),[])),requiresAuth:!0,allowedRoles:["parent","teacher","school_admin","district_admin","system_admin"],requiredScopes:["core:dashboard"],fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading settings..."})},{name:"Dashboard",path:"/dashboard",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>kU),void 0)),allowedRoles:["parent","teacher","system_admin","school_admin","district_admin"],requiredScopes:["core:dashboard"],fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading dashboard..."})},{name:"ParentDashboard",path:"/parent/dashboard",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>dZ),void 0)),allowedRoles:["parent"],requiredScopes:["content:read"],fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading parent dashboard..."})},{name:"WeeklyBriefDetail",path:"/briefs/:id",Component:x.lazy(()=>Be(()=>import("./WeeklyBriefDetail-CRi0UeWL.js"),[])),requiresAuth:!0,allowedRoles:["parent"],requiredScopes:["content:read"],fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading weekly brief..."})},{name:"ParentOnboarding",path:"/onboarding/parent",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>kee),void 0)),requiresAuth:!0,allowedRoles:["parent"],fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading parent onboarding..."})},{name:"TeacherOnboarding",path:"/onboarding/teacher",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>Aee),void 0)),requiresAuth:!0,allowedRoles:["teacher"],fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading teacher onboarding..."})},{name:"TeacherDashboard",path:"/teacher/dashboard",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>fZ),void 0)),allowedRoles:["teacher"],requiredScopes:["classrooms:manage"],fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading teacher dashboard..."})},{name:"TeacherClasses",path:"/teacher-classes",Component:x.lazy(()=>Be(()=>import("./TeacherClasses-zINahfb9.js"),__vite__mapDeps([8,9,6]))),requiresAuth:!0,allowedRoles:["teacher"],requiredScopes:["classrooms:manage"],feature:"TEACHER_CLASSES",fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading classes..."})},{name:"TeacherAssignments",path:"/teacher-assignments",Component:x.lazy(()=>Be(()=>import("./TeacherAssignments-D3bSHUEg.js"),__vite__mapDeps([10,9,6]))),requiresAuth:!0,allowedRoles:["teacher"],requiredScopes:["classrooms:manage"],feature:"TEACHER_ASSIGNMENTS",fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading assignments..."})},{name:"TeacherMessages",path:"/teacher-messages",Component:x.lazy(()=>Be(()=>import("./TeacherMessages-C-EgyiDW.js"),[])),requiresAuth:!0,allowedRoles:["teacher"],requiredScopes:["classrooms:manage"],feature:"TEACHER_MESSAGES",fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading teacher messages..."})},{name:"PartnerDashboard",path:"/partners/dashboard",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>$1),void 0)),allowedRoles:["admin","system_admin"],fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading partner portal..."})},{name:"PartnerPortal",path:"/partners",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>UX),void 0)),requiresAuth:!0,allowedRoles:["partner","admin","system_admin"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading partner portal..."})},{name:"PartnerSubmissions",path:"/partners/submissions",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>qX),void 0)),requiresAuth:!0,allowedRoles:["partner","admin","system_admin"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading partner submissions..."})},{name:"PartnerTraining",path:"/partners/training",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>WX),void 0)),requiresAuth:!0,allowedRoles:["partner","admin","system_admin"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading partner training..."})},{name:"PartnerOffers",path:"/partners/offers",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>KJ),void 0)),requiresAuth:!0,allowedRoles:["partner","admin","system_admin"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading partner offers..."})},{name:"PartnerBilling",path:"/partners/billing",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>QJ),void 0)),requiresAuth:!0,allowedRoles:["partner","admin","system_admin"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading partner billing..."})},{name:"PartnerIncentives",path:"/partners/incentives",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>jJ),void 0)),requiresAuth:!0,allowedRoles:["partner","admin","system_admin"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading partner incentives..."})},{name:"AdminPartners",path:"/admin/partners",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>$1),void 0)),allowedRoles:["system_admin","admin"],requiredScopes:["org:manage"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading partner admin dashboard..."})},{name:"AdminDashboard",path:"/admin",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>b8),void 0)),allowedRoles:["system_admin","school_admin","district_admin"],requiredScopes:["org:manage"],fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading admin dashboard..."})},{name:"AdminWeeklyBriefs",path:"/admin/weekly-briefs",Component:x.lazy(()=>Be(()=>import("./AdminWeeklyBriefs-CjSg1pxI.js"),[])),allowedRoles:["system_admin","school_admin","district_admin"],requiredScopes:["org:manage"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading weekly briefs..."})},{name:"AdminAnalytics",path:"/admin/analytics",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>XW),void 0)),allowedRoles:["system_admin","school_admin","district_admin"],requiredScopes:["reporting:view"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading admin analytics..."})},{name:"AdminObservability",path:"/admin/observability",Component:x.lazy(()=>Be(()=>import("./AdminObservability-DvwBdvOo.js"),__vite__mapDeps([11,1]))),allowedRoles:["system_admin","school_admin","district_admin"],requiredScopes:["org:manage"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading observability dashboard..."})},{name:"AdminSystemHealth",path:"/admin/system-health",Component:x.lazy(()=>Be(()=>import("./AdminSystemHealth-Beizoea-.js"),[])),allowedRoles:["system_admin","school_admin","district_admin"],requiredScopes:["org:manage"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading system health..."})},{name:"AdminNotifications",path:"/admin/notifications",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>g8),void 0)),allowedRoles:["system_admin","school_admin","district_admin"],requiredScopes:["org:manage"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading notifications..."})},{name:"AdminWorkflows",path:"/admin/workflows",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>P8),void 0)),allowedRoles:["system_admin","school_admin","district_admin"],requiredScopes:["automation:manage"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading workflows..."})},{name:"AdminTenantSettings",path:"/admin/tenant-settings",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>R8),void 0)),allowedRoles:["system_admin","school_admin","district_admin"],requiredScopes:["org:manage"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading tenant settings..."})},{name:"AdminSSOSettings",path:"/admin/sso",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>yG),void 0)),allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredScopes:["tenant:manage"],feature:"ENTERPRISE_SSO",internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading SSO settings..."})},{name:"AdminTenantDomains",path:"/admin/tenant-domains",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>vG),void 0)),allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredScopes:["tenant:manage"],feature:"ENTERPRISE_SSO",internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading tenant domains..."})},{name:"AdminUsers",path:"/admin/users",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>M8),void 0)),allowedRoles:["system_admin","school_admin","district_admin"],requiredScopes:["users:manage"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading admin users..."})},{name:"AdminAuditLogs",path:"/admin/audit-logs",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>lG),void 0)),allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredScopes:["safety:review"],feature:"ENTERPRISE_AUDIT_LOGS",internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading audit logs..."})},{name:"AdminCompliance",path:"/admin/compliance",Component:x.lazy(()=>Be(()=>import("./AdminCompliance-VScK9OTb.js"),[])),allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredScopes:["safety:review"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading compliance center..."})},{name:"AdminFeatureFlags",path:"/admin/feature-flags",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>hG),void 0)),allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredScopes:["tenant:manage"],feature:"ENTERPRISE_FEATURE_FLAGS",internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading feature flags..."})},{name:"AdminAIReview",path:"/admin/ai-review",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>V8),void 0)),allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredScopes:["safety:review"],feature:"ENTERPRISE_AI_REVIEW",internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading AI review queue..."})},{name:"AdminAIReviewQueue",path:"/admin/ai-review-queue",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>z8),void 0)),allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredScopes:["safety:review"],feature:"ENTERPRISE_AI_REVIEW",internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading AI review queue..."})},{name:"AdminAIGovernance",path:"/admin/ai-governance",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>L8),void 0)),allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredScopes:["safety:review"],feature:"ENTERPRISE_AI_GOVERNANCE",internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading AI governance..."})},{name:"AdminAIPrompts",path:"/admin/ai-prompts",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>wG),void 0)),allowedRoles:["system_admin","admin"],requiredScopes:["safety:review"],feature:"ENTERPRISE_AI_GOVERNANCE",internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading AI prompt library..."})},{name:"AdminSISRoster",path:"/admin/sis-roster",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>mG),void 0)),allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredScopes:["directory:manage"],feature:"ENTERPRISE_SIS_ROSTER",internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading SIS roster..."})},{name:"AdminIntegrationHealth",path:"/admin/integration-health",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>pG),void 0)),allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredScopes:["directory:manage"],internalOnly:!0,fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading integration health..."})},{name:"AdminModerationQueue",path:"/admin/moderation/messages",Component:x.lazy(()=>Be(()=>import("./AdminModerationQueue-Dc180m6-.js"),__vite__mapDeps([12,13]))),allowedRoles:["school_admin","district_admin","system_admin","admin"],requiredScopes:["safety:review"],fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading moderation queue..."})},{name:"AdminMessagingBlocklist",path:"/admin/moderation/blocks",Component:x.lazy(()=>Be(()=>import("./AdminMessagingBlocklist-CEYdGGJH.js"),__vite__mapDeps([14,13]))),allowedRoles:["school_admin","district_admin","system_admin","admin"],requiredScopes:["safety:review"],fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading messaging blocklist..."})},{name:"AITransparency",path:"/ai/transparency",Component:x.lazy(()=>Be(()=>Promise.resolve().then(()=>zX),void 0)),isPublic:!0,feature:"ENTERPRISE_TRANSPARENCY",fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading AI transparency..."})},{name:"SchoolDirectory",path:"/school-directory",Component:x.lazy(()=>Be(()=>import("./SchoolDirectory-BdpI2Dlq.js"),__vite__mapDeps([15,3]))),requiresAuth:!0,allowedRoles:["parent","teacher","school_admin","district_admin","system_admin"],requiredScopes:["core:dashboard"],feature:"SCHOOL_DIRECTORY",fallback:a.jsx("p",{className:"p-6 text-gray-600",children:"Loading school directory..."})}],Iee={discover:"UnifiedDiscover",community:"UnifiedCommunity"},Qd=Ree.filter(e=>!e.internalOnly),Oee=Qd.reduce((e,t)=>({...e,[t.name]:t.path}),{});Qd.filter(e=>e.isPublic).map(e=>e.name);function bD(e=""){const t=e.toLowerCase(),n=Iee[t];if(n&&Qd.some(s=>s.name===n))return n;const r=Qd.find(s=>s.name.toLowerCase()===t);return r?r.name:e}function Dee(e=""){const t=bD(e);return Qd.find(n=>n.name===t)}function Kb(e,t={}){const n=bD(e),r=Dee(n),s=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=(r==null?void 0:r.path)||`/${s}`,l=new URLSearchParams;Object.entries(t).forEach(([d,f])=>l.append(d,String(f)));const u=l.toString();return u?`${i}?${u}`:i}function Mee(){return a.jsxs("div",{style:{padding:24,maxWidth:720,margin:"0 auto"},children:[a.jsx("h1",{style:{fontSize:24,fontWeight:700},children:"This feature is currently disabled"}),a.jsxs("p",{style:{marginTop:12,lineHeight:1.5},children:["Its in migration/QA. Enable it in ",a.jsx("code",{children:"src/config/features.ts"})," when ready."]}),a.jsx("div",{style:{marginTop:16},children:a.jsx(as,{to:Kb("Dashboard"),children:"Go back to Dashboard"})})]})}const dT=e=>{let t;const n=new Set,r=(f,h)=>{const m=typeof f=="function"?f(t):f;if(!Object.is(m,t)){const g=t;t=h??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(y=>y(t,g))}},s=()=>t,u={setState:r,getState:s,getInitialState:()=>d,subscribe:f=>(n.add(f),()=>n.delete(f))},d=t=e(r,s,u);return u},Lee=(e=>e?dT(e):dT),Fee=e=>e;function $ee(e,t=Fee){const n=oe.useSyncExternalStore(e.subscribe,oe.useCallback(()=>t(e.getState()),[e,t]),oe.useCallback(()=>t(e.getInitialState()),[e,t]));return oe.useDebugValue(n),n}const fT=e=>{const t=Lee(e),n=r=>$ee(t,r);return Object.assign(n,t),n},Vee=(e=>e?fT(e):fT),Pd=Vee(e=>({user:null,isAuthenticated:!1,featureFlags:{},notifications:[],setUser:t=>e({user:t,isAuthenticated:!!t}),setFeatureFlags:t=>e({featureFlags:t}),addNotification:t=>e(n=>({notifications:[t,...n.notifications]}))})),zee={DISCOVER:!0,COMMUNITY:!0,CALENDAR:!1,MESSAGING:!1,AI_ASSISTANT:!1,TEACHER_CLASSES:!1,TEACHER_ASSIGNMENTS:!1,TEACHER_MESSAGES:!1,PARTNER_PORTAL:!1,SCHOOL_DIRECTORY:!1,ENTERPRISE_SSO:!1,ENTERPRISE_AUDIT_LOGS:!1,ENTERPRISE_FEATURE_FLAGS:!1,ENTERPRISE_AI_GOVERNANCE:!1,ENTERPRISE_AI_REVIEW:!1,ENTERPRISE_SIS_ROSTER:!1,ENTERPRISE_TRANSPARENCY:!0,ENTERPRISE_MODE:!1,FEATURE_I18N:!1};function _D(e){var r;const t=(r=Pd.getState)==null?void 0:r.call(Pd),n=(t==null?void 0:t.featureFlags)??{};return n&&Object.prototype.hasOwnProperty.call(n,e)?!!n[e]:!!zee[e]}function Ki({feature:e,children:t,redirectTo:n}){return!e||_D(e)?t:n?a.jsx(Qs,{to:n,replace:!0}):a.jsx(Mee,{})}function Uee(){const{isAuthenticated:e}=ma(),t=uf(),{data:n}=vr(),r=x.useRef(!1);return x.useEffect(()=>{!e||!t||r.current||(r.current=!0,rs({eventName:"auth.login",entityType:"user",entityId:t,metadata:{role:(n==null?void 0:n.role)??null,district_id:(n==null?void 0:n.districtId)??null,school_id:(n==null?void 0:n.schoolId)??null,source:"client"}}))},[e,t,n==null?void 0:n.role,n==null?void 0:n.districtId,n==null?void 0:n.schoolId]),null}function SD({recommendation:e}){const{title:t,summary:n,tags:r=[],subject:s,gradeLevel:i,ctaLabel:l="View details",ctaHref:u}=e||{},d=()=>{up("Saved to your list",{description:t||"Recommendation saved"})},f=()=>{u?window.open(u,"_blank","noopener,noreferrer"):up("More details coming soon",{description:t||"This card is a preview."})};return a.jsxs(Ne,{className:"h-full border border-gray-200",children:[a.jsxs(Oe,{className:"flex flex-row items-start justify-between gap-2",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(Le,{className:"text-lg font-semibold text-gray-900",children:t||"Untitled"}),a.jsx("p",{className:"text-sm text-gray-600",children:n||"A curated learning experience awaits."})]}),a.jsx(vb,{className:"h-5 w-5 text-primary shrink-0"})]}),a.jsx(Te,{className:"space-y-2",children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[s?a.jsx(sr,{variant:"secondary",children:s}):null,i?a.jsxs(sr,{variant:"secondary",children:["Grade ",i]}):null,r==null?void 0:r.map(h=>a.jsx(sr,{variant:"outline",children:h},h))]})}),a.jsxs(CR,{className:"flex items-center justify-between gap-2",children:[a.jsxs(we,{variant:"ghost",size:"sm",className:"gap-2",onClick:d,children:[a.jsx(dH,{className:"h-4 w-4"}),"Save"]}),a.jsxs(we,{variant:"outline",size:"sm",className:"gap-2",onClick:f,children:[l,a.jsx(cH,{className:"h-4 w-4"})]})]})]})}SD.propTypes={recommendation:Ln.shape({title:Ln.string,summary:Ln.string,tags:Ln.arrayOf(Ln.string),subject:Ln.string,gradeLevel:Ln.oneOfType([Ln.string,Ln.number]),ctaLabel:Ln.string,ctaHref:Ln.string})};const Bee=async e=>{if(!e)return{items:[],unavailable:!0};try{const t=await le.functions.invoke("personalizedDiscoverFeed",{userId:e}),n=(t==null?void 0:t.recommendations)||(t==null?void 0:t.data)||t||[];return{items:Array.isArray(n)?n:[],unavailable:!1}}catch(t){const n=String((t==null?void 0:t.message)||"").toLowerCase(),r=n.includes("not found")||n.includes("404")||n.includes("missing")||n.includes("route not found");return{items:[],unavailable:r,error:t}}};function qee(){const e=Oi(),{data:t,isLoading:n,isFetching:r,refetch:s}=_t({queryKey:["personalized-discover-feed",e==null?void 0:e.id],enabled:!!(e!=null&&e.id),queryFn:()=>Bee(e==null?void 0:e.id),staleTime:1e3*60*5}),i=x.useMemo(()=>(t==null?void 0:t.items)||[],[t]),l=t==null?void 0:t.unavailable,u=async()=>{var f;const d=await s();d!=null&&d.error&&!((f=d==null?void 0:d.data)!=null&&f.unavailable)&&up("Unable to generate recommendations",{description:d.error.message||"Please try again shortly."})};return e?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Personalized for you"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Recommendations generated from your saved interests and classroom activity."})]}),a.jsxs(we,{variant:"secondary",size:"sm",className:"gap-2",onClick:u,disabled:r,children:[a.jsx(jw,{className:`h-4 w-4 ${r?"animate-spin":""}`}),r?"Refreshing":"Generate Recommendations"]})]}),n?a.jsx(Ne,{children:a.jsxs(Te,{className:"p-6 space-y-3",children:[a.jsx("div",{className:"h-4 w-1/3 rounded bg-gray-100"}),a.jsx("div",{className:"h-3 w-3/4 rounded bg-gray-100"}),a.jsx("div",{className:"h-3 w-2/3 rounded bg-gray-100"})]})}):null,!n&&i.length===0?a.jsxs(Ne,{className:"border-dashed",children:[a.jsx(Oe,{children:a.jsxs(Le,{className:"flex items-center gap-2 text-gray-800",children:[a.jsx(vb,{className:"h-4 w-4"}),"No Recommendations Yet"]})}),a.jsxs(Te,{className:"space-y-3 text-sm text-gray-600",children:[a.jsx("p",{children:"Well surface personalized ideas once the recommendation function is live for your account."}),a.jsx("div",{children:a.jsxs(we,{variant:"outline",size:"sm",className:"gap-2",onClick:u,disabled:r,children:[a.jsx(jw,{className:`h-4 w-4 ${r?"animate-spin":""}`}),r?"Checking again...":"Generate Recommendations"]})})]})]}):null,a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map((d,f)=>a.jsx(SD,{recommendation:d},(d==null?void 0:d.id)||(d==null?void 0:d.title)||f))}),t!=null&&t.error&&l?a.jsx("p",{className:"text-sm text-amber-600",children:"Recommendation service is not available yet. Well enable it as soon as it ships."}):null]}):null}const Wee=Object.entries(Oee||{}).map(([e,t])=>({name:e,path:t,normalizedName:e==null?void 0:e.toLowerCase(),normalizedPath:t==null?void 0:t.toLowerCase()})),Kw=(e="")=>e.replace(/^\//,"").replace(/-/g," ").replace(/\b\w/g,t=>t.toUpperCase()),Hee=(e="")=>{const t=e.toLowerCase(),n=Wee.find(({normalizedName:r,normalizedPath:s})=>r===t||s===t||s===`/${t}`);return n?{label:Kw(n.name),href:n.path}:{label:Kw(e),href:`/${e.replace(/^\//,"")}`}},Gee=(e,t,n)=>{if(Array.isArray(e)&&e.length>0)return e;if(Array.isArray(t)&&t.length>0)return t.map(s=>typeof s=="string"?Hee(s):s);if(n==="/")return[];const r=n.split("/").filter(Boolean);return r.map((s,i)=>({label:Kw(s),href:`/${r.slice(0,i+1).join("/")}`}))};function jD({items:e=[],segments:t=[]}){const n=si(),r=Gee(e,t,n.pathname);return a.jsx("nav",{"aria-label":"Breadcrumb",className:"flex items-center gap-2 text-sm text-gray-600",children:a.jsxs("ol",{className:"flex items-center gap-1",children:[a.jsx("li",{className:"flex items-center gap-1",children:a.jsxs(as,{to:"/",className:"flex items-center gap-1 text-gray-700 hover:text-gray-900",children:[a.jsx(MR,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Home"})]})}),r.map((s,i)=>{const l=i===r.length-1;return a.jsxs("li",{className:"flex items-center gap-1",children:[a.jsx(yb,{className:"h-3 w-3 text-gray-400"}),l?a.jsx("span",{className:"text-gray-500",children:s.label}):a.jsx(as,{to:s.href||"#",className:"text-gray-700 hover:text-gray-900",children:s.label})]},s.href||s.label)})]})})}jD.propTypes={items:Ln.arrayOf(Ln.shape({label:Ln.string.isRequired,href:Ln.string})),segments:Ln.arrayOf(Ln.string)};function Kee(e,t){var s;if(typeof t!="function")return;const n=Hc((e==null?void 0:e.preferred_active_role)||(e==null?void 0:e.role)||((s=e==null?void 0:e.metadata)==null?void 0:s.role)||(e==null?void 0:e.defaultRole)),r=zp(n);t(e?r:"/login",{replace:!0})}function Yee(){const e=pl(),t=Oi();return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(jD,{segments:["UnifiedDiscover"]}),a.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Discover"}),a.jsx("p",{className:"text-gray-600",children:"Personalized recommendations for families and classrooms, powered by the Nhost stack."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(we,{variant:"outline",className:"gap-2",onClick:()=>Kee(t,e),children:[a.jsx(oH,{className:"h-4 w-4"}),"Back to dashboard"]}),a.jsxs(we,{variant:"outline",className:"gap-2",onClick:()=>e("/library"),children:[a.jsx(rp,{className:"h-4 w-4"}),"Search library"]})]})]}),a.jsx(qee,{}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsxs(Le,{className:"flex items-center gap-2",children:[a.jsx(vb,{className:"h-5 w-5"}),"Always available"]})}),a.jsx(Te,{className:"text-sm text-gray-600",children:"Discover gracefully handles missing backend functions so migration work never blocks the UI."})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsxs(Le,{className:"flex items-center gap-2",children:[a.jsx(CH,{className:"h-5 w-5"}),"Explore by topic"]})}),a.jsx(Te,{className:"text-sm text-gray-600",children:"Browse by subject, grade, and interest tags to build a classroom-ready learning path."})]}),a.jsxs(Ne,{children:[a.jsx(Oe,{children:a.jsxs(Le,{className:"flex items-center gap-2",children:[a.jsx(rp,{className:"h-5 w-5"}),"Resource deep links"]})}),a.jsx(Te,{className:"text-sm text-gray-600",children:"The route map keeps breadcrumbs synced with GitHub so content can be traced and tested quickly."})]})]})]})}function Qee({user:e,onScopeChange:t}){const[n,r]=x.useState("global"),[s,i]=x.useState([]);x.useEffect(()=>{e&&((async()=>{try{const g=(await hd.filter({user_id:e.id}))[0]||{visibility_scope:"global"};r(g.visibility_scope)}catch(m){console.error("Error loading user scope:",m)}})(),l(e))},[e]);const l=h=>{const m=[{value:"global",label:"Global Community",description:"All Teachmo parents worldwide",icon:DR,badge:null}];h.district_id&&m.unshift({value:"district",label:"My District",description:"Parents and staff in my school district",icon:RR,badge:"District"}),h.school_id&&m.unshift({value:"school",label:"My School",description:"Parents and staff at my school",icon:LR,badge:"School"}),i(m)},u=h=>{r(h),t&&t(h)},f=s.find(h=>h.value===n);return a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[(f==null?void 0:f.icon)&&a.jsx(f.icon,{className:"w-5 h-5 text-gray-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:"Community View:"})]}),(f==null?void 0:f.badge)&&a.jsx(sr,{variant:"outline",className:"text-xs",children:f.badge})]}),a.jsxs(ln,{value:n,onValueChange:u,children:[a.jsx(nn,{className:"w-48",children:a.jsx(rn,{})}),a.jsx(sn,{children:s.map(h=>{const m=h.icon;return a.jsx(qe,{value:h.value,children:a.jsxs("div",{className:"flex items-center gap-2 w-full",children:[a.jsx(m,{className:"w-4 h-4"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium",children:h.label}),a.jsx("div",{className:"text-xs text-gray-500",children:h.description})]})]})},h.value)})})]})]}),n!=="global"&&a.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[a.jsx(FR,{className:"w-4 h-4"}),a.jsx("p",{className:"text-sm font-medium",children:n==="school"?"School Community":"District Community"})]}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:`You're viewing content from your educational community. Switch to "Global" to see all parents.`})]})]})}function pt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function hT(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function nu(...e){return t=>{let n=!1;const r=e.map(s=>{const i=hT(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():hT(e[s],null)}}}}function yr(...e){return x.useCallback(nu(...e),e)}function ru(e,t=[]){let n=[];function r(i,l){const u=x.createContext(l),d=n.length;n=[...n,l];const f=m=>{var _;const{scope:g,children:y,...w}=m,b=((_=g==null?void 0:g[e])==null?void 0:_[d])||u,S=x.useMemo(()=>w,Object.values(w));return a.jsx(b.Provider,{value:S,children:y})};f.displayName=i+"Provider";function h(m,g){var b;const y=((b=g==null?void 0:g[e])==null?void 0:b[d])||u,w=x.useContext(y);if(w)return w;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[f,h]}const s=()=>{const i=n.map(l=>x.createContext(l));return function(u){const d=(u==null?void 0:u[e])||i;return x.useMemo(()=>({[`__scope${e}`]:{...u,[e]:d}}),[u,d])}};return s.scopeName=e,[r,Xee(s,...t)]}function Xee(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const l=r.reduce((u,{useScope:d,scopeName:f})=>{const m=d(i)[`__scope${f}`];return{...u,...m}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}var da=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},Jee=lC[" useInsertionEffect ".trim().toString()]||da;function Yb({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,i,l]=Zee({defaultProp:t,onChange:n}),u=e!==void 0,d=u?e:s;{const h=x.useRef(e!==void 0);x.useEffect(()=>{const m=h.current;m!==u&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=u},[u,r])}const f=x.useCallback(h=>{var m;if(u){const g=ete(h)?h(e):h;g!==e&&((m=l.current)==null||m.call(l,g))}else i(h)},[u,e,i,l]);return[d,f]}function Zee({defaultProp:e,onChange:t}){const[n,r]=x.useState(e),s=x.useRef(n),i=x.useRef(t);return Jee(()=>{i.current=t},[t]),x.useEffect(()=>{var l;s.current!==n&&((l=i.current)==null||l.call(i,n),s.current=n)},[n,s]),[n,r,i]}function ete(e){return typeof e=="function"}function tte(e){const t=nte(e),n=x.forwardRef((r,s)=>{const{children:i,...l}=r,u=x.Children.toArray(i),d=u.find(ste);if(d){const f=d.props.children,h=u.map(m=>m===d?x.Children.count(f)>1?x.Children.only(null):x.isValidElement(f)?f.props.children:null:m);return a.jsx(t,{...l,ref:s,children:x.isValidElement(f)?x.cloneElement(f,void 0,h):null})}return a.jsx(t,{...l,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function nte(e){const t=x.forwardRef((n,r)=>{const{children:s,...i}=n;if(x.isValidElement(s)){const l=ate(s),u=ite(i,s.props);return s.type!==x.Fragment&&(u.ref=r?nu(r,l):l),x.cloneElement(s,u)}return x.Children.count(s)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var rte=Symbol("radix.slottable");function ste(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===rte}function ite(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...u)=>{const d=i(...u);return s(...u),d}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function ate(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var ote=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xn=ote.reduce((e,t)=>{const n=tte(`Primitive.${t}`),r=x.forwardRef((s,i)=>{const{asChild:l,...u}=s,d=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...u,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Qb(e,t){e&&mf.flushSync(()=>e.dispatchEvent(t))}function mT(e){const t=lte(e),n=x.forwardRef((r,s)=>{const{children:i,...l}=r,u=x.Children.toArray(i),d=u.find(ute);if(d){const f=d.props.children,h=u.map(m=>m===d?x.Children.count(f)>1?x.Children.only(null):x.isValidElement(f)?f.props.children:null:m);return a.jsx(t,{...l,ref:s,children:x.isValidElement(f)?x.cloneElement(f,void 0,h):null})}return a.jsx(t,{...l,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function lte(e){const t=x.forwardRef((n,r)=>{const{children:s,...i}=n;if(x.isValidElement(s)){const l=fte(s),u=dte(i,s.props);return s.type!==x.Fragment&&(u.ref=r?nu(r,l):l),x.cloneElement(s,u)}return x.Children.count(s)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var cte=Symbol("radix.slottable");function ute(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===cte}function dte(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...u)=>{const d=i(...u);return s(...u),d}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function fte(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Xb(e){const t=e+"CollectionProvider",[n,r]=ru(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),l=b=>{const{scope:S,children:_}=b,k=oe.useRef(null),N=oe.useRef(new Map).current;return a.jsx(s,{scope:S,itemMap:N,collectionRef:k,children:_})};l.displayName=t;const u=e+"CollectionSlot",d=mT(u),f=oe.forwardRef((b,S)=>{const{scope:_,children:k}=b,N=i(u,_),T=yr(S,N.collectionRef);return a.jsx(d,{ref:T,children:k})});f.displayName=u;const h=e+"CollectionItemSlot",m="data-radix-collection-item",g=mT(h),y=oe.forwardRef((b,S)=>{const{scope:_,children:k,...N}=b,T=oe.useRef(null),P=yr(S,T),R=i(h,_);return oe.useEffect(()=>(R.itemMap.set(T,{ref:T,...N}),()=>void R.itemMap.delete(T))),a.jsx(g,{[m]:"",ref:P,children:k})});y.displayName=h;function w(b){const S=i(e+"CollectionConsumer",b);return oe.useCallback(()=>{const k=S.collectionRef.current;if(!k)return[];const N=Array.from(k.querySelectorAll(`[${m}]`));return Array.from(S.itemMap.values()).sort((R,M)=>N.indexOf(R.ref.current)-N.indexOf(M.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:l,Slot:f,ItemSlot:y},w,r]}var hte=x.createContext(void 0);function ED(e){const t=x.useContext(hte);return e||t||"ltr"}function us(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function mte(e,t=globalThis==null?void 0:globalThis.document){const n=us(e);x.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var pte="DismissableLayer",Yw="dismissableLayer.update",gte="dismissableLayer.pointerDownOutside",yte="dismissableLayer.focusOutside",pT,kD=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Jb=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:l,onDismiss:u,...d}=e,f=x.useContext(kD),[h,m]=x.useState(null),g=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=x.useState({}),w=yr(t,M=>m(M)),b=Array.from(f.layers),[S]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),_=b.indexOf(S),k=h?b.indexOf(h):-1,N=f.layersWithOutsidePointerEventsDisabled.size>0,T=k>=_,P=xte(M=>{const A=M.target,W=[...f.branches].some(K=>K.contains(A));!T||W||(s==null||s(M),l==null||l(M),M.defaultPrevented||u==null||u())},g),R=wte(M=>{const A=M.target;[...f.branches].some(K=>K.contains(A))||(i==null||i(M),l==null||l(M),M.defaultPrevented||u==null||u())},g);return mte(M=>{k===f.layers.size-1&&(r==null||r(M),!M.defaultPrevented&&u&&(M.preventDefault(),u()))},g),x.useEffect(()=>{if(h)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(pT=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(h)),f.layers.add(h),gT(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=pT)}},[h,g,n,f]),x.useEffect(()=>()=>{h&&(f.layers.delete(h),f.layersWithOutsidePointerEventsDisabled.delete(h),gT())},[h,f]),x.useEffect(()=>{const M=()=>y({});return document.addEventListener(Yw,M),()=>document.removeEventListener(Yw,M)},[]),a.jsx(xn.div,{...d,ref:w,style:{pointerEvents:N?T?"auto":"none":void 0,...e.style},onFocusCapture:pt(e.onFocusCapture,R.onFocusCapture),onBlurCapture:pt(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:pt(e.onPointerDownCapture,P.onPointerDownCapture)})});Jb.displayName=pte;var vte="DismissableLayerBranch",ND=x.forwardRef((e,t)=>{const n=x.useContext(kD),r=x.useRef(null),s=yr(t,r);return x.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(xn.div,{...e,ref:s})});ND.displayName=vte;function xte(e,t=globalThis==null?void 0:globalThis.document){const n=us(e),r=x.useRef(!1),s=x.useRef(()=>{});return x.useEffect(()=>{const i=u=>{if(u.target&&!r.current){let d=function(){TD(gte,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=d,t.addEventListener("click",s.current,{once:!0})):d()}else t.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function wte(e,t=globalThis==null?void 0:globalThis.document){const n=us(e),r=x.useRef(!1);return x.useEffect(()=>{const s=i=>{i.target&&!r.current&&TD(yte,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function gT(){const e=new CustomEvent(Yw);document.dispatchEvent(e)}function TD(e,t,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Qb(s,i):s.dispatchEvent(i)}var bte=Jb,_te=ND,tx=0;function Ste(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??yT()),document.body.insertAdjacentElement("beforeend",e[1]??yT()),tx++,()=>{tx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),tx--}},[])}function yT(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var nx="focusScope.autoFocusOnMount",rx="focusScope.autoFocusOnUnmount",vT={bubbles:!1,cancelable:!0},jte="FocusScope",CD=x.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...l}=e,[u,d]=x.useState(null),f=us(s),h=us(i),m=x.useRef(null),g=yr(t,b=>d(b)),y=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let b=function(N){if(y.paused||!u)return;const T=N.target;u.contains(T)?m.current=T:qa(m.current,{select:!0})},S=function(N){if(y.paused||!u)return;const T=N.relatedTarget;T!==null&&(u.contains(T)||qa(m.current,{select:!0}))},_=function(N){if(document.activeElement===document.body)for(const P of N)P.removedNodes.length>0&&qa(u)};document.addEventListener("focusin",b),document.addEventListener("focusout",S);const k=new MutationObserver(_);return u&&k.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",S),k.disconnect()}}},[r,u,y.paused]),x.useEffect(()=>{if(u){wT.add(y);const b=document.activeElement;if(!u.contains(b)){const _=new CustomEvent(nx,vT);u.addEventListener(nx,f),u.dispatchEvent(_),_.defaultPrevented||(Ete(Pte(PD(u)),{select:!0}),document.activeElement===b&&qa(u))}return()=>{u.removeEventListener(nx,f),setTimeout(()=>{const _=new CustomEvent(rx,vT);u.addEventListener(rx,h),u.dispatchEvent(_),_.defaultPrevented||qa(b??document.body,{select:!0}),u.removeEventListener(rx,h),wT.remove(y)},0)}}},[u,f,h,y]);const w=x.useCallback(b=>{if(!n&&!r||y.paused)return;const S=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,_=document.activeElement;if(S&&_){const k=b.currentTarget,[N,T]=kte(k);N&&T?!b.shiftKey&&_===T?(b.preventDefault(),n&&qa(N,{select:!0})):b.shiftKey&&_===N&&(b.preventDefault(),n&&qa(T,{select:!0})):_===k&&b.preventDefault()}},[n,r,y.paused]);return a.jsx(xn.div,{tabIndex:-1,...l,ref:g,onKeyDown:w})});CD.displayName=jte;function Ete(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(qa(r,{select:t}),document.activeElement!==n)return}function kte(e){const t=PD(e),n=xT(t,e),r=xT(t.reverse(),e);return[n,r]}function PD(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function xT(e,t){for(const n of e)if(!Nte(n,{upTo:t}))return n}function Nte(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Tte(e){return e instanceof HTMLInputElement&&"select"in e}function qa(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Tte(e)&&t&&e.select()}}var wT=Cte();function Cte(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=bT(e,t),e.unshift(t)},remove(t){var n;e=bT(e,t),(n=e[0])==null||n.resume()}}}function bT(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Pte(e){return e.filter(t=>t.tagName!=="A")}var Ate=lC[" useId ".trim().toString()]||(()=>{}),Rte=0;function Qw(e){const[t,n]=x.useState(Ate());return da(()=>{n(r=>r??String(Rte++))},[e]),e||(t?`radix-${t}`:"")}const Ite=["top","right","bottom","left"],uo=Math.min,ss=Math.max,jp=Math.round,cm=Math.floor,Ci=e=>({x:e,y:e}),Ote={left:"right",right:"left",bottom:"top",top:"bottom"},Dte={start:"end",end:"start"};function Xw(e,t,n){return ss(e,uo(t,n))}function fa(e,t){return typeof e=="function"?e(t):e}function ha(e){return e.split("-")[0]}function su(e){return e.split("-")[1]}function Zb(e){return e==="x"?"y":"x"}function e_(e){return e==="y"?"height":"width"}const Mte=new Set(["top","bottom"]);function Ei(e){return Mte.has(ha(e))?"y":"x"}function t_(e){return Zb(Ei(e))}function Lte(e,t,n){n===void 0&&(n=!1);const r=su(e),s=t_(e),i=e_(s);let l=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(l=Ep(l)),[l,Ep(l)]}function Fte(e){const t=Ep(e);return[Jw(e),t,Jw(t)]}function Jw(e){return e.replace(/start|end/g,t=>Dte[t])}const _T=["left","right"],ST=["right","left"],$te=["top","bottom"],Vte=["bottom","top"];function zte(e,t,n){switch(e){case"top":case"bottom":return n?t?ST:_T:t?_T:ST;case"left":case"right":return t?$te:Vte;default:return[]}}function Ute(e,t,n,r){const s=su(e);let i=zte(ha(e),n==="start",r);return s&&(i=i.map(l=>l+"-"+s),t&&(i=i.concat(i.map(Jw)))),i}function Ep(e){return e.replace(/left|right|bottom|top/g,t=>Ote[t])}function Bte(e){return{top:0,right:0,bottom:0,left:0,...e}}function AD(e){return typeof e!="number"?Bte(e):{top:e,right:e,bottom:e,left:e}}function kp(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function jT(e,t,n){let{reference:r,floating:s}=e;const i=Ei(t),l=t_(t),u=e_(l),d=ha(t),f=i==="y",h=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,g=r[u]/2-s[u]/2;let y;switch(d){case"top":y={x:h,y:r.y-s.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:m};break;case"left":y={x:r.x-s.width,y:m};break;default:y={x:r.x,y:r.y}}switch(su(t)){case"start":y[l]-=g*(n&&f?-1:1);break;case"end":y[l]+=g*(n&&f?-1:1);break}return y}const qte=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:l}=n,u=i.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(t));let f=await l.getElementRects({reference:e,floating:t,strategy:s}),{x:h,y:m}=jT(f,r,d),g=r,y={},w=0;for(let b=0;b<u.length;b++){const{name:S,fn:_}=u[b],{x:k,y:N,data:T,reset:P}=await _({x:h,y:m,initialPlacement:r,placement:g,strategy:s,middlewareData:y,rects:f,platform:l,elements:{reference:e,floating:t}});h=k??h,m=N??m,y={...y,[S]:{...y[S],...T}},P&&w<=50&&(w++,typeof P=="object"&&(P.placement&&(g=P.placement),P.rects&&(f=P.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:s}):P.rects),{x:h,y:m}=jT(f,g,d)),b=-1)}return{x:h,y:m,placement:g,strategy:s,middlewareData:y}};async function Xd(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:l,elements:u,strategy:d}=e,{boundary:f="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:g=!1,padding:y=0}=fa(t,e),w=AD(y),S=u[g?m==="floating"?"reference":"floating":m],_=kp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(S)))==null||n?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(u.floating)),boundary:f,rootBoundary:h,strategy:d})),k=m==="floating"?{x:r,y:s,width:l.floating.width,height:l.floating.height}:l.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u.floating)),T=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},P=kp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:k,offsetParent:N,strategy:d}):k);return{top:(_.top-P.top+w.top)/T.y,bottom:(P.bottom-_.bottom+w.bottom)/T.y,left:(_.left-P.left+w.left)/T.x,right:(P.right-_.right+w.right)/T.x}}const Wte=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:l,elements:u,middlewareData:d}=t,{element:f,padding:h=0}=fa(e,t)||{};if(f==null)return{};const m=AD(h),g={x:n,y:r},y=t_(s),w=e_(y),b=await l.getDimensions(f),S=y==="y",_=S?"top":"left",k=S?"bottom":"right",N=S?"clientHeight":"clientWidth",T=i.reference[w]+i.reference[y]-g[y]-i.floating[w],P=g[y]-i.reference[y],R=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let M=R?R[N]:0;(!M||!await(l.isElement==null?void 0:l.isElement(R)))&&(M=u.floating[N]||i.floating[w]);const A=T/2-P/2,W=M/2-b[w]/2-1,K=uo(m[_],W),H=uo(m[k],W),z=K,L=M-b[w]-H,B=M/2-b[w]/2+A,Q=Xw(z,B,L),q=!d.arrow&&su(s)!=null&&B!==Q&&i.reference[w]/2-(B<z?K:H)-b[w]/2<0,F=q?B<z?B-z:B-L:0;return{[y]:g[y]+F,data:{[y]:Q,centerOffset:B-Q-F,...q&&{alignmentOffset:F}},reset:q}}}),Hte=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:l,initialPlacement:u,platform:d,elements:f}=t,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:b=!0,...S}=fa(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=ha(s),k=Ei(u),N=ha(u)===u,T=await(d.isRTL==null?void 0:d.isRTL(f.floating)),P=g||(N||!b?[Ep(u)]:Fte(u)),R=w!=="none";!g&&R&&P.push(...Ute(u,b,w,T));const M=[u,...P],A=await Xd(t,S),W=[];let K=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&W.push(A[_]),m){const B=Lte(s,l,T);W.push(A[B[0]],A[B[1]])}if(K=[...K,{placement:s,overflows:W}],!W.every(B=>B<=0)){var H,z;const B=(((H=i.flip)==null?void 0:H.index)||0)+1,Q=M[B];if(Q&&(!(m==="alignment"?k!==Ei(Q):!1)||K.every(D=>Ei(D.placement)===k?D.overflows[0]>0:!0)))return{data:{index:B,overflows:K},reset:{placement:Q}};let q=(z=K.filter(F=>F.overflows[0]<=0).sort((F,D)=>F.overflows[1]-D.overflows[1])[0])==null?void 0:z.placement;if(!q)switch(y){case"bestFit":{var L;const F=(L=K.filter(D=>{if(R){const X=Ei(D.placement);return X===k||X==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(X=>X>0).reduce((X,I)=>X+I,0)]).sort((D,X)=>D[1]-X[1])[0])==null?void 0:L[0];F&&(q=F);break}case"initialPlacement":q=u;break}if(s!==q)return{reset:{placement:q}}}return{}}}};function ET(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function kT(e){return Ite.some(t=>e[t]>=0)}const Gte=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=fa(e,t);switch(r){case"referenceHidden":{const i=await Xd(t,{...s,elementContext:"reference"}),l=ET(i,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:kT(l)}}}case"escaped":{const i=await Xd(t,{...s,altBoundary:!0}),l=ET(i,n.floating);return{data:{escapedOffsets:l,escaped:kT(l)}}}default:return{}}}}},RD=new Set(["left","top"]);async function Kte(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),l=ha(n),u=su(n),d=Ei(n)==="y",f=RD.has(l)?-1:1,h=i&&d?-1:1,m=fa(t,e);let{mainAxis:g,crossAxis:y,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return u&&typeof w=="number"&&(y=u==="end"?w*-1:w),d?{x:y*h,y:g*f}:{x:g*f,y:y*h}}const Yte=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:l,middlewareData:u}=t,d=await Kte(t,e);return l===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:i+d.y,data:{...d,placement:l}}}}},Qte=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:l=!1,limiter:u={fn:S=>{let{x:_,y:k}=S;return{x:_,y:k}}},...d}=fa(e,t),f={x:n,y:r},h=await Xd(t,d),m=Ei(ha(s)),g=Zb(m);let y=f[g],w=f[m];if(i){const S=g==="y"?"top":"left",_=g==="y"?"bottom":"right",k=y+h[S],N=y-h[_];y=Xw(k,y,N)}if(l){const S=m==="y"?"top":"left",_=m==="y"?"bottom":"right",k=w+h[S],N=w-h[_];w=Xw(k,w,N)}const b=u.fn({...t,[g]:y,[m]:w});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[g]:i,[m]:l}}}}}},Xte=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:l}=t,{offset:u=0,mainAxis:d=!0,crossAxis:f=!0}=fa(e,t),h={x:n,y:r},m=Ei(s),g=Zb(m);let y=h[g],w=h[m];const b=fa(u,t),S=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(d){const N=g==="y"?"height":"width",T=i.reference[g]-i.floating[N]+S.mainAxis,P=i.reference[g]+i.reference[N]-S.mainAxis;y<T?y=T:y>P&&(y=P)}if(f){var _,k;const N=g==="y"?"width":"height",T=RD.has(ha(s)),P=i.reference[m]-i.floating[N]+(T&&((_=l.offset)==null?void 0:_[m])||0)+(T?0:S.crossAxis),R=i.reference[m]+i.reference[N]+(T?0:((k=l.offset)==null?void 0:k[m])||0)-(T?S.crossAxis:0);w<P?w=P:w>R&&(w=R)}return{[g]:y,[m]:w}}}},Jte=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:i,platform:l,elements:u}=t,{apply:d=()=>{},...f}=fa(e,t),h=await Xd(t,f),m=ha(s),g=su(s),y=Ei(s)==="y",{width:w,height:b}=i.floating;let S,_;m==="top"||m==="bottom"?(S=m,_=g===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(_=m,S=g==="end"?"top":"bottom");const k=b-h.top-h.bottom,N=w-h.left-h.right,T=uo(b-h[S],k),P=uo(w-h[_],N),R=!t.middlewareData.shift;let M=T,A=P;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(A=N),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(M=k),R&&!g){const K=ss(h.left,0),H=ss(h.right,0),z=ss(h.top,0),L=ss(h.bottom,0);y?A=w-2*(K!==0||H!==0?K+H:ss(h.left,h.right)):M=b-2*(z!==0||L!==0?z+L:ss(h.top,h.bottom))}await d({...t,availableWidth:A,availableHeight:M});const W=await l.getDimensions(u.floating);return w!==W.width||b!==W.height?{reset:{rects:!0}}:{}}}};function tg(){return typeof window<"u"}function iu(e){return ID(e)?(e.nodeName||"").toLowerCase():"#document"}function ls(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Di(e){var t;return(t=(ID(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ID(e){return tg()?e instanceof Node||e instanceof ls(e).Node:!1}function ti(e){return tg()?e instanceof Element||e instanceof ls(e).Element:!1}function Ri(e){return tg()?e instanceof HTMLElement||e instanceof ls(e).HTMLElement:!1}function NT(e){return!tg()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ls(e).ShadowRoot}const Zte=new Set(["inline","contents"]);function _f(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=ni(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Zte.has(s)}const ene=new Set(["table","td","th"]);function tne(e){return ene.has(iu(e))}const nne=[":popover-open",":modal"];function ng(e){return nne.some(t=>{try{return e.matches(t)}catch{return!1}})}const rne=["transform","translate","scale","rotate","perspective"],sne=["transform","translate","scale","rotate","perspective","filter"],ine=["paint","layout","strict","content"];function n_(e){const t=r_(),n=ti(e)?ni(e):e;return rne.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||sne.some(r=>(n.willChange||"").includes(r))||ine.some(r=>(n.contain||"").includes(r))}function ane(e){let t=fo(e);for(;Ri(t)&&!$c(t);){if(n_(t))return t;if(ng(t))return null;t=fo(t)}return null}function r_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const one=new Set(["html","body","#document"]);function $c(e){return one.has(iu(e))}function ni(e){return ls(e).getComputedStyle(e)}function rg(e){return ti(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function fo(e){if(iu(e)==="html")return e;const t=e.assignedSlot||e.parentNode||NT(e)&&e.host||Di(e);return NT(t)?t.host:t}function OD(e){const t=fo(e);return $c(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ri(t)&&_f(t)?t:OD(t)}function Jd(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=OD(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),l=ls(s);if(i){const u=Zw(l);return t.concat(l,l.visualViewport||[],_f(s)?s:[],u&&n?Jd(u):[])}return t.concat(s,Jd(s,[],n))}function Zw(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function DD(e){const t=ni(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Ri(e),i=s?e.offsetWidth:n,l=s?e.offsetHeight:r,u=jp(n)!==i||jp(r)!==l;return u&&(n=i,r=l),{width:n,height:r,$:u}}function s_(e){return ti(e)?e:e.contextElement}function yc(e){const t=s_(e);if(!Ri(t))return Ci(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=DD(t);let l=(i?jp(n.width):n.width)/r,u=(i?jp(n.height):n.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const lne=Ci(0);function MD(e){const t=ls(e);return!r_()||!t.visualViewport?lne:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function cne(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ls(e)?!1:t}function ml(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=s_(e);let l=Ci(1);t&&(r?ti(r)&&(l=yc(r)):l=yc(e));const u=cne(i,n,r)?MD(i):Ci(0);let d=(s.left+u.x)/l.x,f=(s.top+u.y)/l.y,h=s.width/l.x,m=s.height/l.y;if(i){const g=ls(i),y=r&&ti(r)?ls(r):r;let w=g,b=Zw(w);for(;b&&r&&y!==w;){const S=yc(b),_=b.getBoundingClientRect(),k=ni(b),N=_.left+(b.clientLeft+parseFloat(k.paddingLeft))*S.x,T=_.top+(b.clientTop+parseFloat(k.paddingTop))*S.y;d*=S.x,f*=S.y,h*=S.x,m*=S.y,d+=N,f+=T,w=ls(b),b=Zw(w)}}return kp({width:h,height:m,x:d,y:f})}function sg(e,t){const n=rg(e).scrollLeft;return t?t.left+n:ml(Di(e)).left+n}function LD(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-sg(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function une(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",l=Di(r),u=t?ng(t.floating):!1;if(r===l||u&&i)return n;let d={scrollLeft:0,scrollTop:0},f=Ci(1);const h=Ci(0),m=Ri(r);if((m||!m&&!i)&&((iu(r)!=="body"||_f(l))&&(d=rg(r)),Ri(r))){const y=ml(r);f=yc(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const g=l&&!m&&!i?LD(l,d):Ci(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-d.scrollLeft*f.x+h.x+g.x,y:n.y*f.y-d.scrollTop*f.y+h.y+g.y}}function dne(e){return Array.from(e.getClientRects())}function fne(e){const t=Di(e),n=rg(e),r=e.ownerDocument.body,s=ss(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=ss(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+sg(e);const u=-n.scrollTop;return ni(r).direction==="rtl"&&(l+=ss(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:l,y:u}}const TT=25;function hne(e,t){const n=ls(e),r=Di(e),s=n.visualViewport;let i=r.clientWidth,l=r.clientHeight,u=0,d=0;if(s){i=s.width,l=s.height;const h=r_();(!h||h&&t==="fixed")&&(u=s.offsetLeft,d=s.offsetTop)}const f=sg(r);if(f<=0){const h=r.ownerDocument,m=h.body,g=getComputedStyle(m),y=h.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,w=Math.abs(r.clientWidth-m.clientWidth-y);w<=TT&&(i-=w)}else f<=TT&&(i+=f);return{width:i,height:l,x:u,y:d}}const mne=new Set(["absolute","fixed"]);function pne(e,t){const n=ml(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=Ri(e)?yc(e):Ci(1),l=e.clientWidth*i.x,u=e.clientHeight*i.y,d=s*i.x,f=r*i.y;return{width:l,height:u,x:d,y:f}}function CT(e,t,n){let r;if(t==="viewport")r=hne(e,n);else if(t==="document")r=fne(Di(e));else if(ti(t))r=pne(t,n);else{const s=MD(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return kp(r)}function FD(e,t){const n=fo(e);return n===t||!ti(n)||$c(n)?!1:ni(n).position==="fixed"||FD(n,t)}function gne(e,t){const n=t.get(e);if(n)return n;let r=Jd(e,[],!1).filter(u=>ti(u)&&iu(u)!=="body"),s=null;const i=ni(e).position==="fixed";let l=i?fo(e):e;for(;ti(l)&&!$c(l);){const u=ni(l),d=n_(l);!d&&u.position==="fixed"&&(s=null),(i?!d&&!s:!d&&u.position==="static"&&!!s&&mne.has(s.position)||_f(l)&&!d&&FD(e,l))?r=r.filter(h=>h!==l):s=u,l=fo(l)}return t.set(e,r),r}function yne(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const l=[...n==="clippingAncestors"?ng(t)?[]:gne(t,this._c):[].concat(n),r],u=l[0],d=l.reduce((f,h)=>{const m=CT(t,h,s);return f.top=ss(m.top,f.top),f.right=uo(m.right,f.right),f.bottom=uo(m.bottom,f.bottom),f.left=ss(m.left,f.left),f},CT(t,u,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function vne(e){const{width:t,height:n}=DD(e);return{width:t,height:n}}function xne(e,t,n){const r=Ri(t),s=Di(t),i=n==="fixed",l=ml(e,!0,i,t);let u={scrollLeft:0,scrollTop:0};const d=Ci(0);function f(){d.x=sg(s)}if(r||!r&&!i)if((iu(t)!=="body"||_f(s))&&(u=rg(t)),r){const y=ml(t,!0,i,t);d.x=y.x+t.clientLeft,d.y=y.y+t.clientTop}else s&&f();i&&!r&&s&&f();const h=s&&!r&&!i?LD(s,u):Ci(0),m=l.left+u.scrollLeft-d.x-h.x,g=l.top+u.scrollTop-d.y-h.y;return{x:m,y:g,width:l.width,height:l.height}}function sx(e){return ni(e).position==="static"}function PT(e,t){if(!Ri(e)||ni(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Di(e)===n&&(n=n.ownerDocument.body),n}function $D(e,t){const n=ls(e);if(ng(e))return n;if(!Ri(e)){let s=fo(e);for(;s&&!$c(s);){if(ti(s)&&!sx(s))return s;s=fo(s)}return n}let r=PT(e,t);for(;r&&tne(r)&&sx(r);)r=PT(r,t);return r&&$c(r)&&sx(r)&&!n_(r)?n:r||ane(e)||n}const wne=async function(e){const t=this.getOffsetParent||$D,n=this.getDimensions,r=await n(e.floating);return{reference:xne(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function bne(e){return ni(e).direction==="rtl"}const _ne={convertOffsetParentRelativeRectToViewportRelativeRect:une,getDocumentElement:Di,getClippingRect:yne,getOffsetParent:$D,getElementRects:wne,getClientRects:dne,getDimensions:vne,getScale:yc,isElement:ti,isRTL:bne};function VD(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Sne(e,t){let n=null,r;const s=Di(e);function i(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function l(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),i();const f=e.getBoundingClientRect(),{left:h,top:m,width:g,height:y}=f;if(u||t(),!g||!y)return;const w=cm(m),b=cm(s.clientWidth-(h+g)),S=cm(s.clientHeight-(m+y)),_=cm(h),N={rootMargin:-w+"px "+-b+"px "+-S+"px "+-_+"px",threshold:ss(0,uo(1,d))||1};let T=!0;function P(R){const M=R[0].intersectionRatio;if(M!==d){if(!T)return l();M?l(!1,M):r=setTimeout(()=>{l(!1,1e-7)},1e3)}M===1&&!VD(f,e.getBoundingClientRect())&&l(),T=!1}try{n=new IntersectionObserver(P,{...N,root:s.ownerDocument})}catch{n=new IntersectionObserver(P,N)}n.observe(e)}return l(!0),i}function jne(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,f=s_(e),h=s||i?[...f?Jd(f):[],...Jd(t)]:[];h.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const m=f&&u?Sne(f,n):null;let g=-1,y=null;l&&(y=new ResizeObserver(_=>{let[k]=_;k&&k.target===f&&y&&(y.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var N;(N=y)==null||N.observe(t)})),n()}),f&&!d&&y.observe(f),y.observe(t));let w,b=d?ml(e):null;d&&S();function S(){const _=ml(e);b&&!VD(b,_)&&n(),b=_,w=requestAnimationFrame(S)}return n(),()=>{var _;h.forEach(k=>{s&&k.removeEventListener("scroll",n),i&&k.removeEventListener("resize",n)}),m==null||m(),(_=y)==null||_.disconnect(),y=null,d&&cancelAnimationFrame(w)}}const Ene=Yte,kne=Qte,Nne=Hte,Tne=Jte,Cne=Gte,AT=Wte,Pne=Xte,Ane=(e,t,n)=>{const r=new Map,s={platform:_ne,...n},i={...s.platform,_c:r};return qte(e,t,{...s,platform:i})};var Rne=typeof document<"u",Ine=function(){},Dm=Rne?x.useLayoutEffect:Ine;function Np(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Np(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!Np(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function zD(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function RT(e,t){const n=zD(e);return Math.round(t*n)/n}function ix(e){const t=x.useRef(e);return Dm(()=>{t.current=e}),t}function One(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:l}={},transform:u=!0,whileElementsMounted:d,open:f}=e,[h,m]=x.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,y]=x.useState(r);Np(g,r)||y(r);const[w,b]=x.useState(null),[S,_]=x.useState(null),k=x.useCallback(D=>{D!==R.current&&(R.current=D,b(D))},[]),N=x.useCallback(D=>{D!==M.current&&(M.current=D,_(D))},[]),T=i||w,P=l||S,R=x.useRef(null),M=x.useRef(null),A=x.useRef(h),W=d!=null,K=ix(d),H=ix(s),z=ix(f),L=x.useCallback(()=>{if(!R.current||!M.current)return;const D={placement:t,strategy:n,middleware:g};H.current&&(D.platform=H.current),Ane(R.current,M.current,D).then(X=>{const I={...X,isPositioned:z.current!==!1};B.current&&!Np(A.current,I)&&(A.current=I,mf.flushSync(()=>{m(I)}))})},[g,t,n,H,z]);Dm(()=>{f===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,m(D=>({...D,isPositioned:!1})))},[f]);const B=x.useRef(!1);Dm(()=>(B.current=!0,()=>{B.current=!1}),[]),Dm(()=>{if(T&&(R.current=T),P&&(M.current=P),T&&P){if(K.current)return K.current(T,P,L);L()}},[T,P,L,K,W]);const Q=x.useMemo(()=>({reference:R,floating:M,setReference:k,setFloating:N}),[k,N]),q=x.useMemo(()=>({reference:T,floating:P}),[T,P]),F=x.useMemo(()=>{const D={position:n,left:0,top:0};if(!q.floating)return D;const X=RT(q.floating,h.x),I=RT(q.floating,h.y);return u?{...D,transform:"translate("+X+"px, "+I+"px)",...zD(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:X,top:I}},[n,u,q.floating,h.x,h.y]);return x.useMemo(()=>({...h,update:L,refs:Q,elements:q,floatingStyles:F}),[h,L,Q,q,F])}const Dne=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?AT({element:r.current,padding:s}).fn(n):{}:r?AT({element:r,padding:s}).fn(n):{}}}},Mne=(e,t)=>({...Ene(e),options:[e,t]}),Lne=(e,t)=>({...kne(e),options:[e,t]}),Fne=(e,t)=>({...Pne(e),options:[e,t]}),$ne=(e,t)=>({...Nne(e),options:[e,t]}),Vne=(e,t)=>({...Tne(e),options:[e,t]}),zne=(e,t)=>({...Cne(e),options:[e,t]}),Une=(e,t)=>({...Dne(e),options:[e,t]});var Bne="Arrow",UD=x.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...i}=e;return a.jsx(xn.svg,{...i,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});UD.displayName=Bne;var qne=UD;function Wne(e){const[t,n]=x.useState(void 0);return da(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let l,u;if("borderBoxSize"in i){const d=i.borderBoxSize,f=Array.isArray(d)?d[0]:d;l=f.inlineSize,u=f.blockSize}else l=e.offsetWidth,u=e.offsetHeight;n({width:l,height:u})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var i_="Popper",[BD,qD]=ru(i_),[Hne,WD]=BD(i_),HD=e=>{const{__scopePopper:t,children:n}=e,[r,s]=x.useState(null);return a.jsx(Hne,{scope:t,anchor:r,onAnchorChange:s,children:n})};HD.displayName=i_;var GD="PopperAnchor",KD=x.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,i=WD(GD,n),l=x.useRef(null),u=yr(t,l),d=x.useRef(null);return x.useEffect(()=>{const f=d.current;d.current=(r==null?void 0:r.current)||l.current,f!==d.current&&i.onAnchorChange(d.current)}),r?null:a.jsx(xn.div,{...s,ref:u})});KD.displayName=GD;var a_="PopperContent",[Gne,Kne]=BD(a_),YD=x.forwardRef((e,t)=>{var Ce,ge,$e,ne,We,Ve;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:h=0,sticky:m="partial",hideWhenDetached:g=!1,updatePositionStrategy:y="optimized",onPlaced:w,...b}=e,S=WD(a_,n),[_,k]=x.useState(null),N=yr(t,Ft=>k(Ft)),[T,P]=x.useState(null),R=Wne(T),M=(R==null?void 0:R.width)??0,A=(R==null?void 0:R.height)??0,W=r+(i!=="center"?"-"+i:""),K=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},H=Array.isArray(f)?f:[f],z=H.length>0,L={padding:K,boundary:H.filter(Qne),altBoundary:z},{refs:B,floatingStyles:Q,placement:q,isPositioned:F,middlewareData:D}=One({strategy:"fixed",placement:W,whileElementsMounted:(...Ft)=>jne(...Ft,{animationFrame:y==="always"}),elements:{reference:S.anchor},middleware:[Mne({mainAxis:s+A,alignmentAxis:l}),d&&Lne({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Fne():void 0,...L}),d&&$ne({...L}),Vne({...L,apply:({elements:Ft,rects:Dt,availableWidth:Pn,availableHeight:wn})=>{const{width:bn,height:Rr}=Dt.reference,Bt=Ft.floating.style;Bt.setProperty("--radix-popper-available-width",`${Pn}px`),Bt.setProperty("--radix-popper-available-height",`${wn}px`),Bt.setProperty("--radix-popper-anchor-width",`${bn}px`),Bt.setProperty("--radix-popper-anchor-height",`${Rr}px`)}}),T&&Une({element:T,padding:u}),Xne({arrowWidth:M,arrowHeight:A}),g&&zne({strategy:"referenceHidden",...L})]}),[X,I]=JD(q),V=us(w);da(()=>{F&&(V==null||V())},[F,V]);const Z=(Ce=D.arrow)==null?void 0:Ce.x,O=(ge=D.arrow)==null?void 0:ge.y,ce=(($e=D.arrow)==null?void 0:$e.centerOffset)!==0,[he,me]=x.useState();return da(()=>{_&&me(window.getComputedStyle(_).zIndex)},[_]),a.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...Q,transform:F?Q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:he,"--radix-popper-transform-origin":[(ne=D.transformOrigin)==null?void 0:ne.x,(We=D.transformOrigin)==null?void 0:We.y].join(" "),...((Ve=D.hide)==null?void 0:Ve.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(Gne,{scope:n,placedSide:X,onArrowChange:P,arrowX:Z,arrowY:O,shouldHideArrow:ce,children:a.jsx(xn.div,{"data-side":X,"data-align":I,...b,ref:N,style:{...b.style,animation:F?void 0:"none"}})})})});YD.displayName=a_;var QD="PopperArrow",Yne={top:"bottom",right:"left",bottom:"top",left:"right"},XD=x.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,i=Kne(QD,r),l=Yne[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(qne,{...s,ref:n,style:{...s.style,display:"block"}})})});XD.displayName=QD;function Qne(e){return e!==null}var Xne=e=>({name:"transformOrigin",options:e,fn(t){var S,_,k;const{placement:n,rects:r,middlewareData:s}=t,l=((S=s.arrow)==null?void 0:S.centerOffset)!==0,u=l?0:e.arrowWidth,d=l?0:e.arrowHeight,[f,h]=JD(n),m={start:"0%",center:"50%",end:"100%"}[h],g=(((_=s.arrow)==null?void 0:_.x)??0)+u/2,y=(((k=s.arrow)==null?void 0:k.y)??0)+d/2;let w="",b="";return f==="bottom"?(w=l?m:`${g}px`,b=`${-d}px`):f==="top"?(w=l?m:`${g}px`,b=`${r.floating.height+d}px`):f==="right"?(w=`${-d}px`,b=l?m:`${y}px`):f==="left"&&(w=`${r.floating.width+d}px`,b=l?m:`${y}px`),{data:{x:w,y:b}}}});function JD(e){const[t,n="center"]=e.split("-");return[t,n]}var Jne=HD,Zne=KD,ere=YD,tre=XD,nre="Portal",o_=x.forwardRef((e,t)=>{var u;const{container:n,...r}=e,[s,i]=x.useState(!1);da(()=>i(!0),[]);const l=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return l?AP.createPortal(a.jsx(xn.div,{...r,ref:t}),l):null});o_.displayName=nre;function rre(e,t){return x.useReducer((n,r)=>t[n][r]??n,e)}var au=e=>{const{present:t,children:n}=e,r=sre(t),s=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),i=yr(r.ref,ire(s));return typeof n=="function"||r.isPresent?x.cloneElement(s,{ref:i}):null};au.displayName="Presence";function sre(e){const[t,n]=x.useState(),r=x.useRef(null),s=x.useRef(e),i=x.useRef("none"),l=e?"mounted":"unmounted",[u,d]=rre(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const f=um(r.current);i.current=u==="mounted"?f:"none"},[u]),da(()=>{const f=r.current,h=s.current;if(h!==e){const g=i.current,y=um(f);e?d("MOUNT"):y==="none"||(f==null?void 0:f.display)==="none"?d("UNMOUNT"):d(h&&g!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,d]),da(()=>{if(t){let f;const h=t.ownerDocument.defaultView??window,m=y=>{const b=um(r.current).includes(CSS.escape(y.animationName));if(y.target===t&&b&&(d("ANIMATION_END"),!s.current)){const S=t.style.animationFillMode;t.style.animationFillMode="forwards",f=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=S)})}},g=y=>{y.target===t&&(i.current=um(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{h.clearTimeout(f),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:x.useCallback(f=>{r.current=f?getComputedStyle(f):null,n(f)},[])}}function um(e){return(e==null?void 0:e.animationName)||"none"}function ire(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var ax="rovingFocusGroup.onEntryFocus",are={bubbles:!1,cancelable:!0},Sf="RovingFocusGroup",[e0,ZD,ore]=Xb(Sf),[lre,e2]=ru(Sf,[ore]),[cre,ure]=lre(Sf),t2=x.forwardRef((e,t)=>a.jsx(e0.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(e0.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(dre,{...e,ref:t})})}));t2.displayName=Sf;var dre=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:h=!1,...m}=e,g=x.useRef(null),y=yr(t,g),w=ED(i),[b,S]=Yb({prop:l,defaultProp:u??null,onChange:d,caller:Sf}),[_,k]=x.useState(!1),N=us(f),T=ZD(n),P=x.useRef(!1),[R,M]=x.useState(0);return x.useEffect(()=>{const A=g.current;if(A)return A.addEventListener(ax,N),()=>A.removeEventListener(ax,N)},[N]),a.jsx(cre,{scope:n,orientation:r,dir:w,loop:s,currentTabStopId:b,onItemFocus:x.useCallback(A=>S(A),[S]),onItemShiftTab:x.useCallback(()=>k(!0),[]),onFocusableItemAdd:x.useCallback(()=>M(A=>A+1),[]),onFocusableItemRemove:x.useCallback(()=>M(A=>A-1),[]),children:a.jsx(xn.div,{tabIndex:_||R===0?-1:0,"data-orientation":r,...m,ref:y,style:{outline:"none",...e.style},onMouseDown:pt(e.onMouseDown,()=>{P.current=!0}),onFocus:pt(e.onFocus,A=>{const W=!P.current;if(A.target===A.currentTarget&&W&&!_){const K=new CustomEvent(ax,are);if(A.currentTarget.dispatchEvent(K),!K.defaultPrevented){const H=T().filter(q=>q.focusable),z=H.find(q=>q.active),L=H.find(q=>q.id===b),Q=[z,L,...H].filter(Boolean).map(q=>q.ref.current);s2(Q,h)}}P.current=!1}),onBlur:pt(e.onBlur,()=>k(!1))})})}),n2="RovingFocusGroupItem",r2=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:l,...u}=e,d=Qw(),f=i||d,h=ure(n2,n),m=h.currentTabStopId===f,g=ZD(n),{onFocusableItemAdd:y,onFocusableItemRemove:w,currentTabStopId:b}=h;return x.useEffect(()=>{if(r)return y(),()=>w()},[r,y,w]),a.jsx(e0.ItemSlot,{scope:n,id:f,focusable:r,active:s,children:a.jsx(xn.span,{tabIndex:m?0:-1,"data-orientation":h.orientation,...u,ref:t,onMouseDown:pt(e.onMouseDown,S=>{r?h.onItemFocus(f):S.preventDefault()}),onFocus:pt(e.onFocus,()=>h.onItemFocus(f)),onKeyDown:pt(e.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){h.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const _=mre(S,h.orientation,h.dir);if(_!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let N=g().filter(T=>T.focusable).map(T=>T.ref.current);if(_==="last")N.reverse();else if(_==="prev"||_==="next"){_==="prev"&&N.reverse();const T=N.indexOf(S.currentTarget);N=h.loop?pre(N,T+1):N.slice(T+1)}setTimeout(()=>s2(N))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:b!=null}):l})})});r2.displayName=n2;var fre={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function hre(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function mre(e,t,n){const r=hre(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return fre[r]}function s2(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function pre(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var gre=t2,yre=r2;function vre(e){const t=xre(e),n=x.forwardRef((r,s)=>{const{children:i,...l}=r,u=x.Children.toArray(i),d=u.find(bre);if(d){const f=d.props.children,h=u.map(m=>m===d?x.Children.count(f)>1?x.Children.only(null):x.isValidElement(f)?f.props.children:null:m);return a.jsx(t,{...l,ref:s,children:x.isValidElement(f)?x.cloneElement(f,void 0,h):null})}return a.jsx(t,{...l,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function xre(e){const t=x.forwardRef((n,r)=>{const{children:s,...i}=n;if(x.isValidElement(s)){const l=Sre(s),u=_re(i,s.props);return s.type!==x.Fragment&&(u.ref=r?nu(r,l):l),x.cloneElement(s,u)}return x.Children.count(s)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var wre=Symbol("radix.slottable");function bre(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===wre}function _re(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...u)=>{const d=i(...u);return s(...u),d}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function Sre(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var jre=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Xl=new WeakMap,dm=new WeakMap,fm={},ox=0,i2=function(e){return e&&(e.host||i2(e.parentNode))},Ere=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=i2(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},kre=function(e,t,n,r){var s=Ere(t,Array.isArray(e)?e:[e]);fm[n]||(fm[n]=new WeakMap);var i=fm[n],l=[],u=new Set,d=new Set(s),f=function(m){!m||u.has(m)||(u.add(m),f(m.parentNode))};s.forEach(f);var h=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(g){if(u.has(g))h(g);else try{var y=g.getAttribute(r),w=y!==null&&y!=="false",b=(Xl.get(g)||0)+1,S=(i.get(g)||0)+1;Xl.set(g,b),i.set(g,S),l.push(g),b===1&&w&&dm.set(g,!0),S===1&&g.setAttribute(n,"true"),w||g.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",g,_)}})};return h(t),u.clear(),ox++,function(){l.forEach(function(m){var g=Xl.get(m)-1,y=i.get(m)-1;Xl.set(m,g),i.set(m,y),g||(dm.has(m)||m.removeAttribute(r),dm.delete(m)),y||m.removeAttribute(n)}),ox--,ox||(Xl=new WeakMap,Xl=new WeakMap,dm=new WeakMap,fm={})}},Nre=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=jre(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),kre(r,s,n,"aria-hidden")):function(){return null}},wi=function(){return wi=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wi.apply(this,arguments)};function a2(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Tre(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Mm="right-scroll-bar-position",Lm="width-before-scroll-bar",Cre="with-scroll-bars-hidden",Pre="--removed-body-scroll-bar-size";function lx(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Are(e,t){var n=x.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var Rre=typeof window<"u"?x.useLayoutEffect:x.useEffect,IT=new WeakMap;function Ire(e,t){var n=Are(null,function(r){return e.forEach(function(s){return lx(s,r)})});return Rre(function(){var r=IT.get(n);if(r){var s=new Set(r),i=new Set(e),l=n.current;s.forEach(function(u){i.has(u)||lx(u,null)}),i.forEach(function(u){s.has(u)||lx(u,l)})}IT.set(n,e)},[e]),n}function Ore(e){return e}function Dre(e,t){t===void 0&&(t=Ore);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var l=t(i,r);return n.push(l),function(){n=n.filter(function(u){return u!==l})}},assignSyncMedium:function(i){for(r=!0;n.length;){var l=n;n=[],l.forEach(i)}n={push:function(u){return i(u)},filter:function(){return n}}},assignMedium:function(i){r=!0;var l=[];if(n.length){var u=n;n=[],u.forEach(i),l=n}var d=function(){var h=l;l=[],h.forEach(i)},f=function(){return Promise.resolve().then(d)};f(),n={push:function(h){l.push(h),f()},filter:function(h){return l=l.filter(h),n}}}};return s}function Mre(e){e===void 0&&(e={});var t=Dre(null);return t.options=wi({async:!0,ssr:!1},e),t}var o2=function(e){var t=e.sideCar,n=a2(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,wi({},n))};o2.isSideCarExport=!0;function Lre(e,t){return e.useMedium(t),o2}var l2=Mre(),cx=function(){},ig=x.forwardRef(function(e,t){var n=x.useRef(null),r=x.useState({onScrollCapture:cx,onWheelCapture:cx,onTouchMoveCapture:cx}),s=r[0],i=r[1],l=e.forwardProps,u=e.children,d=e.className,f=e.removeScrollBar,h=e.enabled,m=e.shards,g=e.sideCar,y=e.noRelative,w=e.noIsolation,b=e.inert,S=e.allowPinchZoom,_=e.as,k=_===void 0?"div":_,N=e.gapMode,T=a2(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=g,R=Ire([n,t]),M=wi(wi({},T),s);return x.createElement(x.Fragment,null,h&&x.createElement(P,{sideCar:l2,removeScrollBar:f,shards:m,noRelative:y,noIsolation:w,inert:b,setCallbacks:i,allowPinchZoom:!!S,lockRef:n,gapMode:N}),l?x.cloneElement(x.Children.only(u),wi(wi({},M),{ref:R})):x.createElement(k,wi({},M,{className:d,ref:R}),u))});ig.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ig.classNames={fullWidth:Lm,zeroRight:Mm};var Fre=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $re(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Fre();return t&&e.setAttribute("nonce",t),e}function Vre(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function zre(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Ure=function(){var e=0,t=null;return{add:function(n){e==0&&(t=$re())&&(Vre(t,n),zre(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Bre=function(){var e=Ure();return function(t,n){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},c2=function(){var e=Bre(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},qre={left:0,top:0,right:0,gap:0},ux=function(e){return parseInt(e||"",10)||0},Wre=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[ux(n),ux(r),ux(s)]},Hre=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return qre;var t=Wre(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Gre=c2(),vc="data-scroll-locked",Kre=function(e,t,n,r){var s=e.left,i=e.top,l=e.right,u=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Cre,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(vc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Mm,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Lm,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Mm," .").concat(Mm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Lm," .").concat(Lm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(vc,`] {
    `).concat(Pre,": ").concat(u,`px;
  }
`)},OT=function(){var e=parseInt(document.body.getAttribute(vc)||"0",10);return isFinite(e)?e:0},Yre=function(){x.useEffect(function(){return document.body.setAttribute(vc,(OT()+1).toString()),function(){var e=OT()-1;e<=0?document.body.removeAttribute(vc):document.body.setAttribute(vc,e.toString())}},[])},Qre=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;Yre();var i=x.useMemo(function(){return Hre(s)},[s]);return x.createElement(Gre,{styles:Kre(i,!t,s,n?"":"!important")})},t0=!1;if(typeof window<"u")try{var hm=Object.defineProperty({},"passive",{get:function(){return t0=!0,!0}});window.addEventListener("test",hm,hm),window.removeEventListener("test",hm,hm)}catch{t0=!1}var Jl=t0?{passive:!1}:!1,Xre=function(e){return e.tagName==="TEXTAREA"},u2=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Xre(e)&&n[t]==="visible")},Jre=function(e){return u2(e,"overflowY")},Zre=function(e){return u2(e,"overflowX")},DT=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=d2(e,r);if(s){var i=f2(e,r),l=i[1],u=i[2];if(l>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ese=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},tse=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},d2=function(e,t){return e==="v"?Jre(t):Zre(t)},f2=function(e,t){return e==="v"?ese(t):tse(t)},nse=function(e,t){return e==="h"&&t==="rtl"?-1:1},rse=function(e,t,n,r,s){var i=nse(e,window.getComputedStyle(t).direction),l=i*r,u=n.target,d=t.contains(u),f=!1,h=l>0,m=0,g=0;do{if(!u)break;var y=f2(e,u),w=y[0],b=y[1],S=y[2],_=b-S-i*w;(w||_)&&d2(e,u)&&(m+=_,g+=w);var k=u.parentNode;u=k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE?k.host:k}while(!d&&u!==document.body||d&&(t.contains(u)||t===u));return(h&&Math.abs(m)<1||!h&&Math.abs(g)<1)&&(f=!0),f},mm=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},MT=function(e){return[e.deltaX,e.deltaY]},LT=function(e){return e&&"current"in e?e.current:e},sse=function(e,t){return e[0]===t[0]&&e[1]===t[1]},ise=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ase=0,Zl=[];function ose(e){var t=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),s=x.useState(ase++)[0],i=x.useState(c2)[0],l=x.useRef(e);x.useEffect(function(){l.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var b=Tre([e.lockRef.current],(e.shards||[]).map(LT),!0).filter(Boolean);return b.forEach(function(S){return S.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),b.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var u=x.useCallback(function(b,S){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!l.current.allowPinchZoom;var _=mm(b),k=n.current,N="deltaX"in b?b.deltaX:k[0]-_[0],T="deltaY"in b?b.deltaY:k[1]-_[1],P,R=b.target,M=Math.abs(N)>Math.abs(T)?"h":"v";if("touches"in b&&M==="h"&&R.type==="range")return!1;var A=window.getSelection(),W=A&&A.anchorNode,K=W?W===R||W.contains(R):!1;if(K)return!1;var H=DT(M,R);if(!H)return!0;if(H?P=M:(P=M==="v"?"h":"v",H=DT(M,R)),!H)return!1;if(!r.current&&"changedTouches"in b&&(N||T)&&(r.current=P),!P)return!0;var z=r.current||P;return rse(z,S,b,z==="h"?N:T)},[]),d=x.useCallback(function(b){var S=b;if(!(!Zl.length||Zl[Zl.length-1]!==i)){var _="deltaY"in S?MT(S):mm(S),k=t.current.filter(function(P){return P.name===S.type&&(P.target===S.target||S.target===P.shadowParent)&&sse(P.delta,_)})[0];if(k&&k.should){S.cancelable&&S.preventDefault();return}if(!k){var N=(l.current.shards||[]).map(LT).filter(Boolean).filter(function(P){return P.contains(S.target)}),T=N.length>0?u(S,N[0]):!l.current.noIsolation;T&&S.cancelable&&S.preventDefault()}}},[]),f=x.useCallback(function(b,S,_,k){var N={name:b,delta:S,target:_,should:k,shadowParent:lse(_)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(T){return T!==N})},1)},[]),h=x.useCallback(function(b){n.current=mm(b),r.current=void 0},[]),m=x.useCallback(function(b){f(b.type,MT(b),b.target,u(b,e.lockRef.current))},[]),g=x.useCallback(function(b){f(b.type,mm(b),b.target,u(b,e.lockRef.current))},[]);x.useEffect(function(){return Zl.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:g}),document.addEventListener("wheel",d,Jl),document.addEventListener("touchmove",d,Jl),document.addEventListener("touchstart",h,Jl),function(){Zl=Zl.filter(function(b){return b!==i}),document.removeEventListener("wheel",d,Jl),document.removeEventListener("touchmove",d,Jl),document.removeEventListener("touchstart",h,Jl)}},[]);var y=e.removeScrollBar,w=e.inert;return x.createElement(x.Fragment,null,w?x.createElement(i,{styles:ise(s)}):null,y?x.createElement(Qre,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function lse(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const cse=Lre(l2,ose);var h2=x.forwardRef(function(e,t){return x.createElement(ig,wi({},e,{ref:t,sideCar:cse}))});h2.classNames=ig.classNames;var n0=["Enter"," "],use=["ArrowDown","PageUp","Home"],m2=["ArrowUp","PageDown","End"],dse=[...use,...m2],fse={ltr:[...n0,"ArrowRight"],rtl:[...n0,"ArrowLeft"]},hse={ltr:["ArrowLeft"],rtl:["ArrowRight"]},jf="Menu",[Zd,mse,pse]=Xb(jf),[vl,p2]=ru(jf,[pse,qD,e2]),ag=qD(),g2=e2(),[gse,xl]=vl(jf),[yse,Ef]=vl(jf),y2=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:i,modal:l=!0}=e,u=ag(t),[d,f]=x.useState(null),h=x.useRef(!1),m=us(i),g=ED(s);return x.useEffect(()=>{const y=()=>{h.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>h.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),a.jsx(Jne,{...u,children:a.jsx(gse,{scope:t,open:n,onOpenChange:m,content:d,onContentChange:f,children:a.jsx(yse,{scope:t,onClose:x.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:h,dir:g,modal:l,children:r})})})};y2.displayName=jf;var vse="MenuAnchor",l_=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=ag(n);return a.jsx(Zne,{...s,...r,ref:t})});l_.displayName=vse;var c_="MenuPortal",[xse,v2]=vl(c_,{forceMount:void 0}),x2=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,i=xl(c_,t);return a.jsx(xse,{scope:t,forceMount:n,children:a.jsx(au,{present:n||i.open,children:a.jsx(o_,{asChild:!0,container:s,children:r})})})};x2.displayName=c_;var Ts="MenuContent",[wse,u_]=vl(Ts),w2=x.forwardRef((e,t)=>{const n=v2(Ts,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=xl(Ts,e.__scopeMenu),l=Ef(Ts,e.__scopeMenu);return a.jsx(Zd.Provider,{scope:e.__scopeMenu,children:a.jsx(au,{present:r||i.open,children:a.jsx(Zd.Slot,{scope:e.__scopeMenu,children:l.modal?a.jsx(bse,{...s,ref:t}):a.jsx(_se,{...s,ref:t})})})})}),bse=x.forwardRef((e,t)=>{const n=xl(Ts,e.__scopeMenu),r=x.useRef(null),s=yr(t,r);return x.useEffect(()=>{const i=r.current;if(i)return Nre(i)},[]),a.jsx(d_,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:pt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),_se=x.forwardRef((e,t)=>{const n=xl(Ts,e.__scopeMenu);return a.jsx(d_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Sse=vre("MenuContent.ScrollLock"),d_=x.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:d,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:g,onDismiss:y,disableOutsideScroll:w,...b}=e,S=xl(Ts,n),_=Ef(Ts,n),k=ag(n),N=g2(n),T=mse(n),[P,R]=x.useState(null),M=x.useRef(null),A=yr(t,M,S.onContentChange),W=x.useRef(0),K=x.useRef(""),H=x.useRef(0),z=x.useRef(null),L=x.useRef("right"),B=x.useRef(0),Q=w?h2:x.Fragment,q=w?{as:Sse,allowPinchZoom:!0}:void 0,F=X=>{var Ce,ge;const I=K.current+X,V=T().filter($e=>!$e.disabled),Z=document.activeElement,O=(Ce=V.find($e=>$e.ref.current===Z))==null?void 0:Ce.textValue,ce=V.map($e=>$e.textValue),he=Dse(ce,I,O),me=(ge=V.find($e=>$e.textValue===he))==null?void 0:ge.ref.current;(function $e(ne){K.current=ne,window.clearTimeout(W.current),ne!==""&&(W.current=window.setTimeout(()=>$e(""),1e3))})(I),me&&setTimeout(()=>me.focus())};x.useEffect(()=>()=>window.clearTimeout(W.current),[]),Ste();const D=x.useCallback(X=>{var V,Z;return L.current===((V=z.current)==null?void 0:V.side)&&Lse(X,(Z=z.current)==null?void 0:Z.area)},[]);return a.jsx(wse,{scope:n,searchRef:K,onItemEnter:x.useCallback(X=>{D(X)&&X.preventDefault()},[D]),onItemLeave:x.useCallback(X=>{var I;D(X)||((I=M.current)==null||I.focus(),R(null))},[D]),onTriggerLeave:x.useCallback(X=>{D(X)&&X.preventDefault()},[D]),pointerGraceTimerRef:H,onPointerGraceIntentChange:x.useCallback(X=>{z.current=X},[]),children:a.jsx(Q,{...q,children:a.jsx(CD,{asChild:!0,trapped:s,onMountAutoFocus:pt(i,X=>{var I;X.preventDefault(),(I=M.current)==null||I.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:a.jsx(Jb,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:g,onDismiss:y,children:a.jsx(gre,{asChild:!0,...N,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:P,onCurrentTabStopIdChange:R,onEntryFocus:pt(d,X=>{_.isUsingKeyboardRef.current||X.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(ere,{role:"menu","aria-orientation":"vertical","data-state":M2(S.open),"data-radix-menu-content":"",dir:_.dir,...k,...b,ref:A,style:{outline:"none",...b.style},onKeyDown:pt(b.onKeyDown,X=>{const V=X.target.closest("[data-radix-menu-content]")===X.currentTarget,Z=X.ctrlKey||X.altKey||X.metaKey,O=X.key.length===1;V&&(X.key==="Tab"&&X.preventDefault(),!Z&&O&&F(X.key));const ce=M.current;if(X.target!==ce||!dse.includes(X.key))return;X.preventDefault();const me=T().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);m2.includes(X.key)&&me.reverse(),Ise(me)}),onBlur:pt(e.onBlur,X=>{X.currentTarget.contains(X.target)||(window.clearTimeout(W.current),K.current="")}),onPointerMove:pt(e.onPointerMove,ef(X=>{const I=X.target,V=B.current!==X.clientX;if(X.currentTarget.contains(I)&&V){const Z=X.clientX>B.current?"right":"left";L.current=Z,B.current=X.clientX}}))})})})})})})});w2.displayName=Ts;var jse="MenuGroup",f_=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return a.jsx(xn.div,{role:"group",...r,ref:t})});f_.displayName=jse;var Ese="MenuLabel",b2=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return a.jsx(xn.div,{...r,ref:t})});b2.displayName=Ese;var Tp="MenuItem",FT="menu.itemSelect",og=x.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,i=x.useRef(null),l=Ef(Tp,e.__scopeMenu),u=u_(Tp,e.__scopeMenu),d=yr(t,i),f=x.useRef(!1),h=()=>{const m=i.current;if(!n&&m){const g=new CustomEvent(FT,{bubbles:!0,cancelable:!0});m.addEventListener(FT,y=>r==null?void 0:r(y),{once:!0}),Qb(m,g),g.defaultPrevented?f.current=!1:l.onClose()}};return a.jsx(_2,{...s,ref:d,disabled:n,onClick:pt(e.onClick,h),onPointerDown:m=>{var g;(g=e.onPointerDown)==null||g.call(e,m),f.current=!0},onPointerUp:pt(e.onPointerUp,m=>{var g;f.current||(g=m.currentTarget)==null||g.click()}),onKeyDown:pt(e.onKeyDown,m=>{const g=u.searchRef.current!=="";n||g&&m.key===" "||n0.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});og.displayName=Tp;var _2=x.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=e,l=u_(Tp,n),u=g2(n),d=x.useRef(null),f=yr(t,d),[h,m]=x.useState(!1),[g,y]=x.useState("");return x.useEffect(()=>{const w=d.current;w&&y((w.textContent??"").trim())},[i.children]),a.jsx(Zd.ItemSlot,{scope:n,disabled:r,textValue:s??g,children:a.jsx(yre,{asChild:!0,...u,focusable:!r,children:a.jsx(xn.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:f,onPointerMove:pt(e.onPointerMove,ef(w=>{r?l.onItemLeave(w):(l.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:pt(e.onPointerLeave,ef(w=>l.onItemLeave(w))),onFocus:pt(e.onFocus,()=>m(!0)),onBlur:pt(e.onBlur,()=>m(!1))})})})}),kse="MenuCheckboxItem",S2=x.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return a.jsx(T2,{scope:e.__scopeMenu,checked:n,children:a.jsx(og,{role:"menuitemcheckbox","aria-checked":Cp(n)?"mixed":n,...s,ref:t,"data-state":m_(n),onSelect:pt(s.onSelect,()=>r==null?void 0:r(Cp(n)?!0:!n),{checkForDefaultPrevented:!1})})})});S2.displayName=kse;var j2="MenuRadioGroup",[Nse,Tse]=vl(j2,{value:void 0,onValueChange:()=>{}}),E2=x.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,i=us(r);return a.jsx(Nse,{scope:e.__scopeMenu,value:n,onValueChange:i,children:a.jsx(f_,{...s,ref:t})})});E2.displayName=j2;var k2="MenuRadioItem",N2=x.forwardRef((e,t)=>{const{value:n,...r}=e,s=Tse(k2,e.__scopeMenu),i=n===s.value;return a.jsx(T2,{scope:e.__scopeMenu,checked:i,children:a.jsx(og,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":m_(i),onSelect:pt(r.onSelect,()=>{var l;return(l=s.onValueChange)==null?void 0:l.call(s,n)},{checkForDefaultPrevented:!1})})})});N2.displayName=k2;var h_="MenuItemIndicator",[T2,Cse]=vl(h_,{checked:!1}),C2=x.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,i=Cse(h_,n);return a.jsx(au,{present:r||Cp(i.checked)||i.checked===!0,children:a.jsx(xn.span,{...s,ref:t,"data-state":m_(i.checked)})})});C2.displayName=h_;var Pse="MenuSeparator",P2=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return a.jsx(xn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});P2.displayName=Pse;var Ase="MenuArrow",A2=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=ag(n);return a.jsx(tre,{...s,...r,ref:t})});A2.displayName=Ase;var Rse="MenuSub",[Ole,R2]=vl(Rse),pd="MenuSubTrigger",I2=x.forwardRef((e,t)=>{const n=xl(pd,e.__scopeMenu),r=Ef(pd,e.__scopeMenu),s=R2(pd,e.__scopeMenu),i=u_(pd,e.__scopeMenu),l=x.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:d}=i,f={__scopeMenu:e.__scopeMenu},h=x.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return x.useEffect(()=>h,[h]),x.useEffect(()=>{const m=u.current;return()=>{window.clearTimeout(m),d(null)}},[u,d]),a.jsx(l_,{asChild:!0,...f,children:a.jsx(_2,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":M2(n.open),...e,ref:nu(t,s.onTriggerChange),onClick:m=>{var g;(g=e.onClick)==null||g.call(e,m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:pt(e.onPointerMove,ef(m=>{i.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!n.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:pt(e.onPointerLeave,ef(m=>{var y,w;h();const g=(y=n.content)==null?void 0:y.getBoundingClientRect();if(g){const b=(w=n.content)==null?void 0:w.dataset.side,S=b==="right",_=S?-5:5,k=g[S?"left":"right"],N=g[S?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+_,y:m.clientY},{x:k,y:g.top},{x:N,y:g.top},{x:N,y:g.bottom},{x:k,y:g.bottom}],side:b}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:pt(e.onKeyDown,m=>{var y;const g=i.searchRef.current!=="";e.disabled||g&&m.key===" "||fse[r.dir].includes(m.key)&&(n.onOpenChange(!0),(y=n.content)==null||y.focus(),m.preventDefault())})})})});I2.displayName=pd;var O2="MenuSubContent",D2=x.forwardRef((e,t)=>{const n=v2(Ts,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=xl(Ts,e.__scopeMenu),l=Ef(Ts,e.__scopeMenu),u=R2(O2,e.__scopeMenu),d=x.useRef(null),f=yr(t,d);return a.jsx(Zd.Provider,{scope:e.__scopeMenu,children:a.jsx(au,{present:r||i.open,children:a.jsx(Zd.Slot,{scope:e.__scopeMenu,children:a.jsx(d_,{id:u.contentId,"aria-labelledby":u.triggerId,...s,ref:f,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var m;l.isUsingKeyboardRef.current&&((m=d.current)==null||m.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:pt(e.onFocusOutside,h=>{h.target!==u.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:pt(e.onEscapeKeyDown,h=>{l.onClose(),h.preventDefault()}),onKeyDown:pt(e.onKeyDown,h=>{var y;const m=h.currentTarget.contains(h.target),g=hse[l.dir].includes(h.key);m&&g&&(i.onOpenChange(!1),(y=u.trigger)==null||y.focus(),h.preventDefault())})})})})})});D2.displayName=O2;function M2(e){return e?"open":"closed"}function Cp(e){return e==="indeterminate"}function m_(e){return Cp(e)?"indeterminate":e?"checked":"unchecked"}function Ise(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Ose(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Dse(e,t,n){const s=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let l=Ose(e,Math.max(i,0));s.length===1&&(l=l.filter(f=>f!==n));const d=l.find(f=>f.toLowerCase().startsWith(s.toLowerCase()));return d!==n?d:void 0}function Mse(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,l=t.length-1;i<t.length;l=i++){const u=t[i],d=t[l],f=u.x,h=u.y,m=d.x,g=d.y;h>r!=g>r&&n<(m-f)*(r-h)/(g-h)+f&&(s=!s)}return s}function Lse(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Mse(n,t)}function ef(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Fse=y2,$se=l_,Vse=x2,zse=w2,Use=f_,Bse=b2,qse=og,Wse=S2,Hse=E2,Gse=N2,Kse=C2,Yse=P2,Qse=A2,Xse=I2,Jse=D2,lg="DropdownMenu",[Zse]=ru(lg,[p2]),Ar=p2(),[eie,L2]=Zse(lg),F2=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:l,modal:u=!0}=e,d=Ar(t),f=x.useRef(null),[h,m]=Yb({prop:s,defaultProp:i??!1,onChange:l,caller:lg});return a.jsx(eie,{scope:t,triggerId:Qw(),triggerRef:f,contentId:Qw(),open:h,onOpenChange:m,onOpenToggle:x.useCallback(()=>m(g=>!g),[m]),modal:u,children:a.jsx(Fse,{...d,open:h,onOpenChange:m,dir:r,modal:u,children:n})})};F2.displayName=lg;var $2="DropdownMenuTrigger",V2=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,i=L2($2,n),l=Ar(n);return a.jsx($se,{asChild:!0,...l,children:a.jsx(xn.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:nu(t,i.triggerRef),onPointerDown:pt(e.onPointerDown,u=>{!r&&u.button===0&&u.ctrlKey===!1&&(i.onOpenToggle(),i.open||u.preventDefault())}),onKeyDown:pt(e.onKeyDown,u=>{r||(["Enter"," "].includes(u.key)&&i.onOpenToggle(),u.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});V2.displayName=$2;var tie="DropdownMenuPortal",z2=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Ar(t);return a.jsx(Vse,{...r,...n})};z2.displayName=tie;var U2="DropdownMenuContent",B2=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=L2(U2,n),i=Ar(n),l=x.useRef(!1);return a.jsx(zse,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:t,onCloseAutoFocus:pt(e.onCloseAutoFocus,u=>{var d;l.current||(d=s.triggerRef.current)==null||d.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:pt(e.onInteractOutside,u=>{const d=u.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0,h=d.button===2||f;(!s.modal||h)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});B2.displayName=U2;var nie="DropdownMenuGroup",rie=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ar(n);return a.jsx(Use,{...s,...r,ref:t})});rie.displayName=nie;var sie="DropdownMenuLabel",q2=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ar(n);return a.jsx(Bse,{...s,...r,ref:t})});q2.displayName=sie;var iie="DropdownMenuItem",W2=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ar(n);return a.jsx(qse,{...s,...r,ref:t})});W2.displayName=iie;var aie="DropdownMenuCheckboxItem",H2=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ar(n);return a.jsx(Wse,{...s,...r,ref:t})});H2.displayName=aie;var oie="DropdownMenuRadioGroup",lie=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ar(n);return a.jsx(Hse,{...s,...r,ref:t})});lie.displayName=oie;var cie="DropdownMenuRadioItem",G2=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ar(n);return a.jsx(Gse,{...s,...r,ref:t})});G2.displayName=cie;var uie="DropdownMenuItemIndicator",K2=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ar(n);return a.jsx(Kse,{...s,...r,ref:t})});K2.displayName=uie;var die="DropdownMenuSeparator",Y2=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ar(n);return a.jsx(Yse,{...s,...r,ref:t})});Y2.displayName=die;var fie="DropdownMenuArrow",hie=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ar(n);return a.jsx(Qse,{...s,...r,ref:t})});hie.displayName=fie;var mie="DropdownMenuSubTrigger",Q2=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ar(n);return a.jsx(Xse,{...s,...r,ref:t})});Q2.displayName=mie;var pie="DropdownMenuSubContent",X2=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ar(n);return a.jsx(Jse,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});X2.displayName=pie;var gie=F2,yie=V2,vie=z2,J2=B2,Z2=q2,eM=W2,tM=H2,nM=G2,rM=K2,sM=Y2,iM=Q2,aM=X2;const xie=gie,wie=yie,bie=x.forwardRef(({className:e,inset:t,children:n,...r},s)=>a.jsxs(iM,{ref:s,className:Ot("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,a.jsx(yb,{className:"ml-auto"})]}));bie.displayName=iM.displayName;const _ie=x.forwardRef(({className:e,...t},n)=>a.jsx(aM,{ref:n,className:Ot("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));_ie.displayName=aM.displayName;const oM=x.forwardRef(({className:e,sideOffset:t=4,...n},r)=>a.jsx(vie,{children:a.jsx(J2,{ref:r,sideOffset:t,className:Ot("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));oM.displayName=J2.displayName;const Fm=x.forwardRef(({className:e,inset:t,...n},r)=>a.jsx(eM,{ref:r,className:Ot("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",e),...n}));Fm.displayName=eM.displayName;const Sie=x.forwardRef(({className:e,children:t,checked:n,...r},s)=>a.jsxs(tM,{ref:s,className:Ot("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(rM,{children:a.jsx(IR,{className:"h-4 w-4"})})}),t]}));Sie.displayName=tM.displayName;const jie=x.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(nM,{ref:r,className:Ot("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(rM,{children:a.jsx(NH,{className:"h-2 w-2 fill-current"})})}),t]}));jie.displayName=nM.displayName;const Eie=x.forwardRef(({className:e,inset:t,...n},r)=>a.jsx(Z2,{ref:r,className:Ot("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Eie.displayName=Z2.displayName;const kie=x.forwardRef(({className:e,...t},n)=>a.jsx(sM,{ref:n,className:Ot("-mx-1 my-1 h-px bg-muted",e),...t}));kie.displayName=sM.displayName;function Nie({post:e,onKudo:t,onComment:n,onReport:r}){const[s,i]=x.useState(e.kudos_count||0),[l,u]=x.useState(!1),[d,f]=x.useState(!1),{toast:h}=ds(),m=async()=>{if(!d){f(!0);try{const b=await dp.me();if(l){const S=await Yv.filter({post_id:e.id,giver_user_id:b.id});S.length>0&&(await Yv.delete(S[0].id),i(_=>_-1),u(!1))}else await Yv.create({post_id:e.id,giver_user_id:b.id,receiver_user_id:e.user_id}),i(S=>S+1),u(!0),await dp.updateMyUserData({points:(b.points||0)+2}),h({title:"Kudo given! +2 points",description:"Thank you for supporting the community"});t&&t(e.id,!l)}catch(b){console.error("Error handling kudo:",b),h({variant:"destructive",title:"Error",description:"Could not update kudo. Please try again."})}finally{f(!1)}}},g=()=>{r&&r(e)},y=b=>{switch(b){case"question":return"bg-blue-100 text-blue-800";case"achievement":return"bg-green-100 text-green-800";case"advice_request":return"bg-orange-100 text-orange-800";case"announcement":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},w=b=>{const S=new Date(b),k=Math.floor((new Date-S)/(1e3*60*60));return k<1?"Just now":k<24?`${k}h ago`:k<168?`${Math.floor(k/24)}d ago`:S.toLocaleDateString()};return a.jsx(Cs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-4",children:a.jsx(Ne,{className:"bg-white border border-gray-200 hover:border-gray-300 transition-colors",children:a.jsxs(Te,{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[e.author_avatar_url?a.jsx("img",{src:e.author_avatar_url,alt:e.author_name,className:"w-10 h-10 rounded-full object-cover"}):a.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold text-sm",children:(e.author_name||"U")[0].toUpperCase()})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:e.author_name||"Anonymous"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-500",children:w(e.created_date)}),e.type!=="general"&&a.jsx(sr,{className:y(e.type),children:e.type.replace("_"," ")})]})]})]}),a.jsxs(xie,{children:[a.jsx(wie,{asChild:!0,children:a.jsx(we,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:a.jsx(OR,{className:"w-4 h-4"})})}),a.jsxs(oM,{align:"end",children:[a.jsxs(Fm,{children:[a.jsx(hH,{className:"w-4 h-4 mr-2"}),"Save post"]}),a.jsxs(Fm,{children:[a.jsx(n8,{className:"w-4 h-4 mr-2"}),"Share"]}),a.jsxs(Fm,{onClick:g,children:[a.jsx(OH,{className:"w-4 h-4 mr-2"}),"Report"]})]})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-gray-900 leading-relaxed whitespace-pre-wrap",children:e.content}),e.image_url&&a.jsx("div",{className:"mt-3",children:a.jsx("img",{src:e.image_url,alt:"Post attachment",className:"rounded-lg max-w-full h-auto max-h-96 object-cover"})})]}),e.tags&&e.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.tags.map((b,S)=>a.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full",children:["#",b]},S))}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs(we,{variant:"ghost",size:"sm",onClick:m,disabled:d,className:`flex items-center gap-2 hover:bg-red-50 ${l?"text-red-600":"text-gray-600"}`,children:[a.jsx($H,{className:`w-4 h-4 ${l?"fill-current":""}`}),a.jsx("span",{className:"text-sm font-medium",children:s})]}),a.jsxs(we,{variant:"ghost",size:"sm",onClick:()=>n&&n(e),className:"flex items-center gap-2 text-gray-600 hover:bg-blue-50 hover:text-blue-600",children:[a.jsx(WH,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:e.reply_count||0})]})]}),e.is_pinned&&a.jsx(sr,{variant:"outline",className:"text-xs",children:"Pinned"})]})]})})})}function r0({className:e,selected:t,onSelect:n,mode:r="single",showOutsideDays:s=!0,...i}){const[l,u]=x.useState(t||new Date),d=n7(l),f=tI(d),h=lo(d),m=s7(f),g=[];let y=h;for(;y<=m;)g.push(y),y=U8(y,1);const w=[];for(let k=0;k<g.length;k+=7)w.push(g.slice(k,k+7));const b=()=>{u(aG(l))},S=()=>{u(QR(l,1))},_=k=>{n&&n(k)};return a.jsxs("div",{className:al("p-3",e),...i,children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx(we,{variant:"outline",size:"sm",onClick:b,className:"h-7 w-7 p-0",children:a.jsx(wH,{className:"h-4 w-4"})}),a.jsx("h2",{className:"text-sm font-medium",children:ol(l,"MMMM yyyy")}),a.jsx(we,{variant:"outline",size:"sm",onClick:S,className:"h-7 w-7 p-0",children:a.jsx(yb,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(k=>a.jsx("div",{className:"text-center text-sm font-medium text-gray-500 py-2",children:k},k))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:w.map((k,N)=>k.map((T,P)=>{const R=sG(T,l),M=t&&eI(T,t),A=iG(T);return a.jsx(we,{variant:"ghost",className:al("h-9 w-9 p-0 font-normal",!R&&"text-gray-400 opacity-50",M&&"bg-primary text-primary-foreground hover:bg-primary",A&&!M&&"bg-accent text-accent-foreground",!s&&!R&&"invisible"),onClick:()=>_(T),disabled:!R&&!s,children:ol(T,"d")},`${N}-${P}`)}))})]})}r0.displayName="Calendar";const p_=oe.createContext({}),$T=({children:e,onOpenChange:t,...n})=>{const[r,s]=x.useState(!1),[i,l]=x.useState({top:0,left:0}),u=x.useRef(null),d=x.useRef(null),f=m=>{s(m),t&&t(m)};x.useEffect(()=>{const m=g=>{r&&u.current&&!u.current.contains(g.target)&&d.current&&!d.current.contains(g.target)&&f(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[r,t,u,d]);const h={isOpen:r,setIsOpen:f,position:i,setPosition:l,triggerRef:u,contentRef:d};return a.jsx(p_.Provider,{value:h,...n,children:e})},s0=oe.forwardRef(({className:e,children:t,asChild:n=!1,...r},s)=>{const{setIsOpen:i,setPosition:l,triggerRef:u,isOpen:d}=oe.useContext(p_),f=m=>{var g;if(m.preventDefault(),m.stopPropagation(),!d){const y=(g=u.current)==null?void 0:g.getBoundingClientRect();y&&l({top:y.bottom+window.scrollY+4,left:y.left+window.scrollX})}i(!d)},h=m=>{u.current=m,typeof s=="function"?s(m):s&&(s.current=m)};return n?oe.cloneElement(oe.Children.only(t),{ref:h,onClick:f,...r}):a.jsx("button",{type:"button",ref:h,className:e,onClick:f,...r,children:t})}),i0=oe.forwardRef(({className:e,align:t="center",children:n,...r},s)=>{const{isOpen:i,setIsOpen:l,position:u,contentRef:d}=oe.useContext(p_),f=m=>{d.current=m,typeof s=="function"?s(m):s&&(s.current=m)},h=m=>{m.target.closest('button, [role="option"], [role="menuitem"]')&&l(!1)};return i?mf.createPortal(a.jsx("div",{ref:f,style:{top:`${u.top}px`,left:`${u.left}px`},className:al("absolute z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none","animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),onClickCapture:h,...r,children:n}),document.body):null});i0.displayName="PopoverContent";s0.displayName="PopoverTrigger";const Tie=eg(["CHAT","PUSH","EMAIL","UI_ACTION","SYSTEM_EVENT"]),Cie=eg(["HUB_MESSAGE_SEND","HUB_THREAD_SUMMARIZE","WEEKLY_BRIEF_GENERATE","OFFICE_HOURS_BOOK","HOMEWORK_HELP","EXPLORE_DEEP_LINK","SAFETY_ESCALATE","UNKNOWN_CLARIFY"]),Pie=Tr({level:eg(["NONE","SENSITIVE","URGENT","BLOCKED"]),reasons:Zp(Et())}),Aie=gee("type",[Tr({type:lT("CHOICE"),title:Et(),options:Zp(Tr({label:Et(),value:Et()}))}),Tr({type:lT("FOLLOWUP_QUESTION"),title:Et(),placeholder:Et().optional()})]),Rie=Tr({missing:Zp(Et()),promptUser:Aie.optional()}),Iie=Tr({type:eg(["CARD","DEEPLINK","CHOICE","FOLLOWUP_QUESTION","ERROR"]),title:Et(),body:Et().optional(),deepLink:Et().optional(),primaryAction:Tr({label:Et(),action:Et()}).optional()});Tr({requestId:Et(),actor:Tr({userId:Et(),role:Et()}),channel:Tie,text:Et().optional(),selected:Tr({childId:Et().optional(),schoolId:Et().optional(),teacherId:Et().optional(),threadId:Et().optional(),recipientUserId:Et().optional()}).optional(),metadata:Tr({locale:Et().optional(),timezone:Et().optional()}).optional(),recent:Tr({summary:Et().optional()}).optional()});Tr({route:Cie,confidence:hee(),safety:Pie,needs:Rie.optional(),ui:Iie,result:yee(pee()).optional(),sideEffects:Zp(Et()).optional(),success:mee().optional()});const{moderateContent:Oie,submitReport:Die,logAuditEvent:Mie,invokeAdvancedAI:Dle}=UJ;function Lie(e,t){const[n,r]=x.useState(e);return x.useEffect(()=>{const s=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(s)}},[e,t]),n}function Fie({onPostCreated:e,initialContent:t="",initialType:n="general",currentUser:r}){const[s,i]=x.useState(n==="question"?"question":n==="poll"?"poll":n==="task"?"task":"general"),[l,u]=x.useState(t),[d,f]=x.useState(n),[h,m]=x.useState(""),[g,y]=x.useState(["",""]),[w,b]=x.useState(),[S,_]=x.useState(!1),[k,N]=x.useState(!1),[T,P]=x.useState("public"),[R,M]=x.useState(""),[A,W]=x.useState(""),[K,H]=x.useState("volunteer"),[z,L]=x.useState(""),[B,Q]=x.useState(""),[q,F]=x.useState(5),[D,X]=x.useState(1),[I,V]=x.useState(),[Z,O]=x.useState([]),[ce,he]=x.useState(""),[me,Ce]=x.useState(null),[ge,$e]=x.useState(!1),{toast:ne}=ds(),We=Lie(l,500);x.useEffect(()=>{We&&We.trim()&&(s==="general"||s==="question")?Ve(We):(s==="task"||s==="poll")&&Ce(null)},[We,s]);const Ve=async $=>{try{const te=await Oie({content:$.trim(),contentType:"text"});Ce(te.data)}catch(te){console.error("Error checking content moderation:",te),Ce(null)}},Ft=()=>{y([...g,""])},Dt=$=>{g.length>2&&y(g.filter((te,se)=>se!==$))},Pn=($,te)=>{const se=[...g];se[$]=te,y(se)},wn=()=>{ce.trim()&&!Z.includes(ce.trim())&&(O([...Z,ce.trim()]),he(""))},bn=$=>{O(Z.filter(te=>te!==$))},Rr=async $=>{var te;if($.preventDefault(),(s==="general"||s==="question")&&(me==null?void 0:me.action)==="block"){ne({variant:"destructive",title:"Content blocked",description:"Please revise your content before sharing."});return}$e(!0);try{let se=null;if(s==="poll"){if(!h.trim())throw new Error("Poll question is required");if(g.filter(_e=>_e.trim()).length<2)throw new Error("At least 2 poll options are required");if(!w)throw new new Error("Poll closing date is required");if(w<=new Date)throw new Error("Poll closing date must be in the future");const ke={question:h.trim(),options:g.filter(_e=>_e.trim()).map((_e,xe)=>({id:`option_${xe}`,text:_e.trim(),votes:0})),creator_id:r.id,closes_at:w.toISOString(),is_anonymous:S,allow_multiple:k,visibility:T,status:"active",total_votes:0};se=await IJ.create(ke),await Mw.create({content:` **Poll:** ${h}`,type:"poll",user_id:r.id,author_name:r.full_name||"Anonymous",status:"published",visibility:"public",poll_id:se.id})}else if(s==="task"){if(!R.trim())throw new Error("Task title is required");if(!A.trim())throw new Error("Task description is required");const ke={title:R.trim(),description:A.trim(),category:K,creator_id:r.id,location:z.trim()||null,time_required:B.trim()||null,points_reward:q,max_volunteers:D,due_date:I?I.toISOString():null,skills_needed:Z,status:"open",current_volunteers:0,school_id:r.school_id||null};se=await OJ.create(ke)}else{if(!l.trim())throw new Error("Post content is required");const ke={content:l.trim(),type:d,user_id:r.id,author_name:r.full_name||"Anonymous",status:"published",visibility:"public",is_flagged:(me==null?void 0:me.action)==="flag",toxicity_score:((te=me==null?void 0:me.scores)==null?void 0:te.toxicity)||0};se=await Mw.create(ke)}u(t||""),m(""),y(["",""]),b(null),_(!1),N(!1),M(""),W(""),L(""),Q(""),O([]),V(null),Ce(null),e&&e(se),ne({title:"Success!",description:`${s==="poll"?"Poll":s==="task"?"Task":"Post"} created successfully.`})}catch(se){console.error("Error creating item:",se),ne({variant:"destructive",title:"Error",description:se.message||"Failed to create item. Please try again."})}finally{$e(!1)}},Bt=[{id:"general",name:"Share",icon:np},{id:"question",name:"Ask",icon:EH},{id:"poll",name:"Poll",icon:yH},{id:"task",name:"Task",icon:qd}];return a.jsx(Cs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6",children:a.jsxs(Ne,{className:"bg-white shadow-lg",children:[a.jsx(Oe,{children:a.jsx("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:Bt.map($=>a.jsxs("button",{onClick:()=>{i($.id),($.id==="general"||$.id==="question")&&f($.id)},className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${s===$.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[a.jsx($.icon,{className:"w-4 h-4"}),$.name]},$.id))})}),a.jsx(Te,{children:a.jsxs("form",{onSubmit:Rr,className:"space-y-4",children:[(s==="general"||s==="question")&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(an,{placeholder:s==="question"?"What would you like to ask the community?":"What's on your mind?",value:l,onChange:$=>u($.target.value),className:"min-h-[120px] resize-none",disabled:ge,maxLength:2e3}),me&&a.jsxs("div",{className:`text-sm p-3 rounded-lg ${me.action==="block"?"bg-red-50 text-red-700 border border-red-200":me.action==="flag"?"bg-yellow-50 text-yellow-700 border border-yellow-200":"bg-green-50 text-green-700 border border-green-200"}`,children:[me.action==="block"&&" This content may violate community guidelines. Please revise before sharing.",me.action==="flag"&&" This content will be reviewed by moderators before being published.",me.action==="allow"&&" Content looks good!"]})]}),s==="poll"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx(be,{placeholder:"What would you like to ask?",value:h,onChange:$=>m($.target.value),disabled:ge}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{children:"Poll Options"}),g.map(($,te)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx(be,{placeholder:`Option ${te+1}`,value:$,onChange:se=>Pn(te,se.target.value),disabled:ge}),g.length>2&&a.jsx(we,{type:"button",variant:"outline",size:"icon",onClick:()=>Dt(te),disabled:ge,children:a.jsx(Wd,{className:"w-4 h-4"})})]},te)),a.jsxs(we,{type:"button",variant:"outline",onClick:Ft,disabled:ge,className:"w-full",children:[a.jsx(sl,{className:"w-4 h-4 mr-2"}),"Add Option"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(De,{children:"Poll Closes"}),a.jsxs($T,{children:[a.jsx(s0,{asChild:!0,children:a.jsxs(we,{variant:"outline",className:`w-full justify-start text-left font-normal ${!w&&"text-muted-foreground"}`,disabled:ge,children:[a.jsx(PN,{className:"mr-2 h-4 w-4"}),w?ol(w,"PPP"):"Pick a date"]})}),a.jsx(i0,{className:"w-auto p-0",align:"start",children:a.jsx(r0,{mode:"single",selected:w,onSelect:b,disabled:$=>$<=new Date,initialFocus:!0})})]})]}),a.jsxs("div",{children:[a.jsx(De,{children:"Visibility"}),a.jsxs(ln,{value:T,onValueChange:P,disabled:ge,children:[a.jsx(nn,{children:a.jsx(rn,{})}),a.jsxs(sn,{children:[a.jsx(qe,{value:"public",children:"Public"}),a.jsx(qe,{value:"school",children:"School Only"}),a.jsx(qe,{value:"pod",children:"Pod Only"})]})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(il,{id:"anonymous",checked:S,onCheckedChange:_,disabled:ge}),a.jsx(De,{htmlFor:"anonymous",className:"text-sm",children:"Anonymous voting"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(il,{id:"multiple",checked:k,onCheckedChange:N,disabled:ge}),a.jsx(De,{htmlFor:"multiple",className:"text-sm",children:"Allow multiple selections"})]})]})]}),s==="task"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx(be,{placeholder:"Task title",value:R,onChange:$=>M($.target.value),disabled:ge}),a.jsx(an,{placeholder:"Describe what volunteers need to do...",value:A,onChange:$=>W($.target.value),className:"min-h-[100px]",disabled:ge}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(De,{children:"Category"}),a.jsxs(ln,{value:K,onValueChange:H,disabled:ge,children:[a.jsx(nn,{children:a.jsx(rn,{})}),a.jsxs(sn,{children:[a.jsx(qe,{value:"volunteer",children:"General Volunteer"}),a.jsx(qe,{value:"fundraising",children:"Fundraising"}),a.jsx(qe,{value:"event_help",children:"Event Help"}),a.jsx(qe,{value:"classroom_support",children:"Classroom Support"}),a.jsx(qe,{value:"maintenance",children:"Maintenance"}),a.jsx(qe,{value:"other",children:"Other"})]})]})]}),a.jsxs("div",{children:[a.jsx(De,{children:"Points Reward"}),a.jsx(be,{type:"number",value:q,onChange:$=>F(parseInt($.target.value)||5),min:"1",max:"50",disabled:ge})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(De,{children:"Location"}),a.jsx(be,{placeholder:"Where is this task located?",value:z,onChange:$=>L($.target.value),disabled:ge})]}),a.jsxs("div",{children:[a.jsx(De,{children:"Time Required"}),a.jsxs(ln,{value:B,onValueChange:Q,disabled:ge,children:[a.jsx(nn,{children:a.jsx(rn,{placeholder:"Estimated time"})}),a.jsxs(sn,{children:[a.jsx(qe,{value:"15 minutes",children:"15 minutes"}),a.jsx(qe,{value:"30 minutes",children:"30 minutes"}),a.jsx(qe,{value:"1 hour",children:"1 hour"}),a.jsx(qe,{value:"2 hours",children:"2 hours"}),a.jsx(qe,{value:"Half day",children:"Half day"}),a.jsx(qe,{value:"Full day",children:"Full day"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(De,{children:"Max Volunteers"}),a.jsx(be,{type:"number",value:D,onChange:$=>X(parseInt($.target.value)||1),min:"1",max:"20",disabled:ge})]}),a.jsxs("div",{children:[a.jsx(De,{children:"Due Date (Optional)"}),a.jsxs($T,{children:[a.jsx(s0,{asChild:!0,children:a.jsxs(we,{variant:"outline",className:`w-full justify-start text-left font-normal ${!I&&"text-muted-foreground"}`,disabled:ge,children:[a.jsx(PN,{className:"mr-2 h-4 w-4"}),I?ol(I,"PPP"):"No deadline"]})}),a.jsx(i0,{className:"w-auto p-0",align:"start",children:a.jsx(r0,{mode:"single",selected:I,onSelect:V,disabled:$=>$<new Date,initialFocus:!0})})]})]})]}),a.jsxs("div",{children:[a.jsx(De,{children:"Skills Needed (Optional)"}),a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx(be,{placeholder:"Add a skill...",value:ce,onChange:$=>he($.target.value),onKeyPress:$=>$.key==="Enter"&&($.preventDefault(),wn()),disabled:ge}),a.jsx(we,{type:"button",onClick:wn,disabled:ge||!ce.trim(),size:"icon",variant:"outline",children:a.jsx(sl,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Z.map($=>a.jsxs(sr,{variant:"secondary",className:"flex items-center gap-1",children:[$,a.jsx(Wd,{className:"w-3 h-3 cursor-pointer",onClick:()=>bn($)})]},$))})]})]}),a.jsx(we,{type:"submit",className:"w-full",disabled:ge||(me==null?void 0:me.action)==="block"&&(s==="general"||s==="question"),children:ge?a.jsxs(a.Fragment,{children:[a.jsx(Mc,{className:"w-4 h-4 mr-2 animate-spin"}),s==="poll"?"Creating Poll...":s==="task"?"Creating Task...":"Sharing..."]}):a.jsx(a.Fragment,{children:s==="poll"?"Create Poll":s==="task"?"Post Task":"Share Post"})})]})})]})})}const $ie=()=>a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsx(Ne,{children:a.jsx(Te,{className:"p-4",children:a.jsx(lm,{className:"h-24 w-full"})})}),[...Array(4)].map((e,t)=>a.jsx(Ne,{children:a.jsx(Te,{className:"p-4",children:a.jsx(lm,{className:"h-32 w-full"})})},t))]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(Ne,{children:a.jsx(Te,{className:"p-4",children:a.jsx(lm,{className:"h-48 w-full"})})}),a.jsx(Ne,{children:a.jsx(Te,{className:"p-4",children:a.jsx(lm,{className:"h-64 w-full"})})})]})]});function Vie({initialContent:e,initialType:t,onPostCreated:n,onReport:r}){const[s,i]=x.useState([]),[l,u]=x.useState([]),[d,f]=x.useState([]),[h,m]=x.useState(null),[g,y]=x.useState(!0),[w,b]=x.useState(null);x.useEffect(()=>{S()},[]);const S=async()=>{y(!0),b(null);try{const[T,P,R,M]=await Promise.all([dp.me(),Mw.list("-created_date",50,{with:{user:!0}}),TJ.list(),PJ.list()]);m(T),i(P),u(R||[]),f(M||[])}catch(T){console.error("Error loading feed data:",T),b({message:"Could not load the community feed."})}finally{y(!1)}},_=async T=>{},k=T=>d.filter(P=>P.post_id===T),N=T=>d.some(P=>P.post_id===T&&P.user_id===(h==null?void 0:h.id));return g?a.jsx($ie,{}):w?a.jsx(Ne,{className:"max-w-2xl mx-auto border-0 shadow-lg bg-white/90 backdrop-blur-sm",children:a.jsxs(Te,{className:"p-8 text-center",children:[a.jsx(xb,{className:"w-16 h-16 mx-auto mb-6 text-red-500"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Could Not Load Feed"}),a.jsx("p",{className:"text-gray-700 mb-6 max-w-md mx-auto",children:w.message})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx(Fie,{user:h,onPostCreated:n||S,initialContent:e,initialType:t}),a.jsx("div",{className:"space-y-4",children:a.jsx(Bp,{children:s.map(T=>a.jsx(Nie,{post:T,comments:l.filter(P=>P.post_id===T.id),likes:k(T.id),hasLiked:N(T.id),onLike:()=>_(T.id),currentUser:h,onUpdate:S,onReport:r},T.id))})})]})}const zie=Ii("use-api"),dc={maxConcurrentRequests:3,requestDelay:500,backoffMultiplier:2,maxBackoffDelay:1e4};let a0=[],dx=0,VT=0;const g_=e=>{var r;const t=(e==null?void 0:e.message)||(e==null?void 0:e.toString())||"Unknown error",n=((r=e==null?void 0:e.response)==null?void 0:r.status)||(e==null?void 0:e.status);return n===429||t.includes("429")||t.includes("Too Many Requests")?{type:"rate_limit",code:"RATE_LIMITED",shouldRetry:!0}:t.includes("Unauthorized")||n===401?{type:"auth",code:"UNAUTHORIZED",shouldRetry:!1}:n===403||t.includes("Forbidden")?{type:"permission",code:"FORBIDDEN",shouldRetry:!1}:n===404||t.includes("Not Found")?{type:"not_found",code:"NOT_FOUND",shouldRetry:!1}:n>=500||t.includes("500")||t.includes("502")||t.includes("503")||t.includes("504")?{type:"server",code:"SERVER_ERROR",shouldRetry:!0}:t.includes("Network")||t.includes("Failed to fetch")||t.includes("ETIMEDOUT")||t.includes("ECONNREFUSED")?{type:"network",code:"NETWORK_ERROR",shouldRetry:!0}:{type:"general",code:"GENERAL_ERROR",shouldRetry:!1}},lM=async e=>new Promise((t,n)=>{const r={fn:e,resolve:t,reject:n};a0.push(r),o0()}),o0=async()=>{if(dx>=dc.maxConcurrentRequests||a0.length===0)return;const e=Date.now(),t=e-VT;if(t<dc.requestDelay){setTimeout(o0,dc.requestDelay-t);return}const{fn:n,resolve:r,reject:s}=a0.shift();dx++,VT=e;try{const i=await n();r(i)}catch(i){s(i)}finally{dx--,setTimeout(o0,dc.requestDelay)}},cM=async(e,t,n,r)=>{try{return await lM(e)}catch(s){const i=g_(s);if(t>0&&i.shouldRetry){const l=i.type==="rate_limit"?Math.min(n*dc.backoffMultiplier,dc.maxBackoffDelay):n;return zie.warn(`Request failed, retrying in ${l}ms. Retries left: ${t}`,s.message),await new Promise(u=>setTimeout(u,l)),cM(e,t-1,l)}throw s}},Uie=(e,t="")=>{const{type:n}=g_(e);switch(n){case"rate_limit":return"Too many requests. Please wait a moment and try again.";case"auth":return"Your session has expired. Please sign in again.";case"permission":return"You don't have permission to perform this action.";case"not_found":return`The requested ${t||"resource"} could not be found.`;case"server":return"Our servers are experiencing issues. Please try again in a few minutes.";case"network":return"Connection problem. Please check your internet and try again.";default:return`Something went wrong${t?` with ${t}`:""}. Please try again.`}},uM=(e={})=>{const[t,n]=x.useState({}),[r,s]=x.useState({}),{toast:i}=ds(),l=pl(),u=x.useRef({}),{showToastOnError:d=!0,showToastOnSuccess:f=!1,redirectOnAuth:h=!0,enableRetry:m=!0,context:g="",silent:y=!1}=e,w=x.useCallback((z,L)=>{n(B=>({...B,[z]:L}))},[]),b=x.useCallback((z,L)=>{s(B=>({...B,[z]:L}))},[]),S=x.useCallback(z=>{s(L=>{const B={...L};return delete B[z],B})},[]),_=x.useCallback(z=>{u.current[z]&&(u.current[z].abort(),delete u.current[z],w(z,!1))},[w]),k=x.useCallback(async(z,{key:L="default",successMessage:B=null,errorContext:Q=g,onSuccess:q=null,onError:F=null,skipErrorHandling:D=!1,retryable:X=m}={})=>{_(L);const I=new AbortController;u.current[L]=I;try{w(L,!0),S(L);let V;return X?V=await cM(()=>z(I.signal),3,1e3,"api_call"):V=await lM(()=>z(I.signal)),q&&await q(V),B&&!y&&f&&i({title:"Success",description:B,variant:"default"}),V}catch(V){if(V.name==="AbortError")return null;const Z=g_(V),O=Uie(V,Q);if(b(L,{original:V,type:Z.type,code:Z.code,message:O,timestamp:new Date().toISOString()}),Z.type==="auth"&&h)return y||i({variant:"destructive",title:"Authentication Required",description:O}),l(Kb("Landing")),null;throw!D&&d&&!y&&i({variant:"destructive",title:Z.type==="rate_limit"?"Please slow down":"Error",description:O,duration:Z.type==="rate_limit"?5e3:4e3}),F&&await F(V,Z),V}finally{w(L,!1),delete u.current[L]}},[_,w,S,b,i,l,g,m,d,f,h,y]),N={list:x.useCallback((z,...L)=>k(()=>z.list(...L),{key:`${z.constructor.name||"entity"}_list`,errorContext:"loading data",retryable:!0}),[k]),filter:x.useCallback((z,L,...B)=>k(()=>z.filter(L,...B),{key:`${z.constructor.name||"entity"}_filter`,errorContext:"searching data",retryable:!0}),[k]),get:x.useCallback((z,L)=>k(()=>z.get(L),{key:`${z.constructor.name||"entity"}_get_${L}`,errorContext:"loading item",retryable:!0}),[k]),create:x.useCallback((z,L,B="Item created successfully")=>k(()=>z.create(L),{key:`${z.constructor.name||"entity"}_create`,successMessage:B,errorContext:"creating item",retryable:!1}),[k]),update:x.useCallback((z,L,B,Q="Item updated successfully")=>k(()=>z.update(L,B),{key:`${z.constructor.name||"entity"}_update_${L}`,successMessage:Q,errorContext:"updating item",retryable:!1}),[k]),delete:x.useCallback((z,L,B="Item deleted successfully")=>k(()=>z.delete(L),{key:`${z.constructor.name||"entity"}_delete_${L}`,successMessage:B,errorContext:"deleting item",retryable:!1}),[k])},T=x.useCallback((z,L={},B={})=>k(()=>z(L),{key:`function_${z.name||"call"}`,errorContext:"performing action",retryable:!0,...B}),[k]),P=x.useCallback((z="default")=>!!t[z],[t]),R=x.useCallback((z="default")=>r[z],[r]),M=x.useCallback((z="default")=>!!r[z],[r]),A=x.useCallback(()=>Object.values(t).some(Boolean),[t]),W=x.useCallback(()=>Object.keys(r).length>0,[r]),K=x.useCallback(()=>s({}),[]),H=x.useCallback(()=>{Object.keys(u.current).forEach(_)},[_]);return{execute:k,...N,callFunction:T,isLoading:P,getError:R,hasError:M,isAnyLoading:A,hasAnyError:W,setLoading:w,setError:b,clearError:S,clearAllErrors:K,cancelRequest:_,cancelAllRequests:H,loadingStates:t,errors:r}},zT=({pod:e,currentUser:t,onJoin:n,isJoining:r})=>{const s=()=>{switch(e.type||"public"){case"private":return a.jsx(BH,{className:"w-4 h-4"});case"school":return a.jsx(LR,{className:"w-4 h-4"});default:return a.jsx(DR,{className:"w-4 h-4"})}},i=()=>{switch(e.type||"public"){case"private":return"Private";case"school":return"School";default:return"Public"}};return a.jsx(Cs.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},whileHover:{y:-2},className:"h-full",children:a.jsxs(Ne,{className:"h-full hover:shadow-lg transition-shadow cursor-pointer",children:[a.jsxs(Oe,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Le,{className:"text-lg",children:e.name}),a.jsxs(sr,{variant:"outline",className:"flex items-center gap-1",children:[s(),i()]})]}),e.description&&a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description})]}),a.jsxs(Te,{className:"pt-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(qd,{className:"w-4 h-4"}),e.member_count||0," members"]}),e.is_autogenerated&&a.jsx(sr,{variant:"secondary",className:"text-xs",children:"AI Suggested"})]}),e.tags&&e.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[e.tags.slice(0,3).map((l,u)=>a.jsx(sr,{variant:"outline",className:"text-xs",children:l},u)),e.tags.length>3&&a.jsxs(sr,{variant:"outline",className:"text-xs",children:["+",e.tags.length-3]})]}),a.jsx(we,{onClick:()=>n(e),disabled:r,className:"w-full bg-blue-600 hover:bg-blue-700",size:"sm",children:e.user_is_member?"View Pod":"Join Pod"})]})]})})};function Bie({user:e}){const[t,n]=x.useState([]),[r,s]=x.useState(""),[i,l]=x.useState(!0),[u,d]=x.useState(null),[f,h]=x.useState("discover"),m=uM({context:"community-pods"}),{toast:g}=ds();x.useEffect(()=>{y()},[]);const y=async()=>{l(!0);try{const k=await m.execute(()=>AJ.list("-created_date"),{key:"pods",errorContext:"loading community pods"});n(k||[])}catch(k){console.error("Failed to load pods:",k),g({variant:"destructive",title:"Loading Error",description:"Failed to load community pods. Please try again."})}finally{l(!1)}},w=async k=>{if(!u){d(k.id);try{k.user_is_member?g({title:"Opening Pod",description:`Taking you to ${k.name}...`}):(await RJ.create({pod_id:k.id,user_id:e.id}),g({title:"Joined Pod!",description:`Welcome to ${k.name}! You can now participate in discussions.`}),await y())}catch(N){console.error("Pod join error:",N),g({variant:"destructive",title:"Join Error",description:"Failed to join the pod. Please try again."})}finally{d(null)}}},b=t.filter(k=>{var N,T,P;return((N=k.name)==null?void 0:N.toLowerCase().includes(r.toLowerCase()))||((T=k.description)==null?void 0:T.toLowerCase().includes(r.toLowerCase()))||((P=k.tags)==null?void 0:P.some(R=>R.toLowerCase().includes(r.toLowerCase())))}),S=b.filter(k=>k.user_is_member),_=b.filter(k=>!k.user_is_member);return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 max-w-md",children:[a.jsx(rp,{className:"w-4 h-4 text-gray-400"}),a.jsx(be,{placeholder:"Search pods...",value:r,onChange:k=>s(k.target.value),className:"border-0 bg-gray-50"})]}),a.jsxs(we,{className:"bg-blue-600 hover:bg-blue-700",children:[a.jsx(sl,{className:"w-4 h-4 mr-2"}),"Create Pod"]})]}),a.jsxs("div",{className:"flex gap-1 mb-6 bg-gray-100 p-1 rounded-lg w-fit",children:[a.jsxs(we,{variant:f==="discover"?"default":"ghost",size:"sm",onClick:()=>h("discover"),className:"rounded-md",children:["Discover (",_.length,")"]}),a.jsxs(we,{variant:f==="my-pods"?"default":"ghost",size:"sm",onClick:()=>h("my-pods"),className:"rounded-md",children:["My Pods (",S.length,")"]})]}),i?a.jsx("div",{className:"flex justify-center py-12",children:a.jsx(Nd,{text:"Loading pods..."})}):a.jsxs(a.Fragment,{children:[f==="discover"&&a.jsx(a.Fragment,{children:_.length===0?a.jsx(Lw,{title:"No pods found",description:r?"Try adjusting your search terms.":"Be the first to create a pod for your community!",action:a.jsxs(we,{className:"bg-blue-600 hover:bg-blue-700",children:[a.jsx(sl,{className:"w-4 h-4 mr-2"}),"Create First Pod"]})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(k=>a.jsx(zT,{pod:k,currentUser:e,onJoin:w,isJoining:u===k.id},k.id))})}),f==="my-pods"&&a.jsx(a.Fragment,{children:S.length===0?a.jsx(Lw,{title:"No pods joined yet",description:"Join some pods to connect with other parents and participate in discussions.",action:a.jsxs(we,{onClick:()=>h("discover"),children:[a.jsx(qd,{className:"w-4 h-4 mr-2"}),"Discover Pods"]})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(k=>a.jsx(zT,{pod:k,currentUser:e,onJoin:w,isJoining:u===k.id},k.id))})})]})]})}const qie=({conversation:e,isActive:t,onClick:n,unreadCount:r})=>a.jsxs(Cs.div,{whileHover:{backgroundColor:"#f8fafc"},className:`p-4 cursor-pointer border-b transition-colors ${t?"bg-blue-50 border-l-4 border-l-blue-500":""}`,onClick:n,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:e.name||"Direct Message"}),r>0&&a.jsx(sr,{className:"bg-blue-600 text-white text-xs",children:r})]}),e.last_message_preview&&a.jsx("p",{className:"text-sm text-gray-600 truncate mb-1",children:e.last_message_preview}),e.last_message_at&&a.jsxs("p",{className:"text-xs text-gray-400",children:[nG(new Date(e.last_message_at))," ago"]})]}),Wie=({message:e,isOwn:t,senderName:n})=>a.jsx(Cs.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${t?"justify-end":"justify-start"} mb-4`,children:a.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${t?"bg-blue-600 text-white":"bg-gray-200 text-gray-800"}`,children:[!t&&a.jsx("p",{className:"text-xs font-semibold mb-1 opacity-70",children:n}),a.jsx("p",{className:"text-sm",children:e.content}),a.jsx("p",{className:`text-xs mt-1 ${t?"text-blue-100":"text-gray-500"}`,children:ol(new Date(e.created_date),"HH:mm")})]})});function Hie({user:e}){const[t,n]=x.useState([]),[r,s]=x.useState(null),[i,l]=x.useState([]),[u,d]=x.useState(""),[f,h]=x.useState(""),[m,g]=x.useState(!0),[y,w]=x.useState(!1),[b,S]=x.useState(!1),_=uM({context:"community-messages"}),{toast:k}=ds();x.useEffect(()=>{N()},[]),x.useEffect(()=>{r&&T(r.id)},[r]);const N=async()=>{g(!0);try{const M=await _.execute(()=>CJ.filter({}),{key:"conversations",errorContext:"loading conversations"});n(M||[]),M&&M.length>0&&s(M[0])}catch(M){console.error("Failed to load conversations:",M),k({variant:"destructive",title:"Loading Error",description:"Failed to load your conversations. Please try again."})}finally{g(!1)}},T=async M=>{w(!0);try{const A=await _.execute(()=>D1.filter({conversation_id:M},"-created_date",50),{key:`messages-${M}`,errorContext:"loading messages"});l(A||[])}catch(A){console.error("Failed to load messages:",A),k({variant:"destructive",title:"Loading Error",description:"Failed to load messages. Please try again."})}finally{w(!1)}},P=async M=>{if(M.preventDefault(),!(!u.trim()||!r||b)){S(!0);try{const A=await D1.create({conversation_id:r.id,sender_id:e.id,content:u.trim()});l(W=>[...W,{...A,sender_name:e.full_name}]),d(""),n(W=>W.map(K=>K.id===r.id?{...K,last_message_preview:u.trim(),last_message_at:new Date().toISOString()}:K))}catch(A){console.error("Failed to send message:",A),k({variant:"destructive",title:"Send Error",description:"Failed to send your message. Please try again."})}finally{S(!1)}}},R=t.filter(M=>{var A,W;return((A=M.name)==null?void 0:A.toLowerCase().includes(f.toLowerCase()))||((W=M.last_message_preview)==null?void 0:W.toLowerCase().includes(f.toLowerCase()))});return a.jsxs("div",{className:"h-[600px] flex",children:[a.jsxs("div",{className:"w-1/3 border-r bg-gray-50 flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Messages"}),a.jsx(we,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:a.jsx(sl,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rp,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx(be,{placeholder:"Search conversations...",value:f,onChange:M=>h(M.target.value),className:"pl-10 border-0 bg-gray-50"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:m?a.jsx("div",{className:"flex justify-center items-center h-32",children:a.jsx(Nd,{text:"Loading conversations..."})}):R.length===0?a.jsx("div",{className:"p-4",children:a.jsx(Lw,{title:"No conversations",description:"Start a new conversation to connect with other parents and teachers.",action:a.jsxs(we,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[a.jsx(sl,{className:"w-4 h-4 mr-2"}),"New Message"]})})}):a.jsx(a.Fragment,{children:R.map(M=>a.jsx(qie,{conversation:M,isActive:(r==null?void 0:r.id)===M.id,onClick:()=>s(M),unreadCount:0},M.id))})})]}),a.jsx("div",{className:"flex-1 flex flex-col bg-white",children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"p-4 border-b bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:r.name||"Direct Message"}),a.jsxs("p",{className:"text-sm text-gray-500",children:[r.participant_count||2," participants"]})]}),a.jsx(we,{variant:"ghost",size:"sm",children:a.jsx(OR,{className:"w-4 h-4"})})]})}),a.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:y?a.jsx("div",{className:"flex justify-center items-center h-full",children:a.jsx(Nd,{text:"Loading messages..."})}):i.length===0?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("p",{className:"text-gray-500",children:"No messages yet. Start the conversation!"})}):a.jsx(Bp,{children:i.map(M=>a.jsx(Wie,{message:M,isOwn:M.sender_id===e.id,senderName:M.sender_name||"Unknown"},M.id))})}),a.jsx("div",{className:"p-4 border-t",children:a.jsxs("form",{onSubmit:P,className:"flex gap-2",children:[a.jsx(be,{value:u,onChange:M=>d(M.target.value),placeholder:"Type a message...",className:"flex-1",disabled:b}),a.jsx(we,{type:"submit",disabled:!u.trim()||b,className:"bg-blue-600 hover:bg-blue-700",children:b?a.jsx(Nd,{size:"sm"}):a.jsx(e8,{className:"w-4 h-4"})})]})})]}):a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx(np,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Select a conversation"}),a.jsx("p",{className:"text-gray-500",children:"Choose a conversation from the list to start messaging."})]})})})]})}function Gie({userId:e}){const[t,n]=x.useState(null),[r,s]=x.useState(!0),[i,l]=x.useState(!1),{toast:u}=ds();x.useEffect(()=>{e&&(async()=>{try{s(!0);const m=await hd.filter({user_id:e});if(m.length>0)n(m[0]);else{const g={user_id:e,is_discoverable:!0,show_real_name:!0,anonymous_handle:"",visibility_scope:"global",allow_direct_messages:!0,allow_pod_invites:!0,show_location:!1,show_children_info:!1},y=await hd.create(g);n(y)}}catch(m){console.error("Error loading privacy settings:",m),u({variant:"destructive",title:"Failed to load settings"})}finally{s(!1)}})()},[e,u]);const d=async()=>{l(!0);try{t.id?await hd.update(t.id,t):await hd.create(t),u({title:"Settings Saved",description:"Your community privacy settings have been updated.",action:a.jsx(SH,{className:"text-green-500"})})}catch(h){console.error("Error saving settings:",h),u({variant:"destructive",title:"Save failed",description:"Could not save your settings. Please try again."})}finally{l(!1)}},f=(h,m)=>{n(g=>({...g,[h]:m}))};return r?a.jsxs(Ne,{children:[a.jsxs(Oe,{children:[a.jsx(Le,{children:"Community Privacy"}),a.jsx(Bd,{children:"Loading your privacy preferences..."})]}),a.jsx(Te,{className:"space-y-4",children:a.jsx(Mc,{className:"animate-spin"})})]}):a.jsxs(Ne,{children:[a.jsxs(Oe,{children:[a.jsx(Le,{children:"Community Privacy"}),a.jsx(Bd,{children:"Control how you appear and interact within the Teachmo community."})]}),a.jsxs(Te,{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsx(De,{htmlFor:"is_discoverable",className:"font-semibold",children:"Be Discoverable"}),a.jsx(Xs,{id:"is_discoverable",checked:t.is_discoverable,onCheckedChange:h=>f("is_discoverable",h)})]}),a.jsx("p",{className:"text-sm text-gray-600 -mt-4 px-1",children:"Allow other parents to find your profile in searches."}),a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsx(De,{htmlFor:"show_real_name",className:"font-semibold",children:"Post with Real Name"}),a.jsx(Xs,{id:"show_real_name",checked:t.show_real_name,onCheckedChange:h=>f("show_real_name",h)})]}),!t.show_real_name&&a.jsxs("div",{className:"space-y-2 pl-4 -mt-4",children:[a.jsx(De,{htmlFor:"anonymous_handle",children:"Anonymous Handle"}),a.jsx(be,{id:"anonymous_handle",placeholder:"e.g., HappyParent123",value:t.anonymous_handle,onChange:h=>f("anonymous_handle",h.target.value)}),a.jsx("p",{className:"text-sm text-gray-600",children:"This name will be shown on your posts and profile."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"visibility_scope",children:"Profile Visibility"}),a.jsxs(ln,{value:t.visibility_scope,onValueChange:h=>f("visibility_scope",h),children:[a.jsx(nn,{children:a.jsx(rn,{})}),a.jsxs(sn,{children:[a.jsx(qe,{value:"global",children:"Everyone in Teachmo"}),a.jsx(qe,{value:"district",children:"Only people in my school district"}),a.jsx(qe,{value:"school",children:"Only people in my school"}),a.jsx(qe,{value:"private",children:"Only me (private)"})]})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Choose who can see your profile details."})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsx(De,{htmlFor:"allow_direct_messages",className:"font-semibold",children:"Allow Direct Messages"}),a.jsx(Xs,{id:"allow_direct_messages",checked:t.allow_direct_messages,onCheckedChange:h=>f("allow_direct_messages",h)})]}),a.jsxs(we,{onClick:d,disabled:i,children:[i&&a.jsx(Mc,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Privacy Settings"]})]})]})}function Kie({open:e,onOpenChange:t,contentType:n,contentId:r,reportedUserId:s}){const[i,l]=x.useState(""),[u,d]=x.useState(!0),[f,h]=x.useState(!1),{toast:m}=ds(),g=async()=>{if(!i.trim()){m({variant:"destructive",title:"Description Required",description:"Please describe the concern."});return}h(!0);try{await Die({contentType:n,contentId:r,reportedUserId:s,reportReason:"safety_concern",description:i,isAnonymous:u}),m({title:"Report Submitted",description:"Thank you for helping keep our community safe. Our team will review your report shortly."}),t(!1),l("")}catch{m({variant:"destructive",title:"Submission Failed",description:"Could not submit your report. Please try again later."})}finally{h(!1)}};return a.jsx(Sb,{open:e,onOpenChange:t,children:a.jsxs(Gp,{children:[a.jsxs(jb,{children:[a.jsxs(Kp,{className:"flex items-center gap-2",children:[a.jsx(s8,{className:"w-6 h-6 text-red-600"}),"Report a Safety Concern"]}),a.jsx(qR,{children:"Your report is confidential and helps us maintain a safe environment. If this is an emergency, please contact local authorities immediately."})]}),a.jsxs("div",{className:"py-4 space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{htmlFor:"concern-description",children:"Please describe the issue in detail"}),a.jsx(an,{id:"concern-description",value:i,onChange:y=>l(y.target.value),placeholder:"Provide as much detail as possible, such as what happened, when, and where.",rows:5})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(il,{id:"anonymous-report",checked:u,onCheckedChange:d}),a.jsx(De,{htmlFor:"anonymous-report",className:"text-sm font-normal",children:"Submit anonymously"})]}),a.jsx("p",{className:"text-xs text-gray-500",children:"If you submit anonymously, we will not be able to follow up with you directly. Your report will still be reviewed."})]}),a.jsxs(S8,{children:[a.jsx(we,{variant:"outline",onClick:()=>t(!1),disabled:f,children:"Cancel"}),a.jsx(we,{onClick:g,disabled:f,children:f?a.jsxs(a.Fragment,{children:[a.jsx(Mc,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):"Submit Report"})]})]})})}function dM(){const[e,t]=x.useState(null),[n,r]=x.useState(!0),[s,i]=x.useState(null),[l,u]=x.useState({open:!1,contentType:"post",contentId:null,reportedUserId:null});x.useEffect(()=>{(async()=>{r(!0),i(null);try{const h=await dp.me();t(h)}catch(h){console.error("Error loading Base44 user:",h),i({message:"Could not load your community profile. (Base44 session missing?)"})}finally{r(!1)}})()},[]);const d=f=>{u({open:!0,contentType:"post",contentId:f==null?void 0:f.id,reportedUserId:f==null?void 0:f.user_id})};return a.jsx(gt,{allowedRoles:["parent","teacher"],requireAuth:!0,children:a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[a.jsx("div",{className:"flex items-start justify-between gap-4",children:a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(qd,{className:"w-7 h-7"}),"Community"]}),a.jsx("p",{className:"mt-2 text-gray-700",children:"Ask questions, share wins, and connect with other parents and educators."})]})}),s?a.jsx(Ne,{className:"mt-6 border-0 shadow-lg bg-white/90 backdrop-blur-sm",children:a.jsx(Te,{className:"p-8",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(xb,{className:"w-8 h-8 text-red-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Community unavailable"}),a.jsx("p",{className:"mt-1 text-gray-700",children:s.message}),a.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"This page currently uses Base44 entities. If you are signed into Nhost but not Base44, you may see this error."})]})]})})}):a.jsxs(bb,{defaultValue:"feed",className:"mt-6",children:[a.jsxs(_b,{className:"bg-white/80",children:[a.jsxs(_i,{value:"feed",className:"gap-2",children:[a.jsx(np,{className:"w-4 h-4"}),"Feed"]}),a.jsxs(_i,{value:"pods",className:"gap-2",children:[a.jsx(qd,{className:"w-4 h-4"}),"Pods"]}),a.jsxs(_i,{value:"messages",className:"gap-2",children:[a.jsx(np,{className:"w-4 h-4"}),"Messages"]}),a.jsxs(_i,{value:"privacy",className:"gap-2",children:[a.jsx(FR,{className:"w-4 h-4"}),"Privacy"]})]}),a.jsx(Si,{value:"feed",className:"mt-6",children:n?a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):a.jsxs(a.Fragment,{children:[a.jsx(Qee,{user:e}),a.jsx(Vie,{onReport:d})]})}),a.jsx(Si,{value:"pods",className:"mt-6",children:a.jsx(Bie,{user:e})}),a.jsx(Si,{value:"messages",className:"mt-6",children:a.jsx(Hie,{user:e})}),a.jsx(Si,{value:"privacy",className:"mt-6",children:a.jsx(Gie,{userId:e==null?void 0:e.id})})]}),a.jsx(Kie,{open:l.open,onOpenChange:f=>u(h=>({...h,open:f})),contentType:l.contentType,contentId:l.contentId,reportedUserId:l.reportedUserId})]})})})}const Yie=x.lazy(()=>Be(()=>import("./Messages-DkmP-e9W.js"),[])),Qie=x.lazy(()=>Be(()=>import("./AIAssistant-3xuyhxMl.js"),__vite__mapDeps([4,5,6]))),Xie=x.lazy(()=>Be(()=>import("./Settings-BSdk_sqB.js"),[])),Jie=x.lazy(()=>Be(()=>import("./TeacherClasses-zINahfb9.js"),__vite__mapDeps([8,9,6]))),Zie=x.lazy(()=>Be(()=>import("./TeacherAssignments-D3bSHUEg.js"),__vite__mapDeps([10,9,6]))),eae=x.lazy(()=>Be(()=>import("./TeacherMessages-C-EgyiDW.js"),[])),tae=x.lazy(()=>Be(()=>import("./SchoolDirectory-BdpI2Dlq.js"),__vite__mapDeps([15,3])));function nae(){const{isAuthenticated:e,isLoading:t}=ma(),n=Gc();return t?a.jsx("p",{className:"p-6 text-gray-600",children:"Checking your session"}):e?a.jsx(Qs,{to:zp(n),replace:!0}):a.jsx(ZO,{})}function rae(){return a.jsxs(oU,{children:[a.jsx(Uee,{}),a.jsx(x.Suspense,{fallback:a.jsx("div",{className:"p-6 text-center text-sm text-muted-foreground",children:"Loading"}),children:a.jsxs(L5,{children:[a.jsx(ut,{index:!0,element:a.jsx(nae,{})}),a.jsx(ut,{path:"/onboarding",element:a.jsx(nD,{})}),a.jsx(ut,{path:"/login",element:a.jsx(tD,{})}),a.jsx(ut,{path:"/auth/callback",element:a.jsx(rD,{})}),a.jsx(ut,{path:"/ai/transparency",element:a.jsx(Ki,{feature:"ENTERPRISE_TRANSPARENCY",children:a.jsx(HI,{})})}),a.jsx(ut,{path:"/discover",element:a.jsx(Yee,{})}),a.jsx(ut,{path:"/community",element:a.jsx(dM,{})}),a.jsx(ut,{path:"/messages",element:a.jsx(gt,{children:a.jsx(Yie,{})})}),a.jsx(ut,{path:"/ai-assistant",element:a.jsx(gt,{children:a.jsx(Qie,{})})}),a.jsx(ut,{path:"/settings",element:a.jsx(gt,{children:a.jsx(Xie,{})})}),a.jsx(ut,{path:"/dashboard",element:a.jsx(gt,{allowedRoles:["parent","teacher","system_admin","school_admin","district_admin"],children:a.jsx(MP,{})})}),a.jsx(ut,{path:"/parent/dashboard",element:a.jsx(gt,{allowedRoles:["parent"],children:a.jsx(QO,{})})}),a.jsx(ut,{path:"/onboarding/parent",element:a.jsx(gt,{children:a.jsx(xD,{})})}),a.jsx(ut,{path:"/onboarding/teacher",element:a.jsx(gt,{children:a.jsx(wD,{})})}),a.jsx(ut,{path:"/teacher/dashboard",element:a.jsx(gt,{allowedRoles:["teacher"],children:a.jsx(XO,{})})}),a.jsx(ut,{path:"/teacher/classes",element:a.jsx(gt,{allowedRoles:["teacher"],children:a.jsx(Jie,{})})}),a.jsx(ut,{path:"/teacher/assignments",element:a.jsx(gt,{allowedRoles:["teacher"],children:a.jsx(Zie,{})})}),a.jsx(ut,{path:"/teacher/messages",element:a.jsx(gt,{allowedRoles:["teacher"],children:a.jsx(eae,{})})}),a.jsx(ut,{path:"/school-directory",element:a.jsx(gt,{children:a.jsx(tae,{})})}),a.jsx(ut,{path:"/partners/dashboard",element:a.jsx(gt,{allowedRoles:["admin","system_admin"],requiredScopes:["org:manage"],children:a.jsx(Fw,{})})}),a.jsx(ut,{path:"/partners",element:a.jsx(gt,{allowedRoles:["partner","admin","system_admin"],children:a.jsx(GI,{})})}),a.jsx(ut,{path:"/partners/submissions",element:a.jsx(gt,{allowedRoles:["partner","admin","system_admin"],children:a.jsx(KI,{})})}),a.jsx(ut,{path:"/partners/training",element:a.jsx(gt,{allowedRoles:["partner","admin","system_admin"],children:a.jsx(YI,{})})}),a.jsx(ut,{path:"/partners/incentives",element:a.jsx(gt,{allowedRoles:["partner","admin","system_admin"],children:a.jsx(XI,{})})}),a.jsx(ut,{path:"/partners/offers",element:a.jsx(gt,{allowedRoles:["partner","admin","system_admin"],children:a.jsx(KO,{})})}),a.jsx(ut,{path:"/partners/billing",element:a.jsx(gt,{allowedRoles:["partner","admin","system_admin"],children:a.jsx(YO,{})})}),a.jsx(ut,{path:"/admin",element:a.jsx(gt,{allowedRoles:["system_admin","school_admin","district_admin"],requiredScopes:["org:manage"],children:a.jsx(UR,{})})}),a.jsx(ut,{path:"/admin/partners",element:a.jsx(gt,{allowedRoles:["admin","system_admin"],requiredScopes:["org:manage"],children:a.jsx(Fw,{})})}),a.jsx(ut,{path:"/admin/workflows",element:a.jsx(gt,{allowedRoles:["system_admin","school_admin","district_admin"],requiredActions:["automation:manage"],requiredScopes:["automation:manage"],children:a.jsx(WR,{})})}),a.jsx(ut,{path:"/admin/tenant-settings",element:a.jsx(gt,{allowedRoles:["system_admin","school_admin","district_admin"],requiredActions:["tenant:manage"],requiredScopes:["org:manage"],children:a.jsx(HR,{})})}),a.jsx(ut,{path:"/admin/sso",element:a.jsx(gt,{allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredActions:["tenant:manage"],requiredScopes:["tenant:manage"],children:a.jsx(Ki,{feature:"ENTERPRISE_SSO",children:a.jsx(lI,{})})})}),a.jsx(ut,{path:"/admin/users",element:a.jsx(gt,{allowedRoles:["system_admin","school_admin","district_admin"],requiredActions:["users:manage"],requiredScopes:["users:manage"],children:a.jsx(KR,{})})}),a.jsx(ut,{path:"/admin/audit-logs",element:a.jsx(gt,{allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredActions:["safety:review"],requiredScopes:["safety:review"],children:a.jsx(Ki,{feature:"ENTERPRISE_AUDIT_LOGS",children:a.jsx(sI,{})})})}),a.jsx(ut,{path:"/admin/feature-flags",element:a.jsx(gt,{allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredActions:["tenant:manage"],requiredScopes:["tenant:manage"],children:a.jsx(Ki,{feature:"ENTERPRISE_FEATURE_FLAGS",children:a.jsx(iI,{})})})}),a.jsx(ut,{path:"/admin/analytics",element:a.jsx(gt,{allowedRoles:["system_admin","school_admin","district_admin"],requiredActions:["analytics:view"],requiredScopes:["reporting:view"],children:a.jsx(PR,{})})}),a.jsx(ut,{path:"/admin/notifications",element:a.jsx(gt,{allowedRoles:["system_admin","school_admin","district_admin"],requiredActions:["org:manage"],requiredScopes:["org:manage"],children:a.jsx($R,{})})}),a.jsx(ut,{path:"/admin/ai-governance",element:a.jsx(gt,{allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredActions:["safety:review"],requiredScopes:["safety:review"],children:a.jsx(Ki,{feature:"ENTERPRISE_AI_GOVERNANCE",children:a.jsx(YR,{})})})}),a.jsx(ut,{path:"/admin/ai-review",element:a.jsx(gt,{allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredActions:["safety:review"],requiredScopes:["safety:review"],children:a.jsx(Ki,{feature:"ENTERPRISE_AI_REVIEW",children:a.jsx(sp,{})})})}),a.jsx(ut,{path:"/admin/ai-review-queue",element:a.jsx(gt,{allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredActions:["safety:review"],requiredScopes:["safety:review"],children:a.jsx(Ki,{feature:"ENTERPRISE_AI_REVIEW",children:a.jsx(sp,{})})})}),a.jsx(ut,{path:"/admin/tenant-domains",element:a.jsx(gt,{allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredActions:["tenant:manage"],requiredScopes:["tenant:manage"],children:a.jsx(Ki,{feature:"ENTERPRISE_SSO",children:a.jsx(cI,{})})})}),a.jsx(ut,{path:"/admin/sis-roster",element:a.jsx(gt,{allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredActions:["directory:manage"],requiredScopes:["directory:manage"],children:a.jsx(Ki,{feature:"ENTERPRISE_SIS_ROSTER",children:a.jsx(aI,{})})})}),a.jsx(ut,{path:"/admin/integration-health",element:a.jsx(gt,{allowedRoles:["system_admin","school_admin","district_admin","admin"],requiredActions:["directory:manage"],requiredScopes:["directory:manage"],children:a.jsx(oI,{})})}),a.jsx(ut,{path:"/admin/ai-fine-tuning",element:a.jsx(xG,{})}),a.jsx(ut,{path:"/admin/ai-prompts",element:a.jsx(uI,{})}),a.jsx(ut,{path:"*",element:a.jsx(Qs,{to:"/",replace:!0})})]})})]})}const sae=new Wz({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:3e4},mutations:{retry:0}}});var iae=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),aae="VisuallyHidden",y_=x.forwardRef((e,t)=>a.jsx(xn.span,{...e,ref:t,style:{...iae,...e.style}}));y_.displayName=aae;var v_="ToastProvider",[x_,oae,lae]=Xb("Toast"),[fM]=ru("Toast",[lae]),[cae,cg]=fM(v_),hM=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:l}=e,[u,d]=x.useState(null),[f,h]=x.useState(0),m=x.useRef(!1),g=x.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${v_}\`. Expected non-empty \`string\`.`),a.jsx(x_.Provider,{scope:t,children:a.jsx(cae,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:f,viewport:u,onViewportChange:d,onToastAdd:x.useCallback(()=>h(y=>y+1),[]),onToastRemove:x.useCallback(()=>h(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:g,children:l})})};hM.displayName=v_;var mM="ToastViewport",uae=["F8"],l0="toast.viewportPause",c0="toast.viewportResume",pM=x.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=uae,label:s="Notifications ({hotkey})",...i}=e,l=cg(mM,n),u=oae(n),d=x.useRef(null),f=x.useRef(null),h=x.useRef(null),m=x.useRef(null),g=yr(t,m,l.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=l.toastCount>0;x.useEffect(()=>{const S=_=>{var N;r.length!==0&&r.every(T=>_[T]||_.code===T)&&((N=m.current)==null||N.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[r]),x.useEffect(()=>{const S=d.current,_=m.current;if(w&&S&&_){const k=()=>{if(!l.isClosePausedRef.current){const R=new CustomEvent(l0);_.dispatchEvent(R),l.isClosePausedRef.current=!0}},N=()=>{if(l.isClosePausedRef.current){const R=new CustomEvent(c0);_.dispatchEvent(R),l.isClosePausedRef.current=!1}},T=R=>{!S.contains(R.relatedTarget)&&N()},P=()=>{S.contains(document.activeElement)||N()};return S.addEventListener("focusin",k),S.addEventListener("focusout",T),S.addEventListener("pointermove",k),S.addEventListener("pointerleave",P),window.addEventListener("blur",k),window.addEventListener("focus",N),()=>{S.removeEventListener("focusin",k),S.removeEventListener("focusout",T),S.removeEventListener("pointermove",k),S.removeEventListener("pointerleave",P),window.removeEventListener("blur",k),window.removeEventListener("focus",N)}}},[w,l.isClosePausedRef]);const b=x.useCallback(({tabbingDirection:S})=>{const k=u().map(N=>{const T=N.ref.current,P=[T,...Sae(T)];return S==="forwards"?P:P.reverse()});return(S==="forwards"?k.reverse():k).flat()},[u]);return x.useEffect(()=>{const S=m.current;if(S){const _=k=>{var P,R,M;const N=k.altKey||k.ctrlKey||k.metaKey;if(k.key==="Tab"&&!N){const A=document.activeElement,W=k.shiftKey;if(k.target===S&&W){(P=f.current)==null||P.focus();return}const z=b({tabbingDirection:W?"backwards":"forwards"}),L=z.findIndex(B=>B===A);fx(z.slice(L+1))?k.preventDefault():W?(R=f.current)==null||R.focus():(M=h.current)==null||M.focus()}};return S.addEventListener("keydown",_),()=>S.removeEventListener("keydown",_)}},[u,b]),a.jsxs(_te,{ref:d,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&a.jsx(u0,{ref:f,onFocusFromOutsideViewport:()=>{const S=b({tabbingDirection:"forwards"});fx(S)}}),a.jsx(x_.Slot,{scope:n,children:a.jsx(xn.ol,{tabIndex:-1,...i,ref:g})}),w&&a.jsx(u0,{ref:h,onFocusFromOutsideViewport:()=>{const S=b({tabbingDirection:"backwards"});fx(S)}})]})});pM.displayName=mM;var gM="ToastFocusProxy",u0=x.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,i=cg(gM,n);return a.jsx(y_,{tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:l=>{var f;const u=l.relatedTarget;!((f=i.viewport)!=null&&f.contains(u))&&r()}})});u0.displayName=gM;var kf="Toast",dae="toast.swipeStart",fae="toast.swipeMove",hae="toast.swipeCancel",mae="toast.swipeEnd",yM=x.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...l}=e,[u,d]=Yb({prop:r,defaultProp:s??!0,onChange:i,caller:kf});return a.jsx(au,{present:n||u,children:a.jsx(yae,{open:u,...l,ref:t,onClose:()=>d(!1),onPause:us(e.onPause),onResume:us(e.onResume),onSwipeStart:pt(e.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pt(e.onSwipeMove,f=>{const{x:h,y:m}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:pt(e.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pt(e.onSwipeEnd,f=>{const{x:h,y:m}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),d(!1)})})})});yM.displayName=kf;var[pae,gae]=fM(kf,{onClose(){}}),yae=x.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:l,onEscapeKeyDown:u,onPause:d,onResume:f,onSwipeStart:h,onSwipeMove:m,onSwipeCancel:g,onSwipeEnd:y,...w}=e,b=cg(kf,n),[S,_]=x.useState(null),k=yr(t,B=>_(B)),N=x.useRef(null),T=x.useRef(null),P=s||b.duration,R=x.useRef(0),M=x.useRef(P),A=x.useRef(0),{onToastAdd:W,onToastRemove:K}=b,H=us(()=>{var Q;(S==null?void 0:S.contains(document.activeElement))&&((Q=b.viewport)==null||Q.focus()),l()}),z=x.useCallback(B=>{!B||B===1/0||(window.clearTimeout(A.current),R.current=new Date().getTime(),A.current=window.setTimeout(H,B))},[H]);x.useEffect(()=>{const B=b.viewport;if(B){const Q=()=>{z(M.current),f==null||f()},q=()=>{const F=new Date().getTime()-R.current;M.current=M.current-F,window.clearTimeout(A.current),d==null||d()};return B.addEventListener(l0,q),B.addEventListener(c0,Q),()=>{B.removeEventListener(l0,q),B.removeEventListener(c0,Q)}}},[b.viewport,P,d,f,z]),x.useEffect(()=>{i&&!b.isClosePausedRef.current&&z(P)},[i,P,b.isClosePausedRef,z]),x.useEffect(()=>(W(),()=>K()),[W,K]);const L=x.useMemo(()=>S?jM(S):null,[S]);return b.viewport?a.jsxs(a.Fragment,{children:[L&&a.jsx(vae,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:L}),a.jsx(pae,{scope:n,onClose:H,children:mf.createPortal(a.jsx(x_.ItemSlot,{scope:n,children:a.jsx(bte,{asChild:!0,onEscapeKeyDown:pt(u,()=>{b.isFocusedToastEscapeKeyDownRef.current||H(),b.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(xn.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":b.swipeDirection,...w,ref:k,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:pt(e.onKeyDown,B=>{B.key==="Escape"&&(u==null||u(B.nativeEvent),B.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,H()))}),onPointerDown:pt(e.onPointerDown,B=>{B.button===0&&(N.current={x:B.clientX,y:B.clientY})}),onPointerMove:pt(e.onPointerMove,B=>{if(!N.current)return;const Q=B.clientX-N.current.x,q=B.clientY-N.current.y,F=!!T.current,D=["left","right"].includes(b.swipeDirection),X=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,I=D?X(0,Q):0,V=D?0:X(0,q),Z=B.pointerType==="touch"?10:2,O={x:I,y:V},ce={originalEvent:B,delta:O};F?(T.current=O,pm(fae,m,ce,{discrete:!1})):UT(O,b.swipeDirection,Z)?(T.current=O,pm(dae,h,ce,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(Q)>Z||Math.abs(q)>Z)&&(N.current=null)}),onPointerUp:pt(e.onPointerUp,B=>{const Q=T.current,q=B.target;if(q.hasPointerCapture(B.pointerId)&&q.releasePointerCapture(B.pointerId),T.current=null,N.current=null,Q){const F=B.currentTarget,D={originalEvent:B,delta:Q};UT(Q,b.swipeDirection,b.swipeThreshold)?pm(mae,y,D,{discrete:!0}):pm(hae,g,D,{discrete:!0}),F.addEventListener("click",X=>X.preventDefault(),{once:!0})}})})})}),b.viewport)})]}):null}),vae=e=>{const{__scopeToast:t,children:n,...r}=e,s=cg(kf,t),[i,l]=x.useState(!1),[u,d]=x.useState(!1);return bae(()=>l(!0)),x.useEffect(()=>{const f=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(f)},[]),u?null:a.jsx(o_,{asChild:!0,children:a.jsx(y_,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},xae="ToastTitle",vM=x.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return a.jsx(xn.div,{...r,ref:t})});vM.displayName=xae;var wae="ToastDescription",xM=x.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return a.jsx(xn.div,{...r,ref:t})});xM.displayName=wae;var wM="ToastAction",bM=x.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?a.jsx(SM,{altText:n,asChild:!0,children:a.jsx(w_,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${wM}\`. Expected non-empty \`string\`.`),null)});bM.displayName=wM;var _M="ToastClose",w_=x.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=gae(_M,n);return a.jsx(SM,{asChild:!0,children:a.jsx(xn.button,{type:"button",...r,ref:t,onClick:pt(e.onClick,s.onClose)})})});w_.displayName=_M;var SM=x.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return a.jsx(xn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function jM(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),_ae(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const l=r.dataset.radixToastAnnounceAlt;l&&t.push(l)}else t.push(...jM(r))}}),t}function pm(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Qb(s,i):s.dispatchEvent(i)}var UT=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),i=r>s;return t==="left"||t==="right"?i&&r>n:!i&&s>n};function bae(e=()=>{}){const t=us(e);da(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function _ae(e){return e.nodeType===e.ELEMENT_NODE}function Sae(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function fx(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var jae=hM,EM=pM,kM=yM,NM=vM,TM=xM,CM=bM,PM=w_;const BT=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,qT=FP,Eae=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return qT(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=t,l=Object.keys(s).map(f=>{const h=n==null?void 0:n[f],m=i==null?void 0:i[f];if(h===null)return null;const g=BT(h)||BT(m);return s[f][g]}),u=n&&Object.entries(n).reduce((f,h)=>{let[m,g]=h;return g===void 0||(f[m]=g),f},{}),d=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((f,h)=>{let{class:m,className:g,...y}=h;return Object.entries(y).every(w=>{let[b,S]=w;return Array.isArray(S)?S.includes({...i,...u}[b]):{...i,...u}[b]===S})?[...f,m,g]:f},[]);return qT(e,l,d,n==null?void 0:n.class,n==null?void 0:n.className)},kae=jae,AM=x.forwardRef(({className:e,...t},n)=>a.jsx(EM,{ref:n,className:Ot("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));AM.displayName=EM.displayName;const Nae=Eae("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),RM=x.forwardRef(({className:e,variant:t,...n},r)=>a.jsx(kM,{ref:r,className:Ot(Nae({variant:t}),e),...n}));RM.displayName=kM.displayName;const Tae=x.forwardRef(({className:e,...t},n)=>a.jsx(CM,{ref:n,className:Ot("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Tae.displayName=CM.displayName;const IM=x.forwardRef(({className:e,...t},n)=>a.jsx(PM,{ref:n,className:Ot("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:a.jsx(Wd,{className:"h-4 w-4"})}));IM.displayName=PM.displayName;const OM=x.forwardRef(({className:e,...t},n)=>a.jsx(NM,{ref:n,className:Ot("text-sm font-semibold",e),...t}));OM.displayName=NM.displayName;const DM=x.forwardRef(({className:e,...t},n)=>a.jsx(TM,{ref:n,className:Ot("text-sm opacity-90",e),...t}));DM.displayName=TM.displayName;function Cae(){const{toasts:e}=ds();return a.jsxs(kae,{children:[e.map(function({id:t,title:n,description:r,action:s,...i}){return a.jsxs(RM,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(OM,{children:n}),r&&a.jsx(DM,{children:r})]}),s,a.jsx(IM,{})]},t)}),a.jsx(AM,{})]})}const Pae=x.createContext({typingUserIds:new Set}),Aae=({children:e})=>{const[t,n]=x.useState(new Set);return x.useEffect(()=>{const r=s=>{n(i=>{const l=new Set(i);return l.add(s.detail.senderId),l}),window.setTimeout(()=>{n(i=>{const l=new Set(i);return l.delete(s.detail.senderId),l})},3e3)};return window.addEventListener("userTyping",r),()=>window.removeEventListener("userTyping",r)},[]),a.jsx(Pae.Provider,{value:{typingUserIds:t},children:e})},hx="/ws";function Rae(e){return null}function Iae(){const e=Rae();return e?`${e.protocol==="https:"?"wss:":"ws:"}//${e.host}${hx}`:typeof window<"u"?`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}${hx}`:`ws://localhost:1337${hx}`}const MM="offlineMessageQueue",LM=typeof window<"u"&&typeof window.localStorage<"u",Oae=()=>{if(!LM)return null;try{return window.localStorage.getItem(MM)}catch{return null}},Dae=()=>{const e=Oae();if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}},Mae=e=>{if(LM)try{window.localStorage.setItem(MM,JSON.stringify(e))}catch{}},Lae=e=>{Mae(e)},Fae=e=>{const t=Dae();e.readyState===WebSocket.OPEN&&(t.forEach(n=>e.send(JSON.stringify(n.payload))),Lae([]))},$ae=x.createContext(null),mx=Ii("websocket");function Vae({children:e}){const t=x.useRef(null),n=x.useRef(null),r=x.useRef(0),s=x.useRef(!1);return x.useEffect(()=>{const i=()=>{if(s.current||n.current!==null)return;r.current+=1;const u=Math.min(1e3*2**(r.current-1),3e4);n.current=window.setTimeout(()=>{n.current=null,l()},u)},l=()=>{if(s.current)return;const u=new WebSocket(Iae());t.current=u;const d=()=>{r.current=0,mx.info("WebSocket connected"),Fae(u)},f=()=>{mx.warn("WebSocket disconnected"),i()},h=m=>{mx.error("WebSocket error",m),(u.readyState===WebSocket.OPEN||u.readyState===WebSocket.CONNECTING)&&u.close()};u.addEventListener("open",d),u.addEventListener("close",f),u.addEventListener("error",h)};return l(),()=>{s.current=!0,n.current!==null&&window.clearTimeout(n.current),t.current&&t.current.close(),t.current=null}},[]),a.jsx($ae.Provider,{value:t,children:e})}const zae=x.createContext({branding:{},loading:!0});function Uae(e){if(typeof document>"u")return;const t=document.documentElement;t&&(e.primary&&t.style.setProperty("--tm-primary",e.primary),e.accent&&t.style.setProperty("--tm-accent",e.accent),e.background&&t.style.setProperty("--tm-background",e.background),e.foreground&&t.style.setProperty("--tm-foreground",e.foreground))}function Bae({children:e}){const t=gl(),[n,r]=x.useState({branding:{},loading:!0});x.useEffect(()=>{let i=!0;return(async()=>{var l;if(t.loading||!t.organizationId){i&&r({branding:{},loading:t.loading});return}try{const u=await Nt.auth.getAccessToken(),d={"content-type":"application/json"};u&&(d.authorization=`Bearer ${u}`),d["x-teachmo-org-id"]=t.organizationId,t.schoolId&&(d["x-teachmo-school-id"]=t.schoolId);const h=await(await fetch(`${RP()}/tenants/settings`,{headers:d})).json(),m=((l=h==null?void 0:h.settings)==null?void 0:l.branding)||{};i&&(r({branding:m,loading:!1}),Uae(m))}catch{i&&r({branding:{},loading:!1})}})(),()=>{i=!1}},[t.organizationId,t.schoolId,t.loading]);const s=x.useMemo(()=>n,[n.branding,n.loading]);return a.jsx(zae.Provider,{value:s,children:e})}const WT={};function qae({children:e}){const{data:t}=vr(),n=(t==null?void 0:t.organizationId)??null,r=(t==null?void 0:t.schoolId)??null,s=Pd(l=>l.setFeatureFlags),{data:i}=_t({queryKey:["feature-flags",n,r],enabled:!!n,queryFn:()=>cG()});return x.useEffect(()=>{if(!n){s(WT);return}const l=(i==null?void 0:i.flags)??WT;s(l)},[i,n,s]),e}const Wae=(e,t,n)=>{const r=e[t];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((s,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},Hae={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},Gae=(e,t,n)=>{let r;const s=Hae[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},Kae={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},Yae={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Qae={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Xae={date:ra({formats:Kae,defaultWidth:"full"}),time:ra({formats:Yae,defaultWidth:"full"}),dateTime:ra({formats:Qae,defaultWidth:"full"})},Jae={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Zae={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},eoe=(e,t,n,r)=>t.getHours()!==1?Zae[e]:Jae[e],toe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},noe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},roe={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},soe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},ioe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},aoe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},ooe=(e,t)=>Number(e)+"",loe={ordinalNumber:ooe,era:kr({values:toe,defaultWidth:"wide"}),quarter:kr({values:noe,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:kr({values:roe,defaultWidth:"wide"}),day:kr({values:soe,defaultWidth:"wide"}),dayPeriod:kr({values:ioe,defaultWidth:"wide",formattingValues:aoe,defaultFormattingWidth:"wide"})},coe=/^(\d+)()?/i,uoe=/\d+/i,doe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},foe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},hoe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},moe={any:[/1/i,/2/i,/3/i,/4/i]},poe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},goe={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},yoe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},voe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},xoe={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},woe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},boe={ordinalNumber:Eb({matchPattern:coe,parsePattern:uoe,valueCallback:function(e){return parseInt(e,10)}}),era:Nr({matchPatterns:doe,defaultMatchWidth:"wide",parsePatterns:foe,defaultParseWidth:"any"}),quarter:Nr({matchPatterns:hoe,defaultMatchWidth:"wide",parsePatterns:moe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Nr({matchPatterns:poe,defaultMatchWidth:"wide",parsePatterns:goe,defaultParseWidth:"any"}),day:Nr({matchPatterns:yoe,defaultMatchWidth:"wide",parsePatterns:voe,defaultParseWidth:"any"}),dayPeriod:Nr({matchPatterns:xoe,defaultMatchWidth:"any",parsePatterns:woe,defaultParseWidth:"any"})},_oe={code:"es",formatDistance:Gae,formatLong:Xae,formatRelative:eoe,localize:loe,match:boe,options:{weekStartsOn:1,firstWeekContainsDate:1}},Soe={lessThanXSeconds:{one:" 1 ",other:" {{count}} "},xSeconds:{one:"1 ",other:"{{count}} "},halfAMinute:"",lessThanXMinutes:{one:" 1 ",other:" {{count}} "},xMinutes:{one:"1 ",other:"{{count}} "},xHours:{one:"1 ",other:"{{count}} "},aboutXHours:{one:" 1 ",other:" {{count}} "},xDays:{one:"1 ",other:"{{count}} "},aboutXWeeks:{one:" 1 ",other:" {{count}} "},xWeeks:{one:"1 ",other:"{{count}} "},aboutXMonths:{one:" 1 ",other:" {{count}} "},xMonths:{one:"1 ",other:"{{count}} "},aboutXYears:{one:" 1 ",other:" {{count}} "},xYears:{one:"1 ",other:"{{count}} "},overXYears:{one:" 1 ",other:" {{count}} "},almostXYears:{one:" 1 ",other:" {{count}} "}},joe=(e,t,n)=>{let r;const s=Soe[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?r+"":r+"":r},Eoe={full:"y''M''d'' EEEE",long:"y''M''d''",medium:"yyyy-MM-dd",short:"yy-MM-dd"},koe={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},Noe={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Toe={date:ra({formats:Eoe,defaultWidth:"full"}),time:ra({formats:koe,defaultWidth:"full"}),dateTime:ra({formats:Noe,defaultWidth:"full"})};function HT(e,t,n){const r="eeee p";return rG(e,t,n)?r:e.getTime()>t.getTime()?"''"+r:"''"+r}const Coe={lastWeek:HT,yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:HT,other:"PP p"},Poe=(e,t,n,r)=>{const s=Coe[e];return typeof s=="function"?s(t,n,r):s},Aoe={narrow:["",""],abbreviated:["",""],wide:["",""]},Roe={narrow:["1","2","3","4"],abbreviated:["","","",""],wide:["","","",""]},Ioe={narrow:["","","","","","","","","","","",""],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["","","","","","","","","","","",""]},Ooe={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},Doe={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},Moe={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},Loe=(e,t)=>{const n=Number(e);switch(t==null?void 0:t.unit){case"date":return n.toString()+"";case"hour":return n.toString()+"";case"minute":return n.toString()+"";case"second":return n.toString()+"";default:return" "+n.toString()}},Foe={ordinalNumber:Loe,era:kr({values:Aoe,defaultWidth:"wide"}),quarter:kr({values:Roe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:kr({values:Ioe,defaultWidth:"wide"}),day:kr({values:Ooe,defaultWidth:"wide"}),dayPeriod:kr({values:Doe,defaultWidth:"wide",formattingValues:Moe,defaultFormattingWidth:"wide"})},$oe=/^(\s*)?\d+(|||)?/i,Voe=/\d+/i,zoe={narrow:/^()/i,abbreviated:/^()/i,wide:/^(|)/i},Uoe={any:[/^()/i,/^()/i]},Boe={narrow:/^[1234]/i,abbreviated:/^[]/i,wide:/^[]/i},qoe={any:[/(1|)/i,/(2|)/i,/(3|)/i,/(4|)/i]},Woe={narrow:/^(|||||||||[])/i,abbreviated:/^(|||||||||[]|\d|1[12])/i,wide:/^(|||||||||[])/i},Hoe={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^(?!(|))/i,/^/i,/^/i],any:[/^|1/i,/^|2/i,/^|3/i,/^|4/i,/^|5/i,/^|6/i,/^|7/i,/^|8/i,/^|9/i,/^(?!(|))|10/i,/^|11/i,/^|12/i]},Goe={narrow:/^[]/i,short:/^[]/i,abbreviated:/^[]/i,wide:/^[]/i},Koe={any:[//i,//i,//i,//i,//i,//i,//i]},Yoe={any:/^(?|?||[]|?||?||)/i},Qoe={any:{am:/^?/i,pm:/^?/i,midnight:/^/i,noon:/^[]/i,morning:/^/i,afternoon:/^/i,evening:/^?/i,night:/^/i}},Xoe={ordinalNumber:Eb({matchPattern:$oe,parsePattern:Voe,valueCallback:e=>parseInt(e,10)}),era:Nr({matchPatterns:zoe,defaultMatchWidth:"wide",parsePatterns:Uoe,defaultParseWidth:"any"}),quarter:Nr({matchPatterns:Boe,defaultMatchWidth:"wide",parsePatterns:qoe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Nr({matchPatterns:Woe,defaultMatchWidth:"wide",parsePatterns:Hoe,defaultParseWidth:"any"}),day:Nr({matchPatterns:Goe,defaultMatchWidth:"wide",parsePatterns:Koe,defaultParseWidth:"any"}),dayPeriod:Nr({matchPatterns:Yoe,defaultMatchWidth:"any",parsePatterns:Qoe,defaultParseWidth:"any"})},Joe={code:"zh-CN",formatDistance:joe,formatLong:Toe,formatRelative:Poe,localize:Foe,match:Xoe,options:{weekStartsOn:1,firstWeekContainsDate:4}},Zoe=Ii("i18n"),d0={en:kb,es:_oe,zh:Joe},px=Object.keys(d0),ele=async e=>{try{return(await Wae(Object.assign({"./translations/en.json":()=>Be(()=>import("./en-Bvxt9dyu.js"),[]),"./translations/es.json":()=>Be(()=>import("./es-CNA6BJnE.js"),[]),"./translations/zh.json":()=>Be(()=>import("./zh-BSw__AYA.js"),[])}),`./translations/${e}.json`,3)).default}catch(t){return Zoe.warn(`Falling back to English translations; failed to load ${e}`,t),(await Be(()=>import("./en-Bvxt9dyu.js"),[])).default}},FM=x.createContext(null),Mle=()=>{const e=x.useContext(FM);if(!e)throw new Error("useTranslation must be used within I18nProvider");return e},GT=new Set(["ar","he","fa","ur"]),tle=({children:e,defaultLocale:t="en",enabled:n=!0})=>{const[r,s]=x.useState({}),i=x.useRef(new Set),[l,u]=x.useState(()=>{if(!n)return t;if(typeof window<"u"){const _=localStorage.getItem("teachmo-locale");return _||navigator.language.split("-")[0]||t}return t}),d=x.useCallback(async _=>{if(i.current.has(_))return;const k=await ele(_);i.current.add(_),s(N=>({...N,[_]:k}))},[]),f=_=>{n&&px.includes(_)&&(u(_),d(_),typeof window<"u"&&(localStorage.setItem("teachmo-locale",_),document.documentElement.lang=_,document.documentElement.dir=GT.has(_)?"rtl":"ltr"))};x.useEffect(()=>{d(t)},[t,d]),x.useEffect(()=>{d(l)},[l,d]),x.useEffect(()=>{if(!n||typeof window>"u")return;const k=new URLSearchParams(window.location.search).get("lang");k&&px.includes(k)&&k!==l&&f(k)},[n,l]);const h=(_,k)=>{if(_){if(Object.prototype.hasOwnProperty.call(_,k))return _[k];if(k.includes("."))return k.split(".").reduce((N,T)=>{if(N&&typeof N=="object"&&T in N)return N[T]},_)}},m=(_,k)=>{const N=r[l]||r[t]||{},T=r[t]||{};let P=h(N,_)||h(T,_)||_;return k&&Object.entries(k).forEach(([R,M])=>{P=P.replace(new RegExp(`{{${R}}}`,"g"),String(M))}),P},g=(_,k="PPP")=>{const N=typeof _=="string"?new Date(_):_;return ol(N,k,{locale:d0[l]||d0.en})},y=(_,k)=>new Intl.NumberFormat(l==="zh"?"zh-CN":l,k).format(_),w=(_,k="USD")=>new Intl.NumberFormat(l==="zh"?"zh-CN":l,{style:"currency",currency:k}).format(_),b=GT.has(l);x.useEffect(()=>{typeof window<"u"&&(document.documentElement.lang=l,document.documentElement.dir=b?"rtl":"ltr")},[l,b]);const S={locale:l,setLocale:f,availableLocales:px,t:m,formatDate:g,formatNumber:y,formatCurrency:w,isRTL:b};return a.jsx(FM.Provider,{value:S,children:e})},KT=Ii("global-error-boundary");class nle extends x.Component{constructor(n){super(n);Wy(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})});Wy(this,"handleGoHome",()=>{window.location.href=Kb("Dashboard")});this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorId:`error-${Date.now()}-${Math.random().toString(36).substring(2)}`}}async componentDidCatch(n,r){var s;KT.error("Global Error Boundary caught an error:",n,r),this.setState({errorInfo:r});try{await Mie({action:"ui.error",resource_type:"component",resource_id:((s=r.componentStack)==null?void 0:s.split(`
`)[1])||"unknown",details:{error:n.message,stack:n.stack,componentStack:r.componentStack,errorBoundary:"GlobalErrorBoundary"},severity:"high"})}catch(i){KT.error("Failed to log error to audit system:",i)}}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-50",children:a.jsxs(Ne,{className:"max-w-lg w-full",children:[a.jsxs(Oe,{className:"text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(xb,{className:"w-6 h-6 text-red-600"})}),a.jsx(Le,{className:"text-xl text-gray-900",children:"Something went wrong"})]}),a.jsxs(Te,{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600 text-center",children:"We've encountered an unexpected error. Our team has been notified."}),!1,this.state.errorId&&a.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Error ID: ",this.state.errorId]}),a.jsxs("div",{className:"flex gap-3 justify-center",children:[a.jsxs(we,{variant:"outline",onClick:this.handleRetry,className:"flex items-center gap-2",children:[a.jsx(jw,{className:"w-4 h-4"}),"Try Again"]}),a.jsxs(we,{onClick:this.handleGoHome,className:"flex items-center gap-2",children:[a.jsx(MR,{className:"w-4 h-4"}),"Go Home"]})]})]})]})}):this.props.children}}function rle(e){return _D(e)}function sle(){const e=Pd(n=>{const r=n.featureFlags??{};return Object.prototype.hasOwnProperty.call(r,"FEATURE_I18N")?!!r.FEATURE_I18N:rle("FEATURE_I18N")}),t=a.jsx(Vae,{children:a.jsx(Aae,{children:a.jsx(QC,{nhost:Nt,children:a.jsx(_z,{nhost:Nt,children:a.jsxs(Hz,{client:sae,children:[a.jsx(EU,{children:a.jsx(Bae,{children:a.jsx(qae,{children:a.jsx(rae,{})})})}),a.jsx(QI,{}),a.jsx(Cae,{}),a.jsx(W3,{position:"top-right"}),null]})})})})});return a.jsx(nle,{children:a.jsx(tle,{enabled:e,children:t})})}UF();x8();XF({immediate:!0});KF.createRoot(document.getElementById("root")).render(a.jsx(oe.StrictMode,{children:a.jsx(sle,{})}));const ile=Object.freeze(Object.defineProperty({__proto__:null,default:dM},Symbol.toStringTag,{value:"Module"}));export{ho as $,ma as A,we as B,Ne as C,Ii as D,jle as E,nG as F,gl as G,xb as H,be as I,Hr as J,Bp as K,as as L,WH as M,Cs as N,Mc as O,gt as P,e8 as Q,jw as R,vb as S,Oi as T,qd as U,Dle as V,zR as W,sr as X,It as Y,wle as Z,xle as _,Oe as a,lz as a0,mf as a1,oe as a2,AP as a3,n7 as a4,tI as a5,lo as a6,s7 as a7,U8 as a8,eI as a9,J8 as aa,ap as ab,ol as ac,sG as ad,Wd as ae,ln as af,nn as ag,rn as ah,sn as ai,qe as aj,AN as ak,d8 as al,_le as am,ble as an,eZ as ao,Zj as ap,FP as aq,Ln as ar,lP as as,Le as b,Te as c,Kb as d,Sle as e,gc as f,Gc as g,wt as h,De as i,a as j,an as k,Yee as l,Gt as m,Nt as n,gle as o,vt as p,pl as q,x as r,vr as s,ds as t,Mle as u,_t as v,oZ as w,Tn as x,yle as y,PN as z};
//# sourceMappingURL=index-CcbYISPP.js.map
