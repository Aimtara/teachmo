import{r as l,v as y,b,j as s,L as g,e as c}from"./index-CXW08ga6.js";function $(){const[a,h]=l.useState({submissions:0,enrollments:0,applications:0,contracts:0}),[u,m]=l.useState([]),o=y(),{data:t}=b(),n=o,i=l.useMemo(()=>{const e={};return o&&(e["x-user-id"]=o),t!=null&&t.districtId&&(e["x-district-id"]=t.districtId),t!=null&&t.schoolId&&(e["x-school-id"]=t.schoolId),e},[o,t==null?void 0:t.districtId,t==null?void 0:t.schoolId]);return l.useEffect(()=>{async function e(){const r=async d=>d.ok?d.json():[],[x,j,v,p,f]=await Promise.all([fetch(`${c}/submissions`,{headers:i}).then(r),n?fetch(`${c}/courses/enrollments/${n}`,{headers:i}).then(r):Promise.resolve([]),n?fetch(`${c}/incentives/applications/${n}`,{headers:i}).then(r):Promise.resolve([]),fetch(`${c}/contracts?partnerId=${n??""}`,{headers:i}).then(r),fetch(`${c}/admin/audits`,{headers:i}).then(r)]);h({submissions:x.length,enrollments:j.length,applications:v.length,contracts:p.length}),m(f.slice(-5).reverse())}e()},[n,i]),s.jsxs("div",{children:[s.jsx("h1",{children:"Partner portal"}),s.jsx("p",{children:"Review your submissions and activity."}),s.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:a.submissions})," submissions"]}),s.jsxs("div",{children:[s.jsx("strong",{children:a.enrollments})," enrollments"]}),s.jsxs("div",{children:[s.jsx("strong",{children:a.applications})," incentives"]}),s.jsxs("div",{children:[s.jsx("strong",{children:a.contracts})," contracts"]})]}),s.jsx("h2",{children:"Recent activity"}),s.jsx("ul",{children:u.map(e=>s.jsxs("li",{children:[e.event_type," - ",e.summary]},e.id))}),s.jsx("div",{style:{marginTop:"1rem"},children:s.jsx(g,{to:"/partner/submissions",children:"View submissions"})})]})}export{$ as default};
//# sourceMappingURL=PartnerPortal-Bqiharo7.js.map
