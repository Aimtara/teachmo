import{T as j,r,j as e,i as l,I as y,k as S,B as v}from"./index-CcbYISPP.js";import{r as b}from"./messaging-DTvM5Cq9.js";function q(){const a=j(),[o,d]=r.useState(""),[c,f]=r.useState(""),[n,h]=r.useState(""),[m,i]=r.useState(""),[u,x]=r.useState(!1);r.useEffect(()=>{var t,g;const s=String(((t=a==null?void 0:a.metadata)==null?void 0:t.school_id)??((g=a==null?void 0:a.metadata)==null?void 0:g.schoolId)??"").trim();s&&d(s)},[a]);const p=async s=>{if(s.preventDefault(),!(!o||!c)){x(!0),i("");try{const t=await b({schoolId:o,targetUserId:c,note:n||void 0});i(t!=null&&t.ok?"Request sent for approval.":"Unable to send request."),t!=null&&t.ok&&h("")}catch(t){console.error(t),i((t==null?void 0:t.message)??"Failed to send request")}finally{x(!1)}}};return e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"School Directory"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Request permission to message a teacher or staff member directly from the directory."}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:e.jsxs("form",{onSubmit:p,className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{htmlFor:"directory-school",children:"School ID"}),e.jsx(y,{id:"directory-school",value:o,onChange:s=>d(s.target.value),placeholder:"School ID",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{htmlFor:"directory-target",children:"Teacher or staff user ID"}),e.jsx(y,{id:"directory-target",value:c,onChange:s=>f(s.target.value),placeholder:"Target user ID",required:!0})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{htmlFor:"directory-note",children:"Optional note"}),e.jsx(S,{id:"directory-note",value:n,onChange:s=>h(s.target.value),placeholder:"Share context for your request",rows:3})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{type:"submit",disabled:u,children:u?"Submittingâ€¦":"Request to message"}),m&&e.jsx("p",{className:"text-sm text-gray-700",children:m})]})]})})]})}export{q as default};
//# sourceMappingURL=SchoolDirectory-BdpI2Dlq.js.map
