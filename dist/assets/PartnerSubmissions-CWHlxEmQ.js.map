{"version":3,"file":"PartnerSubmissions-CWHlxEmQ.js","sources":["../../src/pages/PartnerSubmissions.jsx"],"sourcesContent":["import { useEffect, useMemo, useState } from 'react';\nimport { API_BASE_URL } from '@/config/api';\nimport { useUserId } from '@nhost/react';\nimport { useTenantScope } from '@/hooks/useTenantScope';\n\nconst types = ['event', 'resource', 'offer'];\n\nexport default function PartnerSubmissions() {\n  const [submissions, setSubmissions] = useState([]);\n  const [current, setCurrent] = useState('event');\n  const [form, setForm] = useState({ title: '', description: '' });\n  const userId = useUserId();\n  const { data: scope } = useTenantScope();\n\n  const tenantHeaders = useMemo(() => {\n    const h = {};\n    if (userId) h['x-user-id'] = userId;\n    if (scope?.districtId) h['x-district-id'] = scope.districtId;\n    if (scope?.schoolId) h['x-school-id'] = scope.schoolId;\n    return h;\n  }, [userId, scope?.districtId, scope?.schoolId]);\n\n  const load = async () => {\n    const data = await fetch(`${API_BASE_URL}/submissions`, { headers: tenantHeaders }).then((r) => r.json());\n    setSubmissions(data);\n  };\n\n  useEffect(() => { load(); }, [tenantHeaders]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const res = await fetch(`${API_BASE_URL}/submissions`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', ...tenantHeaders },\n      body: JSON.stringify({ ...form, type: current }),\n    });\n    if (res.ok) {\n      setForm({ title: '', description: '' });\n      load();\n    }\n  };\n\n  const updateTitle = async (id) => {\n    const newTitle = window.prompt('Update submission title');\n    if (!newTitle) return;\n    await fetch(`${API_BASE_URL}/submissions/${id}`, {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json', ...tenantHeaders },\n      body: JSON.stringify({ title: newTitle }),\n    });\n    load();\n  };\n\n  return (\n    <div>\n      <h1>Submissions</h1>\n\n      <div style={{ marginBottom: '1rem' }}>\n        {types.map((t) => (\n          <button\n            key={t}\n            onClick={() => setCurrent(t)}\n            style={{ marginRight: '0.5rem', fontWeight: current === t ? 700 : 400 }}\n          >\n            {t}\n          </button>\n        ))}\n      </div>\n\n      <form onSubmit={handleSubmit} style={{ marginBottom: '1rem' }}>\n        <input\n          placeholder=\"Title\"\n          value={form.title}\n          onChange={(e) => setForm({ ...form, title: e.target.value })}\n        />\n        <input\n          placeholder=\"Description\"\n          value={form.description}\n          onChange={(e) => setForm({ ...form, description: e.target.value })}\n        />\n        <button type=\"submit\">Submit</button>\n      </form>\n\n      <ul>\n        {submissions.map((s) => (\n          <li key={s.id}>\n            {s.title} ({s.type})\n            <button onClick={() => updateTitle(s.id)} style={{ marginLeft: '0.5rem' }}>Edit</button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n"],"names":["types","PartnerSubmissions","submissions","setSubmissions","useState","current","setCurrent","form","setForm","userId","useUserId","scope","useTenantScope","tenantHeaders","useMemo","h","load","data","API_BASE_URL","r","useEffect","handleSubmit","e","updateTitle","id","newTitle","jsx","jsxs","s"],"mappings":"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"}