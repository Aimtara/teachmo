import{r as d,u as N,j as e,P as _,C as u,a as C,b,c as p,L as h,d as m,B as c,M as w,U as v,e as A,E as P,f as g}from"./index-CcbYISPP.js";import{u as T}from"./useAuth-QI_GFEww.js";import{B as E}from"./book-open-CIuCiuhl.js";function S(){const{user:n}=T(),[i,x]=d.useState(!0),[t,j]=d.useState([]),{t:s}=N();d.useEffect(()=>{(async()=>{if(n){x(!0);try{const o=await A.filter({teacher_id:n.id}),y=await Promise.all((o||[]).map(async r=>{try{const l=await P.filter({course_id:r.id});return{...r,studentCount:Array.isArray(l)?l.length:0}}catch(l){return console.error("Failed to load enrollments for course",r.name,l),{...r,studentCount:0}}}));j(y)}catch(o){console.error("Failed to fetch teacher classes:",o),g("Unable to load classes. Please try again later.","error")}finally{x(!1)}}})()},[n]);const f=()=>{g("Support chat coming soon! For now, email support@teachmo.com","info")};return e.jsx(_,{allowedRoles:["teacher","school_admin","district_admin","system_admin","admin"],requireAuth:!0,children:e.jsx("div",{className:"min-h-screen bg-warm-cream p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:s("teacher_classes.title")}),e.jsx("p",{className:"text-gray-600",children:s("teacher_classes.description")})]}),i&&e.jsx("p",{className:"text-gray-500",children:"Loading your classesâ€¦"}),!i&&(!t||t.length===0)&&e.jsxs(u,{className:"bg-blue-50 border-blue-200",children:[e.jsx(C,{children:e.jsx(b,{className:"text-xl font-bold text-gray-900",children:s("teacher_classes.empty_title")})}),e.jsxs(p,{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700",children:s("teacher_classes.empty_description")}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx(h,{to:m("HelpCenter"),children:e.jsxs(c,{variant:"outline",className:"gap-2","aria-label":s("teacher_classes.setup_guide"),children:[e.jsx(E,{className:"w-4 h-4"}),s("teacher_classes.setup_guide")]})}),e.jsxs(c,{variant:"outline",className:"gap-2",onClick:f,"aria-label":s("teacher_classes.contact_support"),children:[e.jsx(w,{className:"w-4 h-4"}),s("teacher_classes.contact_support")]})]})]})]}),!i&&t&&t.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(a=>e.jsx(u,{className:"bg-white border border-gray-200 shadow-sm",children:e.jsxs(p,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-lg text-gray-900 line-clamp-1",children:a.name})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s("teacher_classes.students"),": ",a.studentCount]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{to:m(`TeacherAssignments?course_id=${a.id}`),children:e.jsx(c,{size:"sm",variant:"outline",children:"View Assignments"})}),e.jsx(h,{to:m(`TeacherMessages?course_id=${a.id}`),children:e.jsx(c,{size:"sm",variant:"outline",children:"Message Parents"})})]})]})},a.id))})]})})})}export{S as default};
//# sourceMappingURL=TeacherClasses-zINahfb9.js.map
