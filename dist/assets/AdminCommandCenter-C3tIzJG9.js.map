{"version":3,"file":"AdminCommandCenter-C3tIzJG9.js","sources":["../../src/pages/AdminCommandCenter.jsx"],"sourcesContent":["import { useEffect, useMemo, useState } from 'react';\nimport { Link, Navigate } from 'react-router-dom';\nimport { useAuthenticationStatus, useUserData } from '@nhost/react';\nimport { toast } from 'sonner';\n\nimport {\n  ORCHESTRATOR_TYPES,\n  approveAction,\n  cancelAction,\n  executeAction,\n  listOrchestratorActions\n} from '@/domains/commandCenter';\nimport { listAuditLog } from '@/domains/auditLog';\n\nconst STATUS_ORDER = ['queued', 'approved', 'running', 'done', 'failed', 'canceled'];\n\nfunction StatusBadge({ status }) {\n  const cls =\n    status === 'queued'\n      ? 'bg-gray-100 text-gray-900'\n      : status === 'approved'\n        ? 'bg-blue-100 text-blue-900'\n        : status === 'running'\n          ? 'bg-amber-100 text-amber-900'\n          : status === 'done'\n            ? 'bg-green-100 text-green-900'\n            : status === 'failed'\n              ? 'bg-red-100 text-red-900'\n              : 'bg-gray-100 text-gray-700';\n  return <span className={`inline-flex rounded-full px-2 py-1 text-xs font-medium ${cls}`}>{status}</span>;\n}\n\nfunction TypeBadge({ type }) {\n  const label =\n    type === ORCHESTRATOR_TYPES.RUNBOOK_CREATE\n      ? 'Runbook'\n      : type === ORCHESTRATOR_TYPES.ESCALATE\n        ? 'Escalate'\n        : type === ORCHESTRATOR_TYPES.ROLLBACK\n          ? 'Rollback'\n          : type;\n  const cls =\n    type === ORCHESTRATOR_TYPES.ROLLBACK\n      ? 'bg-red-50 text-red-900'\n      : type === ORCHESTRATOR_TYPES.ESCALATE\n        ? 'bg-amber-50 text-amber-900'\n        : 'bg-indigo-50 text-indigo-900';\n  return <span className={`inline-flex rounded-full px-2 py-1 text-xs font-medium ${cls}`}>{label}</span>;\n}\n\nfunction JsonBox({ value }) {\n  const text = useMemo(() => {\n    try {\n      return JSON.stringify(value ?? {}, null, 2);\n    } catch {\n      return String(value);\n    }\n  }, [value]);\n\n  return (\n    <pre className=\"max-h-64 overflow-auto rounded-lg border border-gray-200 bg-gray-50 p-3 text-xs text-gray-800\">\n      {text}\n    </pre>\n  );\n}\n\nexport default function AdminCommandCenter() {\n  const { isAuthenticated } = useAuthenticationStatus();\n  const user = useUserData();\n  const actorId = user?.id;\n\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [actions, setActions] = useState([]);\n\n  const [selectedId, setSelectedId] = useState(null);\n  const [statusFilter, setStatusFilter] = useState('active');\n  const [typeFilter, setTypeFilter] = useState('all');\n  const [search, setSearch] = useState('');\n\n  const [auditLoading, setAuditLoading] = useState(false);\n  const [auditRows, setAuditRows] = useState([]);\n\n  const reload = async () => {\n    setLoading(true);\n    try {\n      const data = await listOrchestratorActions();\n      const rows = data?.orchestrator_actions ?? [];\n      setActions(rows);\n      setError(null);\n      if (!selectedId && rows.length > 0) setSelectedId(rows[0].id);\n    } catch (err) {\n      console.error(err);\n      setError(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadAudit = async (entityId) => {\n    if (!entityId) return;\n    setAuditLoading(true);\n    try {\n      const data = await listAuditLog({ entityType: 'orchestrator_actions', entityId, limit: 80 });\n      setAuditRows(data?.audit_log ?? []);\n    } catch (err) {\n      console.error(err);\n      toast.error(err.message || 'Failed to load audit log');\n    } finally {\n      setAuditLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (!isAuthenticated) return;\n    reload();\n  }, [isAuthenticated]);\n\n  useEffect(() => {\n    if (!selectedId) return;\n    loadAudit(selectedId);\n  }, [selectedId]);\n\n  const counts = useMemo(() => {\n    const byStatus = {};\n    for (const a of actions) byStatus[a.status] = (byStatus[a.status] || 0) + 1;\n    return { byStatus };\n  }, [actions]);\n\n  const filtered = useMemo(() => {\n    const q = search.trim().toLowerCase();\n    const activeStatuses = new Set(['queued', 'approved', 'running']);\n\n    return actions\n      .filter((a) => (statusFilter === 'active' ? activeStatuses.has(a.status) : statusFilter === 'all' ? true : a.status === statusFilter))\n      .filter((a) => (typeFilter === 'all' ? true : a.type === typeFilter))\n      .filter((a) => {\n        if (!q) return true;\n        const epic = a.epic;\n        return (\n          (a.type || '').toLowerCase().includes(q) ||\n          (a.status || '').toLowerCase().includes(q) ||\n          (epic?.code || '').toLowerCase().includes(q) ||\n          (epic?.title || '').toLowerCase().includes(q)\n        );\n      })\n      .sort((a, b) => {\n        const ai = STATUS_ORDER.indexOf(a.status);\n        const bi = STATUS_ORDER.indexOf(b.status);\n        if (ai !== bi) return ai - bi;\n        return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\n      });\n  }, [actions, statusFilter, typeFilter, search]);\n\n  const selected = useMemo(() => actions.find((a) => a.id === selectedId) ?? null, [actions, selectedId]);\n\n  const canApprove = (action) => action && action.status === 'queued';\n  const canExecute = (action) => action && action.status === 'approved';\n  const canCancel = (action) => action && ['queued', 'approved'].includes(action.status);\n\n  const handleApprove = async (action) => {\n    if (!actorId) return toast.error('Missing actor id');\n    try {\n      await approveAction(action.id, actorId);\n      toast.success('Approved');\n      await reload();\n    } catch (err) {\n      console.error(err);\n      toast.error(err.message || 'Failed to approve');\n    }\n  };\n\n  const handleCancel = async (action) => {\n    if (!actorId) return toast.error('Missing actor id');\n    try {\n      await cancelAction(action.id, actorId);\n      toast.success('Canceled');\n      await reload();\n    } catch (err) {\n      console.error(err);\n      toast.error(err.message || 'Failed to cancel');\n    }\n  };\n\n  const handleExecute = async (action) => {\n    if (!actorId) return toast.error('Missing actor id');\n    try {\n      await executeAction(action, actorId);\n      toast.success('Executed');\n      await reload();\n    } catch (err) {\n      console.error(err);\n      toast.error(err.message || 'Failed to execute');\n    }\n  };\n\n  if (!isAuthenticated) return <Navigate to=\"/\" replace />;\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <header className=\"space-y-2\">\n        <div className=\"flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-semibold text-gray-900\">Command Center</h1>\n            <p className=\"text-gray-600\">Approve and execute operational actions generated from the Execution Board.</p>\n          </div>\n          <button\n            onClick={reload}\n            className=\"rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm shadow-sm hover:bg-gray-50\"\n          >\n            Refresh\n          </button>\n        </div>\n\n        <div className=\"grid gap-3 md:grid-cols-6\">\n          {STATUS_ORDER.map((s) => (\n            <div key={s} className=\"rounded-xl border border-gray-200 bg-white p-4 shadow-sm\">\n              <p className=\"text-xs text-gray-500\">{s}</p>\n              <p className=\"text-2xl font-semibold\">{counts.byStatus[s] || 0}</p>\n            </div>\n          ))}\n        </div>\n      </header>\n\n      <section className=\"grid gap-4 lg:grid-cols-[1.1fr_0.9fr]\">\n        <div className=\"space-y-3\">\n          <div className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\n            <div className=\"flex flex-wrap gap-2\">\n              <input\n                value={search}\n                onChange={(e) => setSearch(e.target.value)}\n                placeholder=\"Search actions (epic code/title, status, type)…\"\n                className=\"w-full md:w-96 border rounded-lg px-3 py-2\"\n              />\n              <select\n                value={statusFilter}\n                onChange={(e) => setStatusFilter(e.target.value)}\n                className=\"border rounded-lg px-3 py-2\"\n              >\n                <option value=\"active\">Active (queued/approved/running)</option>\n                <option value=\"all\">All</option>\n                <option value=\"queued\">Queued</option>\n                <option value=\"approved\">Approved</option>\n                <option value=\"running\">Running</option>\n                <option value=\"done\">Done</option>\n                <option value=\"failed\">Failed</option>\n                <option value=\"canceled\">Canceled</option>\n              </select>\n              <select\n                value={typeFilter}\n                onChange={(e) => setTypeFilter(e.target.value)}\n                className=\"border rounded-lg px-3 py-2\"\n              >\n                <option value=\"all\">All types</option>\n                <option value={ORCHESTRATOR_TYPES.RUNBOOK_CREATE}>Runbook</option>\n                <option value={ORCHESTRATOR_TYPES.ESCALATE}>Escalate</option>\n                <option value={ORCHESTRATOR_TYPES.ROLLBACK}>Rollback</option>\n              </select>\n            </div>\n          </div>\n\n          <div className=\"overflow-x-auto rounded-xl border border-gray-200 bg-white shadow-sm\">\n            <table className=\"w-full text-sm\">\n              <thead className=\"bg-gray-50 text-gray-600\">\n                <tr>\n                  <th className=\"text-left px-3 py-2\">Created</th>\n                  <th className=\"text-left px-3 py-2\">Epic</th>\n                  <th className=\"text-left px-3 py-2\">Type</th>\n                  <th className=\"text-left px-3 py-2\">Status</th>\n                </tr>\n              </thead>\n              <tbody>\n                {loading && (\n                  <tr>\n                    <td className=\"px-3 py-3 text-gray-600\" colSpan={4}>\n                      Loading actions…\n                    </td>\n                  </tr>\n                )}\n                {error && (\n                  <tr>\n                    <td className=\"px-3 py-3 text-red-600\" colSpan={4}>\n                      Failed to load. {error.message}\n                    </td>\n                  </tr>\n                )}\n                {!loading && !error && filtered.length === 0 && (\n                  <tr>\n                    <td className=\"px-3 py-3 text-gray-500\" colSpan={4}>\n                      No actions match these filters.\n                    </td>\n                  </tr>\n                )}\n                {!loading && !error &&\n                  filtered.map((a) => (\n                    <tr\n                      key={a.id}\n                      className={`border-t cursor-pointer hover:bg-gray-50 ${a.id === selectedId ? 'bg-gray-50' : ''}`}\n                      onClick={() => setSelectedId(a.id)}\n                    >\n                      <td className=\"px-3 py-2 text-xs text-gray-600\">{new Date(a.created_at).toLocaleString()}</td>\n                      <td className=\"px-3 py-2\">\n                        <div className=\"font-mono text-xs text-gray-700\">{a.epic?.code || '—'}</div>\n                        <div className=\"text-sm font-medium text-gray-900\">{a.epic?.title || 'No epic'}</div>\n                      </td>\n                      <td className=\"px-3 py-2\">\n                        <TypeBadge type={a.type} />\n                      </td>\n                      <td className=\"px-3 py-2\">\n                        <StatusBadge status={a.status} />\n                      </td>\n                    </tr>\n                  ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        <div className=\"rounded-xl border border-gray-200 bg-white p-5 shadow-sm space-y-4\">\n          <div className=\"flex items-start justify-between gap-3\">\n            <div>\n              <h2 className=\"text-lg font-semibold text-gray-900\">Action details</h2>\n              {selected?.epic?.code && (\n                <Link\n                  to={`/admin/execution-board?q=${encodeURIComponent(selected.epic.code)}`}\n                  className=\"text-sm text-blue-700 hover:underline\"\n                >\n                  View in Execution Board\n                </Link>\n              )}\n            </div>\n            {selected && (\n              <div className=\"flex flex-wrap gap-2\">\n                <button\n                  onClick={() => handleApprove(selected)}\n                  disabled={!canApprove(selected)}\n                  className=\"rounded-lg border border-gray-200 bg-white px-3 py-2 text-xs shadow-sm hover:bg-gray-50 disabled:opacity-50\"\n                >\n                  Approve\n                </button>\n                <button\n                  onClick={() => handleExecute(selected)}\n                  disabled={!canExecute(selected)}\n                  className=\"rounded-lg bg-gray-900 text-white px-3 py-2 text-xs shadow-sm hover:bg-gray-800 disabled:opacity-50\"\n                >\n                  Execute\n                </button>\n                <button\n                  onClick={() => handleCancel(selected)}\n                  disabled={!canCancel(selected)}\n                  className=\"rounded-lg border border-gray-200 bg-white px-3 py-2 text-xs shadow-sm hover:bg-gray-50 disabled:opacity-50\"\n                >\n                  Cancel\n                </button>\n              </div>\n            )}\n          </div>\n\n          {!selected && <p className=\"text-sm text-gray-600\">Select an action to see details.</p>}\n\n          {selected && (\n            <div className=\"space-y-4\">\n              <div className=\"flex flex-wrap items-center gap-2\">\n                <TypeBadge type={selected.type} />\n                <StatusBadge status={selected.status} />\n                {selected.epic?.tag && (\n                  <span className=\"inline-flex rounded-full bg-gray-100 px-2 py-1 text-xs text-gray-800\">\n                    {selected.epic.tag}\n                  </span>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <p className=\"text-xs text-gray-500\">Payload</p>\n                <JsonBox value={selected.payload} />\n              </div>\n\n              {selected.result && (\n                <div className=\"space-y-2\">\n                  <p className=\"text-xs text-gray-500\">Result</p>\n                  <JsonBox value={selected.result} />\n                </div>\n              )}\n\n              {selected.error && (\n                <div className=\"space-y-2\">\n                  <p className=\"text-xs text-gray-500\">Error</p>\n                  <pre className=\"rounded-lg border border-red-200 bg-red-50 p-3 text-xs text-red-900\">\n                    {selected.error}\n                  </pre>\n                </div>\n              )}\n\n              <div className=\"grid gap-3 md:grid-cols-3\">\n                <div className=\"rounded-lg border border-gray-200 p-3\">\n                  <p className=\"text-xs text-gray-500\">Runbooks</p>\n                  <p className=\"text-sm font-medium\">{selected.runbooks?.length || 0}</p>\n                </div>\n                <div className=\"rounded-lg border border-gray-200 p-3\">\n                  <p className=\"text-xs text-gray-500\">Escalations</p>\n                  <p className=\"text-sm font-medium\">{selected.escalations?.length || 0}</p>\n                </div>\n                <div className=\"rounded-lg border border-gray-200 p-3\">\n                  <p className=\"text-xs text-gray-500\">Rollbacks</p>\n                  <p className=\"text-sm font-medium\">{selected.rollbacks?.length || 0}</p>\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center justify-between\">\n                  <p className=\"text-xs text-gray-500\">Audit trail</p>\n                  <button\n                    onClick={() => loadAudit(selected.id)}\n                    className=\"text-xs text-blue-700 hover:underline\"\n                  >\n                    Refresh\n                  </button>\n                </div>\n                {auditLoading && <p className=\"text-sm text-gray-600\">Loading audit…</p>}\n                {!auditLoading && auditRows.length === 0 && (\n                  <p className=\"text-sm text-gray-600\">No audit entries found for this action.</p>\n                )}\n                {!auditLoading && auditRows.length > 0 && (\n                  <div className=\"max-h-64 overflow-auto rounded-lg border border-gray-200\">\n                    <ul className=\"divide-y\">\n                      {auditRows.map((row) => (\n                        <li key={row.id} className=\"p-3\">\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-xs font-mono text-gray-700\">{row.action}</span>\n                            <span className=\"text-xs text-gray-500\">{new Date(row.created_at).toLocaleString()}</span>\n                          </div>\n                          {row.metadata && Object.keys(row.metadata || {}).length > 0 && (\n                            <pre className=\"mt-2 max-h-28 overflow-auto rounded bg-gray-50 p-2 text-[11px] text-gray-700\">\n                              {JSON.stringify(row.metadata, null, 2)}\n                            </pre>\n                          )}\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n      </section>\n    </div>\n  );\n}\n"],"names":["STATUS_ORDER","StatusBadge","status","cls","TypeBadge","type","label","ORCHESTRATOR_TYPES","JsonBox","value","text","useMemo","jsx","AdminCommandCenter","isAuthenticated","useAuthenticationStatus","user","useUserData","actorId","loading","setLoading","useState","error","setError","actions","setActions","selectedId","setSelectedId","statusFilter","setStatusFilter","typeFilter","setTypeFilter","search","setSearch","auditLoading","setAuditLoading","auditRows","setAuditRows","reload","data","listOrchestratorActions","rows","err","loadAudit","entityId","listAuditLog","toast","useEffect","counts","byStatus","a","filtered","q","activeStatuses","epic","b","ai","bi","selected","canApprove","action","canExecute","canCancel","handleApprove","approveAction","handleCancel","cancelAction","handleExecute","executeAction","jsxs","e","_a","_b","Link","_c","_d","_e","row","Navigate"],"mappings":"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"}