import{j as e,C as g,o as j,B as c,K as w,r as m,P as N,L as h,y as x}from"./index-CXW08ga6.js";import{u as b}from"./useAuth-DO66-fgk.js";import{C as v,E as A}from"./entities-CLCXHT4z.js";import"./messaging-cshogndc.js";import{B as _}from"./book-open-Bot6lLRm.js";import{C as P}from"./calendar-DD8JTmH3.js";function S({classData:s,currentUser:p}){var r,o;const i=((r=s==null?void 0:s.course)==null?void 0:r.name)||((o=s==null?void 0:s.course)==null?void 0:o.title)||"This class";return e.jsx(g,{children:e.jsxs(j,{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold",children:"Assignments"}),e.jsxs("div",{className:"text-sm opacity-70",children:[i," • Students: ",(s==null?void 0:s.studentCount)??"—"]})]}),e.jsx("div",{className:"text-sm",children:"AssignmentsView is currently missing from the codebase. This placeholder keeps builds green while the real UI/API wiring is implemented."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{size:"sm",disabled:!0,children:"Create Assignment"}),e.jsx(c,{size:"sm",variant:"outline",disabled:!0,children:"Import / Sync"})]})]})})}function R(){const{user:s}=b(),[p]=w(),i=p.get("course_id"),[r,o]=m.useState([]),[l,C]=m.useState(null),[d,f]=m.useState(!0);return m.useEffect(()=>{(async()=>{if(s){f(!0);try{const u=await v.filter({teacher_id:s.id}),y=await Promise.all((u||[]).map(async a=>{try{const n=await A.filter({course_id:a.id});return{course:a,studentCount:Array.isArray(n)?n.length:0}}catch(n){return console.error("Error loading enrollments for course",a.name,n),{course:a,studentCount:0}}}));if(o(y),i){const a=y.find(n=>n.course.id===i);C(a||null)}}catch(u){console.error("Failed to load teacher classes:",u)}finally{f(!1)}}})()},[s,i]),!d&&l?e.jsx(N,{allowedRoles:["teacher","school_admin","district_admin","system_admin","admin"],requireAuth:!0,children:e.jsx("div",{className:"min-h-screen bg-warm-cream p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("header",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:[l.course.name," Assignments"]}),e.jsxs("p",{className:"text-gray-600",children:["Manage assignments for this class (students: ",l.studentCount,")"]})]}),e.jsx(S,{classData:{course:l.course,studentCount:l.studentCount},currentUser:s})]})})}):e.jsx(N,{allowedRoles:["teacher","school_admin","district_admin","system_admin","admin"],requireAuth:!0,children:e.jsx("div",{className:"min-h-screen bg-warm-cream p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Assignments"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage assignments for your classes"})]}),d&&e.jsx("p",{className:"text-gray-500",children:"Loading your classes…"}),!d&&r.length===0&&e.jsx(g,{children:e.jsxs(j,{className:"p-8 text-center space-y-4",children:[e.jsx(_,{className:"w-12 h-12 text-gray-400 mx-auto"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"No classes found"}),e.jsx("p",{className:"text-gray-600",children:"You don't have any classes yet. Connect Google Classroom or create a class to begin."}),e.jsx("div",{className:"flex justify-center gap-4",children:e.jsx(h,{to:x("TeacherClasses"),children:e.jsx(c,{variant:"outline",children:"Go to Classes"})})})]})}),!d&&r.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(t=>e.jsx(g,{className:"bg-white border border-gray-200 shadow-sm",children:e.jsxs(j,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-lg text-gray-900 line-clamp-1",children:t.course.name})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Students: ",t.studentCount]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{to:x(`TeacherAssignments?course_id=${t.course.id}`),children:e.jsx(c,{size:"sm",variant:"outline",children:"View Assignments"})}),e.jsx(h,{to:x(`TeacherClasses?course_id=${t.course.id}`),children:e.jsx(c,{size:"sm",variant:"outline",children:"View Class"})})]})]})},t.course.id))})]})})})}export{R as default};
//# sourceMappingURL=TeacherAssignments-B7qCeDx1.js.map
