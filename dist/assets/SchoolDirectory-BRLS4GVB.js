import{T as j,r as a,j as e,B as S}from"./index-BPP-_OMN.js";import"./entities-B5ABfrWT.js";import{r as v}from"./messaging-DUlHVuxN.js";import{I as p}from"./input-DXyqFpUo.js";import{T as b}from"./textarea-Be6YKw6o.js";import{L as l}from"./label-BYGjLjtR.js";function w(){const r=j(),[o,d]=a.useState(""),[c,f]=a.useState(""),[n,m]=a.useState(""),[h,i]=a.useState(""),[u,x]=a.useState(!1);a.useEffect(()=>{var t,g;const s=String(((t=r==null?void 0:r.metadata)==null?void 0:t.school_id)??((g=r==null?void 0:r.metadata)==null?void 0:g.schoolId)??"").trim();s&&d(s)},[r]);const y=async s=>{if(s.preventDefault(),!(!o||!c)){x(!0),i("");try{const t=await v({schoolId:o,targetUserId:c,note:n||void 0});i(t!=null&&t.ok?"Request sent for approval.":"Unable to send request."),t!=null&&t.ok&&m("")}catch(t){console.error(t),i((t==null?void 0:t.message)??"Failed to send request")}finally{x(!1)}}};return e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"School Directory"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Request permission to message a teacher or staff member directly from the directory."}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:e.jsxs("form",{onSubmit:y,className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{htmlFor:"directory-school",children:"School ID"}),e.jsx(p,{id:"directory-school",value:o,onChange:s=>d(s.target.value),placeholder:"School ID",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{htmlFor:"directory-target",children:"Teacher or staff user ID"}),e.jsx(p,{id:"directory-target",value:c,onChange:s=>f(s.target.value),placeholder:"Target user ID",required:!0})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{htmlFor:"directory-note",children:"Optional note"}),e.jsx(b,{id:"directory-note",value:n,onChange:s=>m(s.target.value),placeholder:"Share context for your request",rows:3})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{type:"submit",disabled:u,children:u?"Submittingâ€¦":"Request to message"}),h&&e.jsx("p",{className:"text-sm text-gray-700",children:h})]})]})})]})}export{w as default};
//# sourceMappingURL=SchoolDirectory-BRLS4GVB.js.map
