import{c as ke,U as G,au as Gt,aQ as fe,aw as Yt,aR as St,aS as wt,aT as Xt,aU as Zt,r as x,aG as Be,R as O,aV as Jt,aW as J,j as g,I as U,a9 as pe,h as Kt,B as se,ad as Qt,_ as er,J as tr,G as rr}from"./index-BPP-_OMN.js";import{i as nr,C as or}from"./tiny-invariant-BjI72XTb.js";import{a as sr,e as Ze}from"./endOfMonth-YkXIKlYF.js";import{L as ir}from"./loader-circle-CPuSJKcI.js";import{a as we,A as ar}from"./entities-B5ABfrWT.js";import"./messaging-Dnlm8q3H.js";import{I as ie}from"./input-DXyqFpUo.js";import{T as cr}from"./textarea-Be6YKw6o.js";import{L as ae}from"./label-BYGjLjtR.js";import{S as lr,a as ur,b as dr,c as fr,d as Je}from"./select-45VgWSkf.js";import{c as pr}from"./cn-2dOUpm6k.js";import{A as mr}from"./index-y6jvPR9A.js";import{C as gr}from"./calendar-CIAq3dFp.js";import{T as hr,a as br}from"./trash-2-eWhTudgl.js";import{l as yr}from"./events-Bqt3UKl2.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],vr=ke("Link",xr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],wr=ke("Save",Sr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Dr=ke("User",Cr);function Ce(e,t){const r=G(e);return isNaN(t)?Gt(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function Q(e,t){const r=fe(e),n=fe(t);return+r==+n}function Nr(e){const t=G(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Ir(e,t){var c,a;const r=Yt(),n=r.weekStartsOn??((a=(c=r.locale)==null?void 0:c.options)==null?void 0:a.weekStartsOn)??0,o=G(e),s=o.getDay(),i=(s<n?-7:0)+6-(s-n);return o.setDate(o.getDate()+i),o.setHours(23,59,59,999),o}function Ke(e){return G(e).getDay()}function Er(e,t){const r=G(e),n=G(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Qe(e,t){const n=$r(e);let o;if(n.date){const a=Tr(n.date,2);o=Mr(a.restDateString,a.year)}if(!o||isNaN(o.getTime()))return new Date(NaN);const s=o.getTime();let i=0,c;if(n.time&&(i=Ar(n.time),isNaN(i)))return new Date(NaN);if(n.timezone){if(c=_r(n.timezone),isNaN(c))return new Date(NaN)}else{const a=new Date(s+i),u=new Date(0);return u.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),u.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),u}return new Date(s+i+c)}const ce={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Or=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Rr=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Pr=/^([+-])(\d{2})(?::?(\d{2}))?$/;function $r(e){const t={},r=e.split(ce.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],ce.timeZoneDelimiter.test(t.date)&&(t.date=e.split(ce.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const o=ce.timezone.exec(n);o?(t.time=n.replace(o[1],""),t.timezone=o[1]):t.time=n}return t}function Tr(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const o=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?o:s*100,restDateString:e.slice((n[1]||n[2]).length)}}function Mr(e,t){if(t===null)return new Date(NaN);const r=e.match(Or);if(!r)return new Date(NaN);const n=!!r[4],o=K(r[1]),s=K(r[2])-1,i=K(r[3]),c=K(r[4]),a=K(r[5])-1;if(n)return Wr(t,c,a)?jr(t,c,a):new Date(NaN);{const u=new Date(0);return!kr(t,s,i)||!Br(t,o)?new Date(NaN):(u.setUTCFullYear(t,s,Math.max(o,i)),u)}}function K(e){return e?parseInt(e):1}function Ar(e){const t=e.match(Rr);if(!t)return NaN;const r=De(t[1]),n=De(t[2]),o=De(t[3]);return Lr(r,n,o)?r*St+n*wt+o*1e3:NaN}function De(e){return e&&parseFloat(e.replace(",","."))||0}function _r(e){if(e==="Z")return 0;const t=e.match(Pr);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return zr(n,o)?r*(n*St+o*wt):NaN}function jr(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const o=n.getUTCDay()||7,s=(t-1)*7+r+1-o;return n.setUTCDate(n.getUTCDate()+s),n}const Fr=[31,null,31,30,31,30,31,31,30,31,30,31];function Ct(e){return e%400===0||e%4===0&&e%100!==0}function kr(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(Fr[t]||(Ct(e)?29:28))}function Br(e,t){return t>=1&&t<=(Ct(e)?366:365)}function Wr(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function Lr(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function zr(e,t){return t>=0&&t<=59}var Ne={exports:{}},N={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var et;function Ur(){if(et)return N;et=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,c=e?Symbol.for("react.context"):60110,a=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,m=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,y=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,S=e?Symbol.for("react.block"):60121,d=e?Symbol.for("react.fundamental"):60117,w=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function D(l){if(typeof l=="object"&&l!==null){var b=l.$$typeof;switch(b){case t:switch(l=l.type,l){case a:case u:case n:case s:case o:case f:return l;default:switch(l=l&&l.$$typeof,l){case c:case m:case v:case y:case i:return l;default:return b}}case r:return b}}}function p(l){return D(l)===u}return N.AsyncMode=a,N.ConcurrentMode=u,N.ContextConsumer=c,N.ContextProvider=i,N.Element=t,N.ForwardRef=m,N.Fragment=n,N.Lazy=v,N.Memo=y,N.Portal=r,N.Profiler=s,N.StrictMode=o,N.Suspense=f,N.isAsyncMode=function(l){return p(l)||D(l)===a},N.isConcurrentMode=p,N.isContextConsumer=function(l){return D(l)===c},N.isContextProvider=function(l){return D(l)===i},N.isElement=function(l){return typeof l=="object"&&l!==null&&l.$$typeof===t},N.isForwardRef=function(l){return D(l)===m},N.isFragment=function(l){return D(l)===n},N.isLazy=function(l){return D(l)===v},N.isMemo=function(l){return D(l)===y},N.isPortal=function(l){return D(l)===r},N.isProfiler=function(l){return D(l)===s},N.isStrictMode=function(l){return D(l)===o},N.isSuspense=function(l){return D(l)===f},N.isValidElementType=function(l){return typeof l=="string"||typeof l=="function"||l===n||l===u||l===s||l===o||l===f||l===h||typeof l=="object"&&l!==null&&(l.$$typeof===v||l.$$typeof===y||l.$$typeof===i||l.$$typeof===c||l.$$typeof===m||l.$$typeof===d||l.$$typeof===w||l.$$typeof===C||l.$$typeof===S)},N.typeOf=D,N}var tt;function Hr(){return tt||(tt=1,Ne.exports=Ur()),Ne.exports}var Ie,rt;function qr(){if(rt)return Ie;rt=1;var e=Hr(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[e.ForwardRef]=n,s[e.Memo]=o;function i(v){return e.isMemo(v)?o:s[v.$$typeof]||t}var c=Object.defineProperty,a=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;function y(v,S,d){if(typeof S!="string"){if(h){var w=f(S);w&&w!==h&&y(v,w,d)}var C=a(S);u&&(C=C.concat(u(S)));for(var D=i(v),p=i(S),l=0;l<C.length;++l){var b=C[l];if(!r[b]&&!(d&&d[b])&&!(p&&p[b])&&!(D&&D[b])){var E=m(S,b);try{c(v,b,E)}catch{}}}}return v}return Ie=y,Ie}var Vr=qr();const nt=Xt(Vr);var Gr=Zt();function Yr(e){e()}let Dt=Yr;const Xr=e=>Dt=e,Zr=()=>Dt,ot=Symbol.for("react-redux-context"),st=typeof globalThis<"u"?globalThis:{};function Jr(){var e;if(!x.createContext)return{};const t=(e=st[ot])!=null?e:st[ot]=new Map;let r=t.get(x.createContext);return r||(r=x.createContext(null),t.set(x.createContext,r)),r}const Kr=Jr(),Qr=()=>{throw new Error("uSES not initialized!")};function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V.apply(null,arguments)}function Nt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ee={exports:{}},I={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var it;function en(){if(it)return I;it=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),i=Symbol.for("react.context"),c=Symbol.for("react.server_context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function S(d){if(typeof d=="object"&&d!==null){var w=d.$$typeof;switch(w){case e:switch(d=d.type,d){case r:case o:case n:case u:case m:return d;default:switch(d=d&&d.$$typeof,d){case c:case i:case a:case h:case f:case s:return d;default:return w}}case t:return w}}}return I.ContextConsumer=i,I.ContextProvider=s,I.Element=e,I.ForwardRef=a,I.Fragment=r,I.Lazy=h,I.Memo=f,I.Portal=t,I.Profiler=o,I.StrictMode=n,I.Suspense=u,I.SuspenseList=m,I.isAsyncMode=function(){return!1},I.isConcurrentMode=function(){return!1},I.isContextConsumer=function(d){return S(d)===i},I.isContextProvider=function(d){return S(d)===s},I.isElement=function(d){return typeof d=="object"&&d!==null&&d.$$typeof===e},I.isForwardRef=function(d){return S(d)===a},I.isFragment=function(d){return S(d)===r},I.isLazy=function(d){return S(d)===h},I.isMemo=function(d){return S(d)===f},I.isPortal=function(d){return S(d)===t},I.isProfiler=function(d){return S(d)===o},I.isStrictMode=function(d){return S(d)===n},I.isSuspense=function(d){return S(d)===u},I.isSuspenseList=function(d){return S(d)===m},I.isValidElementType=function(d){return typeof d=="string"||typeof d=="function"||d===r||d===o||d===n||d===u||d===m||d===y||typeof d=="object"&&d!==null&&(d.$$typeof===h||d.$$typeof===f||d.$$typeof===s||d.$$typeof===i||d.$$typeof===a||d.$$typeof===v||d.getModuleId!==void 0)},I.typeOf=S,I}var at;function tn(){return at||(at=1,Ee.exports=en()),Ee.exports}var rn=tn();const nn=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function on(e,t,r,n,{areStatesEqual:o,areOwnPropsEqual:s,areStatePropsEqual:i}){let c=!1,a,u,m,f,h;function y(C,D){return a=C,u=D,m=e(a,u),f=t(n,u),h=r(m,f,u),c=!0,h}function v(){return m=e(a,u),t.dependsOnOwnProps&&(f=t(n,u)),h=r(m,f,u),h}function S(){return e.dependsOnOwnProps&&(m=e(a,u)),t.dependsOnOwnProps&&(f=t(n,u)),h=r(m,f,u),h}function d(){const C=e(a,u),D=!i(C,m);return m=C,D&&(h=r(m,f,u)),h}function w(C,D){const p=!s(D,u),l=!o(C,a,D,u);return a=C,u=D,p&&l?v():p?S():l?d():h}return function(D,p){return c?w(D,p):y(D,p)}}function sn(e,t){let{initMapStateToProps:r,initMapDispatchToProps:n,initMergeProps:o}=t,s=Nt(t,nn);const i=r(e,s),c=n(e,s),a=o(e,s);return on(i,c,a,e,s)}function an(e,t){const r={};for(const n in e){const o=e[n];typeof o=="function"&&(r[n]=(...s)=>t(o(...s)))}return r}function Me(e){return function(r){const n=e(r);function o(){return n}return o.dependsOnOwnProps=!1,o}}function ct(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function It(e,t){return function(n,{displayName:o}){const s=function(c,a){return s.dependsOnOwnProps?s.mapToProps(c,a):s.mapToProps(c,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(c,a){s.mapToProps=e,s.dependsOnOwnProps=ct(e);let u=s(c,a);return typeof u=="function"&&(s.mapToProps=u,s.dependsOnOwnProps=ct(u),u=s(c,a)),u},s}}function We(e,t){return(r,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function cn(e){return e&&typeof e=="object"?Me(t=>an(e,t)):e?typeof e=="function"?It(e):We(e,"mapDispatchToProps"):Me(t=>({dispatch:t}))}function ln(e){return e?typeof e=="function"?It(e):We(e,"mapStateToProps"):Me(()=>({}))}function un(e,t,r){return V({},r,e,t)}function dn(e){return function(r,{displayName:n,areMergedPropsEqual:o}){let s=!1,i;return function(a,u,m){const f=e(a,u,m);return s?o(f,i)||(i=f):(s=!0,i=f),i}}}function fn(e){return e?typeof e=="function"?dn(e):We(e,"mergeProps"):()=>un}function pn(){const e=Zr();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],o=t;for(;o;)n.push(o),o=o.next;return n},subscribe(n){let o=!0,s=r={callback:n,next:null,prev:r};return s.prev?s.prev.next=s:t=s,function(){!o||t===null||(o=!1,s.next?s.next.prev=s.prev:r=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}const lt={notify(){},get:()=>[]};function mn(e,t){let r,n=lt,o=0,s=!1;function i(S){m();const d=n.subscribe(S);let w=!1;return()=>{w||(w=!0,d(),f())}}function c(){n.notify()}function a(){v.onStateChange&&v.onStateChange()}function u(){return s}function m(){o++,r||(r=t?t.addNestedSub(a):e.subscribe(a),n=pn())}function f(){o--,r&&o===0&&(r(),r=void 0,n.clear(),n=lt)}function h(){s||(s=!0,m())}function y(){s&&(s=!1,f())}const v={addNestedSub:i,notifyNestedSubs:c,handleChangeWrapper:a,isSubscribed:u,trySubscribe:h,tryUnsubscribe:y,getListeners:()=>n};return v}const gn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ae=gn?x.useLayoutEffect:x.useEffect;function ut(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Oe(e,t){if(ut(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let o=0;o<r.length;o++)if(!Object.prototype.hasOwnProperty.call(t,r[o])||!ut(e[r[o]],t[r[o]]))return!1;return!0}const hn=["reactReduxForwardedRef"];let Et=Qr;const bn=e=>{Et=e},yn=[null,null];function xn(e,t,r){Ae(()=>e(...t),r)}function vn(e,t,r,n,o,s){e.current=n,r.current=!1,o.current&&(o.current=null,s())}function Sn(e,t,r,n,o,s,i,c,a,u,m){if(!e)return()=>{};let f=!1,h=null;const y=()=>{if(f||!c.current)return;const S=t.getState();let d,w;try{d=n(S,o.current)}catch(C){w=C,h=C}w||(h=null),d===s.current?i.current||u():(s.current=d,a.current=d,i.current=!0,m())};return r.onStateChange=y,r.trySubscribe(),y(),()=>{if(f=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h}}function wn(e,t){return e===t}function Ot(e,t,r,{pure:n,areStatesEqual:o=wn,areOwnPropsEqual:s=Oe,areStatePropsEqual:i=Oe,areMergedPropsEqual:c=Oe,forwardRef:a=!1,context:u=Kr}={}){const m=u,f=ln(e),h=cn(t),y=fn(r),v=!!e;return d=>{const w=d.displayName||d.name||"Component",C=`Connect(${w})`,D={shouldHandleStateChanges:v,displayName:C,wrappedComponentName:w,WrappedComponent:d,initMapStateToProps:f,initMapDispatchToProps:h,initMergeProps:y,areStatesEqual:o,areStatePropsEqual:i,areOwnPropsEqual:s,areMergedPropsEqual:c};function p(E){const[P,B,_]=x.useMemo(()=>{const{reactReduxForwardedRef:L}=E,Z=Nt(E,hn);return[E.context,L,Z]},[E]),R=x.useMemo(()=>P&&P.Consumer&&rn.isContextConsumer(x.createElement(P.Consumer,null))?P:m,[P,m]),T=x.useContext(R),W=!!E.store&&!!E.store.getState&&!!E.store.dispatch,re=!!T&&!!T.store,F=W?E.store:T.store,ne=re?T.getServerState:F.getState,he=x.useMemo(()=>sn(F.dispatch,D),[F]),[Y,Ve]=x.useMemo(()=>{if(!v)return yn;const L=mn(F,W?void 0:T.subscription),Z=L.notifyNestedSubs.bind(L);return[L,Z]},[F,W,T]),Ge=x.useMemo(()=>W?T:V({},T,{subscription:Y}),[W,T,Y]),be=x.useRef(),ye=x.useRef(_),X=x.useRef(),Ye=x.useRef(!1);x.useRef(!1);const xe=x.useRef(!1),ve=x.useRef();Ae(()=>(xe.current=!0,()=>{xe.current=!1}),[]);const Xe=x.useMemo(()=>()=>X.current&&_===ye.current?X.current:he(F.getState(),_),[F,_]),Vt=x.useMemo(()=>Z=>Y?Sn(v,F,Y,he,ye,be,Ye,xe,X,Ve,Z):()=>{},[Y]);xn(vn,[ye,be,Ye,_,X,Ve]);let oe;try{oe=Et(Vt,Xe,ne?()=>he(ne(),_):Xe)}catch(L){throw ve.current&&(L.message+=`
The error may be correlated with this previous error:
${ve.current.stack}

`),L}Ae(()=>{ve.current=void 0,X.current=void 0,be.current=oe});const Se=x.useMemo(()=>x.createElement(d,V({},oe,{ref:B})),[B,d,oe]);return x.useMemo(()=>v?x.createElement(R.Provider,{value:Ge},Se):Se,[R,Se,Ge])}const b=x.memo(p);if(b.WrappedComponent=d,b.displayName=p.displayName=C,a){const P=x.forwardRef(function(_,R){return x.createElement(b,V({},_,{reactReduxForwardedRef:R}))});return P.displayName=C,P.WrappedComponent=d,nt(P,d)}return nt(b,d)}}bn(Gr.useSyncExternalStore);Xr(Be.unstable_batchedUpdates);function Cn(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Rt(e,t){var r=x.useState(function(){return{inputs:t,result:e()}})[0],n=x.useRef(!0),o=x.useRef(r),s=n.current||!!(t&&o.current.inputs&&Cn(t,o.current.inputs)),i=s?o.current:{inputs:t,result:e()};return x.useEffect(function(){n.current=!1,o.current=i},[i]),i.result}function Dn(e,t){return Rt(function(){return e},t)}var M=Rt,$=Dn,q=function(t){var r=t.top,n=t.right,o=t.bottom,s=t.left,i=n-s,c=o-r,a={top:r,right:n,bottom:o,left:s,width:i,height:c,x:s,y:r,center:{x:(n+s)/2,y:(o+r)/2}};return a},Pt=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},dt=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},Nn=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Re={top:0,right:0,bottom:0,left:0},Le=function(t){var r=t.borderBox,n=t.margin,o=n===void 0?Re:n,s=t.border,i=s===void 0?Re:s,c=t.padding,a=c===void 0?Re:c,u=q(Pt(r,o)),m=q(dt(r,i)),f=q(dt(m,a));return{marginBox:u,borderBox:q(r),paddingBox:m,contentBox:f,margin:o,border:i,padding:a}},k=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var o=Number(r);return isNaN(o)&&nr(),o},In=function(){return{x:window.pageXOffset,y:window.pageYOffset}},En=function(t,r){var n=t.borderBox,o=t.border,s=t.margin,i=t.padding,c=Nn(n,r);return Le({borderBox:c,border:o,margin:s,padding:i})},_e=function(t,r){return r===void 0&&(r=In()),En(t,r)},$t=function(t,r){var n={top:k(r.marginTop),right:k(r.marginRight),bottom:k(r.marginBottom),left:k(r.marginLeft)},o={top:k(r.paddingTop),right:k(r.paddingRight),bottom:k(r.paddingBottom),left:k(r.paddingLeft)},s={top:k(r.borderTopWidth),right:k(r.borderRightWidth),bottom:k(r.borderBottomWidth),left:k(r.borderLeftWidth)};return Le({borderBox:t,margin:n,padding:o,border:s})},Tt=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return $t(r,n)},ft=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function On(e,t){return!!(e===t||ft(e)&&ft(t))}function Rn(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!On(e[r],t[r]))return!1;return!0}function A(e,t){t===void 0&&(t=Rn);var r=null;function n(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];if(r&&r.lastThis===this&&t(o,r.lastArgs))return r.lastResult;var i=e.apply(this,o);return r={lastResult:i,lastArgs:o,lastThis:this},i}return n.clear=function(){r=null},n}var Pn=function(t){var r=[],n=null,o=function(){for(var i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];r=c,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return o.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},o};function Mt(e,t){}Mt.bind(null,"warn");Mt.bind(null,"error");function $n(){}function Tn(e,t){return{...e,...t}}function Mn(e,t,r){const n=t.map(o=>{const s=Tn(r,o.options);return e.addEventListener(o.eventName,o.fn,s),function(){e.removeEventListener(o.eventName,o.fn,s)}});return function(){n.forEach(s=>{s()})}}const An="Invariant failed";class me extends Error{}me.prototype.toString=function(){return this.message};function j(e,t){throw new me(An)}class vs extends O.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=$n,this.onWindowError=r=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),r.error instanceof me&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Mn(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof me){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const H={x:0,y:0},_n=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),jn=(e,t)=>e.x===t.x&&e.y===t.y,Fn=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),kn=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t};var Bn=((e,t)=>{const r=q({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r});const Wn=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Ln={top:0,right:0,bottom:0,left:0},zn=(e,t)=>t?Wn(e,t.scroll.diff.displacement):e,Un=(e,t,r)=>e,Hn=(e,t)=>t&&t.shouldClipSubject?Bn(t.pageMarginBox,e):q(e);var qn=(({page:e,withPlaceholder:t,axis:r,frame:n})=>{const o=zn(e.marginBox,n),s=Un(o),i=Hn(s,n);return{page:e,withPlaceholder:t,active:i}});A(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{}));A(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{}));const Vn=A(e=>Object.values(e)),Gn=A(e=>Object.values(e));A((e,t)=>Gn(t).filter(n=>e===n.descriptor.droppableId).sort((n,o)=>n.descriptor.index-o.descriptor.index));function Yn(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}A((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id));const Xn={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Zn={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};A(function(t,r){const n=r[t.line];return{value:n,point:kn(t.line,n)}});var ue=(e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null});const Jn=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Kn=()=>({type:"DROP_ANIMATION_FINISHED",payload:null}),ze={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},te={opacity:{drop:0,combining:.7},scale:{drop:.75}},Qn={outOfTheWay:.2},z=`${Qn.outOfTheWay}s ${ze.outOfTheWay}`,de={fluid:`opacity ${z}`,snap:`transform ${z}, opacity ${z}`,drop:e=>{const t=`${e}s ${ze.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${z}`,placeholder:`height ${z}, width ${z}, margin ${z}`},pt=e=>jn(e,H)?void 0:`translate(${e.x}px, ${e.y}px)`,je={moveTo:pt,drop:(e,t)=>{const r=pt(e);if(r)return t?`${r} scale(${te.scale.drop})`:r}};var At=(({scrollHeight:e,scrollWidth:t,height:r,width:n})=>{const o=_n({x:t,y:e},{x:n,y:r});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}}),eo=(()=>{const e=document.documentElement;return e||j(),e}),to=(()=>{const e=eo();return At({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})});A(e=>Vn(e).filter(t=>!(!t.isEnabled||!t.frame)));const ro="data-rfd",mt={contextId:`${ro}-scroll-container-context-id`},no=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?x.useLayoutEffect:x.useEffect;var ee=no,_t=O.createContext(null);let oo=0;const jt={separator:"::"};function so(e,t=jt){return M(()=>`${e}${t.separator}${oo++}`,[t.separator,e])}function io(e,t=jt){const r=O.useId();return M(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}var Ft="useId"in O?io:so,Ue=O.createContext(null);function ao(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),t}function He(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const gt={dragging:5e3,dropAnimating:4500},co=(e,t)=>t?de.drop(t.duration):e?de.snap:de.fluid,lo=(e,t)=>{if(e)return t?te.opacity.drop:te.opacity.combining},uo=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function fo(e){const r=e.dimension.client,{offset:n,combineWith:o,dropping:s}=e,i=!!o,c=uo(e),a=!!s,u=a?je.drop(n,i):je.moveTo(n);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:co(c,s),transform:u,opacity:lo(i,a),zIndex:a?gt.dropAnimating:gt.dragging,pointerEvents:"none"}}function po(e){return{transform:je.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function mo(e){return e.type==="DRAGGING"?fo(e):po(e)}function go(e,t,r=H){const n=window.getComputedStyle(t),o=t.getBoundingClientRect(),s=$t(o,n),i=_e(s,r),c={client:s,tagName:t.tagName.toLowerCase(),display:n.display},a={x:s.marginBox.width,y:s.marginBox.height};return{descriptor:e,placeholder:c,displaceBy:a,client:s,page:i}}function ho(e){const t=Ft("draggable"),{descriptor:r,registry:n,getDraggableRef:o,canDragInteractiveElements:s,shouldRespectForcePress:i,isEnabled:c}=e,a=M(()=>({canDragInteractiveElements:s,shouldRespectForcePress:i,isEnabled:c}),[s,c,i]),u=$(y=>{const v=o();return v||j(),go(r,v,y)},[r,o]),m=M(()=>({uniqueId:t,descriptor:r,options:a,getDimension:u}),[r,u,a,t]),f=x.useRef(m),h=x.useRef(!0);ee(()=>(n.draggable.register(f.current),()=>n.draggable.unregister(f.current)),[n.draggable]),ee(()=>{if(h.current){h.current=!1;return}const y=f.current;f.current=m,n.draggable.update(m,y)},[m,n.draggable])}var qe=O.createContext(null);function ge(e){const t=x.useContext(e);return t||j(),t}function bo(e){e.preventDefault()}const yo=e=>{const t=x.useRef(null),r=$((b=null)=>{t.current=b},[]),n=$(()=>t.current,[]),{contextId:o,dragHandleUsageInstructionsId:s,registry:i}=ge(Ue),{type:c,droppableId:a}=ge(qe),u=M(()=>({id:e.draggableId,index:e.index,type:c,droppableId:a}),[e.draggableId,e.index,c,a]),{children:m,draggableId:f,isEnabled:h,shouldRespectForcePress:y,canDragInteractiveElements:v,isClone:S,mapped:d,dropAnimationFinished:w}=e;if(!S){const b=M(()=>({descriptor:u,registry:i,getDraggableRef:n,canDragInteractiveElements:v,shouldRespectForcePress:y,isEnabled:h}),[u,i,n,v,y,h]);ho(b)}const C=M(()=>h?{tabIndex:0,role:"button","aria-describedby":s,"data-rfd-drag-handle-draggable-id":f,"data-rfd-drag-handle-context-id":o,draggable:!1,onDragStart:bo}:null,[o,s,f,h]),D=$(b=>{d.type==="DRAGGING"&&d.dropping&&b.propertyName==="transform"&&(O.version.startsWith("16")||O.version.startsWith("17")?w():Be.flushSync(w))},[w,d]),p=M(()=>{const b=mo(d),E=d.type==="DRAGGING"&&d.dropping?D:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":o,"data-rfd-draggable-id":f,style:b,onTransitionEnd:E},dragHandleProps:C}},[o,C,f,d,D,r]),l=M(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return O.createElement(O.Fragment,null,m(p,d.snapshot,l))};var xo=yo,kt=((e,t)=>e===t),Bt=(e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null});const vo=e=>e.combine?e.combine.draggableId:null,So=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function wo(){const e=A((o,s)=>({x:o,y:s})),t=A((o,s,i=null,c=null,a=null)=>({isDragging:!0,isClone:s,isDropAnimating:!!a,dropAnimation:a,mode:o,draggingOver:i,combineWith:c,combineTargetFor:null})),r=A((o,s,i,c,a=null,u=null,m=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:a,combineWith:u,mode:s,offset:o,dimension:i,forceShouldAnimate:m,snapshot:t(s,c,a,u,null)}}));return(o,s)=>{if(He(o)){if(o.critical.draggable.id!==s.draggableId)return null;const i=o.current.client.offset,c=o.dimensions.draggables[s.draggableId],a=ue(o.impact),u=So(o.impact),m=o.forceShouldAnimate;return r(e(i.x,i.y),o.movementMode,c,s.isClone,a,u,m)}if(o.phase==="DROP_ANIMATING"){const i=o.completed;if(i.result.draggableId!==s.draggableId)return null;const c=s.isClone,a=o.dimensions.draggables[s.draggableId],u=i.result,m=u.mode,f=Bt(u),h=vo(u),v={duration:o.dropDuration,curve:ze.drop,moveTo:o.newHomeClientOffset,opacity:h?te.opacity.drop:null,scale:h?te.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:a,dropping:v,draggingOver:f,combineWith:h,mode:m,forceShouldAnimate:null,snapshot:t(m,c,f,h,v)}}}return null}}function Wt(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const Co={mapped:{type:"SECONDARY",offset:H,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Wt(null)}};function Do(){const e=A((i,c)=>({x:i,y:c})),t=A(Wt),r=A((i,c=null,a)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:c,shouldAnimateDisplacement:a,snapshot:t(c)}})),n=i=>i?r(H,i,!0):null,o=(i,c,a,u)=>{const m=a.displaced.visible[i],f=!!(u.inVirtualList&&u.effected[i]),h=Yn(a),y=h&&h.draggableId===i?c:null;if(!m){if(!f)return n(y);if(a.displaced.invisible[i])return null;const d=Fn(u.displacedBy.point),w=e(d.x,d.y);return r(w,y,!0)}if(f)return n(y);const v=a.displacedBy.point,S=e(v.x,v.y);return r(S,y,m.shouldAnimate)};return(i,c)=>{if(He(i))return i.critical.draggable.id===c.draggableId?null:o(c.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const a=i.completed;return a.result.draggableId===c.draggableId?null:o(c.draggableId,a.result.draggableId,a.impact,a.afterCritical)}return null}}const No=()=>{const e=wo(),t=Do();return(n,o)=>e(n,o)||t(n,o)||Co},Io={dropAnimationFinished:Kn},Eo=Ot(No,Io,null,{context:_t,areStatePropsEqual:kt})(xo);var Oo=Eo;function Ro(e){return ge(qe).isUsingCloneFor===e.draggableId&&!e.isClone?null:O.createElement(Oo,e)}const Lt=e=>t=>e===t,Po=Lt("scroll"),$o=Lt("auto"),ht=(e,t)=>t(e.overflowX)||t(e.overflowY),To=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return ht(r,Po)||ht(r,$o)},Mo=()=>!1,zt=e=>e==null?null:e===document.body?Mo()?e:null:e===document.documentElement?null:To(e)?e:zt(e.parentElement);var Fe=(e=>({x:e.scrollLeft,y:e.scrollTop}));const Ut=e=>e?window.getComputedStyle(e).position==="fixed"?!0:Ut(e.parentElement):!1;var Ao=(e=>{const t=zt(e),r=Ut(e);return{closestScrollable:t,isFixedOnPage:r}}),_o=(({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:n,direction:o,client:s,page:i,closest:c})=>{const a=(()=>{if(!c)return null;const{scrollSize:h,client:y}=c,v=At({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:y.paddingBox.height,width:y.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:y,scrollSize:h,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:v,diff:{value:H,displacement:H}}}})(),u=o==="vertical"?Xn:Zn,m=qn({page:i,withPlaceholder:null,axis:u,frame:a});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:n,axis:u,isEnabled:t,client:s,page:i,frame:a,subject:m}});const jo=(e,t)=>{const r=Tt(e);if(!t||e!==t)return r;const n=r.paddingBox.top-t.scrollTop,o=r.paddingBox.left-t.scrollLeft,s=n+t.scrollHeight,i=o+t.scrollWidth,a=Pt({top:n,right:i,bottom:s,left:o},r.border);return Le({borderBox:a,margin:r.margin,border:r.border,padding:r.padding})};var Fo=(({ref:e,descriptor:t,env:r,windowScroll:n,direction:o,isDropDisabled:s,isCombineEnabled:i,shouldClipSubject:c})=>{const a=r.closestScrollable,u=jo(e,a),m=_e(u,n),f=(()=>{if(!a)return null;const y=Tt(a),v={scrollHeight:a.scrollHeight,scrollWidth:a.scrollWidth};return{client:y,page:_e(y,n),scroll:Fe(a),scrollSize:v,shouldClipSubject:c}})();return _o({descriptor:t,isEnabled:!s,isCombineEnabled:i,isFixedOnPage:r.isFixedOnPage,direction:o,client:u,page:m,closest:f})});const ko={passive:!1},Bo={passive:!0};var bt=(e=>e.shouldPublishImmediately?ko:Bo);const le=e=>e&&e.env.closestScrollable||null;function Wo(e){const t=x.useRef(null),r=ge(Ue),n=Ft("droppable"),{registry:o,marshal:s}=r,i=ao(e),c=M(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),a=x.useRef(c),u=M(()=>A((p,l)=>{t.current||j();const b={x:p,y:l};s.updateDroppableScroll(c.id,b)}),[c.id,s]),m=$(()=>{const p=t.current;return!p||!p.env.closestScrollable?H:Fe(p.env.closestScrollable)},[]),f=$(()=>{const p=m();u(p.x,p.y)},[m,u]),h=M(()=>Pn(f),[f]),y=$(()=>{const p=t.current,l=le(p);if(p&&l||j(),p.scrollOptions.shouldPublishImmediately){f();return}h()},[h,f]),v=$((p,l)=>{t.current&&j();const b=i.current,E=b.getDroppableRef();E||j();const P=Ao(E),B={ref:E,descriptor:c,env:P,scrollOptions:l};t.current=B;const _=Fo({ref:E,descriptor:c,env:P,windowScroll:p,direction:b.direction,isDropDisabled:b.isDropDisabled,isCombineEnabled:b.isCombineEnabled,shouldClipSubject:!b.ignoreContainerClipping}),R=P.closestScrollable;return R&&(R.setAttribute(mt.contextId,r.contextId),R.addEventListener("scroll",y,bt(B.scrollOptions))),_},[r.contextId,c,y,i]),S=$(()=>{const p=t.current,l=le(p);return p&&l||j(),Fe(l)},[]),d=$(()=>{const p=t.current;p||j();const l=le(p);t.current=null,l&&(h.cancel(),l.removeAttribute(mt.contextId),l.removeEventListener("scroll",y,bt(p.scrollOptions)))},[y,h]),w=$(p=>{const l=t.current;l||j();const b=le(l);b||j(),b.scrollTop+=p.y,b.scrollLeft+=p.x},[]),C=M(()=>({getDimensionAndWatchScroll:v,getScrollWhileDragging:S,dragStopped:d,scroll:w}),[d,v,S,w]),D=M(()=>({uniqueId:n,descriptor:c,callbacks:C}),[C,c,n]);ee(()=>(a.current=D.descriptor,o.droppable.register(D),()=>{t.current&&d(),o.droppable.unregister(D)}),[C,c,d,D,s,o.droppable]),ee(()=>{t.current&&s.updateDroppableIsEnabled(a.current.id,!e.isDropDisabled)},[e.isDropDisabled,s]),ee(()=>{t.current&&s.updateDroppableIsCombineEnabled(a.current.id,e.isCombineEnabled)},[e.isCombineEnabled,s])}function Pe(){}const yt={width:0,height:0,margin:Ln},Lo=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?yt:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},zo=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const n=Lo({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?de.placeholder:null}},Uo=e=>{const t=x.useRef(null),r=$(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:n,onTransitionEnd:o,onClose:s,contextId:i}=e,[c,a]=x.useState(e.animate==="open");x.useEffect(()=>c?n!=="open"?(r(),a(!1),Pe):t.current?Pe:(t.current=setTimeout(()=>{t.current=null,a(!1)}),r):Pe,[n,c,r]);const u=$(f=>{f.propertyName==="height"&&(o(),n==="close"&&s())},[n,s,o]),m=zo({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return O.createElement(e.placeholder.tagName,{style:m,"data-rfd-placeholder-context-id":i,onTransitionEnd:u,ref:e.innerRef})};var Ho=O.memo(Uo);class qo extends O.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const Vo=e=>{const t=x.useContext(Ue);t||j();const{contextId:r,isMovementAllowed:n}=t,o=x.useRef(null),s=x.useRef(null),{children:i,droppableId:c,type:a,mode:u,direction:m,ignoreContainerClipping:f,isDropDisabled:h,isCombineEnabled:y,snapshot:v,useClone:S,updateViewportMaxScroll:d,getContainerForClone:w}=e,C=$(()=>o.current,[]),D=$((R=null)=>{o.current=R},[]);$(()=>s.current,[]);const p=$((R=null)=>{s.current=R},[]),l=$(()=>{n()&&d({maxScroll:to()})},[n,d]);Wo({droppableId:c,type:a,mode:u,direction:m,isDropDisabled:h,isCombineEnabled:y,ignoreContainerClipping:f,getDroppableRef:C});const b=M(()=>O.createElement(qo,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:R,data:T,animate:W})=>O.createElement(Ho,{placeholder:T,onClose:R,innerRef:p,animate:W,contextId:r,onTransitionEnd:l})),[r,l,e.placeholder,e.shouldAnimatePlaceholder,p]),E=M(()=>({innerRef:D,placeholder:b,droppableProps:{"data-rfd-droppable-id":c,"data-rfd-droppable-context-id":r}}),[r,c,b,D]),P=S?S.dragging.draggableId:null,B=M(()=>({droppableId:c,type:a,isUsingCloneFor:P}),[c,P,a]);function _(){if(!S)return null;const{dragging:R,render:T}=S,W=O.createElement(Ro,{draggableId:R.draggableId,index:R.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(re,F)=>T(re,F,R));return Jt.createPortal(W,w())}return O.createElement(qe.Provider,{value:B},i(E,v),_())};var Go=Vo;function Yo(){return document.body||j(),document.body}const xt={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Yo},Ht=e=>{let t={...e},r;for(r in xt)e[r]===void 0&&(t={...t,[r]:xt[r]});return t},$e=(e,t)=>e===t.droppable.type,vt=(e,t)=>t.draggables[e.draggable.id],Xo=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=A(s=>({draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}})),n=A((s,i,c,a,u,m)=>{const f=u.descriptor.id;if(u.descriptor.droppableId===s){const v=m?{render:m,dragging:r(u.descriptor)}:null,S={isDraggingOver:c,draggingOverWith:c?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:S,useClone:v}}if(!i)return t;if(!a)return e;const y={isDraggingOver:c,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:y,useClone:null}});return(s,i)=>{const c=Ht(i),a=c.droppableId,u=c.type,m=!c.isDropDisabled,f=c.renderClone;if(He(s)){const h=s.critical;if(!$e(u,h))return t;const y=vt(h,s.dimensions),v=ue(s.impact)===a;return n(a,m,v,v,y,f)}if(s.phase==="DROP_ANIMATING"){const h=s.completed;if(!$e(u,h.critical))return t;const y=vt(h.critical,s.dimensions);return n(a,m,Bt(h.result)===a,ue(h.impact)===a,y,f)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){const h=s.completed;if(!$e(u,h.critical))return t;const y=ue(h.impact)===a,v=!!(h.impact.at&&h.impact.at.type==="COMBINE"),S=h.critical.droppable.id===a;return y?v?e:t:S?e:t}return t}},Zo={updateViewportMaxScroll:Jn},Jo=Ot(Xo,Zo,(e,t,r)=>({...Ht(r),...e,...t}),{context:_t,areStatePropsEqual:kt})(Go);var Ko=Jo;const Qo=({day:e,monthStart:t,onDayClick:r,children:n})=>{const o=e.toISOString().split("T")[0];return g.jsx(Ko,{droppableId:`calendar-${o}`,type:"ITEM",children:(s,i)=>g.jsxs(pe.div,{ref:s.innerRef,...s.droppableProps,variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},className:`border-r border-b p-2 min-h-[120px] relative ${Er(e,t)?"bg-white":"bg-gray-50 text-gray-400"} ${Q(e,new Date)?"bg-blue-50":""} ${i.isDraggedOver?"bg-green-100 border-green-300":""}`,children:[g.jsx("div",{className:`font-semibold ${Q(e,new Date)?"text-blue-600":""} ${r?"cursor-pointer hover:text-blue-700":""}`,onClick:r?()=>r(e):void 0,children:U(e,"d")}),g.jsx("div",{className:"mt-1 space-y-1",children:n}),s.placeholder]})})},es=({currentDate:e,events:t,onEventClick:r,isLoading:n,view:o,onDayClick:s,childrenData:i})=>{const[c,a]=x.useState(new Date),u=x.useRef({});x.useEffect(()=>{u.current={}},[t,o]),x.useEffect(()=>{if(o==="week"){const w=setInterval(()=>a(new Date),6e4);return()=>clearInterval(w)}},[o]);const m=Nr(e),f=sr(m),h=J(m),y=Ir(f),v=[];let S=h;for(;S<=y;)v.push(S),S=Ce(S,1);const d=x.useCallback(w=>{const C=w.toISOString().split("T")[0];if(u.current[C])return u.current[C];const D=t.filter(p=>{if(!p||!p.start_time)return!1;const l=new Date(p.start_time);if(isNaN(l.getTime()))return!1;if(p.all_day)return Q(l,w);if(!p.end_time)return!1;const b=new Date(p.end_time);return isNaN(b.getTime())?!1:l<=Ze(w)&&b>=fe(w)}).sort((p,l)=>{const b=new Date(p.start_time),E=new Date(l.start_time);return isNaN(b.getTime())&&isNaN(E.getTime())?0:isNaN(b.getTime())?1:isNaN(E.getTime())?-1:b.getTime()-E.getTime()});return u.current[C]=D,D},[t]);if(n)return g.jsx("div",{className:"flex items-center justify-center h-96",children:g.jsx(ir,{className:"w-8 h-8 animate-spin text-gray-500"})});if(o==="week"){const w=Array.from({length:7},(l,b)=>Ce(J(e),b)),C=Array.from({length:24},(l,b)=>`${b.toString().padStart(2,"0")}:00`),p=J(new Date,{weekStartsOn:0}).getTime()===J(e,{weekStartsOn:0}).getTime();return g.jsxs("div",{className:"bg-white/80 backdrop-blur-sm shadow-lg rounded-xl overflow-hidden relative",children:[g.jsxs("div",{className:"grid grid-cols-8 text-center sticky top-0 bg-white z-10",children:[g.jsx("div",{className:"w-14"}),w.map(l=>g.jsxs("div",{className:"py-2 border-l",children:[g.jsx("div",{className:`text-sm ${Q(l,new Date)?"text-blue-600":""}`,children:U(l,"ccc")}),g.jsx("div",{className:`text-lg font-bold ${Q(l,new Date)?"text-blue-600":""}`,children:U(l,"d")})]},l.toString()))]}),g.jsxs("div",{className:"flex h-[1200px] overflow-y-auto",children:[g.jsx("div",{className:"w-14 text-xs text-gray-500",children:C.map(l=>g.jsx("div",{className:"h-12 text-right pr-2 border-t -mt-px",children:l},l))}),g.jsxs("div",{className:"grid grid-cols-7 flex-1 relative",children:[C.map((l,b)=>g.jsx("div",{className:"col-span-7 h-12 border-t"},b)),Array.from({length:6}).map((l,b)=>g.jsx("div",{className:`row-start-1 row-span-24 h-full border-l col-start-${b+2}`},b)),p&&g.jsx("div",{className:"absolute w-full h-0.5 bg-red-500 z-20 flex items-center",style:{top:`${(c.getHours()+c.getMinutes()/60)*48}px`},children:g.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 -ml-1"})}),t.map(l=>{if(!l||!l.start_time||!l.end_time)return null;const b=new Date(l.start_time),E=new Date(l.end_time);if(isNaN(b.getTime())||isNaN(E.getTime()))return null;const P=Ke(b),B=b.getHours()+b.getMinutes()/60,R=E.getHours()+E.getMinutes()/60-B,T=J(e),W=Ce(T,6);if(!(b<=Ze(W)&&E>=fe(T))||l.all_day)return null;const F=Ke(T),ne=(P-F+7)%7;return g.jsxs("div",{onClick:()=>r(l),className:"absolute p-1 rounded text-xs cursor-pointer text-white truncate",style:{backgroundColor:l.color||"var(--teachmo-blue)",top:`${B*48}px`,height:`${R*48}px`,left:`${ne/7*100}%`,width:`${1/7*100}%`},children:[U(b,"p")," ",l.title]},l.id)})]})]})]})}return g.jsxs("div",{className:"bg-white/80 backdrop-blur-sm shadow-lg rounded-xl overflow-hidden flex-1",children:[g.jsx("div",{className:"grid grid-cols-7 text-center font-medium text-gray-600 border-b",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(w=>g.jsx("div",{className:"py-3",children:w},w))}),g.jsx(pe.div,{className:"grid grid-cols-7 grid-rows-6",variants:{visible:{transition:{staggerChildren:.02}}},initial:"hidden",animate:"visible",children:v.map(w=>g.jsxs(Qo,{day:w,monthStart:m,onDayClick:s,children:[d(w).slice(0,3).map(C=>{const D=Array.isArray(i)?i.find(p=>p.id===C.child_id):void 0;return g.jsxs("div",{onClick:()=>r(C),className:"p-1 rounded text-xs cursor-pointer text-white truncate flex items-center gap-1",style:{backgroundColor:C.color||"var(--teachmo-blue)"},children:[D&&g.jsx("div",{className:"w-3 h-3 rounded-full bg-white/50 flex-shrink-0"}),g.jsxs("span",{className:"truncate",children:[C.all_day?"":C.start_time&&U(new Date(C.start_time),"p")," ",C.title]})]},C.id)}),d(w).length>3&&g.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["+ ",d(w).length-3," more"]})]},w.toString()))})]})},qt=O.createContext({}),ts=O.forwardRef(({className:e,children:t,asChild:r=!1,...n},o)=>{const{setIsOpen:s,setPosition:i,triggerRef:c,isOpen:a}=O.useContext(qt),u=f=>{var h;if(f.preventDefault(),f.stopPropagation(),!a){const y=(h=c.current)==null?void 0:h.getBoundingClientRect();y&&i({top:y.bottom+window.scrollY+4,left:y.left+window.scrollX})}s(!a)},m=f=>{c.current=f,typeof o=="function"?o(f):o&&(o.current=f)};return r?O.cloneElement(O.Children.only(t),{ref:m,onClick:u,...n}):g.jsx("button",{type:"button",ref:m,className:e,onClick:u,...n,children:t})}),rs=O.forwardRef(({className:e,align:t="center",children:r,...n},o)=>{const{isOpen:s,setIsOpen:i,position:c,contentRef:a}=O.useContext(qt),u=f=>{a.current=f,typeof o=="function"?o(f):o&&(o.current=f)},m=f=>{f.target.closest('button, [role="option"], [role="menuitem"]')&&i(!1)};return s?Be.createPortal(g.jsx("div",{ref:u,style:{top:`${c.top}px`,left:`${c.left}px`},className:pr("absolute z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none","animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),onClickCapture:m,...n,children:r}),document.body):null});rs.displayName="PopoverContent";ts.displayName="PopoverTrigger";const Te=tr("event-modal");function ns({event:e,user:t,onClose:r,childrenData:n,defaultChildId:o}){var D;const s=!e||!e.id,[i,c]=x.useState(s?{title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",start_time:(e==null?void 0:e.start_time)||new Date().toISOString(),end_time:(e==null?void 0:e.end_time)||new Date(new Date().getTime()+3600*1e3).toISOString(),child_id:o||((D=n==null?void 0:n[0])==null?void 0:D.id)||null,all_day:!1,resource_id:(e==null?void 0:e.resource_id)||null,resource_type:(e==null?void 0:e.resource_type)||"custom",color:(e==null?void 0:e.color)||"#6B9DC8"}:{...e}),[a,u]=x.useState(!1),[m,f]=x.useState(!1),[h,y]=x.useState(null),{toast:v}=Kt();x.useEffect(()=>{e&&JSON.stringify(e)!==JSON.stringify(i)&&c(e)},[e]);const S=(p,l)=>{c(b=>({...b,[p]:l}))},d=async()=>{if(!i.title){y("Title is required.");return}u(!0),y(null);const p={...i,user_id:t.id};try{if(s){if(await we.create(p)&&p.resource_type==="activity"&&p.resource_id)try{await ar.update(p.resource_id,{status:"planned"})}catch(b){Te.error("Failed to update source activity status",b)}}else await we.update(e.id,p);r(),v({title:s?"Event Created":"Event Updated",description:`"${i.title}" has been saved.`})}catch(l){Te.error("Failed to save event",l),y("An error occurred while saving. Please try again.")}finally{u(!1)}},w=async()=>{if(!s){f(!0);try{await we.delete(e.id),r(),v({title:"Event Deleted",description:`"${e.title}" has been removed from your calendar.`})}catch(p){Te.error("Failed to delete event",p),y("An error occurred while deleting. Please try again."),f(!1)}}},C=()=>{if(!i.resource_id||!i.resource_type)return null;switch(i.resource_type){case"activity":return`/activities/${i.resource_id}`;case"local_event":return`/events/${i.resource_id}`;default:return null}};return g.jsx(mr,{children:g.jsx(pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 flex items-center justify-center p-4",onClick:r,children:g.jsxs(pe.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-20},className:"bg-white rounded-xl shadow-2xl w-full max-w-lg relative",onClick:p=>p.stopPropagation(),children:[g.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:s?"Create Event":"Edit Event"}),g.jsx(se,{variant:"ghost",size:"sm",onClick:r,className:"h-8 w-8 p-0",children:g.jsx(Qt,{className:"w-5 h-5 text-gray-500"})})]}),g.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsx(ie,{placeholder:"Event Title",value:i.title,onChange:p=>S("title",p.target.value),className:"text-lg font-medium"}),g.jsx(cr,{placeholder:"Description",value:i.description,onChange:p=>S("description",p.target.value)}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsxs(ae,{className:"flex items-center gap-2 mb-2",children:[g.jsx(gr,{className:"w-4 h-4"})," Start Time"]}),g.jsx(ie,{type:"datetime-local",value:U(Qe(i.start_time),"yyyy-MM-dd'T'HH:mm"),onChange:p=>S("start_time",new Date(p.target.value).toISOString())})]}),g.jsxs("div",{children:[g.jsxs(ae,{className:"flex items-center gap-2 mb-2",children:[g.jsx(or,{className:"w-4 h-4"})," End Time"]}),g.jsx(ie,{type:"datetime-local",value:U(Qe(i.end_time),"yyyy-MM-dd'T'HH:mm"),onChange:p=>S("end_time",new Date(p.target.value).toISOString())})]})]}),g.jsxs("div",{children:[g.jsxs(ae,{className:"flex items-center gap-2 mb-2",children:[g.jsx(Dr,{className:"w-4 h-4"})," For Child"]}),g.jsxs(lr,{value:i.child_id||"",onValueChange:p=>S("child_id",p),children:[g.jsx(ur,{children:g.jsx(dr,{placeholder:"Select a child..."})}),g.jsxs(fr,{children:[g.jsx(Je,{value:null,children:"General / Family"}),n.map(p=>g.jsx(Je,{value:p.id,children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:p.color}}),p.name]})},p.id))]})]})]}),g.jsxs("div",{children:[g.jsxs(ae,{className:"flex items-center gap-2 mb-2",children:[g.jsx(hr,{className:"w-4 h-4"})," Color"]}),g.jsx(ie,{type:"color",value:i.color||"#6B9DC8",onChange:p=>S("color",p.target.value),className:"w-full h-10 p-1"})]}),C()&&g.jsx("a",{href:C(),target:"_blank",rel:"noopener noreferrer",children:g.jsxs(se,{variant:"outline",className:"w-full gap-2",children:[g.jsx(vr,{className:"w-4 h-4"}),"View Linked ",i.resource_type]})})]}),h&&g.jsxs("div",{className:"mt-4 text-red-600 text-sm flex items-center gap-2",children:[g.jsx(er,{className:"w-4 h-4"}),h]})]}),g.jsxs("div",{className:"p-4 bg-gray-50 border-t flex justify-between",children:[g.jsx("div",{children:!s&&g.jsxs(se,{variant:"destructive",onClick:w,disabled:m,children:[g.jsx(br,{className:"w-4 h-4 mr-2"}),m?"Deleting...":"Delete"]})}),g.jsxs(se,{onClick:d,disabled:a,style:{backgroundColor:"var(--teachmo-sage)"},children:[g.jsx(wr,{className:"w-4 h-4 mr-2"}),a?"Saving...":"Save Changes"]})]})]})})})}function Ss(){const[e,t]=x.useState(new Date),[r,n]=x.useState(null),[o,s]=x.useState(!1),{data:i=[],isLoading:c}=rr(["events",e],async()=>await yr({limit:100})||[]),a=(i||[]).map(f=>({id:f.id,title:f.title,description:f.description,start_time:f.starts_at||f.start_time,end_time:f.ends_at||f.end_time,all_day:!1,child_id:f.child_id,color:f.color||void 0})),u=f=>{t(f)},m=f=>{n(f),s(!0)};return g.jsxs("div",{className:"p-6 space-y-4",children:[g.jsx(es,{currentDate:e,events:a,view:"month",onEventClick:m,onDayClick:u,childrenData:[],isLoading:c}),o&&r&&g.jsx(ns,{event:r,onClose:()=>{s(!1),n(null)},childrenData:[]})]})}export{Ss as default};
//# sourceMappingURL=Calendar--KtM20Q1.js.map
