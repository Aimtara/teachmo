{"version":3,"file":"AdminWorkflows-Cdydhtkv.js","sources":["../../src/components/admin/workflows/WorkflowGraphEditor.jsx","../../src/pages/AdminWorkflows.jsx"],"sourcesContent":["import { useEffect, useMemo, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\n\n/**\n * WorkflowGraphEditor\n * A dependency-free, enterprise-safe “visual” editor for workflow definitions.\n *\n * Why not React Flow?\n * - This repo snapshot does not vendor reactflow in package-lock.\n * - We keep a deterministic build with no new registry fetches.\n *\n * This editor models the graph explicitly via:\n * - start: step id\n * - steps: [{ id, type, config, next?, on_true?, on_false? }]\n */\n\nconst STEP_TYPES = [\n  { value: 'create_entity', label: 'Create entity' },\n  { value: 'update_entity', label: 'Update entity' },\n  { value: 'condition', label: 'Condition (branch)' },\n  { value: 'notify', label: 'Notify (in-app)' },\n  { value: 'noop', label: 'No-op' },\n];\n\nconst OPS = [\n  { value: 'eq', label: 'Equals' },\n  { value: 'ne', label: 'Not equals' },\n  { value: 'contains', label: 'Contains' },\n  { value: 'ncontains', label: 'Not contains' },\n  { value: 'gt', label: 'Greater than' },\n  { value: 'gte', label: 'Greater or equal' },\n  { value: 'lt', label: 'Less than' },\n  { value: 'lte', label: 'Less or equal' },\n  { value: 'exists', label: 'Exists' },\n];\n\n// Optional per-step permission gating. If set, the backend runner will deny the step\n// when the triggering actor lacks the specified action.\nconst REQUIRED_ACTIONS = [\n  { value: '', label: '(none)' },\n  { value: 'automation:manage', label: 'automation:manage' },\n  { value: 'automation:run', label: 'automation:run' },\n  { value: 'automation:replay', label: 'automation:replay' },\n  { value: 'automation:request_review', label: 'automation:request_review' },\n  { value: 'automation:approve', label: 'automation:approve' },\n  { value: 'automation:publish', label: 'automation:publish' },\n  { value: 'tenant:manage', label: 'tenant:manage' },\n  { value: 'users:manage', label: 'users:manage' },\n  { value: 'analytics:view', label: 'analytics:view' },\n  { value: 'analytics:export', label: 'analytics:export' },\n];\n\nfunction normalize(definition) {\n  const d = definition && typeof definition === 'object' ? definition : {};\n  const steps = Array.isArray(d.steps) ? d.steps : [];\n  const normalized = steps\n    .map((s, idx) => ({\n      id: String(s.id || s.key || `step_${idx + 1}`),\n      type: s.type || 'noop',\n      config: s.config && typeof s.config === 'object' ? s.config : {},\n      next: s.next ?? null,\n      on_true: s.on_true ?? null,\n      on_false: s.on_false ?? null,\n    }))\n    .filter((s) => s.id);\n\n  const start = typeof d.start === 'string' ? d.start : normalized[0]?.id || null;\n  return { version: 2, start, steps: normalized };\n}\n\nfunction safeJsonParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch {\n    return null;\n  }\n}\n\nfunction FieldMappingEditor({ value, onChange, placeholderKey, placeholderValue }) {\n  const rows = useMemo(() => {\n    const obj = value && typeof value === 'object' ? value : {};\n    return Object.entries(obj).map(([k, v]) => ({ k, v: typeof v === 'string' ? v : JSON.stringify(v) }));\n  }, [value]);\n\n  const [draft, setDraft] = useState(rows);\n\n  useEffect(() => setDraft(rows), [rows]);\n\n  const commit = (nextRows) => {\n    setDraft(nextRows);\n    const out = {};\n    for (const r of nextRows) {\n      const key = String(r.k || '').trim();\n      if (!key) continue;\n      out[key] = r.v;\n    }\n    onChange(out);\n  };\n\n  return (\n    <div className=\"space-y-2\">\n      {draft.map((r, idx) => (\n        <div key={idx} className=\"grid grid-cols-1 gap-2 sm:grid-cols-5\">\n          <Input\n            className=\"sm:col-span-2\"\n            placeholder={placeholderKey}\n            value={r.k}\n            onChange={(e) => {\n              const next = draft.slice();\n              next[idx] = { ...next[idx], k: e.target.value };\n              commit(next);\n            }}\n          />\n          <Input\n            className=\"sm:col-span-2\"\n            placeholder={placeholderValue}\n            value={r.v}\n            onChange={(e) => {\n              const next = draft.slice();\n              next[idx] = { ...next[idx], v: e.target.value };\n              commit(next);\n            }}\n          />\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            onClick={() => {\n              const next = draft.slice();\n              next.splice(idx, 1);\n              commit(next);\n            }}\n          >\n            Remove\n          </Button>\n        </div>\n      ))}\n\n      <Button\n        type=\"button\"\n        variant=\"secondary\"\n        onClick={() => commit([...(draft || []), { k: '', v: '' }])}\n      >\n        Add mapping\n      </Button>\n\n      <p className=\"text-xs text-muted-foreground\">\n        Tip: use templates like <code>{'{{event_metadata.thread_id}}'}</code> or <code>{'{{actor_user_id}}'}</code>.\n      </p>\n    </div>\n  );\n}\n\nexport function WorkflowGraphEditor({ definitionJson, onChangeDefinitionJson }) {\n  const initialDef = useMemo(() => normalize(safeJsonParse(definitionJson)), [definitionJson]);\n  const [model, setModel] = useState(initialDef);\n\n  useEffect(() => {\n    setModel(initialDef);\n  }, [initialDef.start, initialDef.steps.length]);\n\n  const stepIds = useMemo(() => model.steps.map((s) => s.id), [model.steps]);\n\n  const updateModel = (next) => {\n    const normalized = normalize(next);\n    setModel(normalized);\n    onChangeDefinitionJson(JSON.stringify(normalized, null, 2));\n  };\n\n  const addStep = (type) => {\n    const idx = model.steps.length + 1;\n    const id = `step_${idx}`;\n    const step = { id, type, config: {}, next: null, on_true: null, on_false: null };\n    if (type === 'condition') {\n      step.config = { left: '{{event_name}}', op: 'eq', right: 'some.event' };\n    }\n    const next = { ...model, steps: [...model.steps, step] };\n    if (!next.start) next.start = id;\n    updateModel(next);\n  };\n\n  const updateStep = (id, patch) => {\n    const nextSteps = model.steps.map((s) => (s.id === id ? { ...s, ...patch } : s));\n    updateModel({ ...model, steps: nextSteps });\n  };\n\n  const removeStep = (id) => {\n    const nextSteps = model.steps.filter((s) => s.id !== id);\n    const next = { ...model, steps: nextSteps };\n    if (next.start === id) next.start = nextSteps[0]?.id || null;\n    // Clear edges that point to removed step\n    next.steps = next.steps.map((s) => ({\n      ...s,\n      next: s.next === id ? null : s.next,\n      on_true: s.on_true === id ? null : s.on_true,\n      on_false: s.on_false === id ? null : s.on_false,\n    }));\n    updateModel(next);\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <Card>\n        <CardHeader>\n          <CardTitle>Flow</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid gap-3 sm:grid-cols-2\">\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">Start step</label>\n              <Select\n                value={model.start || ''}\n                onValueChange={(v) => updateModel({ ...model, start: v || null })}\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select start\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {stepIds.map((id) => (\n                    <SelectItem key={id} value={id}>\n                      {id}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">Add step</label>\n              <Select onValueChange={addStep}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Choose type\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {STEP_TYPES.map((t) => (\n                    <SelectItem key={t.value} value={t.value}>\n                      {t.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          {!model.steps.length && (\n            <div className=\"text-sm text-muted-foreground\">No steps yet. Add your first step above.</div>\n          )}\n\n          <div className=\"space-y-4\">\n            {model.steps.map((s) => (\n              <Card key={s.id} className=\"border-dashed\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center justify-between text-base\">\n                    <span>\n                      {s.id} <span className=\"text-muted-foreground\">· {s.type}</span>\n                    </span>\n                    <div className=\"flex gap-2\">\n                      <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={() => removeStep(s.id)}>\n                        Delete\n                      </Button>\n                    </div>\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid gap-3 sm:grid-cols-2\">\n                    <div className=\"space-y-2\">\n                      <label className=\"text-xs font-medium\">Step type</label>\n                      <Select value={s.type} onValueChange={(v) => updateStep(s.id, { type: v })}>\n                        <SelectTrigger>\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          {STEP_TYPES.map((t) => (\n                            <SelectItem key={t.value} value={t.value}>\n                              {t.label}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n\n                    {s.type !== 'condition' && (\n                      <div className=\"space-y-2\">\n                        <label className=\"text-xs font-medium\">Next step</label>\n                        <Select value={s.next || ''} onValueChange={(v) => updateStep(s.id, { next: v || null })}>\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"(end)\" />\n                          </SelectTrigger>\n                          <SelectContent>\n                            <SelectItem value=\"\">(end)</SelectItem>\n                            {stepIds\n                              .filter((id) => id !== s.id)\n                              .map((id) => (\n                                <SelectItem key={id} value={id}>\n                                  {id}\n                                </SelectItem>\n                              ))}\n                          </SelectContent>\n                        </Select>\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <label className=\"text-xs font-medium\">Required action (optional)</label>\n                    <Select\n                      value={String(s.config?.required_action || '')}\n                      onValueChange={(v) =>\n                        updateStep(s.id, { config: { ...s.config, required_action: v || null } })\n                      }\n                    >\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"(none)\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {REQUIRED_ACTIONS.map((a) => (\n                          <SelectItem key={a.value} value={a.value}>\n                            {a.label}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <p className=\"text-xs text-muted-foreground\">\n                      If set, the runner denies this step unless the triggering actor has the given permission.\n                    </p>\n                  </div>\n\n                  {s.type === 'condition' && (\n                    <div className=\"space-y-4\">\n                      <div className=\"grid gap-3 sm:grid-cols-3\">\n                        <div className=\"space-y-2\">\n                          <label className=\"text-xs font-medium\">Left</label>\n                          <Input\n                            value={String(s.config?.left || '')}\n                            onChange={(e) => updateStep(s.id, { config: { ...s.config, left: e.target.value } })}\n                            placeholder=\"{{event_metadata.foo}}\"\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <label className=\"text-xs font-medium\">Op</label>\n                          <Select\n                            value={String(s.config?.op || 'eq')}\n                            onValueChange={(v) => updateStep(s.id, { config: { ...s.config, op: v } })}\n                          >\n                            <SelectTrigger>\n                              <SelectValue />\n                            </SelectTrigger>\n                            <SelectContent>\n                              {OPS.map((o) => (\n                                <SelectItem key={o.value} value={o.value}>\n                                  {o.label}\n                                </SelectItem>\n                              ))}\n                            </SelectContent>\n                          </Select>\n                        </div>\n                        <div className=\"space-y-2\">\n                          <label className=\"text-xs font-medium\">Right</label>\n                          <Input\n                            value={String(s.config?.right || '')}\n                            onChange={(e) => updateStep(s.id, { config: { ...s.config, right: e.target.value } })}\n                            placeholder=\"some.value\"\n                          />\n                        </div>\n                      </div>\n\n                      <div className=\"grid gap-3 sm:grid-cols-2\">\n                        <div className=\"space-y-2\">\n                          <label className=\"text-xs font-medium\">On true</label>\n                          <Select\n                            value={s.on_true || ''}\n                            onValueChange={(v) => updateStep(s.id, { on_true: v || null })}\n                          >\n                            <SelectTrigger>\n                              <SelectValue placeholder=\"(end)\" />\n                            </SelectTrigger>\n                            <SelectContent>\n                              <SelectItem value=\"\">(end)</SelectItem>\n                              {stepIds\n                                .filter((id) => id !== s.id)\n                                .map((id) => (\n                                  <SelectItem key={id} value={id}>\n                                    {id}\n                                  </SelectItem>\n                                ))}\n                            </SelectContent>\n                          </Select>\n                        </div>\n                        <div className=\"space-y-2\">\n                          <label className=\"text-xs font-medium\">On false</label>\n                          <Select\n                            value={s.on_false || ''}\n                            onValueChange={(v) => updateStep(s.id, { on_false: v || null })}\n                          >\n                            <SelectTrigger>\n                              <SelectValue placeholder=\"(end)\" />\n                            </SelectTrigger>\n                            <SelectContent>\n                              <SelectItem value=\"\">(end)</SelectItem>\n                              {stepIds\n                                .filter((id) => id !== s.id)\n                                .map((id) => (\n                                  <SelectItem key={id} value={id}>\n                                    {id}\n                                  </SelectItem>\n                                ))}\n                            </SelectContent>\n                          </Select>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {s.type === 'create_entity' && (\n                    <div className=\"space-y-3\">\n                      <label className=\"text-xs font-medium\">Config (JSON)</label>\n                      <Textarea\n                        value={JSON.stringify(s.config || {}, null, 2)}\n                        onChange={(e) => updateStep(s.id, { config: safeJsonParse(e.target.value) || {} })}\n                        rows={6}\n                      />\n                      <FieldMappingEditor\n                        value={s.config?.fields || {}}\n                        onChange={(fields) => updateStep(s.id, { config: { ...s.config, fields } })}\n                        placeholderKey=\"field\"\n                        placeholderValue=\"value/template\"\n                      />\n                      <p className=\"text-xs text-muted-foreground\">\n                        For execution, set <code>entity</code> and <code>fields</code>. Example:{' '}\n                        <code>{`{ \"entity\": \"partner_submissions\", \"fields\": { \"status\": \"pending\" } }`}</code>\n                      </p>\n                    </div>\n                  )}\n\n                  {s.type === 'update_entity' && (\n                    <div className=\"space-y-3\">\n                      <label className=\"text-xs font-medium\">Config (JSON)</label>\n                      <Textarea\n                        value={JSON.stringify(s.config || {}, null, 2)}\n                        onChange={(e) => updateStep(s.id, { config: safeJsonParse(e.target.value) || {} })}\n                        rows={6}\n                      />\n                      <FieldMappingEditor\n                        value={s.config?.patch || {}}\n                        onChange={(patch) => updateStep(s.id, { config: { ...s.config, patch } })}\n                        placeholderKey=\"field\"\n                        placeholderValue=\"value/template\"\n                      />\n                      <p className=\"text-xs text-muted-foreground\">\n                        For execution, set <code>entity</code>, <code>id</code>, and <code>patch</code>. Example:{' '}\n                        <code>{`{ \"entity\": \"partner_submissions\", \"id\": \"{{event_metadata.submission_id}}\", \"patch\": { \"status\": \"approved\" } }`}</code>\n                      </p>\n                    </div>\n                  )}\n\n                  {s.type === 'notify' && (\n                    <div className=\"space-y-3\">\n                      <label className=\"text-xs font-medium\">Config (JSON)</label>\n                      <Textarea\n                        value={JSON.stringify(s.config || {}, null, 2)}\n                        onChange={(e) => updateStep(s.id, { config: safeJsonParse(e.target.value) || {} })}\n                        rows={6}\n                      />\n                      <p className=\"text-xs text-muted-foreground\">\n                        Notification currently records an analytics event (and can be extended to real in-app notifications).\n                      </p>\n                    </div>\n                  )}\n\n                  {s.type === 'noop' && (\n                    <p className=\"text-xs text-muted-foreground\">No-op step. Useful as an explicit branch target.</p>\n                  )}\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Definition (preview)</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <Textarea value={JSON.stringify(model, null, 2)} readOnly rows={10} />\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","import { useMemo, useState } from 'react';\nimport { useMutation, useQuery } from '@tanstack/react-query';\nimport { useTenantScope } from '@/hooks/useTenantScope';\nimport { graphql } from '@/lib/graphql';\nimport { nhost } from '@/lib/nhostClient';\nimport { trackEvent } from '@/observability/telemetry';\nimport { can } from '@/security/permissions';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { WorkflowGraphEditor } from '@/components/admin/workflows/WorkflowGraphEditor';\n\nconst DEFAULT_TRIGGER = { type: 'event', event_name: 'messaging.message_sent' };\nconst DEFAULT_DEF = {\n  version: 2,\n  // v2 supports branching via condition steps with on_true/on_false edges.\n  // Steps may be a linear list (default next = next array item) or an explicit graph.\n  steps: [\n    // Example:\n    // { id: 'step_1', type: 'condition', config: { left: '{{event_name}}', op: 'eq', right: 'messaging.message_sent' }, on_true: 'step_2', on_false: 'step_3' },\n    // { id: 'step_2', type: 'notify', config: { user_id: '{{actor_user_id}}', channel: 'in_app', title: 'Message sent', body: 'A message was sent.' } },\n    // { id: 'step_3', type: 'noop', config: {} },\n  ],\n};\n\nconst STEP_TYPES = [\n  { value: 'create_entity', label: 'Create entity' },\n  { value: 'update_entity', label: 'Update entity' },\n  { value: 'condition', label: 'Condition (branch)' },\n  { value: 'notify', label: 'Notify (in-app)' },\n  { value: 'noop', label: 'No-op' },\n];\n\nfunction safeJson(str, fallback) {\n  try {\n    const p = JSON.parse(str);\n    return p ?? fallback;\n  } catch {\n    return fallback;\n  }\n}\n\nexport default function AdminWorkflows() {\n  const { data: scope } = useTenantScope();\n  const districtId = scope?.districtId ?? null;\n  const schoolId = scope?.schoolId ?? null;\n  const role = scope?.role ?? null;\n\n  const { data: workflows, refetch } = useQuery({\n    queryKey: ['workflow_definitions', districtId, schoolId],\n    enabled: Boolean(scope),\n    queryFn: async () => {\n      const query = `query Workflows($districtId: uuid, $schoolId: uuid) {\n        workflow_definitions(\n          order_by: { updated_at: desc }\n          where: {\n            _and: [\n              { _or: [ { district_id: { _is_null: true } }, { district_id: { _eq: $districtId } } ] }\n              { _or: [ { school_id: { _is_null: true } }, { school_id: { _eq: $schoolId } } ] }\n            ]\n          }\n        ) {\n          id\n          name\n          status\n          version\n          pinned_version\n          published_version\n          review_requested_at\n          approved_at\n          published_at\n          trigger\n          definition\n          created_by\n          updated_at\n        }\n      }`;\n\n      const { data, error } = await graphql.request(query, { districtId, schoolId });\n      if (error) throw error;\n      return data.workflow_definitions;\n    },\n  });\n\n  const [selectedId, setSelectedId] = useState(null);\n\n  const selected = useMemo(() => {\n    return workflows?.find((w) => w.id === selectedId) ?? workflows?.[0] ?? null;\n  }, [workflows, selectedId]);\n\n  const { data: versions } = useQuery({\n    queryKey: ['workflow_definition_versions', selected?.id],\n    enabled: Boolean(selected?.id),\n    queryFn: async () => {\n      const query = `query Versions($workflowId: uuid!) {\n        workflow_definition_versions(\n          where: { workflow_id: { _eq: $workflowId } }\n          order_by: { version: desc }\n        ) {\n          id\n          version\n          created_at\n          created_by\n          trigger\n          definition\n        }\n      }`;\n      const { data, error } = await graphql.request(query, { workflowId: selected.id });\n      if (error) throw error;\n      return data.workflow_definition_versions;\n    },\n  });\n\n  const { data: tenantSettings } = useQuery({\n    queryKey: ['tenant_settings_min_approvals', districtId, schoolId],\n    enabled: Boolean(scope),\n    queryFn: async () => {\n      const query = `query TenantSettings($districtId: uuid, $schoolId: uuid) {\n        tenant_settings(\n          where: {\n            _or: [\n              { school_id: { _eq: $schoolId } }\n              { _and: [ { district_id: { _eq: $districtId } }, { school_id: { _is_null: true } } ] }\n            ]\n          }\n          limit: 5\n        ) {\n          district_id\n          school_id\n          settings\n        }\n      }`;\n      const { data, error } = await graphql.request(query, { districtId, schoolId });\n      if (error) throw error;\n      return data.tenant_settings;\n    },\n  });\n\n  const minApprovals = useMemo(() => {\n    const rows = tenantSettings ?? [];\n    const best = rows.find((r) => schoolId && r.school_id === schoolId) || rows.find((r) => districtId && r.district_id === districtId) || null;\n    const settings = best?.settings || {};\n    const v1 = Number(settings?.workflow_min_approvals);\n    if (Number.isFinite(v1) && v1 >= 1) return Math.min(5, Math.floor(v1));\n    const v2 = Number(settings?.workflow?.min_approvals);\n    if (Number.isFinite(v2) && v2 >= 1) return Math.min(5, Math.floor(v2));\n    return 1;\n  }, [tenantSettings, districtId, schoolId]);\n\n  const { data: approvals, refetch: refetchApprovals } = useQuery({\n    queryKey: ['workflow_approvals', selected?.id, selected?.version],\n    enabled: Boolean(selected?.id),\n    queryFn: async () => {\n      const query = `query Approvals($workflowId: uuid!, $version: Int!) {\n        workflow_approvals(\n          where: { workflow_id: { _eq: $workflowId }, version: { _eq: $version } }\n          order_by: { created_at: desc }\n        ) {\n          id\n          approver_user_id\n          reason\n          created_at\n        }\n      }`;\n      const { data, error } = await graphql.request(query, { workflowId: selected.id, version: selected.version });\n      if (error) throw error;\n      return data.workflow_approvals;\n    },\n  });\n\n  const approvalsCount = approvals?.length ?? 0;\n\n  const { data: deadLetters, refetch: refetchDeadLetters } = useQuery({\n    queryKey: ['workflow_dead_letters', selected?.id],\n    enabled: Boolean(selected?.id),\n    queryFn: async () => {\n      const query = `query DeadLetters($workflowId: uuid!) {\n        workflow_dead_letters(\n          where: { workflow_id: { _eq: $workflowId } }\n          order_by: { created_at: desc }\n          limit: 25\n        ) {\n          id\n          run_id\n          step_key\n          error\n          created_at\n          metadata\n        }\n      }`;\n      const { data, error } = await graphql.request(query, { workflowId: selected.id });\n      if (error) throw error;\n      return data.workflow_dead_letters;\n    },\n  });\n\n  const hasApprovalThreshold = approvalsCount >= minApprovals;\n  const bypassApproval = ['admin', 'system_admin'].includes(String(role));\n\n  const [draftName, setDraftName] = useState('');\n  const [draftTrigger, setDraftTrigger] = useState(JSON.stringify(DEFAULT_TRIGGER, null, 2));\n  const [draftDefinition, setDraftDefinition] = useState(JSON.stringify(DEFAULT_DEF, null, 2));\n  const [draftPinnedVersion, setDraftPinnedVersion] = useState('');\n  const [activeTab, setActiveTab] = useState('visual');\n  const [runDialog, setRunDialog] = useState({ open: false, run: null, steps: [] });\n\n  // keep editor in sync when selection changes\n  useMemo(() => {\n    if (!selected) return;\n    setDraftName(selected.name ?? '');\n    setDraftTrigger(JSON.stringify(selected.trigger ?? DEFAULT_TRIGGER, null, 2));\n    setDraftDefinition(JSON.stringify(selected.definition ?? DEFAULT_DEF, null, 2));\n    setDraftPinnedVersion(selected.pinned_version != null ? String(selected.pinned_version) : '');\n  }, [selected?.id]);\n\n  const { data: audits, refetch: refetchAudits } = useQuery({\n    queryKey: ['workflow_publication_audits', selected?.id],\n    enabled: Boolean(selected?.id),\n    queryFn: async () => {\n      const query = `query Audits($workflowId: uuid!) {\n        workflow_publication_audits(\n          where: { workflow_id: { _eq: $workflowId } }\n          order_by: { created_at: desc }\n          limit: 20\n        ) {\n          id\n          action\n          from_version\n          to_version\n          actor_user_id\n          signature\n          created_at\n          metadata\n        }\n      }`;\n      const { data, error } = await graphql.request(query, { workflowId: selected.id });\n      if (error) throw error;\n      return data.workflow_publication_audits;\n    },\n  });\n\n  const { data: runs, refetch: refetchRuns } = useQuery({\n    queryKey: ['workflow_runs', selected?.id],\n    enabled: Boolean(selected?.id),\n    queryFn: async () => {\n      const query = `query Runs($workflowId: uuid!) {\n        workflow_runs(where: { workflow_id: { _eq: $workflowId } }, order_by: { started_at: desc }, limit: 25) {\n          id\n          status\n          started_at\n          finished_at\n          input\n          output\n        }\n      }`;\n      const { data, error } = await graphql.request(query, { workflowId: selected.id });\n      if (error) throw error;\n      return data.workflow_runs;\n    },\n  });\n\n  const openRun = async (run) => {\n    const query = `query RunSteps($runId: uuid!) {\n      workflow_run_steps(where: { run_id: { _eq: $runId } }, order_by: { created_at: asc }) {\n        id\n        step_key\n        status\n        input\n        output\n        created_at\n      }\n    }`;\n    const { data, error } = await graphql.request(query, { runId: run.id });\n    if (error) throw error;\n    setRunDialog({ open: true, run, steps: data.workflow_run_steps || [] });\n  };\n\n  const replayRun = async (run) => {\n    if (!can(role, 'automation:replay')) return;\n    const eventName = run?.input?.event_name;\n    const meta = run?.input?.event_metadata || {};\n    if (!eventName) return;\n    await trackEvent({\n      eventName,\n      metadata: { ...meta, replayed_from_run_id: run.id, replayed: true },\n    });\n    await refetchRuns();\n  };\n\n  const requestReview = async () => {\n    if (!selected?.id) return;\n    const { error } = await nhost.functions.call('workflow-request-review', { workflowId: selected.id });\n    if (error) throw error;\n    await trackEvent({ eventName: 'workflow.request_review', metadata: { workflow_id: selected.id } });\n    await refetch();\n    await refetchAudits();\n  };\n\n  const approveWorkflow = async () => {\n    if (!selected?.id) return;\n    const { error } = await nhost.functions.call('workflow-approve', { workflowId: selected.id });\n    if (error) throw error;\n    await trackEvent({ eventName: 'workflow.approved', metadata: { workflow_id: selected.id } });\n    await refetch();\n    await refetchAudits();\n    await refetchApprovals();\n  };\n\n  const publishWorkflow = async () => {\n    if (!selected?.id) return;\n    const { error } = await nhost.functions.call('workflow-publish', { workflowId: selected.id });\n    if (error) throw error;\n    await trackEvent({ eventName: 'workflow.published', metadata: { workflow_id: selected.id } });\n    await refetch();\n    await refetchAudits();\n  };\n\n  const saveMutation = useMutation({\n    mutationFn: async () => {\n      const trigger = safeJson(draftTrigger, DEFAULT_TRIGGER);\n      const definition = safeJson(draftDefinition, DEFAULT_DEF);\n      const pinned_version = draftPinnedVersion ? Number(draftPinnedVersion) : null;\n\n      if (selected?.id) {\n        const mutation = `mutation UpdateWorkflow($id: uuid!, $patch: workflow_definitions_set_input!) {\n          update_workflow_definitions_by_pk(pk_columns: { id: $id }, _set: $patch) { id }\n        }`;\n        // Governance: editing a published/in-review workflow moves it back to draft.\n        const forceDraft = ['published', 'approved', 'in_review'].includes(String(selected?.status ?? ''));\n        const patch = {\n          name: draftName,\n          trigger,\n          definition,\n          pinned_version,\n          status: forceDraft ? 'draft' : selected.status,\n          ...(forceDraft\n            ? {\n                review_requested_at: null,\n                review_requested_by: null,\n                approved_at: null,\n                approved_by: null,\n                published_at: null,\n                published_by: null,\n                published_version: null,\n              }\n            : {}),\n        };\n        const { error } = await graphql.request(mutation, {\n          id: selected.id,\n          patch,\n        });\n        if (error) throw error;\n        await trackEvent({ eventName: 'workflow.updated', metadata: { workflow_id: selected.id } });\n        return selected.id;\n      }\n\n      const insert = `mutation InsertWorkflow($object: workflow_definitions_insert_input!) {\n        insert_workflow_definitions_one(object: $object) { id }\n      }`;\n      const { data, error } = await graphql.request(insert, {\n        object: {\n          name: draftName || 'Untitled workflow',\n          status: 'draft',\n          trigger,\n          definition,\n          district_id: districtId,\n          school_id: schoolId,\n          version: 1,\n          pinned_version: pinned_version,\n        },\n      });\n      if (error) throw error;\n      await trackEvent({ eventName: 'workflow.created', metadata: { workflow_id: data.insert_workflow_definitions_one.id } });\n      return data.insert_workflow_definitions_one.id;\n    },\n    onSuccess: async (id) => {\n      await refetch();\n      setSelectedId(id);\n    },\n  });\n\n  const rollbackMutation = useMutation({\n    mutationFn: async (versionRow) => {\n      if (!selected?.id) return;\n      const mutation = `mutation Rollback($id: uuid!, $patch: workflow_definitions_set_input!) {\n        update_workflow_definitions_by_pk(pk_columns: { id: $id }, _set: $patch) { id version }\n      }`;\n      const { error } = await graphql.request(mutation, {\n        id: selected.id,\n        patch: {\n          trigger: versionRow.trigger,\n          definition: versionRow.definition,\n        },\n      });\n      if (error) throw error;\n      await trackEvent({\n        eventName: 'workflow.rolled_back',\n        metadata: { workflow_id: selected.id, restored_version: versionRow.version },\n      });\n    },\n    onSuccess: async () => {\n      await refetch();\n    },\n  });\n\n  const createNew = () => {\n    setSelectedId(null);\n    setDraftName('');\n    setDraftTrigger(JSON.stringify(DEFAULT_TRIGGER, null, 2));\n    setDraftDefinition(JSON.stringify(DEFAULT_DEF, null, 2));\n    setDraftPinnedVersion('');\n    setActiveTab('visual');\n  };\n\n  const addStep = (type) => {\n    const def = safeJson(draftDefinition, DEFAULT_DEF);\n    const steps = Array.isArray(def.steps) ? def.steps : [];\n    const id = `step_${steps.length + 1}`;\n    const base = { id, type, config: {} };\n    if (type === 'condition') {\n      base.config = { left: '{{event_name}}', op: 'eq', right: 'some.event' };\n      base.on_true = null;\n      base.on_false = null;\n    }\n    steps.push(base);\n    setDraftDefinition(JSON.stringify({ ...def, steps }, null, 2));\n  };\n\n  const simulateTrigger = async () => {\n    const t = safeJson(draftTrigger, DEFAULT_TRIGGER);\n    const name = t?.event_name || 'custom.event';\n    await trackEvent({ eventName: name, metadata: { simulated: true, workflow_editor: true } });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-semibold\">Workflows</h1>\n          <p className=\"text-sm text-muted-foreground\">\n            Event-triggered automation. This build supports real entity ops, branching, version pinning, and replay.\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button variant=\"outline\" onClick={createNew}>New</Button>\n          <Button onClick={() => saveMutation.mutate()} disabled={saveMutation.isPending || !can(role, 'automation:manage')}>Save</Button>\n          <Button variant=\"secondary\" onClick={simulateTrigger} disabled={!can(role, 'automation:manage')}>Simulate trigger</Button>\n        </div>\n      </div>\n\n      <div className=\"grid gap-4 lg:grid-cols-4\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Definitions</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              {(workflows ?? []).map((w) => (\n                <button\n                  key={w.id}\n                  className={`w-full rounded-md border px-3 py-2 text-left text-sm ${selected?.id === w.id ? 'bg-muted' : 'hover:bg-muted/50'}`}\n                  onClick={() => setSelectedId(w.id)}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"font-medium\">{w.name}</span>\n                    <span className=\"text-xs text-muted-foreground\">v{w.version}</span>\n                  </div>\n                  <div className=\"mt-1 text-xs text-muted-foreground\">{w.status}</div>\n                </button>\n              ))}\n              {!workflows?.length && <div className=\"text-sm text-muted-foreground\">No workflows yet.</div>}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"lg:col-span-2\">\n          <CardHeader>\n            <CardTitle>Editor</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid gap-4 sm:grid-cols-2\">\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium\">Name</label>\n                <Input value={draftName} onChange={(e) => setDraftName(e.target.value)} placeholder=\"e.g., Auto-create follow-up task\" />\n              </div>\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium\">Lifecycle</label>\n                <div className=\"rounded-md border px-3 py-2\">\n                  <div className=\"flex items-center justify-between gap-3\">\n                    <div className=\"text-sm font-medium capitalize\">{String(selected?.status ?? 'draft')}</div>\n                    <div className=\"text-xs text-muted-foreground\">\n                      {selected?.published_version ? `published v${selected.published_version}` : `current v${selected?.version ?? 1}`}\n                    </div>\n                  </div>\n                  <div className=\"mt-2 flex flex-wrap gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={requestReview}\n                      disabled={!selected?.id || !can(role, 'automation:request_review') || String(selected?.status) !== 'draft'}\n                    >\n                      Request review\n                    </Button>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={approveWorkflow}\n                      disabled={!selected?.id || !can(role, 'automation:approve') || !['in_review', 'approved'].includes(String(selected?.status))}\n                    >\n                      Approve ({approvalsCount}/{minApprovals})\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      onClick={publishWorkflow}\n                      disabled={!selected?.id || !can(role, 'automation:publish') || (!bypassApproval && (String(selected?.status) !== 'approved' || !hasApprovalThreshold))}\n                    >\n                      Publish\n                    </Button>\n                  </div>\n                  <p className=\"mt-2 text-xs text-muted-foreground\">\n                    Only <span className=\"font-medium\">published</span> workflows execute. Editing a published/in-review workflow moves it back to <span className=\"font-medium\">draft</span> on save.\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"mt-4 grid gap-4 sm:grid-cols-2\">\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium\">Pinned version</label>\n                <Select value={draftPinnedVersion} onValueChange={setDraftPinnedVersion}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Use latest\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"\">Use latest</SelectItem>\n                    {(versions ?? []).map((v) => (\n                      <SelectItem key={v.id} value={String(v.version)}>\n                        Pin v{v.version}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n                <p className=\"text-xs text-muted-foreground\">\n                  Pinning runs the selected historical snapshot (useful for safe rollouts).\n                </p>\n              </div>\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium\">Trigger (JSON)</label>\n                <Textarea value={draftTrigger} onChange={(e) => setDraftTrigger(e.target.value)} rows={6} />\n              </div>\n            </div>\n\n            <div className=\"mt-6\">\n              <Tabs value={activeTab} onValueChange={setActiveTab}>\n                <TabsList>\n                  <TabsTrigger value=\"visual\">Visual</TabsTrigger>\n                  <TabsTrigger value=\"json\">JSON</TabsTrigger>\n                </TabsList>\n\n                <TabsContent value=\"visual\" className=\"mt-4\">\n                  <WorkflowGraphEditor\n                    definitionJson={draftDefinition}\n                    onChangeDefinitionJson={setDraftDefinition}\n                  />\n                </TabsContent>\n\n                <TabsContent value=\"json\" className=\"mt-4\">\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center justify-between\">\n                      <label className=\"text-sm font-medium\">Definition (JSON)</label>\n                      <Select onValueChange={addStep}>\n                        <SelectTrigger className=\"w-[200px]\">\n                          <SelectValue placeholder=\"Quick add\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          {STEP_TYPES.map((t) => (\n                            <SelectItem key={t.value} value={t.value}>{t.label}</SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <Textarea value={draftDefinition} onChange={(e) => setDraftDefinition(e.target.value)} rows={14} />\n                    <p className=\"text-xs text-muted-foreground\">\n                      v2 supports condition steps with <code>on_true</code>/<code>on_false</code> edges. Templates like{' '}\n                      <code>{`{{event_metadata.thread_id}}`}</code> are resolved at runtime.\n                    </p>\n                  </div>\n                </TabsContent>\n              </Tabs>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Versions</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {!selected?.id && <div className=\"text-sm text-muted-foreground\">Select a workflow.</div>}\n            {selected?.id && !versions?.length && <div className=\"text-sm text-muted-foreground\">No versions yet.</div>}\n\n            <div className=\"space-y-2\">\n              {(versions ?? []).slice(0, 10).map((v) => (\n                <div key={v.id} className=\"rounded-md border p-3 text-sm\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"font-medium\">v{v.version}</div>\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => rollbackMutation.mutate(v)}\n                      disabled={rollbackMutation.isPending || !selected?.id}\n                    >\n                      Restore\n                    </Button>\n                  </div>\n                  <div className=\"mt-1 text-xs text-muted-foreground\">\n                    {v.created_at ? new Date(v.created_at).toLocaleString() : ''}\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            <p className=\"mt-4 text-xs text-muted-foreground\">\n              Restoring a version updates the live definition and auto-creates a new snapshot (audit-friendly).\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Publication audit</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {!selected?.id && <div className=\"text-sm text-muted-foreground\">Select a workflow.</div>}\n            {selected?.id && !audits?.length && <div className=\"text-sm text-muted-foreground\">No audit events yet.</div>}\n\n            <div className=\"space-y-2\">\n              {(audits ?? []).map((a) => (\n                <div key={a.id} className=\"rounded-md border p-3 text-sm\">\n                  <div className=\"flex items-center justify-between gap-2\">\n                    <div className=\"font-medium capitalize\">{String(a.action).replaceAll('_', ' ')}</div>\n                    <div className=\"text-xs text-muted-foreground\">{a.created_at ? new Date(a.created_at).toLocaleString() : ''}</div>\n                  </div>\n                  <div className=\"mt-1 text-xs text-muted-foreground\">\n                    v{a.from_version ?? '?'} → v{a.to_version ?? '?'}\n                  </div>\n                  {a.signature && (\n                    <div className=\"mt-2 break-all text-xs text-muted-foreground\">\n                      sig: {String(a.signature).slice(0, 24)}…\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"lg:col-span-4\">\n          <CardHeader>\n            <CardTitle>Dead letters</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {!selected?.id && <div className=\"text-sm text-muted-foreground\">Select a workflow to see dead letters.</div>}\n            {selected?.id && !deadLetters?.length && <div className=\"text-sm text-muted-foreground\">No dead letters.</div>}\n\n            <div className=\"space-y-2\">\n              {(deadLetters ?? []).map((d) => (\n                <div key={d.id} className=\"rounded-md border p-3 text-sm\">\n                  <div className=\"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between\">\n                    <div>\n                      <div className=\"font-medium\">{d.step_key}</div>\n                      <div className=\"text-xs text-muted-foreground\">\n                        {d.created_at ? new Date(d.created_at).toLocaleString() : ''}\n                        {d.run_id ? ` • run ${d.run_id}` : ''}\n                      </div>\n                    </div>\n                    <div className=\"text-xs text-muted-foreground\">\n                      {(d.metadata && d.metadata.attempts) ? `attempts: ${d.metadata.attempts}` : ''}\n                    </div>\n                  </div>\n                  {d.error && <div className=\"mt-2 text-xs\">{d.error}</div>}\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"lg:col-span-4\">\n          <CardHeader>\n            <CardTitle>Recent runs</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {!selected?.id && <div className=\"text-sm text-muted-foreground\">Select a workflow to see runs.</div>}\n            {selected?.id && !runs?.length && <div className=\"text-sm text-muted-foreground\">No runs yet.</div>}\n\n            <div className=\"space-y-2\">\n              {(runs ?? []).map((r) => (\n                <div key={r.id} className=\"rounded-md border p-3 text-sm\">\n                  <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\n                    <div>\n                      <div className=\"font-medium\">{r.status}</div>\n                      <div className=\"text-xs text-muted-foreground\">\n                        {r.started_at ? new Date(r.started_at).toLocaleString() : ''}\n                        {r.finished_at ? ` → ${new Date(r.finished_at).toLocaleString()}` : ''}\n                      </div>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Button size=\"sm\" variant=\"outline\" onClick={() => openRun(r)}>View</Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"secondary\"\n                        onClick={() => replayRun(r)}\n                        disabled={!can(role, 'automation:replay')}\n                      >\n                        Replay\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Dialog open={runDialog.open} onOpenChange={(open) => setRunDialog((d) => ({ ...d, open }))}>\n        <DialogContent className=\"max-w-3xl\">\n          <DialogHeader>\n            <DialogTitle>Workflow run</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            {runDialog.run && (\n              <div className=\"rounded-md border p-3 text-sm\">\n                <div className=\"font-medium\">{runDialog.run.id}</div>\n                <div className=\"text-xs text-muted-foreground\">Status: {runDialog.run.status}</div>\n                <div className=\"mt-2 grid gap-3 sm:grid-cols-2\">\n                  <div>\n                    <div className=\"text-xs font-medium mb-1\">Input</div>\n                    <Textarea value={JSON.stringify(runDialog.run.input || {}, null, 2)} readOnly rows={10} />\n                  </div>\n                  <div>\n                    <div className=\"text-xs font-medium mb-1\">Output</div>\n                    <Textarea value={JSON.stringify(runDialog.run.output || {}, null, 2)} readOnly rows={10} />\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div>\n              <div className=\"text-sm font-medium mb-2\">Steps</div>\n              {!runDialog.steps?.length && <div className=\"text-sm text-muted-foreground\">No step rows.</div>}\n              <div className=\"space-y-2\">\n                {(runDialog.steps || []).map((s) => (\n                  <div key={s.id} className=\"rounded-md border p-3 text-sm\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"font-medium\">{s.step_key}</div>\n                      <div className=\"text-xs text-muted-foreground\">{s.status}</div>\n                    </div>\n                    <div className=\"mt-2 grid gap-3 sm:grid-cols-2\">\n                      <div>\n                        <div className=\"text-xs font-medium mb-1\">Input</div>\n                        <Textarea value={JSON.stringify(s.input || {}, null, 2)} readOnly rows={6} />\n                      </div>\n                      <div>\n                        <div className=\"text-xs font-medium mb-1\">Output</div>\n                        <Textarea value={JSON.stringify(s.output || {}, null, 2)} readOnly rows={6} />\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n"],"names":["STEP_TYPES","OPS","REQUIRED_ACTIONS","normalize","definition","d","normalized","s","idx","_a","safeJsonParse","str","FieldMappingEditor","value","onChange","placeholderKey","placeholderValue","rows","useMemo","k","v","draft","setDraft","useState","useEffect","commit","nextRows","out","r","key","jsxs","jsx","Input","e","next","Button","WorkflowGraphEditor","definitionJson","onChangeDefinitionJson","initialDef","model","setModel","stepIds","updateModel","addStep","type","id","step","updateStep","patch","nextSteps","removeStep","Card","CardHeader","CardTitle","CardContent","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","t","a","_b","_c","o","_d","Textarea","_e","fields","_f","DEFAULT_TRIGGER","DEFAULT_DEF","safeJson","fallback","AdminWorkflows","scope","useTenantScope","districtId","schoolId","role","workflows","refetch","useQuery","query","data","error","graphql","selectedId","setSelectedId","selected","w","versions","tenantSettings","minApprovals","best","settings","v1","v2","approvals","refetchApprovals","approvalsCount","deadLetters","refetchDeadLetters","hasApprovalThreshold","bypassApproval","draftName","setDraftName","draftTrigger","setDraftTrigger","draftDefinition","setDraftDefinition","draftPinnedVersion","setDraftPinnedVersion","activeTab","setActiveTab","runDialog","setRunDialog","audits","refetchAudits","runs","refetchRuns","openRun","run","replayRun","can","eventName","meta","trackEvent","requestReview","nhost","approveWorkflow","publishWorkflow","saveMutation","useMutation","trigger","pinned_version","mutation","forceDraft","insert","rollbackMutation","versionRow","createNew","def","steps","base","simulateTrigger","name","Tabs","TabsList","TabsTrigger","TabsContent","Dialog","open","DialogContent","DialogHeader","DialogTitle"],"mappings":"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"}