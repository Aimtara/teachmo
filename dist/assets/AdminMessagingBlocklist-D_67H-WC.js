import{r as a,j as e}from"./index-CXW08ga6.js";import"./entities-CLCXHT4z.js";import{a as p,b as y}from"./messagingModeration-CT9RWVNj.js";function b(){const[l,n]=a.useState([]),[x,d]=a.useState(!0),[o,r]=a.useState(""),[m,c]=a.useState({}),i=async()=>{d(!0);try{const t=await p();n(Array.isArray(t)?t:[]),r("")}catch(t){console.error(t),r((t==null?void 0:t.message)??"Failed to load blocklist")}finally{d(!1)}};a.useEffect(()=>{i()},[]);const g=async t=>{if(t){c(s=>({...s,[t]:!0}));try{await y({blockId:t}),await i()}catch(s){console.error(s),r((s==null?void 0:s.message)??"Unable to lift block")}finally{c(s=>({...s,[t]:!1}))}}};return e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Messaging moderation"}),e.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Messaging Blocklist"}),e.jsx("p",{className:"text-sm text-gray-600",children:"See who is blocked from messaging within your school."})]}),e.jsx("button",{type:"button",onClick:i,className:"rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm font-medium text-gray-800 shadow-sm hover:bg-gray-50",children:"Refresh"})]}),o&&e.jsx("div",{className:"rounded-lg border border-red-100 bg-red-50 p-4 text-sm text-red-700",role:"alert",children:o}),x?e.jsx("p",{className:"text-gray-600",children:"Loading blocklistâ€¦"}):l.length===0?e.jsxs("div",{className:"rounded-lg border border-gray-100 bg-white p-6 shadow-sm",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"No blocked users"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No active messaging blocks for your school."})]}):e.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-100 bg-white shadow-sm",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-gray-600",children:"User"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-gray-600",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-gray-600",children:"Reason"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-gray-600",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-800",children:t.blocked_user_id}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-800 capitalize",children:t.status}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-800",children:t.reason||"Not provided"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-800",children:e.jsx("button",{type:"button",disabled:m[t.id]||t.status==="lifted",onClick:()=>g(t.id),className:"rounded border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-semibold text-emerald-800 hover:bg-emerald-100 disabled:opacity-60",children:t.status==="lifted"?"Lifted":"Lift block"})})]},t.id))})]})})]})}export{b as default};
//# sourceMappingURL=AdminMessagingBlocklist-D_67H-WC.js.map
