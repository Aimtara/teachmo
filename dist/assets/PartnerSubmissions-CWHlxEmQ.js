import{r as o,v as x,b as y,j as s,e as l}from"./index-CXW08ga6.js";const j=["event","resource","offer"];function g(){const[m,h]=o.useState([]),[u,p]=o.useState("event"),[i,a]=o.useState({title:"",description:""}),d=x(),{data:e}=y(),r=o.useMemo(()=>{const t={};return d&&(t["x-user-id"]=d),e!=null&&e.districtId&&(t["x-district-id"]=e.districtId),e!=null&&e.schoolId&&(t["x-school-id"]=e.schoolId),t},[d,e==null?void 0:e.districtId,e==null?void 0:e.schoolId]),c=async()=>{const t=await fetch(`${l}/submissions`,{headers:r}).then(n=>n.json());h(t)};o.useEffect(()=>{c()},[r]);const f=async t=>{t.preventDefault(),(await fetch(`${l}/submissions`,{method:"POST",headers:{"Content-Type":"application/json",...r},body:JSON.stringify({...i,type:u})})).ok&&(a({title:"",description:""}),c())},b=async t=>{const n=window.prompt("Update submission title");n&&(await fetch(`${l}/submissions/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",...r},body:JSON.stringify({title:n})}),c())};return s.jsxs("div",{children:[s.jsx("h1",{children:"Submissions"}),s.jsx("div",{style:{marginBottom:"1rem"},children:j.map(t=>s.jsx("button",{onClick:()=>p(t),style:{marginRight:"0.5rem",fontWeight:u===t?700:400},children:t},t))}),s.jsxs("form",{onSubmit:f,style:{marginBottom:"1rem"},children:[s.jsx("input",{placeholder:"Title",value:i.title,onChange:t=>a({...i,title:t.target.value})}),s.jsx("input",{placeholder:"Description",value:i.description,onChange:t=>a({...i,description:t.target.value})}),s.jsx("button",{type:"submit",children:"Submit"})]}),s.jsx("ul",{children:m.map(t=>s.jsxs("li",{children:[t.title," (",t.type,")",s.jsx("button",{onClick:()=>b(t.id),style:{marginLeft:"0.5rem"},children:"Edit"})]},t.id))})]})}export{g as default};
//# sourceMappingURL=PartnerSubmissions-CWHlxEmQ.js.map
