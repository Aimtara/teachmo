{"version":3,"mappings":"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","names":["__iconNode","ArrowLeft","createLucideIcon","Compass","Search","ROUTE_ENTRIES","ROUTE_MAP","name","path","formatLabel","value","char","resolveFromRoutes","segment","normalized","direct","normalizedName","normalizedPath","buildItems","items","segments","pathname","parts","part","index","Breadcrumbs","location","useLocation","crumbs","jsx","jsxs","Link","Home","item","isLast","ChevronRight","PropTypes","navigateToDashboard","user","navigate","role","normalizeRole","_a","destination","getDefaultPathForRole","PersonalizedDiscoverFeed","React","__vitePreload","ActivitiesTab","EventsTab","LibraryTab","UnifiedDiscover","useNavigate","useUserData","searchParams","setSearchParams","useSearchParams","currentTab","handleTabChange","TabLoading","Skeleton","Button","Tabs","TabsList","TabsTrigger","Sparkles","Calendar","BookOpen","Suspense","TabsContent"],"ignoreList":[0,1,2],"sources":["../../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../node_modules/lucide-react/dist/esm/icons/compass.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../src/components/shared/Breadcrumbs.jsx","../../src/components/utils/navigationHelpers.jsx","../../src/pages/UnifiedDiscover.jsx"],"sourcesContent":["/**\n * @license lucide-react v0.475.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n];\nconst ArrowLeft = createLucideIcon(\"ArrowLeft\", __iconNode);\n\nexport { __iconNode, ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.475.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z\",\n      key: \"9ktpf1\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n];\nconst Compass = createLucideIcon(\"Compass\", __iconNode);\n\nexport { __iconNode, Compass as default };\n//# sourceMappingURL=compass.js.map\n","/**\n * @license lucide-react v0.475.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"path\", { d: \"m21 21-4.3-4.3\", key: \"1qie3q\" }]\n];\nconst Search = createLucideIcon(\"Search\", __iconNode);\n\nexport { __iconNode, Search as default };\n//# sourceMappingURL=search.js.map\n","import PropTypes from 'prop-types';\nimport { Link, useLocation } from 'react-router-dom';\nimport { ChevronRight, Home } from 'lucide-react';\nimport { ROUTE_MAP } from '@/config/navigation';\n\nconst ROUTE_ENTRIES = Object.entries(ROUTE_MAP || {}).map(([name, path]) => ({\n  name,\n  path,\n  normalizedName: name?.toLowerCase(),\n  normalizedPath: path?.toLowerCase()\n}));\n\nconst formatLabel = (value = '') =>\n  value\n    .replace(/^\\//, '')\n    .replace(/-/g, ' ')\n    .replace(/\\b\\w/g, (char) => char.toUpperCase());\n\nconst resolveFromRoutes = (segment = '') => {\n  const normalized = segment.toLowerCase();\n  const direct = ROUTE_ENTRIES.find(\n    ({ normalizedName, normalizedPath }) =>\n      normalizedName === normalized || normalizedPath === normalized || normalizedPath === `/${normalized}`\n  );\n\n  if (direct) {\n    return {\n      label: formatLabel(direct.name),\n      href: direct.path\n    };\n  }\n\n  return {\n    label: formatLabel(segment),\n    href: `/${segment.replace(/^\\//, '')}`\n  };\n};\n\nconst buildItems = (items, segments, pathname) => {\n  if (Array.isArray(items) && items.length > 0) return items;\n  if (Array.isArray(segments) && segments.length > 0) {\n    return segments.map((segment) => (typeof segment === 'string' ? resolveFromRoutes(segment) : segment));\n  }\n\n  if (pathname === '/') return [];\n\n  const parts = pathname.split('/').filter(Boolean);\n  return parts.map((part, index) => ({\n    label: formatLabel(part),\n    href: `/${parts.slice(0, index + 1).join('/')}`\n  }));\n};\n\nexport default function Breadcrumbs({ items = [], segments = [] }) {\n  const location = useLocation();\n  const crumbs = buildItems(items, segments, location.pathname);\n\n  return (\n    <nav aria-label=\"Breadcrumb\" className=\"flex items-center gap-2 text-sm text-gray-600\">\n      <ol className=\"flex items-center gap-1\">\n        <li className=\"flex items-center gap-1\">\n          <Link to=\"/\" className=\"flex items-center gap-1 text-gray-700 hover:text-gray-900\">\n            <Home className=\"h-4 w-4\" />\n            <span className=\"sr-only\">Home</span>\n          </Link>\n        </li>\n        {crumbs.map((item, index) => {\n          const isLast = index === crumbs.length - 1;\n          return (\n            <li key={item.href || item.label} className=\"flex items-center gap-1\">\n              <ChevronRight className=\"h-3 w-3 text-gray-400\" />\n              {isLast ? (\n                <span className=\"text-gray-500\">{item.label}</span>\n              ) : (\n                <Link to={item.href || '#'} className=\"text-gray-700 hover:text-gray-900\">\n                  {item.label}\n                </Link>\n              )}\n            </li>\n          );\n        })}\n      </ol>\n    </nav>\n  );\n}\n\nBreadcrumbs.propTypes = {\n  items: PropTypes.arrayOf(\n    PropTypes.shape({\n      label: PropTypes.string.isRequired,\n      href: PropTypes.string\n    })\n  ),\n  segments: PropTypes.arrayOf(PropTypes.string)\n};\n","import { getDefaultPathForRole, normalizeRole } from '@/config/rbac';\n\nexport function navigateToDashboard(user, navigate) {\n  if (typeof navigate !== 'function') return;\n\n  const role = normalizeRole(\n    user?.preferred_active_role || user?.role || user?.metadata?.role || user?.defaultRole\n  );\n\n  const destination = getDefaultPathForRole(role) || '/dashboard';\n  navigate(user ? destination : '/login', { replace: true });\n}\n\nexport default {\n  navigateToDashboard\n};\n","import React, { Suspense } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { useUserData } from '@nhost/react';\nimport { ArrowLeft, Search, Sparkles, Compass, Calendar, BookOpen } from 'lucide-react';\nimport Breadcrumbs from '@/components/shared/Breadcrumbs';\nimport { navigateToDashboard } from '@/components/utils/navigationHelpers';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from '@/components/ui/tabs';\nimport { Skeleton } from '@/components/ui/skeleton';\n\nconst PersonalizedDiscoverFeed = React.lazy(() => import('@/components/discover/PersonalizedDiscoverFeed'));\nconst ActivitiesTab = React.lazy(() => import('@/components/discover/ActivitiesTab'));\nconst EventsTab = React.lazy(() => import('@/components/discover/EventsTab'));\nconst LibraryTab = React.lazy(() => import('@/components/discover/LibraryTab'));\n\nexport default function UnifiedDiscover() {\n  const navigate = useNavigate();\n  const user = useUserData();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const currentTab = searchParams.get('tab') || 'foryou';\n\n  const handleTabChange = (value) => {\n    setSearchParams({ tab: value });\n  };\n\n  const TabLoading = () => (\n    <div className=\"space-y-4 mt-4\">\n      <Skeleton className=\"h-32 w-full rounded-lg\" />\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Skeleton className=\"h-48 w-full rounded-lg\" />\n        <Skeleton className=\"h-48 w-full rounded-lg\" />\n        <Skeleton className=\"h-48 w-full rounded-lg\" />\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"p-6 space-y-6 min-h-screen bg-gray-50/50\">\n      <header className=\"flex flex-wrap items-start justify-between gap-4\">\n        <div className=\"space-y-2\">\n          <Breadcrumbs segments={['UnifiedDiscover']} />\n          <h1 className=\"text-3xl font-bold text-gray-900 tracking-tight\">Discover</h1>\n          <p className=\"text-gray-600 max-w-2xl\">\n            Explore personalized resources, activities, and events for your classroom and family.\n          </p>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <Button variant=\"ghost\" className=\"gap-2\" onClick={() => navigateToDashboard(user, navigate)}>\n            <ArrowLeft className=\"h-4 w-4\" />\n            Dashboard\n          </Button>\n          <Button variant=\"outline\" className=\"gap-2\" onClick={() => navigate('/discover?tab=library&search=true')}>\n            <Search className=\"h-4 w-4\" />\n            Global Search\n          </Button>\n        </div>\n      </header>\n\n      <Tabs value={currentTab} onValueChange={handleTabChange} className=\"w-full space-y-6\">\n        <div className=\"border-b border-gray-200\">\n          <TabsList className=\"bg-transparent h-auto p-0 space-x-6\">\n            <TabsTrigger\n              value=\"foryou\"\n              className=\"data-[state=active]:border-b-2 data-[state=active]:border-blue-600 data-[state=active]:shadow-none rounded-none px-2 py-3 bg-transparent hover:bg-transparent\"\n            >\n              <Sparkles className=\"w-4 h-4 mr-2\" />\n              For You\n            </TabsTrigger>\n            <TabsTrigger\n              value=\"activities\"\n              className=\"data-[state=active]:border-b-2 data-[state=active]:border-blue-600 data-[state=active]:shadow-none rounded-none px-2 py-3 bg-transparent hover:bg-transparent\"\n            >\n              <Compass className=\"w-4 h-4 mr-2\" />\n              Activities\n            </TabsTrigger>\n            <TabsTrigger\n              value=\"events\"\n              className=\"data-[state=active]:border-b-2 data-[state=active]:border-blue-600 data-[state=active]:shadow-none rounded-none px-2 py-3 bg-transparent hover:bg-transparent\"\n            >\n              <Calendar className=\"w-4 h-4 mr-2\" />\n              Events\n            </TabsTrigger>\n            <TabsTrigger\n              value=\"library\"\n              className=\"data-[state=active]:border-b-2 data-[state=active]:border-blue-600 data-[state=active]:shadow-none rounded-none px-2 py-3 bg-transparent hover:bg-transparent\"\n            >\n              <BookOpen className=\"w-4 h-4 mr-2\" />\n              Library\n            </TabsTrigger>\n          </TabsList>\n        </div>\n\n        <div className=\"min-h-[500px]\">\n          <Suspense fallback={<TabLoading />}>\n            <TabsContent value=\"foryou\" className=\"mt-0 focus-visible:outline-none\">\n              <PersonalizedDiscoverFeed />\n            </TabsContent>\n            <TabsContent value=\"activities\" className=\"mt-0 focus-visible:outline-none\">\n              <ActivitiesTab />\n            </TabsContent>\n            <TabsContent value=\"events\" className=\"mt-0 focus-visible:outline-none\">\n              <EventsTab />\n            </TabsContent>\n            <TabsContent value=\"library\" className=\"mt-0 focus-visible:outline-none\">\n              <LibraryTab />\n            </TabsContent>\n          </Suspense>\n        </div>\n      </Tabs>\n    </div>\n  );\n}\n"],"file":"assets/Discover-D4rWGRi3.js"}