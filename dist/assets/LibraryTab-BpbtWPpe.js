import{c as L,r as c,j as e,C as V,i as G,B as w,o as H,af as J,L as P,y as F,a9 as K,ai as O,aC as Q,aD as Y}from"./index-CXW08ga6.js";import{e as ee}from"./entities-CLCXHT4z.js";import"./messaging-cshogndc.js";import{S as te,u as se,a as ae}from"./useDebounce-ABn6640d.js";import{I as q}from"./input-DQ0nv64R.js";import{L as le,E as ie,a as re}from"./LoadingStates-vF0mXKmr.js";import{B as y}from"./badge-Dl3t65au.js";import{S as ne}from"./skeleton-Tb_I7mPl.js";import{U}from"./users-CCMiawQ7.js";import{B as ce}from"./book-open-Bot6lLRm.js";import{L as oe}from"./lock-rXvrP2yC.js";import{B as de,S as me}from"./sliders-horizontal-CWkCENw3.js";import{C as xe}from"./clock-Bt1pb8u7.js";import{E as he}from"./eye-BSla1LWL.js";import{E as ue}from"./external-link-Duz6MPfX.js";import{T as pe,a as ge,b as z,c as $}from"./tabs-D--5WbS4.js";import{D as fe,a as be}from"./dialog-DNeHJfP_.js";import{S as A,a as B,b as D,c as M,d as j}from"./select-CevpuT8Q.js";import{S as I}from"./Discover-D4rWGRi3.js";import"./alert-KdgI_V-I.js";import"./circle-alert-CzGZOM4y.js";import"./loader-circle-fFoU9KsL.js";import"./cn-2dOUpm6k.js";import"./chevron-right-CPiZDxOX.js";import"./sparkles-BjNBUl13.js";import"./calendar-DD8JTmH3.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]],je=L("BookmarkCheck",ye);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],X=L("FileText",ve);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],we=L("Play",Ne);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],ke=L("Video",Se),Ce=({src:t,alt:r,className:o,skeletonClassName:s})=>{const[h,n]=c.useState(!1),[m,l]=c.useState(!1),i=c.useRef();return c.useEffect(()=>{const d=new IntersectionObserver(([p])=>{p.isIntersecting&&(l(!0),d.disconnect())},{rootMargin:"100px"});return i.current&&d.observe(i.current),()=>{i.current&&d.unobserve(i.current)}},[]),e.jsxs("div",{ref:i,className:`relative ${o}`,children:[!h&&e.jsx(ne,{className:`absolute inset-0 w-full h-full ${s}`}),m&&e.jsx("img",{src:t,alt:r,onLoad:()=>n(!0),className:`transition-opacity duration-300 ${h?"opacity-100":"opacity-0"}`,style:{width:"100%",height:"100%",objectFit:"cover"}})]})},_e={article:X,video:ke,guide:ce,research:U},Te={communication:"bg-blue-100 text-blue-800",discipline:"bg-red-100 text-red-800",development:"bg-green-100 text-green-800",education:"bg-purple-100 text-purple-800",health:"bg-pink-100 text-pink-800",creativity:"bg-orange-100 text-orange-800",social_skills:"bg-indigo-100 text-indigo-800",emotional_intelligence:"bg-teal-100 text-teal-800",independence:"bg-yellow-100 text-yellow-800",confidence:"bg-emerald-100 text-emerald-800",safety:"bg-gray-100 text-gray-800",nutrition:"bg-lime-100 text-lime-800"},Le={beginner:"bg-green-50 text-green-700 border-green-200",intermediate:"bg-yellow-50 text-yellow-700 border-yellow-200",advanced:"bg-red-50 text-red-700 border-red-200"};function Re({resource:t,isBookmarked:r,onBookmark:o,onSelect:s}){var p;const h=_e[t.type]||X,n=g=>{g.preventDefault(),g.stopPropagation(),o(r)},m=()=>{s&&s()},l=t.type==="video"&&t.video_url,i=e.jsxs(V,{className:"flex flex-col h-full overflow-hidden transition-all duration-300 cursor-pointer",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[t.thumbnail_url&&e.jsx(Ce,{src:t.thumbnail_url,alt:t.title,className:"w-full h-40 object-cover",skeletonClassName:"w-full h-40 bg-gray-200"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[t.is_sponsored&&e.jsxs(y,{className:"bg-yellow-100 text-yellow-800",children:[e.jsx(te,{className:"w-3 h-3 mr-1"}),"Sponsored"]}),t.is_premium&&e.jsxs(y,{className:"bg-blue-100 text-blue-800",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),"Premium"]})]})]}),e.jsxs(G,{className:"pb-4 pt-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5",style:{color:"var(--teachmo-sage)"}}),e.jsx(y,{className:Te[t.category]||"bg-gray-100 text-gray-800",children:(p=t.category)==null?void 0:p.replace(/_/g," ")})]}),e.jsx(w,{variant:"ghost",size:"sm",onClick:n,className:"text-gray-400 hover:text-gray-600 p-1 z-10",children:r?e.jsx(je,{className:"w-5 h-5 text-blue-600"}):e.jsx(de,{className:"w-5 h-5"})})]}),e.jsx("h3",{className:"font-bold text-lg text-gray-900 leading-tight mb-2",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[t.duration&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("span",{children:t.duration})]}),t.age_range&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsxs("span",{children:["Ages ",t.age_range.min_age,"-",t.age_range.max_age]})]})]})]}),e.jsxs(H,{className:"flex-grow px-4 pb-4",children:[e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-3",children:t.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[t.difficulty&&e.jsx(y,{variant:"outline",className:Le[t.difficulty],children:t.difficulty}),t.author&&e.jsx(y,{variant:"outline",className:"text-xs",children:t.author})]}),t.tags&&t.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[t.tags.slice(0,3).map((g,x)=>e.jsx(y,{variant:"outline",className:"text-xs bg-gray-50",children:g},x)),t.tags.length>3&&e.jsxs(y,{variant:"outline",className:"text-xs bg-gray-50",children:["+",t.tags.length-3," more"]})]})]}),e.jsx(J,{className:"mt-auto px-4 pt-4 border-t border-gray-100 bg-white",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{children:t.is_premium?"Premium only":l?"Click to watch":"Click to read"})]}),t.type==="video"&&!t.is_premium&&e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-semibold",children:[e.jsx(we,{className:"w-4 h-4"}),"Watch Now"]}),l&&e.jsx(ue,{className:"w-4 h-4 text-gray-400"})]})})]});let d;if(t.is_premium)d=e.jsx(P,{to:F("Upgrade"),className:"h-full flex",children:i});else if(l)d=e.jsx("a",{href:t.video_url,target:"_blank",rel:"noopener noreferrer",className:"h-full flex",onClick:m,children:i});else if(t&&t.id){const g=F("ResourceDetail")+`?id=${t.id}`;d=e.jsx(P,{to:g,className:"h-full flex",onClick:m,children:i})}else d=e.jsx("div",{className:"h-full flex cursor-not-allowed",title:"Resource details not yet available",children:i});return e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},whileHover:{y:-4,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},transition:{duration:.2},className:`h-full ${t.is_premium?"opacity-80 hover:opacity-100":""}`,children:d})}const Ee=["communication","discipline","development","education","health","creativity","social_skills","emotional_intelligence","independence","confidence","safety","nutrition"],Ie=["article","video","guide","research"],Pe=["beginner","intermediate","advanced"],E=({title:t,options:r,selected:o,onSelect:s,multiSelect:h=!1})=>e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-700 mb-2",children:t}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(n=>{const m=h?(o||[]).includes(n):o===n;return e.jsx(w,{variant:m?"default":"outline",size:"sm",onClick:()=>s(n),className:`capitalize transition-all duration-200 rounded-full h-8 text-xs ${m?"bg-blue-600 text-white shadow-md":"bg-white hover:bg-gray-100"}`,children:n.replace(/_/g," ")},n)})})]});function Fe({currentFilters:t={},onFilterChange:r,onReset:o}){const s={categories:[],types:[],difficulty:null,...t},h=i=>{const d=(s.categories||[]).includes(i)?s.categories.filter(p=>p!==i):[...s.categories||[],i];r("categories",d)},n=i=>{const d=(s.types||[]).includes(i)?s.types.filter(p=>p!==i):[...s.types||[],i];r("types",d)},m=i=>{const d=s.difficulty===i?null:i;r("difficulty",d)},l=(s.categories||[]).length>0||(s.types||[]).length>0||s.difficulty;return e.jsx(V,{className:"mb-6 bg-white/70 backdrop-blur-sm border-0 shadow-md",children:e.jsxs(H,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-5 h-5 text-gray-700"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Filter Resources"})]}),l&&e.jsxs(w,{variant:"ghost",size:"sm",onClick:o,className:"text-sm text-blue-600 hover:text-blue-700",children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),"Reset All"]})]}),e.jsx(E,{title:"Categories",options:Ee,selected:s.categories,onSelect:h,multiSelect:!0}),e.jsx(E,{title:"Content Types",options:Ie,selected:s.types,onSelect:n,multiSelect:!0}),e.jsx(E,{title:"Difficulty",options:Pe,selected:s.difficulty,onSelect:m}),l&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active Filters:"})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(s.categories||[]).map(i=>e.jsx(y,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:i.replace(/_/g," ")},i)),(s.types||[]).map(i=>e.jsx(y,{variant:"secondary",className:"bg-purple-100 text-purple-800",children:i},i)),s.difficulty&&e.jsx(y,{variant:"secondary",className:"bg-green-100 text-green-800",children:s.difficulty})]})]})]})})}function ze({id:t,topic:r,thumbnail_url:o,duration_s:s,onOpen:h}){return e.jsxs("button",{onClick:()=>h(t),className:"flex flex-col w-28 mr-3 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-xl",children:[e.jsxs("div",{className:"aspect-[9/16] w-28 bg-gray-200 rounded-xl overflow-hidden shadow-md relative",children:[o?e.jsx("img",{src:o,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-semibold",children:"SHORT"})}),s&&e.jsxs("div",{className:"absolute bottom-1 right-1 bg-black/70 text-white text-xs px-1 rounded",children:[Math.floor(s/60),":",(s%60).toString().padStart(2,"0")]})]}),e.jsx("span",{className:"mt-2 text-xs line-clamp-2 text-left text-gray-700 leading-tight",children:r})]})}const $e=t=>{const r=Math.floor(t/60).toString().padStart(2,"0"),o=Math.floor(t%60).toString().padStart(2,"0");return`${r}:${o}`};function Ae({src:t,poster:r,vttCaptionUrl:o,autoPlay:s=!0,onEnded:h,shortId:n}){const m=c.useRef(null),[l,i]=c.useState(!1),[d,p]=c.useState(!0),[g,x]=c.useState(1),[f,T]=c.useState({current:0,total:0}),[S,u]=c.useState(!!o),[b,k]=c.useState(!1);c.useEffect(()=>{const a=m.current;if(a)return a.src=t,a.oncanplay=()=>i(!0),a.onloadedmetadata=()=>{T(v=>({...v,total:a.duration}))},()=>{a&&(a.src="")}},[t]),c.useEffect(()=>{const a=m.current;if(!a)return;const v=()=>{T({current:a.currentTime,total:a.duration||0})},C=()=>k(!0),R=()=>k(!1),N=()=>{k(!1),N==null||N()};return a.addEventListener("timeupdate",v),a.addEventListener("play",C),a.addEventListener("pause",R),a.addEventListener("ended",N),()=>{a.removeEventListener("timeupdate",v),a.removeEventListener("play",C),a.removeEventListener("pause",R),a.removeEventListener("ended",N)}},[h]),c.useEffect(()=>{const a=m.current;a&&(a.playbackRate=g)},[g]),c.useEffect(()=>{const a=m.current;a&&(a.muted=d)},[d]);const W=()=>{const a=m.current;a&&(a.paused?a.play():a.pause())},Z=a=>{const v=m.current;if(!v)return;const C=a.currentTarget.getBoundingClientRect(),N=(a.clientX-C.left)/C.width*v.duration;v.currentTime=N};return e.jsxs("div",{className:"relative h-[80vh] w-full max-w-[420px] mx-auto rounded-2xl overflow-hidden shadow-xl bg-black",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx("video",{ref:m,className:"h-full w-full object-cover",playsInline:!0,autoPlay:s,muted:d,poster:r,"aria-label":"Teachmo Short video",children:o&&e.jsx("track",{label:"English",kind:"subtitles",srcLang:"en",src:o,default:S})})}),e.jsxs("div",{className:"absolute top-2 left-2 flex gap-2",children:[e.jsx("span",{className:"text-xs bg-white/80 text-gray-900 px-2 py-1 rounded",children:"SHORT"}),e.jsx("span",{className:"text-xs bg-white/60 text-gray-900 px-2 py-1 rounded",children:$e(f.total||60)})]}),e.jsxs("div",{className:"absolute bottom-0 inset-x-0 p-3 bg-gradient-to-t from-black/70 to-transparent text-white",children:[e.jsx("div",{className:"h-1 w-full bg-white/30 rounded cursor-pointer mb-3",onClick:Z,children:e.jsx("div",{className:"h-1 bg-white rounded transition-all",style:{width:f.total?`${f.current/f.total*100}%`:"0%"}})}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("button",{onClick:W,className:"px-3 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors","aria-label":b?"Pause":"Play",children:b?"â¸":"â–¶"}),e.jsx("button",{onClick:()=>p(a=>!a),className:"px-3 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors","aria-pressed":d,children:d?"ðŸ”‡":"ðŸ”Š"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:"Speed"}),e.jsxs("select",{value:g,onChange:a=>x(parseFloat(a.target.value)),className:"bg-white/20 rounded px-2 py-1 text-xs",children:[e.jsx("option",{value:.75,children:"0.75Ã—"}),e.jsx("option",{value:1,children:"1Ã—"}),e.jsx("option",{value:1.25,children:"1.25Ã—"}),e.jsx("option",{value:1.5,children:"1.5Ã—"})]})]}),o&&e.jsxs("button",{onClick:()=>u(a=>!a),className:"px-3 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:["CC ",S?"On":"Off"]})]})]}),!l&&e.jsx("div",{className:"absolute inset-0 grid place-items-center text-white/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-white/30 border-t-white rounded-full mx-auto mb-2"}),"Loading..."]})})]})}function Be({shortId:t}){const[r,o]=c.useState({helpful:null,tried:null}),[s,h]=c.useState(!1),n=async m=>{if(!s){h(!0);try{const l={...r,...m};o(l),await Q({endpoint:"feedback",shortId:t,body:l})}catch(l){console.error("Error sending feedback:",l),o(r)}finally{h(!1)}}};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{variant:r.helpful===!0?"default":"outline",size:"sm",onClick:()=>n({helpful:!0}),disabled:s,className:r.helpful===!0?"bg-green-600 hover:bg-green-700":"",children:"ðŸ‘ Helpful"}),e.jsx(w,{variant:r.helpful===!1?"destructive":"outline",size:"sm",onClick:()=>n({helpful:!1}),disabled:s,children:"ðŸ‘Ž Not really"}),e.jsx(w,{variant:r.tried===!0?"default":"outline",size:"sm",onClick:()=>n({tried:!0}),disabled:s,className:r.tried===!0?"bg-indigo-600 hover:bg-indigo-700":"",children:"âœ… Tried it"})]})}function _({childId:t,topic:r,title:o="Recommended Shorts"}){const[s,h]=c.useState([]),[n,m]=c.useState(null),[l,i]=c.useState(null),[d,p]=c.useState(!0);c.useEffect(()=>{g()},[t,r]);const g=async()=>{try{p(!0);const x=new URLSearchParams;t&&x.set("childId",t),r&&x.set("topic",r),x.set("limit","12");const{data:f}=await Y({query:x.toString()});h(f||[])}catch(x){console.error("Error loading shorts recommendations:",x),h([])}finally{p(!1)}};return c.useEffect(()=>{if(!n){i(null);return}const x=s.find(f=>f.id===n);i(x)},[n,s]),d?e.jsxs("section",{className:"mt-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("h3",{className:"text-sm font-semibold",children:o})}),e.jsx("div",{className:"flex overflow-x-auto pb-2",children:[1,2,3,4].map(x=>e.jsxs("div",{className:"w-28 mr-3",children:[e.jsx("div",{className:"aspect-[9/16] w-28 bg-gray-200 rounded-xl animate-pulse"}),e.jsx("div",{className:"mt-2 h-8 bg-gray-200 rounded animate-pulse"})]},x))})]}):s.length===0?null:e.jsxs("section",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold",children:o}),e.jsx("a",{href:"/discover?tab=library&type=short",className:"text-xs text-blue-600 hover:text-blue-800",children:"See all"})]}),e.jsx("div",{className:"flex overflow-x-auto pb-2 scrollbar-hide",children:s.map(x=>e.jsx(ze,{id:x.id,topic:x.topic,thumbnail_url:x.thumbnail_url,duration_s:x.duration_s,onOpen:m},x.id))}),e.jsx(fe,{open:!!l,onOpenChange:()=>m(null),children:e.jsx(be,{className:"max-w-md p-0 overflow-hidden",children:l&&e.jsxs("div",{className:"relative",children:[e.jsx(w,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10 bg-black/20 hover:bg-black/40 text-white rounded-full",onClick:()=>m(null),children:e.jsx(O,{className:"w-4 h-4"})}),e.jsx(Ae,{shortId:l.id,src:l.hls_url||l.mp4_url||"/api/placeholder-video.mp4",poster:l.thumbnail_url,vttCaptionUrl:l.captions_vtt_url}),e.jsxs("div",{className:"p-4 bg-white",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:l.topic}),e.jsx(Be,{shortId:l.id}),l.why&&l.why.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Why this was recommended:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:l.why.map((x,f)=>e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:[x.feature.replace("_"," "),": ",x.weight]},f))})]})]})]})})})]})}function De({initialQuery:t="",appliedFilters:r={},onFiltersChange:o}){const[s,h]=c.useState(t),[n,m]=c.useState(r.topic||""),[l,i]=c.useState(r.pattern||"");return c.useEffect(()=>{o==null||o({topic:n,pattern:l,search:s})},[s,n,l,o]),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(q,{placeholder:"Search shorts by topic...",value:s,onChange:d=>h(d.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(A,{value:n,onValueChange:m,children:[e.jsx(B,{className:"w-40",children:e.jsx(D,{placeholder:"All Topics"})}),e.jsxs(M,{children:[e.jsx(j,{value:null,children:"All Topics"}),e.jsx(j,{value:"math",children:"Math"}),e.jsx(j,{value:"reading",children:"Reading"}),e.jsx(j,{value:"science",children:"Science"}),e.jsx(j,{value:"social",children:"Social Skills"})]})]}),e.jsxs(A,{value:l,onValueChange:i,children:[e.jsx(B,{className:"w-40",children:e.jsx(D,{placeholder:"All Patterns"})}),e.jsxs(M,{children:[e.jsx(j,{value:null,children:"All Patterns"}),e.jsx(j,{value:"playful",children:"Playful"}),e.jsx(j,{value:"structured",children:"Structured"}),e.jsx(j,{value:"co_reg",children:"Co-Regulation"})]})]})]})]})}),e.jsx(_,{title:"Popular Shorts",topic:n||s}),e.jsx(_,{title:"Recently Added",topic:n||s}),!n&&!s&&e.jsxs(e.Fragment,{children:[e.jsx(_,{title:"Math & Numbers",topic:"math"}),e.jsx(_,{title:"Reading & Language",topic:"reading"}),e.jsx(_,{title:"Science & Discovery",topic:"science"})]})]})}function xt({initialQuery:t}){const[r,o]=c.useState([]),[s,h]=c.useState(t||""),[n,m]=c.useState({categories:[],types:[],difficulty:null}),[l,i]=c.useState("library"),d=se(s,300),p=ae({context:"library"});c.useEffect(()=>{l==="library"&&g()},[d,n,l]);const g=async()=>{const u={...d&&{title:{$ilike:`%${d}%`}},...x(n)},b=await p.execute(()=>ee.filter(u,"-created_date",50),{key:"resources",errorContext:"loading resources"});b&&o(b)},x=u=>{const b={};return u.categories&&u.categories.length>0&&(b.category={$in:u.categories}),u.types&&u.types.length>0&&(b.type={$in:u.types}),u.difficulty&&(b.difficulty=u.difficulty),b},f=(u,b)=>{m(k=>({...k,[u]:b}))},T=()=>{m({categories:[],types:[],difficulty:null})},S="mt-4";return e.jsxs(pe,{value:l,onValueChange:i,className:"w-full",children:[e.jsxs(ge,{className:"grid w-full grid-cols-2",children:[e.jsx(z,{value:"library",children:"Library Resources"}),e.jsx(z,{value:"shorts",children:"Teachmo Shorts"})]}),e.jsx($,{value:"library",className:S,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-inherit py-4",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx(q,{placeholder:"Search library resources...",className:"pl-9",value:s,onChange:u=>h(u.target.value)})]}),e.jsx(Fe,{currentFilters:n,onFilterChange:f,onReset:T})]}),p.isLoading("resources")?e.jsx(le,{items:9,cardType:"resource"}):p.hasError("resources")?e.jsx(ie,{error:p.getError("resources"),onRetry:g}):r.length===0?e.jsx(re,{icon:I,title:"No Resources Found",description:"Try adjusting your search or filters to find helpful resources."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(u=>e.jsx(Re,{resource:u},u.id))})]})}),e.jsx($,{value:"shorts",className:S,children:e.jsx("div",{className:"space-y-6",children:e.jsx(De,{initialQuery:t,appliedFilters:n,onFiltersChange:f})})})]})}export{xt as default};
//# sourceMappingURL=LibraryTab-BpbtWPpe.js.map
