import{A as u,T as f,a as h,r as n,n as x,l as m,j as r,N as c,g as j}from"./index-BPP-_OMN.js";function v(){const{isAuthenticated:a,isLoading:t,error:l}=u(),s=f(),{role:i,loading:o,needsOnboarding:g,tenantScope:e}=h(),d=n.useRef(!1);return n.useEffect(()=>{x.auth.refreshSession()},[]),n.useEffect(()=>{d.current||!a||t||o||!(s!=null&&s.id)||(d.current=!0,m({organizationId:(e==null?void 0:e.organizationId)??void 0,schoolId:(e==null?void 0:e.schoolId)??void 0},{eventName:"auth_login",actorId:s.id,actorRole:i||void 0}).catch(()=>{}))},[a,t,o,e==null?void 0:e.organizationId,e==null?void 0:e.schoolId,s==null?void 0:s.id,i]),a&&!t&&!o?g?r.jsx(c,{to:"/onboarding",replace:!0}):r.jsx(c,{to:j(i),replace:!0}):r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"space-y-2 text-center",children:[r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Completing sign-inâ€¦"}),t&&r.jsx("p",{className:"text-gray-600",children:"We are finalizing your Nhost session."}),l&&r.jsx("p",{className:"text-red-600",children:l.message})]})})}export{v as default};
//# sourceMappingURL=AuthCallback-BUA5fzH6.js.map
