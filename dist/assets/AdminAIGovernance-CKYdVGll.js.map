{"version":3,"file":"AdminAIGovernance-CKYdVGll.js","sources":["../../src/pages/AdminAIGovernance.jsx"],"sourcesContent":["import { useMemo, useState } from 'react';\nimport { useMutation, useQuery } from '@tanstack/react-query';\nimport { Link } from 'react-router-dom';\nimport { graphql } from '@/lib/graphql';\nimport { useTenantScope } from '@/hooks/useTenantScope';\nimport ProtectedRoute from '@/components/shared/ProtectedRoute';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { API_BASE_URL } from '@/config/api';\nimport { nhost } from '@/lib/nhostClient';\n\nasync function fetchJson(url, opts = {}) {\n  const response = await fetch(url, opts);\n  if (!response.ok) {\n    const text = await response.text();\n    throw new Error(text || 'Request failed');\n  }\n  return response.json();\n}\n\nexport default function AdminAIGovernance() {\n  const { data: scope } = useTenantScope();\n  const organizationId = scope?.organizationId ?? null;\n\n  const headersQuery = useQuery({\n    queryKey: ['ai-governance-token'],\n    queryFn: async () => {\n      const token = await nhost.auth.getAccessToken();\n      return {\n        'Content-Type': 'application/json',\n        ...(token ? { Authorization: `Bearer ${token}` } : {}),\n      };\n    },\n  });\n\n  const policyQuery = useQuery({\n    queryKey: ['ai-policy-docs-admin', organizationId],\n    queryFn: async () => {\n      const query = `query AIPolicyDocsAdmin($where: ai_policy_docs_bool_exp) {\n        ai_policy_docs(where: $where, order_by: { published_at: desc }) {\n          id\n          title\n          summary\n          published_at\n        }\n      }`;\n      const where = organizationId\n        ? { _or: [{ organization_id: { _eq: organizationId } }, { organization_id: { _is_null: true } }] }\n        : { organization_id: { _is_null: true } };\n      const res = await graphql(query, { where });\n      return res?.ai_policy_docs ?? [];\n    },\n  });\n\n  const usageSummaryQuery = useQuery({\n    queryKey: ['ai-usage-summary'],\n    enabled: Boolean(headersQuery.data),\n    queryFn: async () => fetchJson(`${API_BASE_URL}/admin/ai/usage-summary`, { headers: headersQuery.data }),\n  });\n\n  const reviewQueueQuery = useQuery({\n    queryKey: ['ai-review-queue-admin'],\n    enabled: Boolean(headersQuery.data),\n    queryFn: async () => fetchJson(`${API_BASE_URL}/admin/ai/review-queue`, { headers: headersQuery.data }),\n  });\n\n  const promptLibraryQuery = useQuery({\n    queryKey: ['ai-prompt-library-admin'],\n    enabled: Boolean(headersQuery.data),\n    queryFn: async () => fetchJson(`${API_BASE_URL}/admin/ai/prompts`, { headers: headersQuery.data }),\n  });\n\n  const budgetQuery = useQuery({\n    queryKey: ['ai-budget-admin'],\n    enabled: Boolean(headersQuery.data),\n    queryFn: async () => fetchJson(`${API_BASE_URL}/admin/ai/budget`, { headers: headersQuery.data }),\n  });\n\n  const modelPolicyQuery = useQuery({\n    queryKey: ['ai-model-policy-admin'],\n    enabled: Boolean(headersQuery.data),\n    queryFn: async () => fetchJson(`${API_BASE_URL}/admin/ai/model-policy`, { headers: headersQuery.data }),\n  });\n\n  const [budgetForm, setBudgetForm] = useState({ monthlyLimitUsd: '', fallbackPolicy: 'block' });\n  const [modelForm, setModelForm] = useState({\n    defaultModel: 'gpt-4o-mini',\n    fallbackModel: 'gpt-4o-mini',\n    allowedModels: 'gpt-4o-mini, gpt-4o',\n    featureFlags: '',\n  });\n\n  useMemo(() => {\n    if (budgetQuery.data?.budget) {\n      setBudgetForm({\n        monthlyLimitUsd: budgetQuery.data.budget.monthly_limit_usd ?? '',\n        fallbackPolicy: budgetQuery.data.budget.fallback_policy ?? 'block',\n      });\n    }\n  }, [budgetQuery.data]);\n\n  useMemo(() => {\n    if (modelPolicyQuery.data?.policy) {\n      const policy = modelPolicyQuery.data.policy;\n      setModelForm({\n        defaultModel: policy.default_model ?? 'gpt-4o-mini',\n        fallbackModel: policy.fallback_model ?? 'gpt-4o-mini',\n        allowedModels: (policy.allowed_models || []).join(', '),\n        featureFlags: (policy.feature_flags || []).join(', '),\n      });\n    }\n  }, [modelPolicyQuery.data]);\n\n  const budgetMutation = useMutation({\n    mutationFn: async () => {\n      return fetchJson(`${API_BASE_URL}/admin/ai/budget`, {\n        method: 'PUT',\n        headers: headersQuery.data,\n        body: JSON.stringify({\n          monthlyLimitUsd: budgetForm.monthlyLimitUsd ? Number(budgetForm.monthlyLimitUsd) : null,\n          fallbackPolicy: budgetForm.fallbackPolicy,\n        }),\n      });\n    },\n    onSuccess: () => budgetQuery.refetch(),\n  });\n\n  const modelPolicyMutation = useMutation({\n    mutationFn: async () => {\n      return fetchJson(`${API_BASE_URL}/admin/ai/model-policy`, {\n        method: 'PUT',\n        headers: headersQuery.data,\n        body: JSON.stringify({\n          defaultModel: modelForm.defaultModel,\n          fallbackModel: modelForm.fallbackModel,\n          allowedModels: modelForm.allowedModels\n            .split(',')\n            .map((s) => s.trim())\n            .filter(Boolean),\n          featureFlags: modelForm.featureFlags\n            .split(',')\n            .map((s) => s.trim())\n            .filter(Boolean),\n        }),\n      });\n    },\n    onSuccess: () => modelPolicyQuery.refetch(),\n  });\n\n  const pendingCount = reviewQueueQuery.data?.queue?.length ?? 0;\n  const promptCount = promptLibraryQuery.data?.prompts?.length ?? 0;\n  const usageTotals = usageSummaryQuery.data?.totals;\n\n  return (\n    <ProtectedRoute allowedRoles={['system_admin', 'district_admin', 'school_admin', 'admin']}>\n      <div className=\"p-6 space-y-6\">\n        <header className=\"space-y-2\">\n          <h1 className=\"text-2xl font-semibold\">AI Governance &amp; Transparency</h1>\n          <p className=\"text-sm text-muted-foreground\">\n            Track AI model usage, review queue activity, and published transparency briefs for your tenant.\n          </p>\n        </header>\n\n        <div className=\"grid gap-4 md:grid-cols-3\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Review Queue</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2 text-sm\">\n              <div className=\"flex justify-between\">\n                <span>Pending reviews</span>\n                <span className=\"font-semibold\">{pendingCount}</span>\n              </div>\n              <Link className=\"text-blue-600 hover:underline\" to=\"/admin/ai-review-queue\">\n                Open AI review queue →\n              </Link>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardHeader>\n              <CardTitle>Usage Logging</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2 text-sm\">\n              <div className=\"flex justify-between\">\n                <span>Total AI requests logged</span>\n                <span className=\"font-semibold\">{usageTotals?.calls ?? 0}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span>Estimated spend</span>\n                <span className=\"font-semibold\">${usageTotals?.cost_usd?.toFixed?.(2) ?? '0.00'}</span>\n              </div>\n              <Link className=\"text-blue-600 hover:underline\" to=\"/admin/analytics\">\n                Explore analytics →\n              </Link>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardHeader>\n              <CardTitle>Prompt Management</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2 text-sm\">\n              <div className=\"flex justify-between\">\n                <span>Active prompts</span>\n                <span className=\"font-semibold\">{promptCount}</span>\n              </div>\n              <div className=\"text-xs text-muted-foreground\">\n                Manage versions, approvals, and rollout metadata for AI prompt templates.\n              </div>\n              <Link className=\"text-blue-600 hover:underline\" to=\"/admin/ai-prompts\">\n                Open prompt library →\n              </Link>\n            </CardContent>\n          </Card>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-2\">\n          <Card>\n            <CardHeader>\n              <CardTitle>AI Budget &amp; Fallbacks</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3 text-sm\">\n              <div>\n                <div className=\"text-xs text-muted-foreground mb-1\">Monthly budget (USD)</div>\n                <Input\n                  value={budgetForm.monthlyLimitUsd}\n                  onChange={(e) => setBudgetForm((prev) => ({ ...prev, monthlyLimitUsd: e.target.value }))}\n                  placeholder=\"250\"\n                />\n              </div>\n              <div>\n                <div className=\"text-xs text-muted-foreground mb-1\">Fallback policy</div>\n                <Select\n                  value={budgetForm.fallbackPolicy}\n                  onValueChange={(value) => setBudgetForm((prev) => ({ ...prev, fallbackPolicy: value }))}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select fallback\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"block\">Block requests</SelectItem>\n                    <SelectItem value=\"degrade\">Degrade model</SelectItem>\n                    <SelectItem value=\"allow\">Allow overage</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <Button onClick={() => budgetMutation.mutate()} disabled={budgetMutation.isPending}>\n                {budgetMutation.isPending ? 'Saving…' : 'Save budget settings'}\n              </Button>\n              <div className=\"text-xs text-muted-foreground\">\n                Current spend: ${budgetQuery.data?.budget?.spent_usd ?? 0} · Reset at{' '}\n                {budgetQuery.data?.budget?.reset_at\n                  ? new Date(budgetQuery.data.budget.reset_at).toLocaleDateString()\n                  : '—'}\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Model Policy</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3 text-sm\">\n              <div>\n                <div className=\"text-xs text-muted-foreground mb-1\">Default model</div>\n                <Input\n                  value={modelForm.defaultModel}\n                  onChange={(e) => setModelForm((prev) => ({ ...prev, defaultModel: e.target.value }))}\n                />\n              </div>\n              <div>\n                <div className=\"text-xs text-muted-foreground mb-1\">Fallback model</div>\n                <Input\n                  value={modelForm.fallbackModel}\n                  onChange={(e) => setModelForm((prev) => ({ ...prev, fallbackModel: e.target.value }))}\n                />\n              </div>\n              <div>\n                <div className=\"text-xs text-muted-foreground mb-1\">Allowed models (comma-separated)</div>\n                <Input\n                  value={modelForm.allowedModels}\n                  onChange={(e) => setModelForm((prev) => ({ ...prev, allowedModels: e.target.value }))}\n                />\n              </div>\n              <div>\n                <div className=\"text-xs text-muted-foreground mb-1\">Required feature flags</div>\n                <Input\n                  value={modelForm.featureFlags}\n                  onChange={(e) => setModelForm((prev) => ({ ...prev, featureFlags: e.target.value }))}\n                  placeholder=\"ENTERPRISE_AI_GOVERNANCE\"\n                />\n              </div>\n              <Button onClick={() => modelPolicyMutation.mutate()} disabled={modelPolicyMutation.isPending}>\n                {modelPolicyMutation.isPending ? 'Saving…' : 'Save model policy'}\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Transparency Docs</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-3 text-sm\">\n            {(policyQuery.data ?? []).length === 0 ? (\n              <p className=\"text-muted-foreground\">No published docs yet. Seeded documents will appear after migration.</p>\n            ) : (\n              <ul className=\"space-y-2\">\n                {policyQuery.data.map((doc) => (\n                  <li key={doc.id} className=\"border rounded-lg p-3\">\n                    <div className=\"font-medium\">{doc.title}</div>\n                    <div className=\"text-xs text-muted-foreground\">{doc.summary}</div>\n                  </li>\n                ))}\n              </ul>\n            )}\n            <Link className=\"text-blue-600 hover:underline\" to=\"/ai/transparency\">\n              View public transparency page →\n            </Link>\n          </CardContent>\n        </Card>\n      </div>\n    </ProtectedRoute>\n  );\n}\n"],"names":["fetchJson","url","opts","response","text","AdminAIGovernance","scope","useTenantScope","organizationId","headersQuery","useQuery","token","nhost","policyQuery","res","graphql","usageSummaryQuery","API_BASE_URL","reviewQueueQuery","promptLibraryQuery","budgetQuery","modelPolicyQuery","budgetForm","setBudgetForm","useState","modelForm","setModelForm","useMemo","_a","policy","budgetMutation","useMutation","modelPolicyMutation","s","pendingCount","_b","promptCount","_d","_c","usageTotals","_e","jsx","ProtectedRoute","jsxs","Card","CardHeader","CardTitle","CardContent","Link","_g","_f","Input","e","prev","Select","value","SelectTrigger","SelectValue","SelectContent","SelectItem","Button","_i","_h","_k","_j","doc"],"mappings":"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"}