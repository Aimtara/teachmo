{"version":3,"file":"MessagingRequests-D-ilwlZs.js","sources":["../../src/utils/cn.ts","../../node_modules/date-fns/compareAsc.mjs","../../node_modules/date-fns/differenceInCalendarMonths.mjs","../../node_modules/date-fns/_lib/getRoundingMethod.mjs","../../node_modules/date-fns/differenceInMilliseconds.mjs","../../node_modules/date-fns/isLastDayOfMonth.mjs","../../node_modules/date-fns/differenceInMonths.mjs","../../node_modules/date-fns/differenceInSeconds.mjs","../../node_modules/date-fns/formatDistance.mjs","../../node_modules/date-fns/formatDistanceToNow.mjs","../../src/pages/MessagingRequests.jsx"],"sourcesContent":["export function cn(...classes: (string | undefined | null | false)[]) {\n  return classes.filter(Boolean).join(' ');\n}\n","import { toDate } from \"./toDate.mjs\";\n\n/**\n * @name compareAsc\n * @category Common Helpers\n * @summary Compare the two dates and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return 1 if the first date is after the second,\n * -1 if the first date is before the second or 0 if dates are equal.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param dateLeft - The first date to compare\n * @param dateRight - The second date to compare\n *\n * @returns The result of the comparison\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989:\n * const result = compareAsc(new Date(1987, 1, 11), new Date(1989, 6, 10))\n * //=> -1\n *\n * @example\n * // Sort the array of dates:\n * const result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareAsc)\n * //=> [\n * //   Wed Feb 11 1987 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Sun Jul 02 1995 00:00:00\n * // ]\n */\nexport function compareAsc(dateLeft, dateRight) {\n  const _dateLeft = toDate(dateLeft);\n  const _dateRight = toDate(dateRight);\n\n  const diff = _dateLeft.getTime() - _dateRight.getTime();\n\n  if (diff < 0) {\n    return -1;\n  } else if (diff > 0) {\n    return 1;\n    // Return 0 if diff is 0; return NaN if diff is NaN\n  } else {\n    return diff;\n  }\n}\n\n// Fallback for modularized imports:\nexport default compareAsc;\n","import { toDate } from \"./toDate.mjs\";\n\n/**\n * @name differenceInCalendarMonths\n * @category Month Helpers\n * @summary Get the number of calendar months between the given dates.\n *\n * @description\n * Get the number of calendar months between the given dates.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param dateLeft - The later date\n * @param dateRight - The earlier date\n *\n * @returns The number of calendar months\n *\n * @example\n * // How many calendar months are between 31 January 2014 and 1 September 2014?\n * const result = differenceInCalendarMonths(\n *   new Date(2014, 8, 1),\n *   new Date(2014, 0, 31)\n * )\n * //=> 8\n */\nexport function differenceInCalendarMonths(dateLeft, dateRight) {\n  const _dateLeft = toDate(dateLeft);\n  const _dateRight = toDate(dateRight);\n\n  const yearDiff = _dateLeft.getFullYear() - _dateRight.getFullYear();\n  const monthDiff = _dateLeft.getMonth() - _dateRight.getMonth();\n\n  return yearDiff * 12 + monthDiff;\n}\n\n// Fallback for modularized imports:\nexport default differenceInCalendarMonths;\n","export function getRoundingMethod(method) {\n  return (number) => {\n    const round = method ? Math[method] : Math.trunc;\n    const result = round(number);\n    // Prevent negative zero\n    return result === 0 ? 0 : result;\n  };\n}\n","import { toDate } from \"./toDate.mjs\";\n\n/**\n * @name differenceInMilliseconds\n * @category Millisecond Helpers\n * @summary Get the number of milliseconds between the given dates.\n *\n * @description\n * Get the number of milliseconds between the given dates.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param dateLeft - The later date\n * @param dateRight - The earlier date\n *\n * @returns The number of milliseconds\n *\n * @example\n * // How many milliseconds are between\n * // 2 July 2014 12:30:20.600 and 2 July 2014 12:30:21.700?\n * const result = differenceInMilliseconds(\n *   new Date(2014, 6, 2, 12, 30, 21, 700),\n *   new Date(2014, 6, 2, 12, 30, 20, 600)\n * )\n * //=> 1100\n */\nexport function differenceInMilliseconds(dateLeft, dateRight) {\n  return +toDate(dateLeft) - +toDate(dateRight);\n}\n\n// Fallback for modularized imports:\nexport default differenceInMilliseconds;\n","import { endOfDay } from \"./endOfDay.mjs\";\nimport { endOfMonth } from \"./endOfMonth.mjs\";\nimport { toDate } from \"./toDate.mjs\";\n\n/**\n * @name isLastDayOfMonth\n * @category Month Helpers\n * @summary Is the given date the last day of a month?\n *\n * @description\n * Is the given date the last day of a month?\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The date to check\n\n * @returns The date is the last day of a month\n *\n * @example\n * // Is 28 February 2014 the last day of a month?\n * const result = isLastDayOfMonth(new Date(2014, 1, 28))\n * //=> true\n */\nexport function isLastDayOfMonth(date) {\n  const _date = toDate(date);\n  return +endOfDay(_date) === +endOfMonth(_date);\n}\n\n// Fallback for modularized imports:\nexport default isLastDayOfMonth;\n","import { compareAsc } from \"./compareAsc.mjs\";\nimport { differenceInCalendarMonths } from \"./differenceInCalendarMonths.mjs\";\nimport { isLastDayOfMonth } from \"./isLastDayOfMonth.mjs\";\nimport { toDate } from \"./toDate.mjs\";\n\n/**\n * @name differenceInMonths\n * @category Month Helpers\n * @summary Get the number of full months between the given dates.\n *\n * @description\n * Get the number of full months between the given dates using trunc as a default rounding method.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param dateLeft - The later date\n * @param dateRight - The earlier date\n *\n * @returns The number of full months\n *\n * @example\n * // How many full months are between 31 January 2014 and 1 September 2014?\n * const result = differenceInMonths(new Date(2014, 8, 1), new Date(2014, 0, 31))\n * //=> 7\n */\nexport function differenceInMonths(dateLeft, dateRight) {\n  const _dateLeft = toDate(dateLeft);\n  const _dateRight = toDate(dateRight);\n\n  const sign = compareAsc(_dateLeft, _dateRight);\n  const difference = Math.abs(\n    differenceInCalendarMonths(_dateLeft, _dateRight),\n  );\n  let result;\n\n  // Check for the difference of less than month\n  if (difference < 1) {\n    result = 0;\n  } else {\n    if (_dateLeft.getMonth() === 1 && _dateLeft.getDate() > 27) {\n      // This will check if the date is end of Feb and assign a higher end of month date\n      // to compare it with Jan\n      _dateLeft.setDate(30);\n    }\n\n    _dateLeft.setMonth(_dateLeft.getMonth() - sign * difference);\n\n    // Math.abs(diff in full months - diff in calendar months) === 1 if last calendar month is not full\n    // If so, result must be decreased by 1 in absolute value\n    let isLastMonthNotFull = compareAsc(_dateLeft, _dateRight) === -sign;\n\n    // Check for cases of one full calendar month\n    if (\n      isLastDayOfMonth(toDate(dateLeft)) &&\n      difference === 1 &&\n      compareAsc(dateLeft, _dateRight) === 1\n    ) {\n      isLastMonthNotFull = false;\n    }\n\n    result = sign * (difference - Number(isLastMonthNotFull));\n  }\n\n  // Prevent negative zero\n  return result === 0 ? 0 : result;\n}\n\n// Fallback for modularized imports:\nexport default differenceInMonths;\n","import { getRoundingMethod } from \"./_lib/getRoundingMethod.mjs\";\nimport { differenceInMilliseconds } from \"./differenceInMilliseconds.mjs\";\n\n/**\n * The {@link differenceInSeconds} function options.\n */\n\n/**\n * @name differenceInSeconds\n * @category Second Helpers\n * @summary Get the number of seconds between the given dates.\n *\n * @description\n * Get the number of seconds between the given dates.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param dateLeft - The later date\n * @param dateRight - The earlier date\n * @param options - An object with options.\n *\n * @returns The number of seconds\n *\n * @example\n * // How many seconds are between\n * // 2 July 2014 12:30:07.999 and 2 July 2014 12:30:20.000?\n * const result = differenceInSeconds(\n *   new Date(2014, 6, 2, 12, 30, 20, 0),\n *   new Date(2014, 6, 2, 12, 30, 7, 999)\n * )\n * //=> 12\n */\nexport function differenceInSeconds(dateLeft, dateRight, options) {\n  const diff = differenceInMilliseconds(dateLeft, dateRight) / 1000;\n  return getRoundingMethod(options?.roundingMethod)(diff);\n}\n\n// Fallback for modularized imports:\nexport default differenceInSeconds;\n","import { compareAsc } from \"./compareAsc.mjs\";\nimport { minutesInDay, minutesInMonth } from \"./constants.mjs\";\nimport { differenceInMonths } from \"./differenceInMonths.mjs\";\nimport { differenceInSeconds } from \"./differenceInSeconds.mjs\";\nimport { toDate } from \"./toDate.mjs\";\nimport { defaultLocale } from \"./_lib/defaultLocale.mjs\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.mjs\";\nimport { getTimezoneOffsetInMilliseconds } from \"./_lib/getTimezoneOffsetInMilliseconds.mjs\";\n\n/**\n * The {@link formatDistance} function options.\n */\n\n/**\n * @name formatDistance\n * @category Common Helpers\n * @summary Return the distance between the given dates in words.\n *\n * @description\n * Return the distance between the given dates in words.\n *\n * | Distance between dates                                            | Result              |\n * |-------------------------------------------------------------------|---------------------|\n * | 0 ... 30 secs                                                     | less than a minute  |\n * | 30 secs ... 1 min 30 secs                                         | 1 minute            |\n * | 1 min 30 secs ... 44 mins 30 secs                                 | [2..44] minutes     |\n * | 44 mins ... 30 secs ... 89 mins 30 secs                           | about 1 hour        |\n * | 89 mins 30 secs ... 23 hrs 59 mins 30 secs                        | about [2..24] hours |\n * | 23 hrs 59 mins 30 secs ... 41 hrs 59 mins 30 secs                 | 1 day               |\n * | 41 hrs 59 mins 30 secs ... 29 days 23 hrs 59 mins 30 secs         | [2..30] days        |\n * | 29 days 23 hrs 59 mins 30 secs ... 44 days 23 hrs 59 mins 30 secs | about 1 month       |\n * | 44 days 23 hrs 59 mins 30 secs ... 59 days 23 hrs 59 mins 30 secs | about 2 months      |\n * | 59 days 23 hrs 59 mins 30 secs ... 1 yr                           | [2..12] months      |\n * | 1 yr ... 1 yr 3 months                                            | about 1 year        |\n * | 1 yr 3 months ... 1 yr 9 month s                                  | over 1 year         |\n * | 1 yr 9 months ... 2 yrs                                           | almost 2 years      |\n * | N yrs ... N yrs 3 months                                          | about N years       |\n * | N yrs 3 months ... N yrs 9 months                                 | over N years        |\n * | N yrs 9 months ... N+1 yrs                                        | almost N+1 years    |\n *\n * With `options.includeSeconds == true`:\n * | Distance between dates | Result               |\n * |------------------------|----------------------|\n * | 0 secs ... 5 secs      | less than 5 seconds  |\n * | 5 secs ... 10 secs     | less than 10 seconds |\n * | 10 secs ... 20 secs    | less than 20 seconds |\n * | 20 secs ... 40 secs    | half a minute        |\n * | 40 secs ... 60 secs    | less than a minute   |\n * | 60 secs ... 90 secs    | 1 minute             |\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The date\n * @param baseDate - The date to compare with\n * @param options - An object with options\n *\n * @returns The distance in words\n *\n * @throws `date` must not be Invalid Date\n * @throws `baseDate` must not be Invalid Date\n * @throws `options.locale` must contain `formatDistance` property\n *\n * @example\n * // What is the distance between 2 July 2014 and 1 January 2015?\n * const result = formatDistance(new Date(2014, 6, 2), new Date(2015, 0, 1))\n * //=> '6 months'\n *\n * @example\n * // What is the distance between 1 January 2015 00:00:15\n * // and 1 January 2015 00:00:00, including seconds?\n * const result = formatDistance(\n *   new Date(2015, 0, 1, 0, 0, 15),\n *   new Date(2015, 0, 1, 0, 0, 0),\n *   { includeSeconds: true }\n * )\n * //=> 'less than 20 seconds'\n *\n * @example\n * // What is the distance from 1 January 2016\n * // to 1 January 2015, with a suffix?\n * const result = formatDistance(new Date(2015, 0, 1), new Date(2016, 0, 1), {\n *   addSuffix: true\n * })\n * //=> 'about 1 year ago'\n *\n * @example\n * // What is the distance between 1 August 2016 and 1 January 2015 in Esperanto?\n * import { eoLocale } from 'date-fns/locale/eo'\n * const result = formatDistance(new Date(2016, 7, 1), new Date(2015, 0, 1), {\n *   locale: eoLocale\n * })\n * //=> 'pli ol 1 jaro'\n */\n\nexport function formatDistance(date, baseDate, options) {\n  const defaultOptions = getDefaultOptions();\n  const locale = options?.locale ?? defaultOptions.locale ?? defaultLocale;\n  const minutesInAlmostTwoDays = 2520;\n\n  const comparison = compareAsc(date, baseDate);\n\n  if (isNaN(comparison)) {\n    throw new RangeError(\"Invalid time value\");\n  }\n\n  const localizeOptions = Object.assign({}, options, {\n    addSuffix: options?.addSuffix,\n    comparison: comparison,\n  });\n\n  let dateLeft;\n  let dateRight;\n  if (comparison > 0) {\n    dateLeft = toDate(baseDate);\n    dateRight = toDate(date);\n  } else {\n    dateLeft = toDate(date);\n    dateRight = toDate(baseDate);\n  }\n\n  const seconds = differenceInSeconds(dateRight, dateLeft);\n  const offsetInSeconds =\n    (getTimezoneOffsetInMilliseconds(dateRight) -\n      getTimezoneOffsetInMilliseconds(dateLeft)) /\n    1000;\n  const minutes = Math.round((seconds - offsetInSeconds) / 60);\n  let months;\n\n  // 0 up to 2 mins\n  if (minutes < 2) {\n    if (options?.includeSeconds) {\n      if (seconds < 5) {\n        return locale.formatDistance(\"lessThanXSeconds\", 5, localizeOptions);\n      } else if (seconds < 10) {\n        return locale.formatDistance(\"lessThanXSeconds\", 10, localizeOptions);\n      } else if (seconds < 20) {\n        return locale.formatDistance(\"lessThanXSeconds\", 20, localizeOptions);\n      } else if (seconds < 40) {\n        return locale.formatDistance(\"halfAMinute\", 0, localizeOptions);\n      } else if (seconds < 60) {\n        return locale.formatDistance(\"lessThanXMinutes\", 1, localizeOptions);\n      } else {\n        return locale.formatDistance(\"xMinutes\", 1, localizeOptions);\n      }\n    } else {\n      if (minutes === 0) {\n        return locale.formatDistance(\"lessThanXMinutes\", 1, localizeOptions);\n      } else {\n        return locale.formatDistance(\"xMinutes\", minutes, localizeOptions);\n      }\n    }\n\n    // 2 mins up to 0.75 hrs\n  } else if (minutes < 45) {\n    return locale.formatDistance(\"xMinutes\", minutes, localizeOptions);\n\n    // 0.75 hrs up to 1.5 hrs\n  } else if (minutes < 90) {\n    return locale.formatDistance(\"aboutXHours\", 1, localizeOptions);\n\n    // 1.5 hrs up to 24 hrs\n  } else if (minutes < minutesInDay) {\n    const hours = Math.round(minutes / 60);\n    return locale.formatDistance(\"aboutXHours\", hours, localizeOptions);\n\n    // 1 day up to 1.75 days\n  } else if (minutes < minutesInAlmostTwoDays) {\n    return locale.formatDistance(\"xDays\", 1, localizeOptions);\n\n    // 1.75 days up to 30 days\n  } else if (minutes < minutesInMonth) {\n    const days = Math.round(minutes / minutesInDay);\n    return locale.formatDistance(\"xDays\", days, localizeOptions);\n\n    // 1 month up to 2 months\n  } else if (minutes < minutesInMonth * 2) {\n    months = Math.round(minutes / minutesInMonth);\n    return locale.formatDistance(\"aboutXMonths\", months, localizeOptions);\n  }\n\n  months = differenceInMonths(dateRight, dateLeft);\n\n  // 2 months up to 12 months\n  if (months < 12) {\n    const nearestMonth = Math.round(minutes / minutesInMonth);\n    return locale.formatDistance(\"xMonths\", nearestMonth, localizeOptions);\n\n    // 1 year up to max Date\n  } else {\n    const monthsSinceStartOfYear = months % 12;\n    const years = Math.trunc(months / 12);\n\n    // N years up to 1 years 3 months\n    if (monthsSinceStartOfYear < 3) {\n      return locale.formatDistance(\"aboutXYears\", years, localizeOptions);\n\n      // N years 3 months up to N years 9 months\n    } else if (monthsSinceStartOfYear < 9) {\n      return locale.formatDistance(\"overXYears\", years, localizeOptions);\n\n      // N years 9 months up to N year 12 months\n    } else {\n      return locale.formatDistance(\"almostXYears\", years + 1, localizeOptions);\n    }\n  }\n}\n\n// Fallback for modularized imports:\nexport default formatDistance;\n","import { constructNow } from \"./constructNow.mjs\";\nimport { formatDistance } from \"./formatDistance.mjs\";\n\n/**\n * The {@link formatDistanceToNow} function options.\n */\n\n/**\n * @name formatDistanceToNow\n * @category Common Helpers\n * @summary Return the distance between the given date and now in words.\n * @pure false\n *\n * @description\n * Return the distance between the given date and now in words.\n *\n * | Distance to now                                                   | Result              |\n * |-------------------------------------------------------------------|---------------------|\n * | 0 ... 30 secs                                                     | less than a minute  |\n * | 30 secs ... 1 min 30 secs                                         | 1 minute            |\n * | 1 min 30 secs ... 44 mins 30 secs                                 | [2..44] minutes     |\n * | 44 mins ... 30 secs ... 89 mins 30 secs                           | about 1 hour        |\n * | 89 mins 30 secs ... 23 hrs 59 mins 30 secs                        | about [2..24] hours |\n * | 23 hrs 59 mins 30 secs ... 41 hrs 59 mins 30 secs                 | 1 day               |\n * | 41 hrs 59 mins 30 secs ... 29 days 23 hrs 59 mins 30 secs         | [2..30] days        |\n * | 29 days 23 hrs 59 mins 30 secs ... 44 days 23 hrs 59 mins 30 secs | about 1 month       |\n * | 44 days 23 hrs 59 mins 30 secs ... 59 days 23 hrs 59 mins 30 secs | about 2 months      |\n * | 59 days 23 hrs 59 mins 30 secs ... 1 yr                           | [2..12] months      |\n * | 1 yr ... 1 yr 3 months                                            | about 1 year        |\n * | 1 yr 3 months ... 1 yr 9 month s                                  | over 1 year         |\n * | 1 yr 9 months ... 2 yrs                                           | almost 2 years      |\n * | N yrs ... N yrs 3 months                                          | about N years       |\n * | N yrs 3 months ... N yrs 9 months                                 | over N years        |\n * | N yrs 9 months ... N+1 yrs                                        | almost N+1 years    |\n *\n * With `options.includeSeconds == true`:\n * | Distance to now     | Result               |\n * |---------------------|----------------------|\n * | 0 secs ... 5 secs   | less than 5 seconds  |\n * | 5 secs ... 10 secs  | less than 10 seconds |\n * | 10 secs ... 20 secs | less than 20 seconds |\n * | 20 secs ... 40 secs | half a minute        |\n * | 40 secs ... 60 secs | less than a minute   |\n * | 60 secs ... 90 secs | 1 minute             |\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The given date\n * @param options - The object with options\n *\n * @returns The distance in words\n *\n * @throws `date` must not be Invalid Date\n * @throws `options.locale` must contain `formatDistance` property\n *\n * @example\n * // If today is 1 January 2015, what is the distance to 2 July 2014?\n * const result = formatDistanceToNow(\n *   new Date(2014, 6, 2)\n * )\n * //=> '6 months'\n *\n * @example\n * // If now is 1 January 2015 00:00:00,\n * // what is the distance to 1 January 2015 00:00:15, including seconds?\n * const result = formatDistanceToNow(\n *   new Date(2015, 0, 1, 0, 0, 15),\n *   {includeSeconds: true}\n * )\n * //=> 'less than 20 seconds'\n *\n * @example\n * // If today is 1 January 2015,\n * // what is the distance to 1 January 2016, with a suffix?\n * const result = formatDistanceToNow(\n *   new Date(2016, 0, 1),\n *   {addSuffix: true}\n * )\n * //=> 'in about 1 year'\n *\n * @example\n * // If today is 1 January 2015,\n * // what is the distance to 1 August 2016 in Esperanto?\n * const eoLocale = require('date-fns/locale/eo')\n * const result = formatDistanceToNow(\n *   new Date(2016, 7, 1),\n *   {locale: eoLocale}\n * )\n * //=> 'pli ol 1 jaro'\n */\nexport function formatDistanceToNow(date, options) {\n  return formatDistance(date, constructNow(date), options);\n}\n\n// Fallback for modularized imports:\nexport default formatDistanceToNow;\n","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { formatDistanceToNow } from 'date-fns';\nimport { useUserData } from '@nhost/react';\nimport { MessagingAPI } from '@/api/adapters';\nimport { Button } from '@/components/ui/button';\nimport { Textarea } from '@/components/ui/textarea';\nimport { cn } from '@/utils';\nimport { createLogger } from '@/utils/logger';\n\nconst logger = createLogger('MessagingRequests');\n\nfunction RequestRow({ request, onApprove, onDeny, onReasonChange, isProcessing, reasonValue }) {\n  const created = useMemo(() => {\n    if (!request?.created_at) return 'just now';\n    try {\n      return formatDistanceToNow(new Date(request.created_at), { addSuffix: true });\n    } catch (error) {\n      logger.error('Invalid date in messaging request', error);\n      return request.created_at;\n    }\n  }, [request?.created_at]);\n\n  return (\n    <div className=\"rounded-lg border bg-white p-4 shadow-sm space-y-3\">\n      <div className=\"flex flex-wrap items-center justify-between gap-2\">\n        <div>\n          <p className=\"text-sm text-gray-500\">Requester</p>\n          <p className=\"font-semibold text-gray-900\">{request.requester_user_id}</p>\n        </div>\n        <div className=\"text-right\">\n          <p className=\"text-sm text-gray-500\">Target</p>\n          <p className=\"font-semibold text-gray-900\">{request.target_user_id}</p>\n        </div>\n      </div>\n\n      {request.metadata?.note && (\n        <div className=\"rounded-md bg-emerald-50 border border-emerald-100 p-3 text-sm text-emerald-900\">\n          <p className=\"font-semibold\">Note from requester</p>\n          <p className=\"whitespace-pre-wrap\">{request.metadata.note}</p>\n        </div>\n      )}\n\n      <div className=\"space-y-2\">\n        <Textarea\n          placeholder=\"Optional reason (shared when denying)\"\n          value={reasonValue}\n          onChange={(event) => onReasonChange(request.id, event.target.value)}\n          className=\"min-h-[80px]\"\n        />\n        <div className=\"flex flex-wrap gap-2 justify-end\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            disabled={isProcessing}\n            onClick={() => onDeny(request.id)}\n          >\n            {isProcessing ? 'Saving…' : 'Deny'}\n          </Button>\n          <Button\n            size=\"sm\"\n            disabled={isProcessing}\n            onClick={() => onApprove(request.id)}\n          >\n            {isProcessing ? 'Saving…' : 'Approve'}\n          </Button>\n        </div>\n        <p className=\"text-xs text-gray-500\">Requested {created}</p>\n      </div>\n    </div>\n  );\n}\n\nexport default function MessagingRequests() {\n  const user = useUserData();\n  const [requests, setRequests] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [processing, setProcessing] = useState({});\n  const [reasons, setReasons] = useState({});\n\n  const load = useCallback(async () => {\n    setLoading(true);\n    try {\n      const list = await MessagingAPI.listRequests({ status: 'pending' });\n      setRequests(Array.isArray(list) ? list : []);\n      setError('');\n    } catch (err) {\n      logger.error('Failed to load messaging requests', err);\n      setError(err?.message ?? 'Unable to load requests');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    load();\n  }, [load]);\n\n  const handleReasonChange = (id, value) => {\n    setReasons((prev) => ({ ...prev, [id]: value }));\n  };\n\n  const decide = async (id, approve) => {\n    if (!id) return;\n    setProcessing((prev) => ({ ...prev, [id]: true }));\n    try {\n      await MessagingAPI.approveMessagingRequest({\n        requestId: id,\n        approve,\n        reason: reasons[id],\n      });\n      await load();\n    } catch (err) {\n      logger.error('Error saving messaging decision', err);\n      setError(err?.message ?? 'Unable to save decision');\n    } finally {\n      setProcessing((prev) => ({ ...prev, [id]: false }));\n    }\n  };\n\n  const greeting = user?.displayName || user?.email || 'there';\n\n  return (\n    <div className=\"p-6 space-y-4\">\n      <header className=\"space-y-1\">\n        <p className=\"text-sm text-gray-500\">Hi {greeting},</p>\n        <h1 className=\"text-2xl font-semibold text-gray-900\">Messaging requests</h1>\n        <p className=\"text-sm text-gray-600\">Approve or deny requests addressed to you.</p>\n      </header>\n\n      {error && (\n        <div className=\"rounded-md border border-red-100 bg-red-50 p-3 text-sm text-red-700\" role=\"alert\">\n          {error}\n        </div>\n      )}\n\n      {loading ? (\n        <p className=\"text-gray-600\">Loading requests…</p>\n      ) : requests.length === 0 ? (\n        <div className=\"rounded-lg border border-gray-100 bg-white p-6 shadow-sm\">\n          <p className=\"font-semibold text-gray-900\">No pending requests</p>\n          <p className=\"text-sm text-gray-600\">You&apos;ll see new requests here when parents ask to message you.</p>\n        </div>\n      ) : (\n        <div className={cn('grid gap-4', requests.length > 1 ? 'md:grid-cols-2' : '')}>\n          {requests.map((request) => (\n            <RequestRow\n              key={request.id}\n              request={request}\n              onApprove={() => decide(request.id, true)}\n              onDeny={() => decide(request.id, false)}\n              onReasonChange={handleReasonChange}\n              isProcessing={processing[request.id]}\n              reasonValue={reasons[request.id] ?? ''}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["cn","classes","compareAsc","dateLeft","dateRight","_dateLeft","toDate","_dateRight","diff","differenceInCalendarMonths","yearDiff","monthDiff","getRoundingMethod","method","number","result","differenceInMilliseconds","isLastDayOfMonth","date","_date","endOfDay","endOfMonth","differenceInMonths","sign","difference","isLastMonthNotFull","differenceInSeconds","options","formatDistance","baseDate","defaultOptions","getDefaultOptions","locale","defaultLocale","minutesInAlmostTwoDays","comparison","localizeOptions","seconds","offsetInSeconds","getTimezoneOffsetInMilliseconds","minutes","months","minutesInDay","hours","minutesInMonth","days","nearestMonth","monthsSinceStartOfYear","years","formatDistanceToNow","constructNow","logger","createLogger","RequestRow","request","onApprove","onDeny","onReasonChange","isProcessing","reasonValue","created","useMemo","error","jsxs","jsx","_a","Textarea","event","Button","MessagingRequests","user","useUserData","requests","setRequests","useState","loading","setLoading","setError","processing","setProcessing","reasons","setReasons","load","useCallback","list","MessagingAPI.listRequests","err","useEffect","handleReasonChange","id","value","prev","decide","approve","MessagingAPI.approveMessagingRequest","greeting"],"mappings":"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","x_google_ignoreList":[1,2,3,4,5,6,7,8,9]}