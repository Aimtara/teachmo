{"version":3,"file":"AdminUsers-DkBpnuY8.js","sources":["../../src/pages/AdminUsers.jsx"],"sourcesContent":["import { useMemo, useState } from 'react';\nimport { useMutation, useQuery } from '@tanstack/react-query';\nimport { graphql } from '@/lib/graphql';\nimport { useTenantScope } from '@/hooks/useTenantScope';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { useToast } from '@/components/ui/use-toast';\nimport { nhost } from '@/lib/nhostClient';\nimport { useUserRole } from '@/hooks/useUserRole';\nimport { canAll } from '@/security/permissions';\n\nconst ROLES = ['parent', 'teacher', 'school_admin', 'district_admin', 'system_admin'];\n\nconst QUERY = `\nquery ListUserProfiles($where: user_profiles_bool_exp, $limit: Int!, $offset: Int!) {\n  user_profiles(where: $where, limit: $limit, offset: $offset, order_by: { created_at: desc }) {\n    user_id\n    role\n    district_id\n    school_id\n    full_name\n    created_at\n  }\n  user_profiles_aggregate(where: $where) { aggregate { count } }\n}\n`;\n\nconst UPDATE = `\nmutation UpdateUserProfile($userId: uuid!, $changes: user_profiles_set_input!) {\n  update_user_profiles_by_pk(pk_columns: { user_id: $userId }, _set: $changes) {\n    user_id\n    role\n    district_id\n    school_id\n    full_name\n  }\n}\n`;\n\nexport default function AdminUsers() {\n  const { data: scope } = useTenantScope();\n  const isSystem = scope?.role === 'system_admin' || scope?.role === 'admin';\n  const role = useUserRole();\n  const { toast } = useToast();\n  const canManageUsers = canAll(role, ['users:manage']);\n  const canImpersonate = canManageUsers;\n\n  const [q, setQ] = useState('');\n  const [roleFilter, setRoleFilter] = useState('all');\n  const [page, setPage] = useState(0);\n  const limit = 25;\n\n  const where = useMemo(() => {\n    const clauses = [];\n\n    if (q?.trim()) {\n      clauses.push({ full_name: { _ilike: `%${q.trim()}%` } });\n    }\n\n    if (roleFilter !== 'all') {\n      clauses.push({ role: { _eq: roleFilter } });\n    }\n\n    if (!isSystem) {\n      if (scope?.schoolId) clauses.push({ school_id: { _eq: scope.schoolId } });\n      else if (scope?.districtId) clauses.push({ district_id: { _eq: scope.districtId } });\n    }\n\n    return clauses.length ? { _and: clauses } : {};\n  }, [q, roleFilter, isSystem, scope?.districtId, scope?.schoolId]);\n\n  const usersQuery = useQuery({\n    queryKey: ['admin_users', where, page],\n    enabled: Boolean(scope?.userId),\n    queryFn: async () => {\n      const res = await graphql(QUERY, { where, limit, offset: page * limit });\n      if (res.error) throw res.error;\n      return res.data;\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ userId, changes }) => {\n      const res = await graphql(UPDATE, { userId, changes });\n      if (res.error) throw res.error;\n      return res.data;\n    },\n    onSuccess: () => usersQuery.refetch(),\n  });\n\n  const impersonateMutation = useMutation({\n    mutationFn: async (userId) => {\n      const token = await nhost.auth.getAccessToken();\n      const response = await fetch('/api/admin/impersonations', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n        body: JSON.stringify({ userId }),\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(errorText || 'Failed to start impersonation');\n      }\n      return response.json();\n    },\n    onSuccess: (data) => {\n      toast({\n        title: 'Impersonation ready',\n        description: `Token created (expires ${data?.expiresAt || 'soon'}).`,\n      });\n    },\n    onError: (error) => {\n      toast({\n        variant: 'destructive',\n        title: 'Impersonation failed',\n        description: error instanceof Error ? error.message : 'Unable to start impersonation.',\n      });\n    },\n  });\n\n  const total = usersQuery.data?.user_profiles_aggregate?.aggregate?.count ?? 0;\n  const totalPages = Math.max(1, Math.ceil(total / limit));\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-semibold\">Users</h1>\n        <p className=\"text-sm text-muted-foreground\">\n          Tenant-scoped user profile administration (backed by Hasura GraphQL, enforced by DB RLS).\n        </p>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Search & Filter</CardTitle>\n        </CardHeader>\n        <CardContent className=\"flex flex-col md:flex-row gap-3\">\n          <div className=\"flex-1\">\n            <Input value={q} onChange={(e) => setQ(e.target.value)} placeholder=\"Search by full name\" />\n          </div>\n          <div className=\"w-full md:w-56\">\n            <Select value={roleFilter} onValueChange={setRoleFilter}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"All roles\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All roles</SelectItem>\n                {ROLES.map((r) => (\n                  <SelectItem key={r} value={r}>{r}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader className=\"flex flex-row items-center justify-between\">\n          <CardTitle>User profiles</CardTitle>\n          <div className=\"text-xs text-muted-foreground\">{total} total</div>\n        </CardHeader>\n        <CardContent>\n          {usersQuery.isLoading ? (\n            <div className=\"text-sm text-muted-foreground\">Loading usersâ€¦</div>\n          ) : !usersQuery.data?.user_profiles?.length ? (\n            <div className=\"text-sm text-muted-foreground\">No users match the current filters.</div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full text-sm\">\n                <thead>\n                  <tr className=\"border-b text-left\">\n                    <th className=\"p-2\">Name</th>\n                    <th className=\"p-2\">User ID</th>\n                    <th className=\"p-2\">Role</th>\n                    <th className=\"p-2\">District</th>\n                    <th className=\"p-2\">School</th>\n                    <th className=\"p-2\"></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {usersQuery.data.user_profiles.map((u) => (\n                    <UserRow\n                      key={u.user_id}\n                      user={u}\n                      isSystem={isSystem}\n                      onSave={(changes) => updateMutation.mutate({ userId: u.user_id, changes })}\n                      onImpersonate={() => impersonateMutation.mutate(u.user_id)}\n                      saving={updateMutation.isPending}\n                      canManageUsers={canManageUsers}\n                      canImpersonate={canImpersonate}\n                    />\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n\n          <div className=\"flex items-center justify-between mt-4\">\n            <div className=\"text-xs text-muted-foreground\">Page {page + 1} of {totalPages}</div>\n            <div className=\"flex gap-2\">\n              <Button variant=\"secondary\" size=\"sm\" disabled={page === 0} onClick={() => setPage((p) => Math.max(0, p - 1))}>\n                Prev\n              </Button>\n              <Button variant=\"secondary\" size=\"sm\" disabled={page + 1 >= totalPages} onClick={() => setPage((p) => Math.min(totalPages - 1, p + 1))}>\n                Next\n              </Button>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\nfunction UserRow({ user, isSystem, onSave, onImpersonate, saving, canManageUsers, canImpersonate }) {\n  const [role, setRole] = useState(user.role ?? 'parent');\n  const [districtId, setDistrictId] = useState(user.district_id ?? '');\n  const [schoolId, setSchoolId] = useState(user.school_id ?? '');\n  const [fullName, setFullName] = useState(user.full_name ?? '');\n\n  const dirty = role !== (user.role ?? 'parent') || districtId !== (user.district_id ?? '') || schoolId !== (user.school_id ?? '') || fullName !== (user.full_name ?? '');\n\n  return (\n    <tr className=\"border-b align-top\">\n      <td className=\"p-2\">\n        <Input value={fullName} onChange={(e) => setFullName(e.target.value)} disabled={!canManageUsers} />\n      </td>\n      <td className=\"p-2 font-mono text-xs whitespace-nowrap\">{user.user_id}</td>\n      <td className=\"p-2\">\n        <Select value={role} onValueChange={setRole} disabled={!canManageUsers}>\n          <SelectTrigger>\n            <SelectValue placeholder=\"Role\" />\n          </SelectTrigger>\n          <SelectContent>\n            {ROLES.map((r) => (\n              <SelectItem key={r} value={r}>{r}</SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </td>\n      <td className=\"p-2\">\n        <Input value={districtId} onChange={(e) => setDistrictId(e.target.value)} disabled={!canManageUsers || (!isSystem && Boolean(user.district_id))} placeholder=\"District UUID\" />\n      </td>\n      <td className=\"p-2\">\n        <Input value={schoolId} onChange={(e) => setSchoolId(e.target.value)} disabled={!canManageUsers || (!isSystem && Boolean(user.school_id))} placeholder=\"School UUID\" />\n      </td>\n      <td className=\"p-2\">\n        <div className=\"flex flex-wrap gap-2\">\n          <Button\n            size=\"sm\"\n            disabled={!dirty || saving || !canManageUsers}\n            onClick={() =>\n              onSave({\n                role,\n                district_id: districtId || null,\n                school_id: schoolId || null,\n                full_name: fullName || null,\n              })\n            }\n          >\n            Save\n          </Button>\n          {canImpersonate ? (\n            <Button size=\"sm\" variant=\"secondary\" onClick={onImpersonate}>\n              Impersonate\n            </Button>\n          ) : null}\n        </div>\n      </td>\n    </tr>\n  );\n}\n"],"names":["ROLES","QUERY","UPDATE","AdminUsers","scope","useTenantScope","isSystem","role","useUserRole","toast","useToast","canManageUsers","canAll","canImpersonate","q","setQ","useState","roleFilter","setRoleFilter","page","setPage","limit","where","useMemo","clauses","usersQuery","useQuery","res","graphql","updateMutation","useMutation","userId","changes","impersonateMutation","token","nhost","response","errorText","data","error","total","_c","_b","_a","totalPages","jsxs","jsx","Card","CardHeader","CardTitle","CardContent","Input","e","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","r","_e","_d","u","UserRow","Button","p","user","onSave","onImpersonate","saving","setRole","districtId","setDistrictId","schoolId","setSchoolId","fullName","setFullName","dirty"],"mappings":"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"}