{"version":3,"file":"events-kvSPBKui.js","sources":["../../src/domains/events.js"],"sourcesContent":["import { graphqlRequest } from '@/lib/graphql';\n\nexport async function createEvent(input) {\n  const query = `mutation CreateEvent($input: events_insert_input!) {\n    insert_events_one(object: $input) {\n      id\n      title\n      starts_at\n      classroom_id\n    }\n  }`;\n  return graphqlRequest({ query, variables: { input } });\n}\n\nexport async function listEvents(params = {}) {\n  const normalizedParams = params && typeof params === 'object' && !Array.isArray(params)\n    ? params\n    : { schoolId: params };\n\n  const schoolId = normalizedParams.schoolId ?? normalizedParams.school_id ?? null;\n  const limit = normalizedParams.limit ?? 50;\n  const offset = normalizedParams.offset ?? 0;\n  const hasSchoolFilter = Boolean(schoolId);\n\n  const query = `query Events(${hasSchoolFilter ? '$schoolId: uuid!, ' : ''}$limit: Int, $offset: Int) {\n    events(\n      ${hasSchoolFilter ? 'where: { school_id: { _eq: $schoolId } },' : ''}\n      order_by: { starts_at: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      id\n      title\n      description\n      starts_at\n      ends_at\n      classroom_id\n      school_id\n    }\n  }`;\n\n  const variables = { limit, offset, ...(hasSchoolFilter ? { schoolId } : {}) };\n  const data = await graphqlRequest({ query, variables });\n  return data?.events || [];\n}\n"],"names":["listEvents","params","normalizedParams","schoolId","limit","offset","hasSchoolFilter","query","variables","data","graphqlRequest"],"mappings":"wCAcO,eAAeA,EAAWC,EAAS,GAAI,CAC5C,MAAMC,EAAmBD,GAAU,OAAOA,GAAW,UAAY,CAAC,MAAM,QAAQA,CAAM,EAClFA,EACA,CAAE,SAAUA,CAAM,EAEhBE,EAAWD,EAAiB,UAAYA,EAAiB,WAAa,KACtEE,EAAQF,EAAiB,OAAS,GAClCG,EAASH,EAAiB,QAAU,EACpCI,EAAkB,EAAQH,EAE1BI,EAAQ,gBAAgBD,EAAkB,qBAAuB,EAAE;AAAA;AAAA,QAEnEA,EAAkB,4CAA8C,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAelEE,EAAY,CAAE,MAAAJ,EAAO,OAAAC,EAAQ,GAAIC,EAAkB,CAAE,SAAAH,GAAa,CAAA,CAAG,EACrEM,EAAO,MAAMC,EAAe,CAAE,MAAAH,EAAO,UAAAC,CAAS,CAAE,EACtD,OAAOC,GAAA,YAAAA,EAAM,SAAU,CAAA,CACzB"}