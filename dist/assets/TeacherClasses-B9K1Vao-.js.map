{"version":3,"file":"TeacherClasses-B9K1Vao-.js","sources":["../../src/pages/TeacherClasses.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useTranslation } from '@/components/shared/InternationalizationProvider';\nimport ProtectedRoute from '@/components/shared/ProtectedRoute';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Link } from 'react-router-dom';\nimport { createPageUrl } from '@/utils';\nimport { ultraMinimalToast } from '@/components/shared/UltraMinimalToast';\nimport { Users, RefreshCw, ExternalLink } from 'lucide-react';\nimport { useAuth } from '@/components/hooks/useAuth';\nimport { Course, Enrollment } from '@/api/entities';\n\nexport default function TeacherClasses() {\n  const { user } = useAuth();\n  const [loading, setLoading] = useState(true);\n  const [classes, setClasses] = useState([]);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const fetchClasses = async () => {\n      if (!user) return;\n      setLoading(true);\n      try {\n        // Fetch courses taught by this teacher\n        const courses = await Course.filter({ teacher_id: user.id });\n        // For each course, determine student count via Enrollment entity\n        const classData = await Promise.all(\n          (courses || []).map(async (course) => {\n            try {\n              const enrollments = await Enrollment.filter({ course_id: course.id });\n              return {\n                ...course,\n                studentCount: Array.isArray(enrollments) ? enrollments.length : 0\n              };\n            } catch (err) {\n              return { ...course, studentCount: 0 };\n            }\n          })\n        );\n        setClasses(classData);\n      } catch (error) {\n        console.error('Failed to fetch teacher classes:', error);\n        ultraMinimalToast('Unable to load classes. Please try again later.', 'error');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchClasses();\n  }, [user]);\n\n  return (\n    <ProtectedRoute allowedRoles={['teacher', 'school_admin', 'district_admin', 'system_admin', 'admin']} requireAuth={true}>\n      <div className=\"min-h-screen bg-warm-cream p-6\">\n        <div className=\"max-w-7xl mx-auto space-y-8\">\n          <header className=\"flex justify-between items-start\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">{t('teacher_classes.title')}</h1>\n              <p className=\"text-gray-600\">{t('teacher_classes.description')}</p>\n            </div>\n            <Link to=\"/settings?tab=integrations\">\n              <Button variant=\"outline\" className=\"gap-2\">\n                <RefreshCw className=\"w-4 h-4\" />\n                Sync Google Classroom\n              </Button>\n            </Link>\n          </header>\n\n          {loading && (\n            <p className=\"text-gray-500\">Loading your classesâ€¦</p>\n          )}\n\n          {!loading && (!classes || classes.length === 0) && (\n            <Card className=\"bg-blue-50 border-blue-200\">\n              <CardHeader>\n                <CardTitle className=\"text-xl font-bold text-gray-900\">{t('teacher_classes.empty_title')}</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <p className=\"text-gray-700\">{t('teacher_classes.empty_description')}</p>\n                <div className=\"flex gap-4 flex-wrap\">\n                  <Link to=\"/settings?tab=integrations\">\n                    <Button className=\"gap-2 bg-blue-600 hover:bg-blue-700\">\n                      <ExternalLink className=\"w-4 h-4\" />\n                      Connect Google Classroom\n                    </Button>\n                  </Link>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {(!loading) && classes && classes.length > 0 && (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {classes.map((cls) => (\n                <Card key={cls.id} className=\"bg-white border border-gray-200 shadow-sm relative overflow-hidden group hover:shadow-md transition-shadow\">\n                  {cls.source_type === 'google_classroom' && (\n                    <div className=\"absolute top-0 right-0 p-2\">\n                      <Badge variant=\"secondary\" className=\"bg-green-100 text-green-800 hover:bg-green-100 border-0 text-xs\">\n                        Synced\n                      </Badge>\n                    </div>\n                  )}\n                  <CardContent className=\"p-4 space-y-4 pt-6\">\n                    <div className=\"flex items-center gap-2\">\n                      <div className={`p-2 rounded-lg ${cls.source_type === 'google_classroom' ? 'bg-green-100' : 'bg-blue-100'}`}>\n                        {cls.source_type === 'google_classroom' ? (\n                          <RefreshCw className=\"w-5 h-5 text-green-600\" />\n                        ) : (\n                          <Users className=\"w-5 h-5 text-blue-600\" />\n                        )}\n                      </div>\n                      <div>\n                        <h3 className=\"font-semibold text-lg text-gray-900 line-clamp-1\">{cls.name}</h3>\n                        <p className=\"text-xs text-gray-500 line-clamp-1\">{cls.description || 'No description'}</p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center text-sm text-gray-600\">\n                      <Users className=\"w-4 h-4 mr-2\" />\n                      {cls.studentCount} Students\n                    </div>\n                    <div className=\"flex gap-2 pt-2\">\n                      <Link to={createPageUrl(`TeacherAssignments?course_id=${cls.id}`)} className=\"flex-1\">\n                        <Button size=\"sm\" variant=\"outline\" className=\"w-full\">Assignments</Button>\n                      </Link>\n                      <Link to={createPageUrl(`TeacherMessages?course_id=${cls.id}`)} className=\"flex-1\">\n                        <Button size=\"sm\" variant=\"outline\" className=\"w-full\">Message</Button>\n                      </Link>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </ProtectedRoute>\n  );\n}\n"],"names":["TeacherClasses","user","useAuth","loading","setLoading","useState","classes","setClasses","useTranslation","useEffect","courses","Course","classData","course","enrollments","Enrollment","error","ultraMinimalToast","ProtectedRoute","jsxs","jsx","Link","Button","RefreshCw","Card","CardHeader","CardTitle","CardContent","ExternalLink","cls","Badge","Users","createPageUrl"],"mappings":"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"}