{"version":3,"file":"commandCenter-D8fxt2Gz.js","sources":["../../src/domains/commandCenter.js"],"sourcesContent":["import { API_BASE_URL } from '@/config/api';\n\nexport const ORCHESTRATOR_TYPES = {\n  RUNBOOK_CREATE: 'RUNBOOK_CREATE',\n  ESCALATE: 'ESCALATE',\n  ROLLBACK: 'ROLLBACK'\n};\n\nasync function http(path, { method = 'GET', body } = {}) {\n  const res = await fetch(`${API_BASE_URL}${path}`, {\n    method,\n    headers: { 'Content-Type': 'application/json' },\n    body: body ? JSON.stringify(body) : undefined\n  });\n\n  if (!res.ok) {\n    let message = `HTTP ${res.status}`;\n    try {\n      const json = await res.json();\n      message = json?.message || json?.error || message;\n    } catch {\n      // ignore\n    }\n    throw new Error(message);\n  }\n\n  return res.json();\n}\n\nexport async function listCommandCenterActions({ status, type, limit } = {}) {\n  const params = new URLSearchParams();\n  if (status) params.set('status', status);\n  if (type) params.set('type', type);\n  if (limit) params.set('limit', String(limit));\n\n  const suffix = params.toString() ? `?${params.toString()}` : '';\n  return http(`/command-center/actions${suffix}`);\n}\n\nexport async function getCommandCenterAction(id) {\n  return http(`/command-center/actions/${encodeURIComponent(id)}`);\n}\n\nexport async function createCommandCenterAction({ type, title, payload, actorId }) {\n  return http('/command-center/actions', {\n    method: 'POST',\n    body: {\n      type,\n      title,\n      payload,\n      createdBy: actorId ?? null\n    }\n  });\n}\n\nexport async function approveCommandCenterAction(id, actorId) {\n  return http(`/command-center/actions/${encodeURIComponent(id)}/approve`, {\n    method: 'POST',\n    body: { actorId: actorId ?? null }\n  });\n}\n\nexport async function executeCommandCenterAction(id, actorId) {\n  return http(`/command-center/actions/${encodeURIComponent(id)}/execute`, {\n    method: 'POST',\n    body: { actorId: actorId ?? null }\n  });\n}\n\nexport async function cancelCommandCenterAction(id, { actorId, reason } = {}) {\n  return http(`/command-center/actions/${encodeURIComponent(id)}/cancel`, {\n    method: 'POST',\n    body: { actorId: actorId ?? null, reason: reason ?? null }\n  });\n}\n\nexport async function listCommandCenterAudit({ limit } = {}) {\n  const params = new URLSearchParams();\n  if (limit) params.set('limit', String(limit));\n  const suffix = params.toString() ? `?${params.toString()}` : '';\n  return http(`/command-center/audit${suffix}`);\n}\n\nexport async function listOrchestratorActions() {\n  return listCommandCenterActions();\n}\n\nexport async function approveAction(id, actorId) {\n  return approveCommandCenterAction(id, actorId);\n}\n\nexport async function cancelAction(id, actorId, reason) {\n  return cancelCommandCenterAction(id, { actorId, reason });\n}\n\nexport async function executeAction(action, actorId) {\n  const id = typeof action === 'string' ? action : action?.id;\n  if (!id) throw new Error('Missing action id');\n  return executeCommandCenterAction(id, actorId);\n}\n"],"names":["ORCHESTRATOR_TYPES","http","path","method","body","res","API_BASE_URL","message","json","listCommandCenterActions","status","type","limit","params","suffix","getCommandCenterAction","id","createCommandCenterAction","title","payload","actorId","approveCommandCenterAction","executeCommandCenterAction","cancelCommandCenterAction","reason","listCommandCenterAudit","listOrchestratorActions","approveAction","cancelAction","executeAction","action"],"mappings":"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"}