import{n as g,X as j,Y as f,r as u,j as o}from"./index-BPP-_OMN.js";async function a(t,l={},s){const c=await g.auth.getAccessToken(),i={"content-type":"application/json",...l.headers||{}};c&&(i.authorization=`Bearer ${c}`),s!=null&&s.organizationId&&(i["x-teachmo-org-id"]=s.organizationId),s!=null&&s.schoolId&&(i["x-teachmo-school-id"]=String(s.schoolId));const n=await fetch(`${j()}${t}`,{...l,headers:i});if(!n.ok)throw new Error(`HTTP ${n.status}`);return l.method==="HEAD"?{}:n.json()}function T(){const t=f(),[l,s]=u.useState([]),[c,i]=u.useState([]),n=async()=>{if(!t.organizationId)return;const[e,r]=await Promise.all([a("/courses",{method:"GET"},t),a("/courses/enrollments/me",{method:"GET"},t)]);s(e),i(r)};u.useEffect(()=>{n()},[t.organizationId]);const h=async e=>{await a(`/courses/${e}/enroll`,{method:"POST"},t),n()},m=async(e,r)=>{await a(`/courses/${e}/modules/${r}/complete`,{method:"POST"},t),n()},p=Object.fromEntries(c.map(e=>[e.courseId,e]));return o.jsxs("div",{children:[o.jsx("h1",{children:"Training Courses"}),l.map(e=>{const r=p[e.id],x=r?r.completedModules.length:0;return o.jsxs("div",{style:{border:"1px solid #ccc",margin:"1rem",padding:"1rem"},children:[o.jsx("h2",{children:e.title}),o.jsx("p",{children:e.description}),!r&&o.jsx("button",{onClick:()=>h(e.id),children:"Enroll"}),r&&o.jsxs("div",{children:[o.jsxs("p",{children:["Progress: ",x,"/",e.modules.length]}),e.modules.map(d=>o.jsxs("div",{children:[d.title," ",!r.completedModules.includes(d.id)&&o.jsx("button",{onClick:()=>m(e.id,d.id),children:"Complete"})]},d.id))]})]},e.id)})]})}export{T as default};
//# sourceMappingURL=PartnerTraining-DKFBT4Z5.js.map
