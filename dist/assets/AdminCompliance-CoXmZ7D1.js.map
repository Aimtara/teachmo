{"version":3,"file":"AdminCompliance-CoXmZ7D1.js","sources":["../../src/pages/AdminCompliance.jsx"],"sourcesContent":["import { useMemo, useState } from 'react';\nimport { useMutation, useQuery } from '@tanstack/react-query';\nimport { API_BASE_URL } from '@/config/api';\nimport { useToast } from '@/components/ui/use-toast';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useTenantScope } from '@/hooks/useTenantScope';\nimport { nhost } from '@/lib/nhostClient';\n\nasync function fetchJson(url, opts = {}) {\n  const response = await fetch(url, opts);\n  if (!response.ok) {\n    const text = await response.text();\n    throw new Error(text || 'Request failed');\n  }\n  return response.json();\n}\n\nexport default function AdminCompliance() {\n  const { data: scope } = useTenantScope();\n  const { toast } = useToast();\n  const [dsarUserId, setDsarUserId] = useState('');\n  const [dsarReason, setDsarReason] = useState('');\n  const [deleteUserId, setDeleteUserId] = useState('');\n  const [deleteReason, setDeleteReason] = useState('');\n  const [deleteConfirm, setDeleteConfirm] = useState('');\n\n  const headersQuery = useQuery({\n    queryKey: ['compliance_token'],\n    queryFn: async () => {\n      const token = await nhost.auth.getAccessToken();\n      return {\n        'Content-Type': 'application/json',\n        ...(token ? { Authorization: `Bearer ${token}` } : {}),\n      };\n    },\n  });\n\n  const retentionQuery = useQuery({\n    queryKey: ['retention_policy', scope?.districtId, scope?.schoolId],\n    enabled: Boolean(scope?.districtId),\n    queryFn: async () => fetchJson(`${API_BASE_URL}/admin/retention-policy`, { headers: headersQuery.data }),\n  });\n\n  const dsarListQuery = useQuery({\n    queryKey: ['dsar_exports', scope?.districtId, scope?.schoolId],\n    enabled: Boolean(scope?.districtId),\n    queryFn: async () => fetchJson(`${API_BASE_URL}/admin/dsar-exports`, { headers: headersQuery.data }),\n  });\n\n  const aiUsageQuery = useQuery({\n    queryKey: ['ai-usage-compliance', scope?.districtId, scope?.schoolId],\n    enabled: Boolean(scope?.districtId && headersQuery.data),\n    queryFn: async () =>\n      fetchJson(`${API_BASE_URL}/admin/ai/usage?limit=20`, { headers: headersQuery.data }),\n  });\n\n  const dsarMutation = useMutation({\n    mutationFn: async () => {\n      return fetchJson(`${API_BASE_URL}/admin/dsar-exports`, {\n        method: 'POST',\n        headers: headersQuery.data,\n        body: JSON.stringify({ userId: dsarUserId, reason: dsarReason }),\n      });\n    },\n    onSuccess: (data) => {\n      toast({\n        title: 'Export ready',\n        description: `DSAR export ${data?.id || ''} is ready to download.`,\n      });\n      setDsarUserId('');\n      setDsarReason('');\n      dsarListQuery.refetch();\n    },\n    onError: (error) => {\n      toast({\n        variant: 'destructive',\n        title: 'Export failed',\n        description: error instanceof Error ? error.message : 'Unable to create DSAR export.',\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async () => {\n      return fetchJson(`${API_BASE_URL}/admin/users/${deleteUserId}/hard-delete`, {\n        method: 'POST',\n        headers: headersQuery.data,\n        body: JSON.stringify({ reason: deleteReason }),\n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: 'User deleted',\n        description: 'The user record has been permanently removed.',\n      });\n      setDeleteUserId('');\n      setDeleteReason('');\n      setDeleteConfirm('');\n    },\n    onError: (error) => {\n      toast({\n        variant: 'destructive',\n        title: 'Deletion failed',\n        description: error instanceof Error ? error.message : 'Unable to delete user.',\n      });\n    },\n  });\n\n  const canDelete = useMemo(() => deleteConfirm.trim().toLowerCase() === 'delete', [deleteConfirm]);\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-semibold\">Compliance Center</h1>\n        <p className=\"text-sm text-muted-foreground\">\n          Handle DSAR requests, retention rules, and permanent deletion workflows for your tenant.\n        </p>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Retention Policy</CardTitle>\n        </CardHeader>\n        <CardContent className=\"text-sm space-y-2\">\n          <div>\n            <span className=\"text-muted-foreground\">Audit logs:</span>{' '}\n            {retentionQuery.data?.auditLogDays ? `${retentionQuery.data.auditLogDays} days` : 'Loading…'}\n          </div>\n          <div>\n            <span className=\"text-muted-foreground\">DSAR exports:</span>{' '}\n            {retentionQuery.data?.dsarExportDays ? `${retentionQuery.data.dsarExportDays} days` : 'Loading…'}\n          </div>\n          <p className=\"text-xs text-muted-foreground\">\n            Update retention settings in Tenant Settings to change purge windows.\n          </p>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>DSAR Exports</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid gap-3 md:grid-cols-2\">\n            <div>\n              <div className=\"text-xs text-muted-foreground mb-1\">User ID</div>\n              <Input value={dsarUserId} onChange={(e) => setDsarUserId(e.target.value)} placeholder=\"UUID\" />\n            </div>\n            <div>\n              <div className=\"text-xs text-muted-foreground mb-1\">Reason (optional)</div>\n              <Input value={dsarReason} onChange={(e) => setDsarReason(e.target.value)} placeholder=\"DSAR request\" />\n            </div>\n          </div>\n          <Button onClick={() => dsarMutation.mutate()} disabled={!dsarUserId || dsarMutation.isPending}>\n            {dsarMutation.isPending ? 'Requesting…' : 'Request export'}\n          </Button>\n\n          <div className=\"pt-2 border-t text-sm\">\n            <div className=\"font-medium mb-2\">Recent exports</div>\n            {dsarListQuery.isLoading ? (\n              <div className=\"text-muted-foreground\">Loading exports…</div>\n            ) : !dsarListQuery.data?.length ? (\n              <div className=\"text-muted-foreground\">No exports requested yet.</div>\n            ) : (\n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full text-sm\">\n                  <thead>\n                    <tr className=\"border-b text-left\">\n                      <th className=\"p-2\">Export ID</th>\n                      <th className=\"p-2\">Subject</th>\n                      <th className=\"p-2\">Created</th>\n                      <th className=\"p-2\">Expires</th>\n                      <th className=\"p-2\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {dsarListQuery.data.map((row) => (\n                      <tr key={row.id} className=\"border-b\">\n                        <td className=\"p-2 font-mono text-xs\">{row.id}</td>\n                        <td className=\"p-2 font-mono text-xs\">{row.subject_user_id}</td>\n                        <td className=\"p-2\">{row.created_at ? new Date(row.created_at).toLocaleString() : '—'}</td>\n                        <td className=\"p-2\">{row.expires_at ? new Date(row.expires_at).toLocaleString() : '—'}</td>\n                        <td className=\"p-2\">\n                          <Button\n                            size=\"sm\"\n                            variant=\"secondary\"\n                            onClick={() => window.open(`${API_BASE_URL}/admin/dsar-exports/${row.id}/download`, '_blank')}\n                          >\n                            Download\n                          </Button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Permanent Deletion</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid gap-3 md:grid-cols-2\">\n            <div>\n              <div className=\"text-xs text-muted-foreground mb-1\">User ID</div>\n              <Input value={deleteUserId} onChange={(e) => setDeleteUserId(e.target.value)} placeholder=\"UUID\" />\n            </div>\n            <div>\n              <div className=\"text-xs text-muted-foreground mb-1\">Reason</div>\n              <Input value={deleteReason} onChange={(e) => setDeleteReason(e.target.value)} placeholder=\"Policy violation\" />\n            </div>\n          </div>\n          <div>\n            <div className=\"text-xs text-muted-foreground mb-1\">Type DELETE to confirm</div>\n            <Input value={deleteConfirm} onChange={(e) => setDeleteConfirm(e.target.value)} placeholder=\"DELETE\" />\n          </div>\n          <Button\n            variant=\"destructive\"\n            onClick={() => deleteMutation.mutate()}\n            disabled={!deleteUserId || !canDelete || deleteMutation.isPending}\n          >\n            {deleteMutation.isPending ? 'Deleting…' : 'Permanently delete user'}\n          </Button>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>AI Usage Compliance</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-3 text-sm\">\n          <p className=\"text-muted-foreground\">\n            Recent AI usage logs are retained for compliance and audit review.\n          </p>\n          {aiUsageQuery.isLoading ? (\n            <div className=\"text-muted-foreground\">Loading AI usage…</div>\n          ) : aiUsageQuery.data?.usage?.length ? (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full text-sm\">\n                <thead>\n                  <tr className=\"border-b text-left\">\n                    <th className=\"p-2\">Timestamp</th>\n                    <th className=\"p-2\">Model</th>\n                    <th className=\"p-2\">Tokens</th>\n                    <th className=\"p-2\">Cost</th>\n                    <th className=\"p-2\">Risk</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {aiUsageQuery.data.usage.map((row) => (\n                    <tr key={row.id} className=\"border-b\">\n                      <td className=\"p-2\">{row.created_at ? new Date(row.created_at).toLocaleString() : '—'}</td>\n                      <td className=\"p-2\">{row.model ?? '—'}</td>\n                      <td className=\"p-2\">{row.token_total ?? '—'}</td>\n                      <td className=\"p-2\">${Number(row.cost_usd || 0).toFixed(2)}</td>\n                      <td className=\"p-2\">{row.safety_risk_score ?? '—'}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <div className=\"text-muted-foreground\">No AI usage logged yet.</div>\n          )}\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Compliance Documentation</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-3 text-sm text-muted-foreground\">\n          <p>\n            Teachmo maintains audit logs for administrative actions, impersonation sessions, and data exports to\n            support regulatory audits.\n          </p>\n          <ul className=\"list-disc pl-5 space-y-1\">\n            <li>DSAR exports include profile data, identities, and audit history for the subject.</li>\n            <li>Retention policies are enforced nightly by the automated purge job.</li>\n            <li>Permanent deletion bypasses soft delete and logs the before/after snapshot in audit logs.</li>\n          </ul>\n          <Textarea\n            value={`Need documentation for GDPR, FERPA, or CCPA? Contact compliance@teachmo.com for our latest compliance packet.`}\n            readOnly\n            rows={3}\n          />\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":["fetchJson","url","opts","response","text","AdminCompliance","scope","useTenantScope","toast","useToast","dsarUserId","setDsarUserId","useState","dsarReason","setDsarReason","deleteUserId","setDeleteUserId","deleteReason","setDeleteReason","deleteConfirm","setDeleteConfirm","headersQuery","useQuery","token","nhost","retentionQuery","API_BASE_URL","dsarListQuery","aiUsageQuery","dsarMutation","useMutation","data","error","deleteMutation","canDelete","useMemo","jsxs","jsx","Card","CardHeader","CardTitle","CardContent","_a","_b","Input","e","Button","_c","row","_e","_d","Textarea"],"mappings":"iPAWA,eAAeA,EAAUC,EAAKC,EAAO,GAAI,CACvC,MAAMC,EAAW,MAAM,MAAMF,EAAKC,CAAI,EACtC,GAAI,CAACC,EAAS,GAAI,CAChB,MAAMC,EAAO,MAAMD,EAAS,KAAA,EAC5B,MAAM,IAAI,MAAMC,GAAQ,gBAAgB,CAC1C,CACA,OAAOD,EAAS,KAAA,CAClB,CAEA,SAAwBE,GAAkB,eACxC,KAAM,CAAE,KAAMC,CAAA,EAAUC,EAAA,EAClB,CAAE,MAAAC,CAAA,EAAUC,EAAA,EACZ,CAACC,EAAYC,CAAa,EAAIC,EAAAA,SAAS,EAAE,EACzC,CAACC,EAAYC,CAAa,EAAIF,EAAAA,SAAS,EAAE,EACzC,CAACG,EAAcC,CAAe,EAAIJ,EAAAA,SAAS,EAAE,EAC7C,CAACK,EAAcC,CAAe,EAAIN,EAAAA,SAAS,EAAE,EAC7C,CAACO,EAAeC,CAAgB,EAAIR,EAAAA,SAAS,EAAE,EAE/CS,EAAeC,EAAS,CAC5B,SAAU,CAAC,kBAAkB,EAC7B,QAAS,SAAY,CACnB,MAAMC,EAAQ,MAAMC,EAAM,KAAK,eAAA,EAC/B,MAAO,CACL,eAAgB,mBAChB,GAAID,EAAQ,CAAE,cAAe,UAAUA,CAAK,IAAO,CAAA,CAAC,CAExD,CAAA,CACD,EAEKE,EAAiBH,EAAS,CAC9B,SAAU,CAAC,mBAAoBhB,GAAA,YAAAA,EAAO,WAAYA,GAAA,YAAAA,EAAO,QAAQ,EACjE,QAAS,GAAQA,GAAA,MAAAA,EAAO,YACxB,QAAS,SAAYN,EAAU,GAAG0B,CAAY,0BAA2B,CAAE,QAASL,EAAa,IAAA,CAAM,CAAA,CACxG,EAEKM,EAAgBL,EAAS,CAC7B,SAAU,CAAC,eAAgBhB,GAAA,YAAAA,EAAO,WAAYA,GAAA,YAAAA,EAAO,QAAQ,EAC7D,QAAS,GAAQA,GAAA,MAAAA,EAAO,YACxB,QAAS,SAAYN,EAAU,GAAG0B,CAAY,sBAAuB,CAAE,QAASL,EAAa,IAAA,CAAM,CAAA,CACpG,EAEKO,EAAeN,EAAS,CAC5B,SAAU,CAAC,sBAAuBhB,GAAA,YAAAA,EAAO,WAAYA,GAAA,YAAAA,EAAO,QAAQ,EACpE,QAAS,GAAQA,GAAA,MAAAA,EAAO,YAAce,EAAa,MACnD,QAAS,SACPrB,EAAU,GAAG0B,CAAY,2BAA4B,CAAE,QAASL,EAAa,IAAA,CAAM,CAAA,CACtF,EAEKQ,EAAeC,EAAY,CAC/B,WAAY,SACH9B,EAAU,GAAG0B,CAAY,sBAAuB,CACrD,OAAQ,OACR,QAASL,EAAa,KACtB,KAAM,KAAK,UAAU,CAAE,OAAQX,EAAY,OAAQG,EAAY,CAAA,CAChE,EAEH,UAAYkB,GAAS,CACnBvB,EAAM,CACJ,MAAO,eACP,YAAa,gBAAeuB,GAAA,YAAAA,EAAM,KAAM,EAAE,wBAAA,CAC3C,EACDpB,EAAc,EAAE,EAChBG,EAAc,EAAE,EAChBa,EAAc,QAAA,CAChB,EACA,QAAUK,GAAU,CAClBxB,EAAM,CACJ,QAAS,cACT,MAAO,gBACP,YAAawB,aAAiB,MAAQA,EAAM,QAAU,+BAAA,CACvD,CACH,CAAA,CACD,EAEKC,EAAiBH,EAAY,CACjC,WAAY,SACH9B,EAAU,GAAG0B,CAAY,gBAAgBX,CAAY,eAAgB,CAC1E,OAAQ,OACR,QAASM,EAAa,KACtB,KAAM,KAAK,UAAU,CAAE,OAAQJ,EAAc,CAAA,CAC9C,EAEH,UAAW,IAAM,CACfT,EAAM,CACJ,MAAO,eACP,YAAa,+CAAA,CACd,EACDQ,EAAgB,EAAE,EAClBE,EAAgB,EAAE,EAClBE,EAAiB,EAAE,CACrB,EACA,QAAUY,GAAU,CAClBxB,EAAM,CACJ,QAAS,cACT,MAAO,kBACP,YAAawB,aAAiB,MAAQA,EAAM,QAAU,wBAAA,CACvD,CACH,CAAA,CACD,EAEKE,EAAYC,UAAQ,IAAMhB,EAAc,OAAO,gBAAkB,SAAU,CAACA,CAAa,CAAC,EAEhG,OACEiB,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,yBAAyB,SAAA,oBAAiB,EACxDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAgC,SAAA,0FAAA,CAE7C,CAAA,EACF,SAECC,EAAA,CACC,SAAA,CAAAD,MAACE,EAAA,CACC,SAAAF,EAAAA,IAACG,EAAA,CAAU,SAAA,kBAAA,CAAgB,EAC7B,EACAJ,EAAAA,KAACK,EAAA,CAAY,UAAU,oBACrB,SAAA,CAAAL,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,cAAW,EAAQ,KAC1DK,EAAAjB,EAAe,OAAf,MAAAiB,EAAqB,aAAe,GAAGjB,EAAe,KAAK,YAAY,QAAU,UAAA,EACpF,SACC,MAAA,CACC,SAAA,CAAAY,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,gBAAa,EAAQ,KAC5DM,EAAAlB,EAAe,OAAf,MAAAkB,EAAqB,eAAiB,GAAGlB,EAAe,KAAK,cAAc,QAAU,UAAA,EACxF,EACAY,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAgC,SAAA,uEAAA,CAE7C,CAAA,CAAA,CACF,CAAA,EACF,SAECC,EAAA,CACC,SAAA,CAAAD,MAACE,EAAA,CACC,SAAAF,EAAAA,IAACG,EAAA,CAAU,SAAA,cAAA,CAAY,EACzB,EACAJ,EAAAA,KAACK,EAAA,CAAY,UAAU,YACrB,SAAA,CAAAL,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,qCAAqC,SAAA,UAAO,EAC3DA,EAAAA,IAACO,EAAA,CAAM,MAAOlC,EAAY,SAAWmC,GAAMlC,EAAckC,EAAE,OAAO,KAAK,EAAG,YAAY,MAAA,CAAO,CAAA,EAC/F,SACC,MAAA,CACC,SAAA,CAAAR,EAAAA,IAAC,MAAA,CAAI,UAAU,qCAAqC,SAAA,oBAAiB,EACrEA,EAAAA,IAACO,EAAA,CAAM,MAAO/B,EAAY,SAAWgC,GAAM/B,EAAc+B,EAAE,OAAO,KAAK,EAAG,YAAY,cAAA,CAAe,CAAA,CAAA,CACvG,CAAA,EACF,EACAR,EAAAA,IAACS,EAAA,CAAO,QAAS,IAAMjB,EAAa,OAAA,EAAU,SAAU,CAACnB,GAAcmB,EAAa,UACjF,SAAAA,EAAa,UAAY,cAAgB,iBAC5C,EAEAO,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,mBAAmB,SAAA,iBAAc,EAC/CV,EAAc,UACbU,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,kBAAA,CAAgB,GACpDU,EAAApB,EAAc,OAAd,MAAAoB,EAAoB,OAGvBV,EAAAA,IAAC,MAAA,CAAI,UAAU,kBACb,SAAAD,EAAAA,KAAC,QAAA,CAAM,UAAU,qBACf,SAAA,CAAAC,MAAC,QAAA,CACC,SAAAD,EAAAA,KAAC,KAAA,CAAG,UAAU,qBACZ,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,MAAM,SAAA,YAAS,EAC7BA,EAAAA,IAAC,KAAA,CAAG,UAAU,MAAM,SAAA,UAAO,EAC3BA,EAAAA,IAAC,KAAA,CAAG,UAAU,MAAM,SAAA,UAAO,EAC3BA,EAAAA,IAAC,KAAA,CAAG,UAAU,MAAM,SAAA,UAAO,EAC3BA,EAAAA,IAAC,KAAA,CAAG,UAAU,KAAA,CAAM,CAAA,CAAA,CACtB,CAAA,CACF,EACAA,EAAAA,IAAC,QAAA,CACE,SAAAV,EAAc,KAAK,IAAKqB,GACvBZ,EAAAA,KAAC,KAAA,CAAgB,UAAU,WACzB,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wBAAyB,SAAAW,EAAI,GAAG,EAC9CX,EAAAA,IAAC,KAAA,CAAG,UAAU,wBAAyB,WAAI,gBAAgB,EAC3DA,EAAAA,IAAC,KAAA,CAAG,UAAU,MAAO,SAAAW,EAAI,WAAa,IAAI,KAAKA,EAAI,UAAU,EAAE,eAAA,EAAmB,GAAA,CAAI,EACtFX,EAAAA,IAAC,KAAA,CAAG,UAAU,MAAO,SAAAW,EAAI,WAAa,IAAI,KAAKA,EAAI,UAAU,EAAE,eAAA,EAAmB,GAAA,CAAI,EACtFX,EAAAA,IAAC,KAAA,CAAG,UAAU,MACZ,SAAAA,EAAAA,IAACS,EAAA,CACC,KAAK,KACL,QAAQ,YACR,QAAS,IAAM,OAAO,KAAK,GAAGpB,CAAY,uBAAuBsB,EAAI,EAAE,YAAa,QAAQ,EAC7F,SAAA,UAAA,CAAA,CAED,CACF,CAAA,GAbOA,EAAI,EAcb,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,QAjCC,MAAA,CAAI,UAAU,wBAAwB,SAAA,2BAAA,CAAyB,CAiChE,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,EACF,SAECV,EAAA,CACC,SAAA,CAAAD,MAACE,EAAA,CACC,SAAAF,EAAAA,IAACG,EAAA,CAAU,SAAA,oBAAA,CAAkB,EAC/B,EACAJ,EAAAA,KAACK,EAAA,CAAY,UAAU,YACrB,SAAA,CAAAL,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,qCAAqC,SAAA,UAAO,EAC3DA,EAAAA,IAACO,EAAA,CAAM,MAAO7B,EAAc,SAAW8B,GAAM7B,EAAgB6B,EAAE,OAAO,KAAK,EAAG,YAAY,MAAA,CAAO,CAAA,EACnG,SACC,MAAA,CACC,SAAA,CAAAR,EAAAA,IAAC,MAAA,CAAI,UAAU,qCAAqC,SAAA,SAAM,EAC1DA,EAAAA,IAACO,EAAA,CAAM,MAAO3B,EAAc,SAAW4B,GAAM3B,EAAgB2B,EAAE,OAAO,KAAK,EAAG,YAAY,kBAAA,CAAmB,CAAA,CAAA,CAC/G,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAR,EAAAA,IAAC,MAAA,CAAI,UAAU,qCAAqC,SAAA,yBAAsB,EAC1EA,EAAAA,IAACO,EAAA,CAAM,MAAOzB,EAAe,SAAW0B,GAAMzB,EAAiByB,EAAE,OAAO,KAAK,EAAG,YAAY,QAAA,CAAS,CAAA,EACvG,EACAR,EAAAA,IAACS,EAAA,CACC,QAAQ,cACR,QAAS,IAAMb,EAAe,OAAA,EAC9B,SAAU,CAAClB,GAAgB,CAACmB,GAAaD,EAAe,UAEvD,SAAAA,EAAe,UAAY,YAAc,yBAAA,CAAA,CAC5C,CAAA,CACF,CAAA,EACF,SAECK,EAAA,CACC,SAAA,CAAAD,MAACE,EAAA,CACC,SAAAF,EAAAA,IAACG,EAAA,CAAU,SAAA,qBAAA,CAAmB,EAChC,EACAJ,EAAAA,KAACK,EAAA,CAAY,UAAU,oBACrB,SAAA,CAAAJ,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,qEAErC,EACCT,EAAa,UACZS,MAAC,OAAI,UAAU,wBAAwB,6BAAiB,GACtDY,GAAAC,EAAAtB,EAAa,OAAb,YAAAsB,EAAmB,QAAnB,MAAAD,EAA0B,aAC3B,MAAA,CAAI,UAAU,kBACb,SAAAb,EAAAA,KAAC,QAAA,CAAM,UAAU,qBACf,SAAA,CAAAC,MAAC,QAAA,CACC,SAAAD,EAAAA,KAAC,KAAA,CAAG,UAAU,qBACZ,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,MAAM,SAAA,YAAS,EAC7BA,EAAAA,IAAC,KAAA,CAAG,UAAU,MAAM,SAAA,QAAK,EACzBA,EAAAA,IAAC,KAAA,CAAG,UAAU,MAAM,SAAA,SAAM,EAC1BA,EAAAA,IAAC,KAAA,CAAG,UAAU,MAAM,SAAA,OAAI,EACxBA,EAAAA,IAAC,KAAA,CAAG,UAAU,MAAM,SAAA,MAAA,CAAI,CAAA,CAAA,CAC1B,CAAA,CACF,EACAA,EAAAA,IAAC,QAAA,CACE,SAAAT,EAAa,KAAK,MAAM,IAAKoB,GAC5BZ,EAAAA,KAAC,KAAA,CAAgB,UAAU,WACzB,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,MAAO,SAAAW,EAAI,WAAa,IAAI,KAAKA,EAAI,UAAU,EAAE,eAAA,EAAmB,GAAA,CAAI,QACrF,KAAA,CAAG,UAAU,MAAO,SAAAA,EAAI,OAAS,IAAI,QACrC,KAAA,CAAG,UAAU,MAAO,SAAAA,EAAI,aAAe,IAAI,EAC5CZ,EAAAA,KAAC,KAAA,CAAG,UAAU,MAAM,SAAA,CAAA,IAAE,OAAOY,EAAI,UAAY,CAAC,EAAE,QAAQ,CAAC,CAAA,EAAE,QAC1D,KAAA,CAAG,UAAU,MAAO,SAAAA,EAAI,mBAAqB,GAAA,CAAI,CAAA,GAL3CA,EAAI,EAMb,CACD,CAAA,CACH,CAAA,EACF,EACF,EAEAX,MAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,yBAAA,CAAuB,CAAA,CAAA,CAElE,CAAA,EACF,SAECC,EAAA,CACC,SAAA,CAAAD,MAACE,EAAA,CACC,SAAAF,EAAAA,IAACG,EAAA,CAAU,SAAA,0BAAA,CAAwB,EACrC,EACAJ,EAAAA,KAACK,EAAA,CAAY,UAAU,0CACrB,SAAA,CAAAJ,EAAAA,IAAC,KAAE,SAAA,iIAAA,CAGH,EACAD,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,mFAAA,CAAiF,EACrFA,EAAAA,IAAC,MAAG,SAAA,qEAAA,CAAmE,EACvEA,EAAAA,IAAC,MAAG,SAAA,2FAAA,CAAyF,CAAA,EAC/F,EACAA,EAAAA,IAACc,EAAA,CACC,MAAO,gHACP,SAAQ,GACR,KAAM,CAAA,CAAA,CACR,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ"}