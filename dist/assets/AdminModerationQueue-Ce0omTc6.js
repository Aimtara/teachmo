import{r as a,j as e}from"./index-CXW08ga6.js";import"./entities-CLCXHT4z.js";import{l as b,t as u}from"./messagingModeration-CT9RWVNj.js";function N(){const[n,p]=a.useState([]),[g,c]=a.useState(!0),[x,r]=a.useState(""),[d,y]=a.useState("open"),[i,m]=a.useState({}),l=async()=>{c(!0);try{const t=await b({status:d});p(Array.isArray(t)?t:[]),r("")}catch(t){console.error(t),r((t==null?void 0:t.message)??"Failed to load reports")}finally{c(!1)}};a.useEffect(()=>{l()},[d]);const o=async(t,h)=>{if(t){m(s=>({...s,[t]:!0}));try{await u({reportId:t,...h}),await l()}catch(s){console.error(s),r((s==null?void 0:s.message)??"Unable to triage report")}finally{m(s=>({...s,[t]:!1}))}}};return e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Messaging moderation"}),e.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Message Reports"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Review incoming reports and take action."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("select",{value:d,onChange:t=>y(t.target.value),className:"rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm font-medium text-gray-800 shadow-sm",children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"triaged",children:"Triaged"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"dismissed",children:"Dismissed"})]}),e.jsx("button",{type:"button",onClick:l,className:"rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm font-medium text-gray-800 shadow-sm hover:bg-gray-50",children:"Refresh"})]})]}),x&&e.jsx("div",{className:"rounded-lg border border-red-100 bg-red-50 p-4 text-sm text-red-700",role:"alert",children:x}),g?e.jsx("p",{className:"text-gray-600",children:"Loading reportsâ€¦"}):n.length===0?e.jsxs("div",{className:"rounded-lg border border-gray-100 bg-white p-6 shadow-sm",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"No reports"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No reports match the selected status."})]}):e.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-100 bg-white shadow-sm",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-gray-600",children:"Reason"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-gray-600",children:"Reporter"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-gray-600",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-gray-600",children:"Severity"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-gray-600",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:n.map(t=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-800",children:[e.jsx("div",{className:"font-semibold",children:t.reason||"n/a"}),e.jsx("div",{className:"text-xs text-gray-500",children:t.detail||"No details provided"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-800",children:t.reporter_user_id||"Unknown"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-800",children:t.status}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-800 capitalize",children:t.severity}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-800",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{type:"button",disabled:i[t.id],onClick:()=>o(t.id,{status:"triaged",severity:"medium",action:"none"}),className:"rounded border border-amber-200 bg-amber-50 px-3 py-1 text-xs font-semibold text-amber-800 hover:bg-amber-100 disabled:opacity-60",children:"Triage"}),e.jsx("button",{type:"button",disabled:i[t.id],onClick:()=>o(t.id,{status:"resolved",severity:"low",action:"close_thread"}),className:"rounded border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-semibold text-emerald-800 hover:bg-emerald-100 disabled:opacity-60",children:"Resolve & close"}),e.jsx("button",{type:"button",disabled:i[t.id],onClick:()=>o(t.id,{status:"dismissed",severity:"low",action:"none"}),className:"rounded border border-gray-200 bg-gray-50 px-3 py-1 text-xs font-semibold text-gray-800 hover:bg-gray-100 disabled:opacity-60",children:"Dismiss"})]})})]},t.id))})]})})]})}export{N as default};
//# sourceMappingURL=AdminModerationQueue-Ce0omTc6.js.map
