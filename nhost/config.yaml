version: 3
metadata_directory: metadata
migrations_directory: migrations
seeds_directory: seeds

# Action configuration
actions:
  kind: synchronous
  # For LOCAL development with Hasura Actions that call your backend at localhost:3000,
  # uncomment the line below so Hasura can reach your local server. Otherwise, keep it commented.
  # handler_webhook_baseurl: http://host.docker.internal:3000

# Hasura Configuration
hasura:
  settings:
    # CRITICAL: Set to "false" for production to prevent data leaks and verbose error messages.
    # For local development, you can override this in your local Nhost configuration or set
    # HASURA_GRAPHQL_DEV_MODE=true in your environment to enable GraphQL explorer and detailed errors.
    hasura_graphql_dev_mode: "false"
    hasura_graphql_enable_console: "false"
    # Logging enabled for observability (Safe)
    hasura_graphql_enabled_log_types: "startup, http-log, webhook-log, websocket-log, query-log"
    # Restrict CORS in production (Optional but recommended)
    # hasura_graphql_cors_domain: "https://app.teachmo.io"

# Scheduled Triggers (Cron Jobs)
schedule:
  - name: generate_weekly_briefs
    cron: "0 6 * * 1" # Monday 6AM UTC
    action: /generate-weekly-briefs
